2024-12-02 22:16:02,151 - root - INFO - Инициализация бота...
2024-12-02 22:16:02,177 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 22:16:02,178 - root - INFO - Инициализация диспетчера...
2024-12-02 22:16:02,179 - root - INFO - Регистрация обработчиков...
2024-12-02 22:16:02,182 - root - INFO - Запуск polling...
2024-12-02 22:16:02,184 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 22:16:02,185 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 22:16:02,185 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 22:16:02,187 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 22:16:02,187 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 22:16:02,188 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 22:16:02,433 - aiogram.dispatcher - INFO - Start polling
2024-12-02 22:16:02,508 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 22:16:10,659 - aiogram.event - INFO - Update id=659305523 is handled. Duration 452 ms by bot id=7444575424
2024-12-02 22:16:12,412 - aiogram.event - INFO - Update id=659305524 is handled. Duration 202 ms by bot id=7444575424
2024-12-02 22:16:13,613 - aiogram.event - INFO - Update id=659305525 is not handled. Duration 311 ms by bot id=7444575424
2024-12-02 22:16:13,614 - aiogram.event - ERROR - Cause exception while process update id=659305525 by bot id=7444575424
KeyError: 'Go'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 126, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Go'
2024-12-02 22:16:15,136 - aiogram.event - INFO - Update id=659305526 is not handled. Duration 15 ms by bot id=7444575424
2024-12-02 22:16:15,137 - aiogram.event - ERROR - Cause exception while process update id=659305526 by bot id=7444575424
KeyError: 'Get'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 126, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Get'
2024-12-02 22:16:23,919 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 22:16:24,190 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 22:16:24,196 - root - INFO - Бот остановлен вручную.
2024-12-02 22:19:19,140 - root - INFO - Инициализация бота...
2024-12-02 22:19:19,160 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 22:19:19,160 - root - INFO - Инициализация диспетчера...
2024-12-02 22:19:19,162 - root - INFO - Регистрация обработчиков...
2024-12-02 22:19:19,163 - root - INFO - Запуск polling...
2024-12-02 22:19:19,164 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 22:19:19,166 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 22:19:19,166 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 22:19:19,166 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 22:19:19,167 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 22:19:19,167 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 22:19:19,497 - aiogram.dispatcher - INFO - Start polling
2024-12-02 22:19:19,565 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 22:19:20,042 - aiogram.event - INFO - Update id=659305527 is handled. Duration 313 ms by bot id=7444575424
2024-12-02 22:19:21,895 - aiogram.event - INFO - Update id=659305528 is handled. Duration 172 ms by bot id=7444575424
2024-12-02 22:19:23,215 - aiogram.event - INFO - Update id=659305529 is handled. Duration 155 ms by bot id=7444575424
2024-12-02 22:19:24,547 - aiogram.event - INFO - Update id=659305530 is handled. Duration 203 ms by bot id=7444575424
2024-12-02 22:19:25,681 - aiogram.event - INFO - Update id=659305531 is handled. Duration 156 ms by bot id=7444575424
2024-12-02 22:19:26,940 - aiogram.event - INFO - Update id=659305532 is handled. Duration 172 ms by bot id=7444575424
2024-12-02 22:19:28,024 - aiogram.event - INFO - Update id=659305533 is handled. Duration 172 ms by bot id=7444575424
2024-12-02 22:19:29,205 - aiogram.event - INFO - Update id=659305534 is handled. Duration 172 ms by bot id=7444575424
2024-12-02 22:19:30,377 - aiogram.event - INFO - Update id=659305535 is handled. Duration 202 ms by bot id=7444575424
2024-12-02 22:19:31,534 - aiogram.event - INFO - Update id=659305536 is handled. Duration 172 ms by bot id=7444575424
2024-12-02 22:19:32,715 - aiogram.event - INFO - Update id=659305537 is handled. Duration 171 ms by bot id=7444575424
2024-12-02 22:19:41,467 - aiogram.event - INFO - Update id=659305538 is handled. Duration 171 ms by bot id=7444575424
2024-12-02 22:19:45,363 - aiogram.event - INFO - Update id=659305539 is handled. Duration 702 ms by bot id=7444575424
2024-12-02 22:19:52,425 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 22:19:52,679 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 22:19:52,684 - root - INFO - Бот остановлен вручную.
2024-12-02 22:20:22,564 - root - INFO - Инициализация бота...
2024-12-02 22:20:22,582 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 22:20:22,582 - root - INFO - Инициализация диспетчера...
2024-12-02 22:20:22,584 - root - INFO - Регистрация обработчиков...
2024-12-02 22:20:22,586 - root - INFO - Запуск polling...
2024-12-02 22:20:22,587 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 22:20:22,588 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 22:20:22,588 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 22:20:22,589 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 22:20:22,589 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 22:20:22,590 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 22:20:22,888 - aiogram.dispatcher - INFO - Start polling
2024-12-02 22:20:22,961 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 22:20:23,573 - aiogram.event - INFO - Update id=659305540 is handled. Duration 469 ms by bot id=7444575424
2024-12-02 22:20:25,457 - aiogram.event - INFO - Update id=659305541 is handled. Duration 172 ms by bot id=7444575424
2024-12-02 22:20:26,933 - aiogram.event - INFO - Update id=659305542 is handled. Duration 265 ms by bot id=7444575424
2024-12-02 22:20:28,571 - aiogram.event - INFO - Update id=659305543 is handled. Duration 187 ms by bot id=7444575424
2024-12-02 22:20:32,489 - aiogram.event - INFO - Update id=659305544 is handled. Duration 1375 ms by bot id=7444575424
2024-12-02 22:20:51,788 - aiogram.event - INFO - Update id=659305545 is handled. Duration 217 ms by bot id=7444575424
2024-12-02 22:21:00,867 - root - INFO - {
    "message_id": 1167,
    "date": 1733167261,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 10000,
        "invoice_payload": "23690cba-98ee-4013-b215-58727990896d",
        "telegram_payment_charge_id": "7444575424_528155210_325668",
        "provider_payment_charge_id": "7444575424_528155210_325668",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-02 22:21:02,404 - root - INFO - Key created: OutlineKey(key_id='115', name='VPN Key74', password='7EAqzuCawTiU4ERdgPTU5E', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTo3RUFxenVDYXdUaVU0RVJkZ1BUVTVF@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-02 22:21:02,668 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 22:21:02,678 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-02 22:21:02,679 - sqlalchemy.engine.Engine - INFO - [generated in 0.00172s] ('528155210', 1, 0)
2024-12-02 22:21:02,689 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-02 22:21:02,689 - sqlalchemy.engine.Engine - INFO - [generated in 0.00103s] ('115', '528155210', '2025-03-02 22:21:02.683616', '2024-12-02 22:21:02.683616')
2024-12-02 22:21:02,695 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 22:21:02,708 - aiogram.event - INFO - Update id=659305546 is handled. Duration 1844 ms by bot id=7444575424
2024-12-02 22:21:07,131 - aiogram.event - INFO - Update id=659305547 is handled. Duration 219 ms by bot id=7444575424
2024-12-02 22:21:13,785 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 22:21:14,034 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 22:21:14,041 - root - INFO - Бот остановлен вручную.
2024-12-02 22:26:11,425 - root - INFO - Инициализация бота...
2024-12-02 22:26:11,453 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 22:26:11,453 - root - INFO - Инициализация диспетчера...
2024-12-02 22:26:11,455 - root - INFO - Регистрация обработчиков...
2024-12-02 22:26:11,459 - root - INFO - Запуск polling...
2024-12-02 22:26:11,461 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 22:26:11,461 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 22:26:11,462 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 22:26:11,464 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 22:26:11,464 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 22:26:11,465 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 22:26:11,827 - aiogram.dispatcher - INFO - Start polling
2024-12-02 22:26:11,899 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 22:26:17,213 - aiogram.event - INFO - Update id=659305548 is handled. Duration 671 ms by bot id=7444575424
2024-12-02 22:26:18,441 - aiogram.event - INFO - Update id=659305549 is handled. Duration 219 ms by bot id=7444575424
2024-12-02 22:26:19,487 - aiogram.event - INFO - Update id=659305550 is handled. Duration 170 ms by bot id=7444575424
2024-12-02 22:26:20,789 - aiogram.event - INFO - Update id=659305551 is handled. Duration 172 ms by bot id=7444575424
2024-12-02 22:26:22,289 - aiogram.event - INFO - Update id=659305552 is not handled. Duration 0 ms by bot id=7444575424
2024-12-02 22:26:22,290 - aiogram.event - ERROR - Cause exception while process update id=659305552 by bot id=7444575424
KeyError: 'Trial'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 126, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Trial'
2024-12-02 22:26:31,671 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 22:26:31,927 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 22:26:31,934 - root - INFO - Бот остановлен вручную.
2024-12-02 22:27:39,609 - root - INFO - Инициализация бота...
2024-12-02 22:27:39,665 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 22:27:39,666 - root - INFO - Инициализация диспетчера...
2024-12-02 22:27:39,668 - root - INFO - Регистрация обработчиков...
2024-12-02 22:27:39,673 - root - INFO - Запуск polling...
2024-12-02 22:27:39,677 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 22:27:39,678 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 22:27:39,679 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 22:27:39,698 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 22:27:39,699 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 22:27:39,701 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 22:27:40,016 - aiogram.dispatcher - INFO - Start polling
2024-12-02 22:27:40,085 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 22:27:40,673 - aiogram.event - INFO - Update id=659305553 is handled. Duration 438 ms by bot id=7444575424
2024-12-02 22:27:42,114 - aiogram.event - INFO - Update id=659305554 is handled. Duration 155 ms by bot id=7444575424
2024-12-02 22:27:43,008 - aiogram.event - INFO - Update id=659305555 is not handled. Duration 0 ms by bot id=7444575424
2024-12-02 22:27:43,008 - aiogram.event - ERROR - Cause exception while process update id=659305555 by bot id=7444575424
KeyError: 'Trial'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 126, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Trial'
2024-12-02 22:27:46,277 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 22:27:46,543 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 22:27:46,549 - root - INFO - Бот остановлен вручную.
2024-12-02 22:28:50,454 - root - INFO - Инициализация бота...
2024-12-02 22:28:50,507 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 22:28:50,508 - root - INFO - Инициализация диспетчера...
2024-12-02 22:28:50,512 - root - INFO - Регистрация обработчиков...
2024-12-02 22:28:50,517 - root - INFO - Запуск polling...
2024-12-02 22:28:50,521 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 22:28:50,522 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 22:28:50,524 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 22:28:50,529 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 22:28:50,530 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 22:28:50,531 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 22:28:50,810 - aiogram.dispatcher - INFO - Start polling
2024-12-02 22:28:50,891 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 22:28:51,538 - aiogram.event - INFO - Update id=659305556 is handled. Duration 467 ms by bot id=7444575424
2024-12-02 22:28:55,597 - aiogram.event - INFO - Update id=659305557 is handled. Duration 171 ms by bot id=7444575424
2024-12-02 22:28:57,316 - aiogram.event - INFO - Update id=659305558 is handled. Duration 157 ms by bot id=7444575424
2024-12-02 22:28:58,866 - aiogram.event - INFO - Update id=659305559 is handled. Duration 155 ms by bot id=7444575424
2024-12-02 22:28:59,661 - aiogram.event - INFO - Update id=659305560 is not handled. Duration 0 ms by bot id=7444575424
2024-12-02 22:28:59,662 - aiogram.event - ERROR - Cause exception while process update id=659305560 by bot id=7444575424
ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 360, in handle_trial_key_choice
    reply_markup=back_button(),
                 ^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 86, in back_button
    keyboard = InlineKeyboardMarkup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
2024-12-02 22:29:33,454 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 22:30:10,656 - root - INFO - Инициализация бота...
2024-12-02 22:30:10,692 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 22:30:10,692 - root - INFO - Инициализация диспетчера...
2024-12-02 22:30:10,694 - root - INFO - Регистрация обработчиков...
2024-12-02 22:30:10,698 - root - INFO - Запуск polling...
2024-12-02 22:30:10,701 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 22:30:10,701 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 22:30:10,702 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 22:30:10,704 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 22:30:10,704 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 22:30:10,705 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 22:30:11,013 - aiogram.dispatcher - INFO - Start polling
2024-12-02 22:30:11,086 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 22:30:14,860 - aiogram.event - INFO - Update id=659305561 is handled. Duration 545 ms by bot id=7444575424
2024-12-02 22:30:16,181 - aiogram.event - INFO - Update id=659305562 is handled. Duration 375 ms by bot id=7444575424
2024-12-02 22:30:17,078 - aiogram.event - INFO - Update id=659305563 is handled. Duration 109 ms by bot id=7444575424
2024-12-02 22:30:19,776 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 22:48:12,215 - root - INFO - Инициализация бота...
2024-12-02 22:48:12,237 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 22:48:12,238 - root - INFO - Инициализация диспетчера...
2024-12-02 22:48:12,238 - root - INFO - Регистрация обработчиков...
2024-12-02 22:48:12,241 - root - INFO - Запуск polling...
2024-12-02 22:48:12,243 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 22:48:12,243 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 22:48:12,243 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 22:48:12,245 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 22:48:12,245 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 22:48:12,246 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 22:48:12,590 - aiogram.dispatcher - INFO - Start polling
2024-12-02 22:48:12,666 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 22:48:21,382 - aiogram.event - INFO - Update id=659305564 is handled. Duration 531 ms by bot id=7444575424
2024-12-02 22:48:23,553 - aiogram.event - INFO - Update id=659305565 is handled. Duration 313 ms by bot id=7444575424
2024-12-02 22:48:24,592 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 22:48:24,601 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-02 22:48:24,602 - sqlalchemy.engine.Engine - INFO - [generated in 0.00151s] ('528155210', 1, 0)
2024-12-02 22:48:24,612 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-02 22:48:24,613 - sqlalchemy.engine.Engine - INFO - [generated in 0.00115s] (1, '528155210')
2024-12-02 22:48:24,621 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 22:48:26,089 - root - INFO - Key created: OutlineKey(key_id='116', name='VPN Key75', password='EuH0ZLwbmb0Bmu0A0aMDCN', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpFdUgwWkx3Ym1iMEJtdTBBMGFNRENO@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 7444575424
2024-12-02 22:48:26,215 - aiogram.event - INFO - Update id=659305566 is handled. Duration 1655 ms by bot id=7444575424
2024-12-02 22:48:38,531 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 22:48:38,778 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 22:48:38,784 - root - INFO - Бот остановлен вручную.
2024-12-02 22:50:16,231 - root - INFO - Инициализация бота...
2024-12-02 22:50:16,249 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 22:50:16,249 - root - INFO - Инициализация диспетчера...
2024-12-02 22:50:16,250 - root - INFO - Регистрация обработчиков...
2024-12-02 22:50:16,252 - root - INFO - Запуск polling...
2024-12-02 22:50:16,253 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 22:50:16,254 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 22:50:16,254 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 22:50:16,255 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 22:50:16,255 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 22:50:16,256 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 22:50:16,507 - aiogram.dispatcher - INFO - Start polling
2024-12-02 22:50:16,573 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 22:50:39,231 - aiogram.event - INFO - Update id=659305567 is handled. Duration 420 ms by bot id=7444575424
2024-12-02 22:50:40,600 - aiogram.event - INFO - Update id=659305568 is handled. Duration 171 ms by bot id=7444575424
2024-12-02 22:50:41,749 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 22:50:41,758 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-02 22:50:41,759 - sqlalchemy.engine.Engine - INFO - [generated in 0.00116s] ('528155210', 1, 0)
2024-12-02 22:50:42,408 - aiogram.event - INFO - Update id=659305569 is handled. Duration 702 ms by bot id=7444575424
2024-12-02 22:53:04,926 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 22:53:05,184 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 22:53:05,189 - root - INFO - Бот остановлен вручную.
2024-12-02 23:12:47,092 - root - INFO - Инициализация бота...
2024-12-02 23:12:47,124 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 23:12:47,125 - root - INFO - Инициализация диспетчера...
2024-12-02 23:12:47,127 - root - INFO - Регистрация обработчиков...
2024-12-02 23:12:47,132 - root - INFO - Запуск polling...
2024-12-02 23:12:47,134 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:12:47,135 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 23:12:47,135 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:12:47,137 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-02 23:12:47,138 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:12:47,139 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 23:12:47,139 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:12:47,140 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-02 23:12:47,140 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:12:47,141 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-02 23:12:47,142 - sqlalchemy.engine.Engine - INFO - [no key 0.00058s] ()
2024-12-02 23:12:47,157 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-02 23:12:47,157 - sqlalchemy.engine.Engine - INFO - [no key 0.00049s] ()
2024-12-02 23:12:47,168 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:12:47,559 - aiogram.dispatcher - INFO - Start polling
2024-12-02 23:12:47,640 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:12:57,109 - aiogram.event - INFO - Update id=659305570 is handled. Duration 625 ms by bot id=7444575424
2024-12-02 23:12:58,733 - aiogram.event - INFO - Update id=659305571 is handled. Duration 186 ms by bot id=7444575424
2024-12-02 23:12:59,663 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:12:59,670 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-02 23:12:59,670 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] ('528155210', 1, 0)
2024-12-02 23:12:59,676 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-02 23:12:59,676 - sqlalchemy.engine.Engine - INFO - [generated in 0.00082s] ('528155210', 'active', 0)
2024-12-02 23:12:59,681 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:12:59,690 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:12:59,692 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-02 23:12:59,693 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ('528155210',)
2024-12-02 23:12:59,697 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-02 23:12:59,697 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] (1, '528155210')
2024-12-02 23:12:59,699 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:13:00,960 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:13:00,964 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-02 23:13:00,965 - sqlalchemy.engine.Engine - INFO - [generated in 0.00113s] ('68', '528155210', '2024-12-17 23:13:00.959207', '2024-12-02 23:13:00.959207')
2024-12-02 23:13:00,969 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:13:00,977 - root - INFO - Key created: OutlineKey(key_id='68', name='VPN Key55', password='IQLYfLoB5YD4RCp56ZI7R2', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpJUUxZZkxvQjVZRDRSQ3A1NlpJN1Iy@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 7444575424
2024-12-02 23:13:01,145 - aiogram.event - INFO - Update id=659305572 is handled. Duration 1500 ms by bot id=7444575424
2024-12-02 23:25:55,312 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 23:25:55,572 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:25:55,576 - root - INFO - Бот остановлен вручную.
2024-12-02 23:26:05,428 - root - INFO - Инициализация бота...
2024-12-02 23:26:05,473 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 23:26:05,474 - root - INFO - Инициализация диспетчера...
2024-12-02 23:26:05,476 - root - INFO - Регистрация обработчиков...
2024-12-02 23:26:05,481 - root - INFO - Запуск polling...
2024-12-02 23:26:05,484 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:26:05,485 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 23:26:05,485 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:26:05,488 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 23:26:05,489 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:26:05,490 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:26:05,801 - aiogram.dispatcher - INFO - Start polling
2024-12-02 23:26:05,887 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:27:35,327 - aiogram.event - INFO - Update id=659305573 is handled. Duration 484 ms by bot id=7444575424
2024-12-02 23:27:36,952 - aiogram.event - INFO - Update id=659305574 is handled. Duration 344 ms by bot id=7444575424
2024-12-02 23:27:38,916 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:27:38,924 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-02 23:27:38,925 - sqlalchemy.engine.Engine - INFO - [generated in 0.00106s] ('528155210', 1, 0)
2024-12-02 23:27:39,013 - aiogram.event - INFO - Update id=659305575 is handled. Duration 125 ms by bot id=7444575424
2024-12-02 23:27:48,709 - aiogram.event - INFO - Update id=659305576 is handled. Duration 375 ms by bot id=7444575424
2024-12-02 23:27:56,291 - aiogram.event - INFO - Update id=659305577 is handled. Duration 156 ms by bot id=7444575424
2024-12-02 23:27:58,394 - aiogram.event - INFO - Update id=659305578 is handled. Duration 312 ms by bot id=7444575424
2024-12-02 23:28:18,652 - aiogram.event - INFO - Update id=659305579 is handled. Duration 233 ms by bot id=7444575424
2024-12-02 23:28:27,684 - root - INFO - {
    "message_id": 1206,
    "date": 1733171308,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 10000,
        "invoice_payload": "93bfceb8-15c1-4d5c-941c-e12c0ff0b4b2",
        "telegram_payment_charge_id": "7444575424_528155210_325835",
        "provider_payment_charge_id": "7444575424_528155210_325835",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-02 23:28:28,994 - root - INFO - Key created: OutlineKey(key_id='69', name='VPN Key56', password='y8wlz3YpryM7bV0TxN9dfq', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTp5OHdsejNZcHJ5TTdiVjBUeE45ZGZx@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-02 23:28:29,410 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:28:29,413 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-02 23:28:29,414 - sqlalchemy.engine.Engine - INFO - [cached since 50.49s ago] ('528155210', 1, 0)
2024-12-02 23:28:29,425 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-02 23:28:29,426 - sqlalchemy.engine.Engine - INFO - [generated in 0.00111s] ('69', '528155210', '2025-03-02 23:28:29.418098', '2024-12-02 23:28:29.418098')
2024-12-02 23:28:29,433 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:28:29,443 - aiogram.event - INFO - Update id=659305580 is handled. Duration 1765 ms by bot id=7444575424
2024-12-02 23:28:47,793 - aiogram.event - INFO - Update id=659305581 is handled. Duration 500 ms by bot id=7444575424
2024-12-02 23:29:41,138 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 23:29:41,396 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:29:41,402 - root - INFO - Бот остановлен вручную.
2024-12-02 23:31:51,828 - root - INFO - Инициализация бота...
2024-12-02 23:31:51,861 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 23:31:51,861 - root - INFO - Инициализация диспетчера...
2024-12-02 23:31:51,863 - root - INFO - Регистрация обработчиков...
2024-12-02 23:31:51,867 - root - INFO - Запуск polling...
2024-12-02 23:31:51,869 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:31:51,870 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 23:31:51,870 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:31:51,872 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-02 23:31:51,872 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:31:51,873 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 23:31:51,874 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:31:51,875 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-02 23:31:51,875 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:31:51,877 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-02 23:31:51,877 - sqlalchemy.engine.Engine - INFO - [no key 0.00055s] ()
2024-12-02 23:31:51,896 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-02 23:31:51,897 - sqlalchemy.engine.Engine - INFO - [no key 0.00078s] ()
2024-12-02 23:31:51,907 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:31:52,246 - aiogram.dispatcher - INFO - Start polling
2024-12-02 23:31:52,318 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:32:14,427 - aiogram.event - INFO - Update id=659305582 is handled. Duration 625 ms by bot id=7444575424
2024-12-02 23:32:16,216 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:32:16,222 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-02 23:32:16,222 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ('528155210', 1, 0)
2024-12-02 23:32:16,327 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-02 23:32:16,482 - aiogram.event - INFO - Update id=659305583 is handled. Duration 280 ms by bot id=7444575424
2024-12-02 23:32:20,438 - aiogram.event - INFO - Update id=659305584 is not handled. Duration 0 ms by bot id=7444575424
2024-12-02 23:32:23,299 - aiogram.event - INFO - Update id=659305585 is not handled. Duration 0 ms by bot id=7444575424
2024-12-02 23:32:26,836 - aiogram.event - INFO - Update id=659305586 is not handled. Duration 0 ms by bot id=7444575424
2024-12-02 23:32:28,372 - aiogram.event - INFO - Update id=659305587 is not handled. Duration 0 ms by bot id=7444575424
2024-12-02 23:32:34,720 - aiogram.event - INFO - Update id=659305588 is not handled. Duration 0 ms by bot id=7444575424
2024-12-02 23:32:41,481 - aiogram.event - INFO - Update id=659305589 is not handled. Duration 0 ms by bot id=7444575424
2024-12-02 23:32:49,414 - aiogram.event - INFO - Update id=659305590 is not handled. Duration 0 ms by bot id=7444575424
2024-12-02 23:32:52,601 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 23:32:52,858 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:32:52,864 - root - INFO - Бот остановлен вручную.
2024-12-02 23:33:06,126 - root - INFO - Инициализация бота...
2024-12-02 23:33:06,178 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 23:33:06,179 - root - INFO - Инициализация диспетчера...
2024-12-02 23:33:06,183 - root - INFO - Регистрация обработчиков...
2024-12-02 23:33:06,187 - root - INFO - Запуск polling...
2024-12-02 23:33:06,192 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:33:06,194 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 23:33:06,194 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:33:06,197 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 23:33:06,198 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:33:06,199 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:33:06,556 - aiogram.dispatcher - INFO - Start polling
2024-12-02 23:33:06,629 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:34:18,948 - aiogram.event - INFO - Update id=659305591 is handled. Duration 577 ms by bot id=7444575424
2024-12-02 23:34:22,203 - aiogram.event - INFO - Update id=659305592 is handled. Duration 234 ms by bot id=7444575424
2024-12-02 23:34:23,179 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:34:23,184 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-02 23:34:23,185 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ('528155210', 1, 0)
2024-12-02 23:34:23,189 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-02 23:34:23,189 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('528155210', 'active', 0)
2024-12-02 23:34:23,199 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:34:23,207 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:34:23,209 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-02 23:34:23,209 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ('528155210',)
2024-12-02 23:34:23,212 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-02 23:34:23,213 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] (1, '528155210')
2024-12-02 23:34:23,215 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:34:24,970 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:34:24,974 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-02 23:34:24,974 - sqlalchemy.engine.Engine - INFO - [generated in 0.00111s] ('70', '528155210', '2024-12-17 23:34:24.970042', '2024-12-02 23:34:24.970042')
2024-12-02 23:34:24,980 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:34:24,987 - root - INFO - Key created: OutlineKey(key_id='70', name='VPN Key57', password='lTJGXFpIwPesOtkr7XiBMt', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpsVEpHWEZwSXdQZXNPdGtyN1hpQk10@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 7444575424
2024-12-02 23:34:25,105 - aiogram.event - INFO - Update id=659305593 is handled. Duration 1936 ms by bot id=7444575424
2024-12-02 23:37:41,539 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 23:37:41,800 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:37:41,816 - root - INFO - Бот остановлен вручную.
2024-12-02 23:37:51,124 - root - INFO - Инициализация бота...
2024-12-02 23:37:51,144 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 23:37:51,145 - root - INFO - Инициализация диспетчера...
2024-12-02 23:37:51,146 - root - INFO - Регистрация обработчиков...
2024-12-02 23:37:51,148 - root - INFO - Запуск polling...
2024-12-02 23:37:51,150 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:37:51,150 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 23:37:51,150 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:37:51,152 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 23:37:51,152 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:37:51,153 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:37:51,546 - aiogram.dispatcher - INFO - Start polling
2024-12-02 23:37:51,628 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:38:24,321 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 23:38:24,585 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:38:24,591 - root - INFO - Бот остановлен вручную.
2024-12-02 23:38:37,350 - root - INFO - Инициализация бота...
2024-12-02 23:38:37,385 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 23:38:37,385 - root - INFO - Инициализация диспетчера...
2024-12-02 23:38:37,387 - root - INFO - Регистрация обработчиков...
2024-12-02 23:38:37,389 - root - INFO - Запуск polling...
2024-12-02 23:38:37,393 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:38:37,394 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 23:38:37,394 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:38:37,396 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-02 23:38:37,396 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:38:37,396 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 23:38:37,396 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:38:37,398 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-02 23:38:37,398 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:38:37,400 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-02 23:38:37,400 - sqlalchemy.engine.Engine - INFO - [no key 0.00037s] ()
2024-12-02 23:38:37,415 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-02 23:38:37,416 - sqlalchemy.engine.Engine - INFO - [no key 0.00062s] ()
2024-12-02 23:38:37,425 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:38:37,787 - aiogram.dispatcher - INFO - Start polling
2024-12-02 23:38:37,878 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:38:47,107 - aiogram.event - INFO - Update id=659305594 is handled. Duration 655 ms by bot id=7444575424
2024-12-02 23:38:48,908 - aiogram.event - INFO - Update id=659305595 is handled. Duration 250 ms by bot id=7444575424
2024-12-02 23:38:50,306 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:38:50,316 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-02 23:38:50,317 - sqlalchemy.engine.Engine - INFO - [generated in 0.00123s] ('528155210', 1, 0)
2024-12-02 23:38:50,325 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-02 23:38:50,326 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] ('528155210', 'active', 0)
2024-12-02 23:38:50,334 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:38:50,346 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:38:50,351 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-02 23:38:50,352 - sqlalchemy.engine.Engine - INFO - [generated in 0.00114s] ('528155210',)
2024-12-02 23:38:50,359 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-02 23:38:50,359 - sqlalchemy.engine.Engine - INFO - [generated in 0.00103s] (1, '528155210')
2024-12-02 23:38:50,365 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:38:51,910 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:38:51,914 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-02 23:38:51,914 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('71', '528155210', '2024-12-17 23:38:51.909341', '2024-12-02 23:38:51.909341')
2024-12-02 23:38:51,917 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:38:51,925 - root - INFO - Key created: OutlineKey(key_id='71', name='VPN Key58', password='BCI1DKAo6p30wdU08860MU', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpCQ0kxREtBbzZwMzB3ZFUwODg2ME1V@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 7444575424
2024-12-02 23:38:52,049 - aiogram.event - INFO - Update id=659305596 is handled. Duration 1766 ms by bot id=7444575424
2024-12-02 23:38:57,694 - aiogram.event - INFO - Update id=659305597 is not handled. Duration 0 ms by bot id=7444575424
2024-12-02 23:38:57,694 - aiogram.event - ERROR - Cause exception while process update id=659305597 by bot id=7444575424
KeyError: 'Installation'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 126, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Installation'
2024-12-02 23:39:03,397 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 23:39:03,672 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:39:03,676 - root - INFO - Бот остановлен вручную.
2024-12-02 23:41:18,697 - root - INFO - Инициализация бота...
2024-12-02 23:41:18,760 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 23:41:18,760 - root - INFO - Инициализация диспетчера...
2024-12-02 23:41:18,763 - root - INFO - Регистрация обработчиков...
2024-12-02 23:41:18,768 - root - INFO - Запуск polling...
2024-12-02 23:41:18,772 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:41:18,774 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 23:41:18,774 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:41:18,778 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 23:41:18,778 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:41:18,780 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:41:19,167 - aiogram.dispatcher - INFO - Start polling
2024-12-02 23:41:19,239 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:41:20,268 - aiogram.event - INFO - Update id=659305598 is handled. Duration 812 ms by bot id=7444575424
2024-12-02 23:41:22,151 - aiogram.event - INFO - Update id=659305599 is handled. Duration 233 ms by bot id=7444575424
2024-12-02 23:41:23,996 - aiogram.event - INFO - Update id=659305600 is handled. Duration 391 ms by bot id=7444575424
2024-12-02 23:41:39,858 - aiogram.event - INFO - Update id=659305601 is handled. Duration 295 ms by bot id=7444575424
2024-12-02 23:41:47,983 - root - INFO - {
    "message_id": 1228,
    "date": 1733172108,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 50000,
        "invoice_payload": "7a66fb8e-0c2a-4210-9f7a-a0fc8cc98086",
        "telegram_payment_charge_id": "7444575424_528155210_325875",
        "provider_payment_charge_id": "7444575424_528155210_325875",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-02 23:41:49,298 - root - INFO - Key created: OutlineKey(key_id='72', name='VPN Key59', password='NttdsxA4wQGQoo1CJncr2C', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpOdHRkc3hBNHdRR1FvbzFDSm5jcjJD@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-02 23:41:49,743 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:41:49,757 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-02 23:41:49,758 - sqlalchemy.engine.Engine - INFO - [generated in 0.00196s] ('528155210', 1, 0)
2024-12-02 23:41:49,769 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-02 23:41:49,770 - sqlalchemy.engine.Engine - INFO - [generated in 0.00119s] ('72', '528155210', '2025-05-31 23:41:49.763893', '2024-12-02 23:41:49.763893')
2024-12-02 23:41:49,777 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:41:49,787 - aiogram.event - INFO - Update id=659305602 is handled. Duration 1797 ms by bot id=7444575424
2024-12-02 23:41:53,043 - aiogram.event - INFO - Update id=659305603 is handled. Duration 250 ms by bot id=7444575424
2024-12-02 23:41:58,852 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 23:41:59,115 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:41:59,121 - root - INFO - Бот остановлен вручную.
2024-12-02 23:47:33,318 - root - INFO - Инициализация бота...
2024-12-02 23:47:33,351 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 23:47:33,352 - root - INFO - Инициализация диспетчера...
2024-12-02 23:47:33,354 - root - INFO - Регистрация обработчиков...
2024-12-02 23:47:33,358 - root - INFO - Запуск polling...
2024-12-02 23:47:33,361 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:47:33,361 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 23:47:33,362 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:47:33,364 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 23:47:33,364 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:47:33,365 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:47:33,689 - aiogram.dispatcher - INFO - Start polling
2024-12-02 23:47:33,759 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:47:34,581 - aiogram.event - INFO - Update id=659305604 is handled. Duration 640 ms by bot id=7444575424
2024-12-02 23:47:37,146 - aiogram.event - INFO - Update id=659305605 is handled. Duration 327 ms by bot id=7444575424
2024-12-02 23:47:38,857 - aiogram.event - INFO - Update id=659305606 is handled. Duration 250 ms by bot id=7444575424
2024-12-02 23:47:40,507 - aiogram.event - INFO - Update id=659305607 is handled. Duration 375 ms by bot id=7444575424
2024-12-02 23:47:41,458 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:47:41,464 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-02 23:47:41,464 - sqlalchemy.engine.Engine - INFO - [generated in 0.00081s] ('528155210', 1, 0)
2024-12-02 23:47:41,624 - aiogram.event - INFO - Update id=659305608 is handled. Duration 187 ms by bot id=7444575424
2024-12-02 23:47:44,111 - aiogram.event - INFO - Update id=659305609 is handled. Duration 280 ms by bot id=7444575424
2024-12-02 23:47:50,329 - aiogram.event - INFO - Update id=659305610 is handled. Duration 187 ms by bot id=7444575424
2024-12-02 23:47:52,473 - aiogram.event - INFO - Update id=659305611 is handled. Duration 312 ms by bot id=7444575424
2024-12-02 23:48:09,477 - aiogram.event - INFO - Update id=659305612 is handled. Duration 265 ms by bot id=7444575424
2024-12-02 23:48:18,541 - root - INFO - {
    "message_id": 1240,
    "date": 1733172499,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 50000,
        "invoice_payload": "4b85fd4c-b007-4f07-9504-d114d9f2d75d",
        "telegram_payment_charge_id": "7444575424_528155210_325887",
        "provider_payment_charge_id": "7444575424_528155210_325887",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-02 23:48:19,988 - root - INFO - Key created: OutlineKey(key_id='73', name='VPN Key60', password='dLIRUpXcpBVzPaZhc9tL9F', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpkTElSVXBYY3BCVnpQYVpoYzl0TDlG@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-02 23:48:20,477 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:48:20,478 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-02 23:48:20,479 - sqlalchemy.engine.Engine - INFO - [cached since 39.01s ago] ('528155210', 1, 0)
2024-12-02 23:48:20,489 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-02 23:48:20,490 - sqlalchemy.engine.Engine - INFO - [generated in 0.00129s] ('73', '528155210', '2025-05-31 23:48:20.482362', '2024-12-02 23:48:20.482362')
2024-12-02 23:48:20,494 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:48:20,503 - aiogram.event - INFO - Update id=659305613 is handled. Duration 1969 ms by bot id=7444575424
2024-12-02 23:48:22,555 - aiogram.event - INFO - Update id=659305614 is not handled. Duration 141 ms by bot id=7444575424
2024-12-02 23:48:22,555 - aiogram.event - ERROR - Cause exception while process update id=659305614 by bot id=7444575424
TypeError: Message.answer() missing 1 required positional argument: 'text'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 271, in send_installation_instructions
    await callback.message.answer(
          ^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() missing 1 required positional argument: 'text'
2024-12-02 23:50:03,202 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 23:50:03,466 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:50:03,470 - root - INFO - Бот остановлен вручную.
2024-12-02 23:50:03,984 - asyncio - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x0000020060E99250>
2024-12-02 23:50:18,112 - root - INFO - Инициализация бота...
2024-12-02 23:50:18,171 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 23:50:18,172 - root - INFO - Инициализация диспетчера...
2024-12-02 23:50:18,176 - root - INFO - Регистрация обработчиков...
2024-12-02 23:50:18,181 - root - INFO - Запуск polling...
2024-12-02 23:50:18,186 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:50:18,186 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 23:50:18,187 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:50:18,190 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 23:50:18,191 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:50:18,193 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:50:18,485 - aiogram.dispatcher - INFO - Start polling
2024-12-02 23:50:18,562 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:50:19,439 - aiogram.event - INFO - Update id=659305615 is handled. Duration 657 ms by bot id=7444575424
2024-12-02 23:50:25,203 - aiogram.event - INFO - Update id=659305616 is handled. Duration 280 ms by bot id=7444575424
2024-12-02 23:50:27,007 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:50:27,018 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-02 23:50:27,018 - sqlalchemy.engine.Engine - INFO - [generated in 0.00153s] ('528155210', 1, 0)
2024-12-02 23:50:27,178 - aiogram.event - INFO - Update id=659305617 is handled. Duration 203 ms by bot id=7444575424
2024-12-02 23:50:28,752 - aiogram.event - INFO - Update id=659305618 is handled. Duration 312 ms by bot id=7444575424
2024-12-02 23:51:11,378 - aiogram.event - INFO - Update id=659305619 is handled. Duration 375 ms by bot id=7444575424
2024-12-02 23:51:14,505 - aiogram.event - INFO - Update id=659305620 is handled. Duration 375 ms by bot id=7444575424
2024-12-02 23:51:33,528 - aiogram.event - INFO - Update id=659305621 is handled. Duration 342 ms by bot id=7444575424
2024-12-02 23:51:41,876 - root - INFO - {
    "message_id": 1250,
    "date": 1733172702,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 5000,
        "invoice_payload": "77493c50-e0b4-4d7d-8d0e-d9c9467b9ac9",
        "telegram_payment_charge_id": "7444575424_528155210_325897",
        "provider_payment_charge_id": "7444575424_528155210_325897",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-02 23:51:43,392 - root - INFO - Key created: OutlineKey(key_id='74', name='VPN Key61', password='9p2dBq1GP9JeRBnORDCZYw', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTo5cDJkQnExR1A5SmVSQm5PUkRDWll3@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-02 23:51:43,661 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:51:43,664 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-02 23:51:43,665 - sqlalchemy.engine.Engine - INFO - [cached since 76.65s ago] ('528155210', 1, 0)
2024-12-02 23:51:43,678 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-02 23:51:43,679 - sqlalchemy.engine.Engine - INFO - [generated in 0.00171s] ('74', '528155210', '2025-01-01 23:51:43.669566', '2024-12-02 23:51:43.669566')
2024-12-02 23:51:43,684 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:51:43,695 - aiogram.event - INFO - Update id=659305622 is handled. Duration 1812 ms by bot id=7444575424
2024-12-02 23:51:46,555 - aiogram.event - INFO - Update id=659305623 is not handled. Duration 63 ms by bot id=7444575424
2024-12-02 23:51:46,556 - aiogram.event - ERROR - Cause exception while process update id=659305623 by bot id=7444575424
TelegramBadRequest: Telegram server says - Bad Request: can't parse inline keyboard button: Text buttons are unallowed in the inline keyboard
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 268, in send_installation_instructions
    await callback.message.answer(
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\client\bot.py", line 485, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: can't parse inline keyboard button: Text buttons are unallowed in the inline keyboard
2024-12-02 23:51:54,158 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 23:51:54,399 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:51:54,410 - root - INFO - Бот остановлен вручную.
2024-12-02 23:53:54,136 - root - INFO - Инициализация бота...
2024-12-02 23:53:54,168 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 23:53:54,169 - root - INFO - Инициализация диспетчера...
2024-12-02 23:53:54,170 - root - INFO - Регистрация обработчиков...
2024-12-02 23:53:54,175 - root - INFO - Запуск polling...
2024-12-02 23:53:54,177 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:53:54,178 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 23:53:54,178 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:53:54,180 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 23:53:54,180 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:53:54,182 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:53:54,484 - aiogram.dispatcher - INFO - Start polling
2024-12-02 23:53:54,550 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:54:12,072 - aiogram.event - INFO - Update id=659305624 is handled. Duration 422 ms by bot id=7444575424
2024-12-02 23:54:13,431 - aiogram.event - INFO - Update id=659305625 is handled. Duration 204 ms by bot id=7444575424
2024-12-02 23:54:17,400 - aiogram.event - INFO - Update id=659305626 is handled. Duration 547 ms by bot id=7444575424
2024-12-02 23:54:33,190 - aiogram.event - INFO - Update id=659305627 is handled. Duration 234 ms by bot id=7444575424
2024-12-02 23:54:42,330 - root - INFO - {
    "message_id": 1256,
    "date": 1733172883,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 10000,
        "invoice_payload": "6ffa8b54-23ea-4b2f-bab8-73e7cab8cbc9",
        "telegram_payment_charge_id": "7444575424_528155210_325903",
        "provider_payment_charge_id": "7444575424_528155210_325903",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-02 23:54:43,659 - root - INFO - Key created: OutlineKey(key_id='75', name='VPN Key62', password='jpcYMCFGzj8Pld6EhFJVvy', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpqcGNZTUNGR3pqOFBsZDZFaEZKVnZ5@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-02 23:54:43,921 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:54:43,930 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-02 23:54:43,931 - sqlalchemy.engine.Engine - INFO - [generated in 0.00095s] ('528155210', 1, 0)
2024-12-02 23:54:43,939 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-02 23:54:43,939 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] ('75', '528155210', '2025-03-02 23:54:43.933749', '2024-12-02 23:54:43.933749')
2024-12-02 23:54:43,946 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:54:43,955 - aiogram.event - INFO - Update id=659305628 is handled. Duration 1625 ms by bot id=7444575424
2024-12-02 23:54:45,834 - aiogram.event - INFO - Update id=659305629 is handled. Duration 234 ms by bot id=7444575424
2024-12-02 23:54:47,322 - aiogram.event - INFO - Update id=659305630 is not handled. Duration 15 ms by bot id=7444575424
2024-12-02 23:54:53,915 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 23:54:54,181 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:54:54,186 - root - INFO - Бот остановлен вручную.
2024-12-02 23:57:58,089 - root - INFO - Инициализация бота...
2024-12-02 23:57:58,132 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-02 23:57:58,133 - root - INFO - Инициализация диспетчера...
2024-12-02 23:57:58,134 - root - INFO - Регистрация обработчиков...
2024-12-02 23:57:58,138 - root - INFO - Запуск polling...
2024-12-02 23:57:58,140 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:57:58,141 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-02 23:57:58,141 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:57:58,143 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-02 23:57:58,143 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-02 23:57:58,144 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:57:58,465 - aiogram.dispatcher - INFO - Start polling
2024-12-02 23:57:58,534 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:57:59,208 - aiogram.event - INFO - Update id=659305631 is handled. Duration 547 ms by bot id=7444575424
2024-12-02 23:58:00,788 - aiogram.event - INFO - Update id=659305632 is handled. Duration 172 ms by bot id=7444575424
2024-12-02 23:58:02,498 - aiogram.event - INFO - Update id=659305633 is handled. Duration 391 ms by bot id=7444575424
2024-12-02 23:58:23,459 - aiogram.event - INFO - Update id=659305634 is handled. Duration 219 ms by bot id=7444575424
2024-12-02 23:59:03,499 - aiogram.event - INFO - Update id=659305635 is handled. Duration 219 ms by bot id=7444575424
2024-12-02 23:59:12,677 - root - INFO - {
    "message_id": 1263,
    "date": 1733173153,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 10000,
        "invoice_payload": "ab4821ec-cb63-4fd6-93bf-3669eab5c1dd",
        "telegram_payment_charge_id": "7444575424_528155210_325910",
        "provider_payment_charge_id": "7444575424_528155210_325910",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-02 23:59:13,987 - root - INFO - Key created: OutlineKey(key_id='76', name='VPN Key63', password='gtpsc5VctW7R3SXdloafgs', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpndHBzYzVWY3RXN1IzU1hkbG9hZmdz@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-02 23:59:14,290 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-02 23:59:14,298 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-02 23:59:14,299 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] ('528155210', 1, 0)
2024-12-02 23:59:14,307 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-02 23:59:14,307 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] ('76', '528155210', '2025-03-02 23:59:14.302396', '2024-12-02 23:59:14.302396')
2024-12-02 23:59:14,314 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-02 23:59:14,323 - aiogram.event - INFO - Update id=659305636 is handled. Duration 1655 ms by bot id=7444575424
2024-12-02 23:59:16,320 - aiogram.event - INFO - Update id=659305637 is handled. Duration 219 ms by bot id=7444575424
2024-12-02 23:59:17,207 - aiogram.event - INFO - Update id=659305638 is not handled. Duration 62 ms by bot id=7444575424
2024-12-02 23:59:17,207 - aiogram.event - ERROR - Cause exception while process update id=659305638 by bot id=7444575424
AttributeError: 'bool' object has no attribute 'message_id'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 76, in process_start_command
    await send_message_and_save(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 69, in send_message_and_save
    await state.update_data(previous_message_id=sent_message.message_id)
                                                ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'bool' object has no attribute 'message_id'
2024-12-02 23:59:19,619 - aiogram.event - INFO - Update id=659305639 is not handled. Duration 77 ms by bot id=7444575424
2024-12-02 23:59:19,620 - aiogram.event - ERROR - Cause exception while process update id=659305639 by bot id=7444575424
AttributeError: 'bool' object has no attribute 'message_id'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 76, in process_start_command
    await send_message_and_save(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 69, in send_message_and_save
    await state.update_data(previous_message_id=sent_message.message_id)
                                                ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'bool' object has no attribute 'message_id'
2024-12-02 23:59:22,226 - aiogram.event - INFO - Update id=659305640 is not handled. Duration 62 ms by bot id=7444575424
2024-12-02 23:59:22,227 - aiogram.event - ERROR - Cause exception while process update id=659305640 by bot id=7444575424
AttributeError: 'bool' object has no attribute 'message_id'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 76, in process_start_command
    await send_message_and_save(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 69, in send_message_and_save
    await state.update_data(previous_message_id=sent_message.message_id)
                                                ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'bool' object has no attribute 'message_id'
2024-12-02 23:59:25,475 - aiogram.dispatcher - INFO - Polling stopped
2024-12-02 23:59:25,739 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-02 23:59:25,745 - root - INFO - Бот остановлен вручную.
2024-12-03 00:00:07,221 - root - INFO - Инициализация бота...
2024-12-03 00:00:07,243 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 00:00:07,243 - root - INFO - Инициализация диспетчера...
2024-12-03 00:00:07,244 - root - INFO - Регистрация обработчиков...
2024-12-03 00:00:07,247 - root - INFO - Запуск polling...
2024-12-03 00:00:07,249 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:00:07,249 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 00:00:07,249 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:00:07,251 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 00:00:07,251 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:00:07,252 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:00:07,723 - aiogram.dispatcher - INFO - Start polling
2024-12-03 00:00:07,878 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:00:08,545 - aiogram.event - INFO - Update id=659305641 is handled. Duration 531 ms by bot id=7444575424
2024-12-03 00:00:09,918 - aiogram.event - INFO - Update id=659305642 is handled. Duration 422 ms by bot id=7444575424
2024-12-03 00:00:11,158 - aiogram.event - INFO - Update id=659305643 is handled. Duration 375 ms by bot id=7444575424
2024-12-03 00:00:20,721 - aiogram.event - INFO - Update id=659305644 is handled. Duration 125 ms by bot id=7444575424
2024-12-03 00:00:56,995 - aiogram.event - INFO - Update id=659305645 is handled. Duration 281 ms by bot id=7444575424
2024-12-03 00:00:58,113 - aiogram.event - INFO - Update id=659305646 is handled. Duration 280 ms by bot id=7444575424
2024-12-03 00:00:59,011 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:00:59,021 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 00:00:59,022 - sqlalchemy.engine.Engine - INFO - [generated in 0.00167s] ('528155210', 1, 0)
2024-12-03 00:00:59,255 - aiogram.event - INFO - Update id=659305647 is handled. Duration 266 ms by bot id=7444575424
2024-12-03 00:01:00,851 - aiogram.event - INFO - Update id=659305648 is handled. Duration 375 ms by bot id=7444575424
2024-12-03 00:01:01,971 - aiogram.event - INFO - Update id=659305649 is handled. Duration 171 ms by bot id=7444575424
2024-12-03 00:01:03,476 - aiogram.event - INFO - Update id=659305650 is handled. Duration 343 ms by bot id=7444575424
2024-12-03 00:01:12,741 - aiogram.event - INFO - Update id=659305651 is handled. Duration 77 ms by bot id=7444575424
2024-12-03 00:01:23,038 - root - INFO - {
    "message_id": 1277,
    "date": 1733173283,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 100000,
        "invoice_payload": "1cf1e49e-efb1-494e-ad55-ac4fdfac70cc",
        "telegram_payment_charge_id": "7444575424_528155210_325924",
        "provider_payment_charge_id": "7444575424_528155210_325924",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 00:01:24,496 - root - INFO - Key created: OutlineKey(key_id='77', name='VPN Key64', password='0sGjDjZMMO6XNQBawMSmoV', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTowc0dqRGpaTU1PNlhOUUJhd01TbW9W@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 00:01:24,736 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:01:24,737 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 00:01:24,738 - sqlalchemy.engine.Engine - INFO - [cached since 25.72s ago] ('528155210', 1, 0)
2024-12-03 00:01:24,745 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-03 00:01:24,746 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] ('77', '528155210', '2025-11-28 00:01:24.740541', '2024-12-03 00:01:24.740541')
2024-12-03 00:01:24,750 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:01:24,759 - aiogram.event - INFO - Update id=659305652 is handled. Duration 1719 ms by bot id=7444575424
2024-12-03 00:01:26,146 - aiogram.event - INFO - Update id=659305653 is handled. Duration 250 ms by bot id=7444575424
2024-12-03 00:01:27,284 - aiogram.event - INFO - Update id=659305654 is not handled. Duration 0 ms by bot id=7444575424
2024-12-03 00:01:33,720 - aiogram.event - INFO - Update id=659305655 is not handled. Duration 0 ms by bot id=7444575424
2024-12-03 00:01:37,681 - aiogram.event - INFO - Update id=659305656 is handled. Duration 204 ms by bot id=7444575424
2024-12-03 00:01:40,185 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 00:01:40,444 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:01:40,451 - root - INFO - Бот остановлен вручную.
2024-12-03 00:05:05,064 - root - INFO - Инициализация бота...
2024-12-03 00:05:05,086 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 00:05:05,086 - root - INFO - Инициализация диспетчера...
2024-12-03 00:05:05,088 - root - INFO - Регистрация обработчиков...
2024-12-03 00:05:05,090 - root - INFO - Запуск polling...
2024-12-03 00:05:05,091 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:05:05,092 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 00:05:05,092 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:05:05,094 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 00:05:05,094 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:05:05,094 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:05:05,439 - aiogram.dispatcher - INFO - Start polling
2024-12-03 00:05:05,512 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:05:17,493 - aiogram.event - INFO - Update id=659305657 is handled. Duration 515 ms by bot id=7444575424
2024-12-03 00:05:18,729 - aiogram.event - INFO - Update id=659305658 is handled. Duration 170 ms by bot id=7444575424
2024-12-03 00:05:20,373 - aiogram.event - INFO - Update id=659305659 is handled. Duration 391 ms by bot id=7444575424
2024-12-03 00:05:57,973 - aiogram.event - INFO - Update id=659305660 is handled. Duration 218 ms by bot id=7444575424
2024-12-03 00:06:07,458 - root - INFO - {
    "message_id": 1285,
    "date": 1733173568,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 100000,
        "invoice_payload": "09c886df-ed35-4562-a322-aa1cb9da0127",
        "telegram_payment_charge_id": "7444575424_528155210_325934",
        "provider_payment_charge_id": "7444575424_528155210_325934",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 00:06:08,790 - root - INFO - Key created: OutlineKey(key_id='78', name='VPN Key65', password='wnHm6dNShwZdZtfwzzSmpL', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTp3bkhtNmROU2h3WmRadGZ3enpTbXBM@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 00:06:09,114 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:06:09,123 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 00:06:09,124 - sqlalchemy.engine.Engine - INFO - [generated in 0.00168s] ('528155210', 1, 0)
2024-12-03 00:06:09,135 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-03 00:06:09,135 - sqlalchemy.engine.Engine - INFO - [generated in 0.00114s] ('78', '528155210', '2025-11-28 00:06:09.129574', '2024-12-03 00:06:09.129574')
2024-12-03 00:06:09,142 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:06:09,153 - aiogram.event - INFO - Update id=659305661 is handled. Duration 1702 ms by bot id=7444575424
2024-12-03 00:06:11,231 - aiogram.event - INFO - Update id=659305662 is handled. Duration 250 ms by bot id=7444575424
2024-12-03 00:06:12,739 - aiogram.event - INFO - Update id=659305663 is handled. Duration 217 ms by bot id=7444575424
2024-12-03 00:06:16,394 - aiogram.event - INFO - Update id=659305664 is handled. Duration 265 ms by bot id=7444575424
2024-12-03 00:06:18,048 - aiogram.event - INFO - Update id=659305665 is handled. Duration 266 ms by bot id=7444575424
2024-12-03 00:06:19,474 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:06:19,475 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 00:06:19,475 - sqlalchemy.engine.Engine - INFO - [cached since 10.35s ago] ('528155210', 1, 0)
2024-12-03 00:06:19,485 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 00:06:19,486 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('528155210',)
2024-12-03 00:06:19,489 - root - ERROR - Ошибка при выборе ключа: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
2024-12-03 00:06:19,647 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 00:06:19,898 - aiogram.event - INFO - Update id=659305666 is handled. Duration 422 ms by bot id=7444575424
2024-12-03 00:06:21,996 - aiogram.event - INFO - Update id=659305667 is not handled. Duration 16 ms by bot id=7444575424
2024-12-03 00:06:24,071 - aiogram.event - INFO - Update id=659305668 is not handled. Duration 15 ms by bot id=7444575424
2024-12-03 00:06:29,114 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 00:06:29,361 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:06:29,366 - root - INFO - Бот остановлен вручную.
2024-12-03 00:12:51,540 - root - INFO - Инициализация бота...
2024-12-03 00:12:51,561 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 00:12:51,562 - root - INFO - Инициализация диспетчера...
2024-12-03 00:12:51,563 - root - INFO - Регистрация обработчиков...
2024-12-03 00:12:51,566 - root - INFO - Запуск polling...
2024-12-03 00:12:51,567 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:12:51,567 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 00:12:51,568 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:12:51,569 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 00:12:51,569 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:12:51,570 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:12:51,877 - aiogram.dispatcher - INFO - Start polling
2024-12-03 00:12:51,941 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:13:00,128 - aiogram.event - INFO - Update id=659305669 is handled. Duration 452 ms by bot id=7444575424
2024-12-03 00:13:01,423 - aiogram.event - INFO - Update id=659305670 is handled. Duration 188 ms by bot id=7444575424
2024-12-03 00:13:07,715 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 00:13:07,968 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:13:07,973 - root - INFO - Бот остановлен вручную.
2024-12-03 00:18:33,333 - root - INFO - Инициализация бота...
2024-12-03 00:18:33,365 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 00:18:33,365 - root - INFO - Инициализация диспетчера...
2024-12-03 00:18:33,367 - root - INFO - Регистрация обработчиков...
2024-12-03 00:18:33,371 - root - INFO - Запуск polling...
2024-12-03 00:18:33,373 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:18:33,374 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 00:18:33,374 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:18:33,376 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 00:18:33,376 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:18:33,377 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:18:33,741 - aiogram.dispatcher - INFO - Start polling
2024-12-03 00:18:33,828 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:20:14,974 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 00:20:15,231 - aiogram.event - INFO - Update id=659305671 is not handled. Duration 5467 ms by bot id=7444575424
2024-12-03 00:20:15,231 - aiogram.event - INFO - Update id=659305672 is not handled. Duration 5375 ms by bot id=7444575424
2024-12-03 00:20:15,231 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:20:15,232 - aiogram.event - INFO - Update id=659305673 is not handled. Duration 4217 ms by bot id=7444575424
2024-12-03 00:20:15,233 - root - INFO - Бот остановлен вручную.
2024-12-03 00:20:36,154 - root - INFO - Инициализация бота...
2024-12-03 00:20:36,166 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 00:20:36,166 - root - INFO - Инициализация диспетчера...
2024-12-03 00:20:36,167 - root - INFO - Регистрация обработчиков...
2024-12-03 00:20:36,168 - root - INFO - Запуск polling...
2024-12-03 00:20:36,169 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:20:36,169 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 00:20:36,169 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:20:36,170 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 00:20:36,170 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:20:36,171 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:20:36,395 - aiogram.dispatcher - INFO - Start polling
2024-12-03 00:20:36,454 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:20:43,185 - aiogram.event - INFO - Update id=659305674 is not handled. Duration 0 ms by bot id=7444575424
2024-12-03 00:20:47,958 - aiogram.event - INFO - Update id=659305675 is not handled. Duration 0 ms by bot id=7444575424
2024-12-03 00:20:48,817 - aiogram.event - INFO - Update id=659305676 is not handled. Duration 0 ms by bot id=7444575424
2024-12-03 00:21:01,224 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 00:21:01,482 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:21:01,484 - root - INFO - Бот остановлен вручную.
2024-12-03 00:21:07,763 - root - INFO - Инициализация бота...
2024-12-03 00:21:07,777 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 00:21:07,777 - root - INFO - Инициализация диспетчера...
2024-12-03 00:21:07,778 - root - INFO - Регистрация обработчиков...
2024-12-03 00:21:07,780 - root - INFO - Запуск polling...
2024-12-03 00:21:07,781 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:21:07,781 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 00:21:07,781 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:21:07,782 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 00:21:07,782 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:21:07,782 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:21:08,061 - aiogram.dispatcher - INFO - Start polling
2024-12-03 00:21:08,118 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:21:08,492 - aiogram.event - INFO - Update id=659305677 is handled. Duration 280 ms by bot id=7444575424
2024-12-03 00:21:10,351 - aiogram.event - INFO - Update id=659305678 is handled. Duration 327 ms by bot id=7444575424
2024-12-03 00:21:11,615 - aiogram.event - INFO - Update id=659305679 is handled. Duration 233 ms by bot id=7444575424
2024-12-03 00:21:12,894 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:21:12,897 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 00:21:12,897 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('528155210', 1, 0)
2024-12-03 00:21:12,901 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 00:21:12,901 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('528155210',)
2024-12-03 00:21:12,902 - root - ERROR - Ошибка при выборе ключа: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
2024-12-03 00:21:13,005 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 00:21:13,298 - aiogram.event - INFO - Update id=659305680 is handled. Duration 625 ms by bot id=7444575424
2024-12-03 00:21:17,208 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 00:21:17,458 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:21:17,460 - root - INFO - Бот остановлен вручную.
2024-12-03 00:23:07,422 - root - INFO - Инициализация бота...
2024-12-03 00:23:07,438 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 00:23:07,438 - root - INFO - Инициализация диспетчера...
2024-12-03 00:23:07,439 - root - INFO - Регистрация обработчиков...
2024-12-03 00:23:07,440 - root - INFO - Запуск polling...
2024-12-03 00:23:07,442 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:23:07,442 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 00:23:07,442 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:23:07,443 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 00:23:07,443 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:23:07,444 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:23:07,669 - aiogram.dispatcher - INFO - Start polling
2024-12-03 00:23:07,731 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:23:12,227 - aiogram.event - INFO - Update id=659305681 is handled. Duration 312 ms by bot id=7444575424
2024-12-03 00:23:13,606 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:23:13,609 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 00:23:13,610 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ('528155210', 1, 0)
2024-12-03 00:23:13,613 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 00:23:13,613 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('528155210',)
2024-12-03 00:23:13,615 - root - ERROR - Ошибка при выборе ключа: 4 validation errors for SendMessage
reply_markup.InlineKeyboardMarkup
  Input should be a valid dictionary or instance of InlineKeyboardMarkup [type=model_type, input_value=<function back_button at 0x0000026D2BA9AF20>, input_type=function]
    For further information visit https://errors.pydantic.dev/2.4/v/model_type
reply_markup.ReplyKeyboardMarkup
  Input should be a valid dictionary or instance of ReplyKeyboardMarkup [type=model_type, input_value=<function back_button at 0x0000026D2BA9AF20>, input_type=function]
    For further information visit https://errors.pydantic.dev/2.4/v/model_type
reply_markup.ReplyKeyboardRemove
  Input should be a valid dictionary or instance of ReplyKeyboardRemove [type=model_type, input_value=<function back_button at 0x0000026D2BA9AF20>, input_type=function]
    For further information visit https://errors.pydantic.dev/2.4/v/model_type
reply_markup.ForceReply
  Input should be a valid dictionary or instance of ForceReply [type=model_type, input_value=<function back_button at 0x0000026D2BA9AF20>, input_type=function]
    For further information visit https://errors.pydantic.dev/2.4/v/model_type
2024-12-03 00:23:13,712 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 00:23:13,843 - aiogram.event - INFO - Update id=659305682 is handled. Duration 343 ms by bot id=7444575424
2024-12-03 00:23:23,240 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 00:23:23,485 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:23:23,487 - root - INFO - Бот остановлен вручную.
2024-12-03 00:24:12,004 - root - INFO - Инициализация бота...
2024-12-03 00:24:12,019 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 00:24:12,019 - root - INFO - Инициализация диспетчера...
2024-12-03 00:24:12,020 - root - INFO - Регистрация обработчиков...
2024-12-03 00:24:12,022 - root - INFO - Запуск polling...
2024-12-03 00:24:12,024 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:24:12,024 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 00:24:12,024 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:24:12,025 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 00:24:12,025 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:24:12,026 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:24:12,336 - aiogram.dispatcher - INFO - Start polling
2024-12-03 00:24:12,393 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:24:12,833 - aiogram.event - INFO - Update id=659305683 is handled. Duration 344 ms by bot id=7444575424
2024-12-03 00:24:14,500 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:24:14,502 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 00:24:14,502 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] ('528155210', 1, 0)
2024-12-03 00:24:14,506 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 00:24:14,506 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('528155210',)
2024-12-03 00:24:14,653 - root - ERROR - Ошибка при выборе ключа: type object 'ManageKeys' has no attribute 'manage_existing_keys'
2024-12-03 00:24:14,747 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 00:24:14,874 - aiogram.event - INFO - Update id=659305684 is handled. Duration 469 ms by bot id=7444575424
2024-12-03 00:24:25,645 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 00:24:25,900 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:24:25,901 - root - INFO - Бот остановлен вручную.
2024-12-03 00:24:43,652 - root - INFO - Инициализация бота...
2024-12-03 00:24:43,680 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 00:24:43,681 - root - INFO - Инициализация диспетчера...
2024-12-03 00:24:43,682 - root - INFO - Регистрация обработчиков...
2024-12-03 00:24:43,684 - root - INFO - Запуск polling...
2024-12-03 00:24:43,686 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:24:43,686 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 00:24:43,687 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:24:43,688 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 00:24:43,688 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:24:43,689 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:24:43,970 - aiogram.dispatcher - INFO - Start polling
2024-12-03 00:24:44,029 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:24:46,836 - aiogram.event - INFO - Update id=659305685 is handled. Duration 734 ms by bot id=7444575424
2024-12-03 00:24:47,746 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:24:47,749 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 00:24:47,749 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ('528155210', 1, 0)
2024-12-03 00:24:47,753 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 00:24:47,754 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ('528155210',)
2024-12-03 00:24:47,903 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 00:24:48,063 - aiogram.event - INFO - Update id=659305686 is handled. Duration 422 ms by bot id=7444575424
2024-12-03 00:25:04,538 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 00:25:04,819 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:25:04,836 - root - INFO - Бот остановлен вручную.
2024-12-03 00:25:22,488 - root - INFO - Инициализация бота...
2024-12-03 00:25:22,528 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 00:25:22,528 - root - INFO - Инициализация диспетчера...
2024-12-03 00:25:22,531 - root - INFO - Регистрация обработчиков...
2024-12-03 00:25:22,534 - root - INFO - Запуск polling...
2024-12-03 00:25:22,537 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:25:22,538 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 00:25:22,538 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:25:22,541 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 00:25:22,542 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:25:22,544 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:25:22,867 - aiogram.dispatcher - INFO - Start polling
2024-12-03 00:25:22,936 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:25:23,497 - aiogram.event - INFO - Update id=659305687 is handled. Duration 406 ms by bot id=7444575424
2024-12-03 00:25:25,235 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:25:25,239 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 00:25:25,239 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ('528155210', 1, 0)
2024-12-03 00:25:25,245 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 00:25:25,245 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ('528155210',)
2024-12-03 00:25:25,247 - root - ERROR - Ошибка при выборе ключа: 4 validation errors for SendMessage
reply_markup.InlineKeyboardMarkup
  Input should be a valid dictionary or instance of InlineKeyboardMarkup [type=model_type, input_value=<function back_button at 0x000001F2E372AF20>, input_type=function]
    For further information visit https://errors.pydantic.dev/2.4/v/model_type
reply_markup.ReplyKeyboardMarkup
  Input should be a valid dictionary or instance of ReplyKeyboardMarkup [type=model_type, input_value=<function back_button at 0x000001F2E372AF20>, input_type=function]
    For further information visit https://errors.pydantic.dev/2.4/v/model_type
reply_markup.ReplyKeyboardRemove
  Input should be a valid dictionary or instance of ReplyKeyboardRemove [type=model_type, input_value=<function back_button at 0x000001F2E372AF20>, input_type=function]
    For further information visit https://errors.pydantic.dev/2.4/v/model_type
reply_markup.ForceReply
  Input should be a valid dictionary or instance of ForceReply [type=model_type, input_value=<function back_button at 0x000001F2E372AF20>, input_type=function]
    For further information visit https://errors.pydantic.dev/2.4/v/model_type
2024-12-03 00:25:25,431 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 00:25:25,706 - aiogram.event - INFO - Update id=659305688 is handled. Duration 640 ms by bot id=7444575424
2024-12-03 00:25:28,703 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 00:25:28,964 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:25:28,966 - root - INFO - Бот остановлен вручную.
2024-12-03 00:26:05,669 - root - INFO - Инициализация бота...
2024-12-03 00:26:05,694 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 00:26:05,694 - root - INFO - Инициализация диспетчера...
2024-12-03 00:26:05,696 - root - INFO - Регистрация обработчиков...
2024-12-03 00:26:05,698 - root - INFO - Запуск polling...
2024-12-03 00:26:05,700 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:26:05,700 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 00:26:05,700 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:26:05,702 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 00:26:05,702 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:26:05,703 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:26:05,937 - aiogram.dispatcher - INFO - Start polling
2024-12-03 00:26:05,997 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:26:06,435 - aiogram.event - INFO - Update id=659305689 is handled. Duration 344 ms by bot id=7444575424
2024-12-03 00:26:09,461 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:26:09,463 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 00:26:09,463 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ('528155210', 1, 0)
2024-12-03 00:26:09,467 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 00:26:09,467 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('528155210',)
2024-12-03 00:26:09,468 - root - ERROR - Ошибка при выборе ключа: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
2024-12-03 00:26:09,549 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 00:26:09,700 - aiogram.event - INFO - Update id=659305690 is handled. Duration 327 ms by bot id=7444575424
2024-12-03 00:26:11,960 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 00:26:12,219 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:26:12,221 - root - INFO - Бот остановлен вручную.
2024-12-03 00:26:38,622 - root - INFO - Инициализация бота...
2024-12-03 00:26:38,638 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 00:26:38,638 - root - INFO - Инициализация диспетчера...
2024-12-03 00:26:38,639 - root - INFO - Регистрация обработчиков...
2024-12-03 00:26:38,640 - root - INFO - Запуск polling...
2024-12-03 00:26:38,642 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:26:38,642 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 00:26:38,642 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:26:38,643 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 00:26:38,643 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:26:38,644 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:26:38,941 - aiogram.dispatcher - INFO - Start polling
2024-12-03 00:26:39,002 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:26:39,395 - aiogram.event - INFO - Update id=659305691 is handled. Duration 297 ms by bot id=7444575424
2024-12-03 00:26:41,199 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:26:41,202 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 00:26:41,202 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ('528155210', 1, 0)
2024-12-03 00:26:41,206 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 00:26:41,206 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('528155210',)
2024-12-03 00:26:41,347 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 00:26:41,484 - aiogram.event - INFO - Update id=659305692 is handled. Duration 375 ms by bot id=7444575424
2024-12-03 00:26:42,641 - aiogram.event - INFO - Update id=659305693 is handled. Duration 187 ms by bot id=7444575424
2024-12-03 00:26:46,242 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 00:26:46,503 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:26:46,504 - root - INFO - Бот остановлен вручную.
2024-12-03 00:27:50,000 - root - INFO - Инициализация бота...
2024-12-03 00:27:50,027 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 00:27:50,027 - root - INFO - Инициализация диспетчера...
2024-12-03 00:27:50,029 - root - INFO - Регистрация обработчиков...
2024-12-03 00:27:50,032 - root - INFO - Запуск polling...
2024-12-03 00:27:50,034 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:27:50,034 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 00:27:50,035 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:27:50,037 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 00:27:50,037 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:27:50,038 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:27:50,351 - aiogram.dispatcher - INFO - Start polling
2024-12-03 00:27:50,414 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:27:50,607 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 00:27:50,871 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:27:50,873 - root - INFO - Бот остановлен вручную.
2024-12-03 00:28:19,241 - root - INFO - Инициализация бота...
2024-12-03 00:28:19,282 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 00:28:19,282 - root - INFO - Инициализация диспетчера...
2024-12-03 00:28:19,284 - root - INFO - Регистрация обработчиков...
2024-12-03 00:28:19,289 - root - INFO - Запуск polling...
2024-12-03 00:28:19,294 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:28:19,295 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 00:28:19,296 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:28:19,299 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-03 00:28:19,299 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:28:19,301 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 00:28:19,301 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:28:19,302 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-03 00:28:19,303 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:28:19,304 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-03 00:28:19,305 - sqlalchemy.engine.Engine - INFO - [no key 0.00051s] ()
2024-12-03 00:28:19,320 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-03 00:28:19,320 - sqlalchemy.engine.Engine - INFO - [no key 0.00058s] ()
2024-12-03 00:28:19,330 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:28:19,650 - aiogram.dispatcher - INFO - Start polling
2024-12-03 00:28:19,721 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:28:22,328 - aiogram.event - INFO - Update id=659305694 is handled. Duration 500 ms by bot id=7444575424
2024-12-03 00:28:25,960 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:28:25,962 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 00:28:25,963 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] ('432629636', 1, 0)
2024-12-03 00:28:26,051 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 00:28:26,252 - aiogram.event - INFO - Update id=659305695 is handled. Duration 375 ms by bot id=7444575424
2024-12-03 00:28:40,162 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:28:40,164 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 00:28:40,164 - sqlalchemy.engine.Engine - INFO - [cached since 14.2s ago] ('432629636', 1, 0)
2024-12-03 00:28:40,169 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-03 00:28:40,169 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] ('432629636', 'active', 0)
2024-12-03 00:28:40,173 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:28:40,182 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:28:40,183 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-03 00:28:40,183 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ('432629636',)
2024-12-03 00:28:40,186 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-03 00:28:40,186 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] (1, '432629636')
2024-12-03 00:28:40,188 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:28:41,382 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:28:41,384 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-03 00:28:41,384 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ('79', '432629636', '2024-12-18 00:28:41.381956', '2024-12-03 00:28:41.381956')
2024-12-03 00:28:41,385 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:28:41,391 - root - INFO - Key created: OutlineKey(key_id='79', name='VPN Key66', password='Bf0ek0gQQ5KFp4KHNlF5S1', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpCZjBlazBnUVE1S0ZwNEtITmxGNVMx@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 7444575424
2024-12-03 00:28:41,600 - aiogram.event - INFO - Update id=659305696 is handled. Duration 1437 ms by bot id=7444575424
2024-12-03 00:28:48,466 - aiogram.event - INFO - Update id=659305697 is not handled. Duration 0 ms by bot id=7444575424
2024-12-03 00:28:51,747 - aiogram.event - INFO - Update id=659305698 is not handled. Duration 0 ms by bot id=7444575424
2024-12-03 00:28:53,274 - aiogram.event - INFO - Update id=659305699 is not handled. Duration 0 ms by bot id=7444575424
2024-12-03 00:29:34,800 - aiogram.event - INFO - Update id=659305700 is not handled. Duration 0 ms by bot id=7444575424
2024-12-03 00:30:24,248 - aiogram.event - INFO - Update id=659305701 is not handled. Duration 16 ms by bot id=7444575424
2024-12-03 00:30:24,248 - aiogram.event - INFO - Update id=659305702 is not handled. Duration 16 ms by bot id=7444575424
2024-12-03 00:30:24,248 - aiogram.event - INFO - Update id=659305703 is not handled. Duration 16 ms by bot id=7444575424
2024-12-03 00:30:24,248 - aiogram.event - INFO - Update id=659305704 is not handled. Duration 16 ms by bot id=7444575424
2024-12-03 00:30:24,248 - aiogram.event - INFO - Update id=659305705 is not handled. Duration 16 ms by bot id=7444575424
2024-12-03 00:30:24,248 - aiogram.event - INFO - Update id=659305706 is not handled. Duration 16 ms by bot id=7444575424
2024-12-03 00:30:24,249 - aiogram.event - INFO - Update id=659305707 is not handled. Duration 16 ms by bot id=7444575424
2024-12-03 00:30:24,249 - aiogram.event - INFO - Update id=659305708 is not handled. Duration 16 ms by bot id=7444575424
2024-12-03 00:30:24,431 - aiogram.event - INFO - Update id=659305709 is handled. Duration 187 ms by bot id=7444575424
2024-12-03 00:30:26,613 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 00:30:26,862 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:30:26,866 - root - INFO - Бот остановлен вручную.
2024-12-03 00:30:31,499 - root - INFO - Инициализация бота...
2024-12-03 00:30:31,510 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 00:30:31,511 - root - INFO - Инициализация диспетчера...
2024-12-03 00:30:31,511 - root - INFO - Регистрация обработчиков...
2024-12-03 00:30:31,513 - root - INFO - Запуск polling...
2024-12-03 00:30:31,514 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:30:31,514 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 00:30:31,514 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:30:31,515 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 00:30:31,515 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 00:30:31,515 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:30:31,809 - aiogram.dispatcher - INFO - Start polling
2024-12-03 00:30:31,916 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:30:32,062 - aiogram.event - INFO - Update id=659305710 is not handled. Duration 0 ms by bot id=7444575424
2024-12-03 00:30:33,265 - aiogram.event - INFO - Update id=659305711 is not handled. Duration 0 ms by bot id=7444575424
2024-12-03 00:30:42,542 - aiogram.event - INFO - Update id=659305712 is handled. Duration 422 ms by bot id=7444575424
2024-12-03 00:30:42,769 - aiogram.event - INFO - Update id=659305713 is handled. Duration 202 ms by bot id=7444575424
2024-12-03 00:30:44,179 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:30:44,182 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 00:30:44,182 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ('528155210', 1, 0)
2024-12-03 00:30:44,258 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 00:30:44,386 - aiogram.event - INFO - Update id=659305714 is handled. Duration 312 ms by bot id=7444575424
2024-12-03 00:30:44,583 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:30:44,583 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 00:30:44,583 - sqlalchemy.engine.Engine - INFO - [cached since 0.4014s ago] ('432629636', 1, 0)
2024-12-03 00:30:44,585 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 00:30:44,586 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ('432629636',)
2024-12-03 00:30:44,666 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 00:30:44,826 - aiogram.event - INFO - Update id=659305715 is handled. Duration 515 ms by bot id=7444575424
2024-12-03 00:30:49,254 - aiogram.event - INFO - Update id=659305716 is not handled. Duration 0 ms by bot id=7444575424
2024-12-03 00:30:52,827 - aiogram.event - INFO - Update id=659305717 is handled. Duration 297 ms by bot id=7444575424
2024-12-03 00:30:57,853 - aiogram.event - INFO - Update id=659305718 is handled. Duration 311 ms by bot id=7444575424
2024-12-03 00:31:00,678 - aiogram.event - INFO - Update id=659305719 is handled. Duration 156 ms by bot id=7444575424
2024-12-03 00:31:05,441 - aiogram.event - INFO - Update id=659305720 is handled. Duration 140 ms by bot id=7444575424
2024-12-03 00:31:07,590 - aiogram.event - INFO - Update id=659305721 is handled. Duration 359 ms by bot id=7444575424
2024-12-03 00:31:11,082 - aiogram.event - INFO - Update id=659305722 is not handled. Duration 0 ms by bot id=7444575424
2024-12-03 00:31:28,894 - aiogram.event - INFO - Update id=659305723 is handled. Duration 265 ms by bot id=7444575424
2024-12-03 00:31:35,800 - root - INFO - {
    "message_id": 1352,
    "date": 1733175096,
    "chat": {
        "id": 432629636,
        "type": "private",
        "title": null,
        "username": "asaidar",
        "first_name": "Aydar",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 432629636,
        "is_bot": false,
        "first_name": "Aydar",
        "last_name": null,
        "username": "asaidar",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 10000,
        "invoice_payload": "50b0fe7b-225f-4535-a08f-f4486cde8fa7",
        "telegram_payment_charge_id": "7444575424_432629636_603354",
        "provider_payment_charge_id": "7444575424_432629636_603354",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 00:31:36,996 - root - INFO - Key created: OutlineKey(key_id='80', name='VPN Key67', password='kMs2l7vPIvgIFNo9XZ2lq8', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTprTXMybDd2UEl2Z0lGTm85WFoybHE4@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 432629636
2024-12-03 00:31:37,244 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:31:37,245 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 00:31:37,245 - sqlalchemy.engine.Engine - INFO - [cached since 53.06s ago] ('432629636', 1, 0)
2024-12-03 00:31:37,246 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-03 00:31:37,247 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('80', '432629636', '2025-03-03 00:31:37.245791', '2024-12-03 00:31:37.245791')
2024-12-03 00:31:37,248 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 00:31:37,254 - aiogram.event - INFO - Update id=659305724 is handled. Duration 1452 ms by bot id=7444575424
2024-12-03 00:31:42,268 - aiogram.event - INFO - Update id=659305725 is handled. Duration 282 ms by bot id=7444575424
2024-12-03 00:31:47,319 - aiogram.event - INFO - Update id=659305726 is handled. Duration 204 ms by bot id=7444575424
2024-12-03 00:31:49,665 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 00:31:49,667 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 00:31:49,667 - sqlalchemy.engine.Engine - INFO - [cached since 65.48s ago] ('432629636', 1, 0)
2024-12-03 00:31:49,668 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 00:31:49,668 - sqlalchemy.engine.Engine - INFO - [cached since 65.08s ago] ('432629636',)
2024-12-03 00:31:49,843 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 00:31:50,054 - aiogram.event - INFO - Update id=659305727 is handled. Duration 563 ms by bot id=7444575424
2024-12-03 00:32:20,693 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 00:32:20,947 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 00:32:20,949 - root - INFO - Бот остановлен вручную.
2024-12-03 01:29:09,998 - root - INFO - РРЅРёС†РёР°Р»РёР·Р°С†РёСЏ Р±РѕС‚Р°...
2024-12-03 01:29:10,004 - root - INFO - РРЅРёС†РёР°Р»РёР·Р°С†РёСЏ С…СЂР°РЅРёР»РёС‰Р° СЃРѕСЃС‚РѕСЏРЅРёР№ (MemoryStorage)...
2024-12-03 01:29:10,005 - root - INFO - РРЅРёС†РёР°Р»РёР·Р°С†РёСЏ РґРёСЃРїРµС‚С‡РµСЂР°...
2024-12-03 01:29:10,005 - root - INFO - Р РµРіРёСЃС‚СЂР°С†РёСЏ РѕР±СЂР°Р±РѕС‚С‡РёРєРѕРІ...
2024-12-03 01:29:10,006 - root - INFO - Р—Р°РїСѓСЃРє polling...
2024-12-03 01:29:10,007 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 01:29:10,008 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 01:29:10,008 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 01:29:10,008 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 01:29:10,008 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 01:29:10,008 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 01:29:10,375 - aiogram.dispatcher - INFO - Start polling
2024-12-03 01:29:10,473 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 01:29:21,913 - aiogram.event - INFO - Update id=659305732 is handled. Duration 432 ms by bot id=7444575424
2024-12-03 01:29:24,895 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 01:29:24,896 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 01:29:24,896 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('432629636', 1, 0)
2024-12-03 01:29:24,898 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 01:29:24,898 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ('432629636',)
2024-12-03 01:29:24,982 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 01:29:25,172 - aiogram.event - INFO - Update id=659305733 is handled. Duration 584 ms by bot id=7444575424
2024-12-03 01:29:27,321 - aiogram.event - INFO - Update id=659305734 is handled. Duration 194 ms by bot id=7444575424
2024-12-03 01:29:31,864 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 01:29:31,866 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 01:29:31,866 - sqlalchemy.engine.Engine - INFO - [cached since 6.97s ago] ('432629636', 1, 0)
2024-12-03 01:29:31,867 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 01:29:31,867 - sqlalchemy.engine.Engine - INFO - [cached since 6.969s ago] ('432629636',)
2024-12-03 01:29:31,967 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 01:29:32,213 - aiogram.event - INFO - Update id=659305735 is handled. Duration 451 ms by bot id=7444575424
2024-12-03 01:29:33,770 - aiogram.event - INFO - Update id=659305736 is handled. Duration 143 ms by bot id=7444575424
2024-12-03 01:29:35,834 - aiogram.event - INFO - Update id=659305737 is handled. Duration 145 ms by bot id=7444575424
2024-12-03 01:29:37,501 - aiogram.event - INFO - Update id=659305738 is handled. Duration 357 ms by bot id=7444575424
2024-12-03 01:30:01,622 - aiogram.event - INFO - Update id=659305739 is handled. Duration 165 ms by bot id=7444575424
2024-12-03 01:30:12,865 - root - INFO - {
    "message_id": 1368,
    "date": 1733178612,
    "chat": {
        "id": 432629636,
        "type": "private",
        "title": null,
        "username": "asaidar",
        "first_name": "Aydar",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 432629636,
        "is_bot": false,
        "first_name": "Aydar",
        "last_name": null,
        "username": "asaidar",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 5000,
        "invoice_payload": "a8465ac1-d07c-4ee8-9ebb-85fb53a2267a",
        "telegram_payment_charge_id": "7444575424_432629636_603539",
        "provider_payment_charge_id": "7444575424_432629636_603539",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 01:30:13,988 - root - INFO - Key created: OutlineKey(key_id='81', name='VPN Key68', password='5pK9Xt6h1dWPTwElIQy5oG', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTo1cEs5WHQ2aDFkV1BUd0VsSVF5NW9H@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 432629636
2024-12-03 01:30:14,368 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 01:30:14,369 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 01:30:14,370 - sqlalchemy.engine.Engine - INFO - [cached since 49.47s ago] ('432629636', 1, 0)
2024-12-03 01:30:14,373 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-03 01:30:14,373 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('81', '432629636', '2025-01-02 01:30:14.370860', '2024-12-03 01:30:14.370860')
2024-12-03 01:30:14,375 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 01:30:14,377 - aiogram.event - INFO - Update id=659305740 is handled. Duration 1514 ms by bot id=7444575424
2024-12-03 01:31:09,520 - aiogram.dispatcher - WARNING - Received SIGINT signal
2024-12-03 01:31:09,524 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 01:31:09,525 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 01:31:09,956 - asyncio - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x10aafb080>
2024-12-03 01:31:12,307 - root - INFO - РРЅРёС†РёР°Р»РёР·Р°С†РёСЏ Р±РѕС‚Р°...
2024-12-03 01:31:12,312 - root - INFO - РРЅРёС†РёР°Р»РёР·Р°С†РёСЏ С…СЂР°РЅРёР»РёС‰Р° СЃРѕСЃС‚РѕСЏРЅРёР№ (MemoryStorage)...
2024-12-03 01:31:12,312 - root - INFO - РРЅРёС†РёР°Р»РёР·Р°С†РёСЏ РґРёСЃРїРµС‚С‡РµСЂР°...
2024-12-03 01:31:12,312 - root - INFO - Р РµРіРёСЃС‚СЂР°С†РёСЏ РѕР±СЂР°Р±РѕС‚С‡РёРєРѕРІ...
2024-12-03 01:31:12,313 - root - INFO - Р—Р°РїСѓСЃРє polling...
2024-12-03 01:31:12,313 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 01:31:12,313 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 01:31:12,313 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 01:31:12,314 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 01:31:12,314 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 01:31:12,314 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 01:31:12,546 - aiogram.dispatcher - INFO - Start polling
2024-12-03 01:31:12,612 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 01:31:14,629 - aiogram.event - INFO - Update id=659305741 is handled. Duration 247 ms by bot id=7444575424
2024-12-03 01:31:16,302 - aiogram.event - INFO - Update id=659305742 is handled. Duration 146 ms by bot id=7444575424
2024-12-03 01:31:18,041 - aiogram.event - INFO - Update id=659305743 is handled. Duration 252 ms by bot id=7444575424
2024-12-03 01:31:21,009 - aiogram.event - INFO - Update id=659305744 is handled. Duration 60 ms by bot id=7444575424
2024-12-03 01:31:28,390 - root - INFO - {
    "message_id": 1374,
    "date": 1733178688,
    "chat": {
        "id": 432629636,
        "type": "private",
        "title": null,
        "username": "asaidar",
        "first_name": "Aydar",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 432629636,
        "is_bot": false,
        "first_name": "Aydar",
        "last_name": null,
        "username": "asaidar",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 100000,
        "invoice_payload": "2f66ae77-842c-4ad3-9227-fb55399bfb85",
        "telegram_payment_charge_id": "7444575424_432629636_603546",
        "provider_payment_charge_id": "7444575424_432629636_603546",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 01:31:29,479 - root - INFO - Key created: OutlineKey(key_id='82', name='VPN Key69', password='wconau9lqxmZtoeLg7gOL6', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTp3Y29uYXU5bHF4bVp0b2VMZzdnT0w2@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 432629636
2024-12-03 01:31:29,605 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 01:31:29,609 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 01:31:29,609 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ('432629636', 1, 0)
2024-12-03 01:31:29,611 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-03 01:31:29,611 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ('82', '432629636', '2025-11-28 01:31:29.610007', '2024-12-03 01:31:29.610007')
2024-12-03 01:31:29,612 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 01:31:29,614 - aiogram.event - INFO - Update id=659305745 is handled. Duration 1225 ms by bot id=7444575424
2024-12-03 01:31:36,004 - aiogram.event - INFO - Update id=659305746 is handled. Duration 165 ms by bot id=7444575424
2024-12-03 01:31:39,897 - aiogram.event - INFO - Update id=659305747 is handled. Duration 136 ms by bot id=7444575424
2024-12-03 01:35:04,680 - aiogram.dispatcher - WARNING - Received SIGINT signal
2024-12-03 01:35:04,682 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 01:35:04,683 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 01:35:05,110 - asyncio - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x105f17170>
2024-12-03 11:25:59,936 - root - INFO - Инициализация бота...
2024-12-03 11:25:59,956 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 11:25:59,956 - root - INFO - Инициализация диспетчера...
2024-12-03 11:25:59,958 - root - INFO - Регистрация обработчиков...
2024-12-03 11:25:59,960 - root - INFO - Запуск polling...
2024-12-03 11:25:59,961 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 11:25:59,961 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 11:25:59,961 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 11:25:59,963 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 11:25:59,963 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 11:25:59,963 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 11:26:00,347 - aiogram.dispatcher - INFO - Start polling
2024-12-03 11:26:00,422 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 11:26:01,138 - aiogram.event - INFO - Update id=659305748 is handled. Duration 500 ms by bot id=7444575424
2024-12-03 11:26:01,140 - aiogram.event - INFO - Update id=659305750 is handled. Duration 484 ms by bot id=7444575424
2024-12-03 11:26:01,945 - aiogram.event - INFO - Update id=659305749 is handled. Duration 1297 ms by bot id=7444575424
2024-12-03 11:26:04,302 - aiogram.event - INFO - Update id=659305751 is handled. Duration 141 ms by bot id=7444575424
2024-12-03 11:26:07,075 - aiogram.event - INFO - Update id=659305752 is handled. Duration 359 ms by bot id=7444575424
2024-12-03 11:26:09,262 - aiogram.event - INFO - Update id=659305753 is handled. Duration 140 ms by bot id=7444575424
2024-12-03 11:26:10,761 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 11:26:10,772 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 11:26:10,773 - sqlalchemy.engine.Engine - INFO - [generated in 0.00139s] ('528155210', 1, 0)
2024-12-03 11:26:10,859 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 11:26:11,010 - aiogram.event - INFO - Update id=659305754 is handled. Duration 359 ms by bot id=7444575424
2024-12-03 11:26:11,975 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 11:26:11,977 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 11:26:11,978 - sqlalchemy.engine.Engine - INFO - [cached since 1.206s ago] ('432629636', 1, 0)
2024-12-03 11:26:11,996 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 11:26:11,998 - sqlalchemy.engine.Engine - INFO - [generated in 0.00240s] ('432629636',)
2024-12-03 11:26:12,104 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 11:26:12,242 - aiogram.event - INFO - Update id=659305755 is handled. Duration 390 ms by bot id=7444575424
2024-12-03 11:26:14,122 - aiogram.event - INFO - Update id=659305756 is not handled. Duration 16 ms by bot id=7444575424
2024-12-03 11:26:17,878 - aiogram.event - INFO - Update id=659305757 is handled. Duration 266 ms by bot id=7444575424
2024-12-03 11:26:19,306 - aiogram.event - INFO - Update id=659305758 is handled. Duration 172 ms by bot id=7444575424
2024-12-03 11:26:19,505 - aiogram.event - INFO - Update id=659305759 is handled. Duration 297 ms by bot id=7444575424
2024-12-03 11:26:21,029 - aiogram.event - INFO - Update id=659305760 is handled. Duration 500 ms by bot id=7444575424
2024-12-03 11:26:21,754 - aiogram.event - INFO - Update id=659305761 is handled. Duration 187 ms by bot id=7444575424
2024-12-03 11:26:22,313 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 11:26:22,315 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 11:26:22,316 - sqlalchemy.engine.Engine - INFO - [cached since 11.55s ago] ('528155210', 1, 0)
2024-12-03 11:26:22,323 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-03 11:26:22,324 - sqlalchemy.engine.Engine - INFO - [generated in 0.00101s] ('528155210', 'active', 0)
2024-12-03 11:26:22,331 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 11:26:22,344 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 11:26:22,349 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-03 11:26:22,350 - sqlalchemy.engine.Engine - INFO - [generated in 0.00144s] ('528155210',)
2024-12-03 11:26:22,359 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-03 11:26:22,360 - sqlalchemy.engine.Engine - INFO - [generated in 0.00145s] (1, '528155210')
2024-12-03 11:26:22,365 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 11:26:23,666 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 11:26:23,670 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-03 11:26:23,671 - sqlalchemy.engine.Engine - INFO - [generated in 0.00134s] ('83', '528155210', '2024-12-05 11:26:23.665137', '2024-12-03 11:26:23.665137')
2024-12-03 11:26:23,680 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 11:26:23,691 - aiogram.event - INFO - Update id=659305762 is not handled. Duration 1390 ms by bot id=7444575424
2024-12-03 11:26:23,692 - aiogram.event - ERROR - Cause exception while process update id=659305762 by bot id=7444575424
TypeError: send_key_to_user() got an unexpected keyword argument 'reply_markup'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 422, in handle_trial_key_choice
    await send_key_to_user(callback.message, key, text, reply_markup=back_button())
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: send_key_to_user() got an unexpected keyword argument 'reply_markup'
2024-12-03 11:26:23,924 - aiogram.event - INFO - Update id=659305763 is handled. Duration 203 ms by bot id=7444575424
2024-12-03 11:26:27,570 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 11:26:27,834 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 11:26:27,835 - root - INFO - Бот остановлен вручную.
2024-12-03 11:26:40,918 - root - INFO - Инициализация бота...
2024-12-03 11:26:40,937 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 11:26:40,937 - root - INFO - Инициализация диспетчера...
2024-12-03 11:26:40,938 - root - INFO - Регистрация обработчиков...
2024-12-03 11:26:40,940 - root - INFO - Запуск polling...
2024-12-03 11:26:40,942 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 11:26:40,943 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 11:26:40,943 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 11:26:40,944 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 11:26:40,944 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 11:26:40,945 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 11:26:41,320 - aiogram.dispatcher - INFO - Start polling
2024-12-03 11:26:41,393 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 11:26:41,674 - aiogram.event - INFO - Update id=659305764 is not handled. Duration 16 ms by bot id=7444575424
2024-12-03 11:26:42,143 - aiogram.event - INFO - Update id=659305765 is handled. Duration 484 ms by bot id=7444575424
2024-12-03 11:26:43,800 - aiogram.event - INFO - Update id=659305766 is handled. Duration 172 ms by bot id=7444575424
2024-12-03 11:26:45,408 - aiogram.event - INFO - Update id=659305767 is handled. Duration 687 ms by bot id=7444575424
2024-12-03 11:27:02,531 - aiogram.event - INFO - Update id=659305768 is handled. Duration 312 ms by bot id=7444575424
2024-12-03 11:27:11,958 - root - INFO - {
    "message_id": 1404,
    "date": 1733214433,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 100000,
        "invoice_payload": "a1fb47e1-6de4-400b-9f67-5e536077cce3",
        "telegram_payment_charge_id": "7444575424_528155210_326251",
        "provider_payment_charge_id": "7444575424_528155210_326251",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 11:27:13,244 - root - INFO - Key created: OutlineKey(key_id='84', name='VPN Key71', password='Y9IxyDG00KhMoeegWkIl2c', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpZOUl4eURHMDBLaE1vZWVnV2tJbDJj@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 11:27:13,246 - root - ERROR - Произошла ошибка: 4 validation errors for SendMessage
reply_markup.InlineKeyboardMarkup
  Input should be a valid dictionary or instance of InlineKeyboardMarkup [type=model_type, input_value=(), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.4/v/model_type
reply_markup.ReplyKeyboardMarkup
  Input should be a valid dictionary or instance of ReplyKeyboardMarkup [type=model_type, input_value=(), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.4/v/model_type
reply_markup.ReplyKeyboardRemove
  Input should be a valid dictionary or instance of ReplyKeyboardRemove [type=model_type, input_value=(), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.4/v/model_type
reply_markup.ForceReply
  Input should be a valid dictionary or instance of ForceReply [type=model_type, input_value=(), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.4/v/model_type
2024-12-03 11:27:13,542 - aiogram.event - INFO - Update id=659305769 is handled. Duration 1594 ms by bot id=7444575424
2024-12-03 11:28:13,821 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 11:28:14,082 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 11:28:14,095 - root - INFO - Бот остановлен вручную.
2024-12-03 11:28:42,305 - root - INFO - Инициализация бота...
2024-12-03 11:28:42,327 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 11:28:42,328 - root - INFO - Инициализация диспетчера...
2024-12-03 11:28:42,329 - root - INFO - Регистрация обработчиков...
2024-12-03 11:28:42,331 - root - INFO - Запуск polling...
2024-12-03 11:28:42,333 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 11:28:42,334 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 11:28:42,335 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 11:28:42,336 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 11:28:42,337 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 11:28:42,338 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 11:28:42,909 - aiogram.dispatcher - INFO - Start polling
2024-12-03 11:28:43,089 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 11:28:43,922 - aiogram.event - INFO - Update id=659305770 is handled. Duration 688 ms by bot id=7444575424
2024-12-03 11:28:47,211 - aiogram.event - INFO - Update id=659305771 is handled. Duration 155 ms by bot id=7444575424
2024-12-03 11:28:50,562 - aiogram.event - INFO - Update id=659305772 is handled. Duration 407 ms by bot id=7444575424
2024-12-03 11:29:17,457 - aiogram.event - INFO - Update id=659305773 is handled. Duration 297 ms by bot id=7444575424
2024-12-03 11:29:25,511 - root - INFO - {
    "message_id": 1410,
    "date": 1733214566,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 5000,
        "invoice_payload": "18d8d23a-dda4-4b52-81ad-0372c541d893",
        "telegram_payment_charge_id": "7444575424_528155210_326271",
        "provider_payment_charge_id": "7444575424_528155210_326271",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 11:29:26,687 - root - INFO - Key created: OutlineKey(key_id='85', name='VPN Key72', password='Zq6b6lIJlGqq3ic5JOnEF6', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpacTZiNmxJSmxHcXEzaWM1Sk9uRUY2@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 11:29:26,689 - root - ERROR - Произошла ошибка: 4 validation errors for SendMessage
reply_markup.InlineKeyboardMarkup
  Input should be a valid dictionary or instance of InlineKeyboardMarkup [type=model_type, input_value=(), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.4/v/model_type
reply_markup.ReplyKeyboardMarkup
  Input should be a valid dictionary or instance of ReplyKeyboardMarkup [type=model_type, input_value=(), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.4/v/model_type
reply_markup.ReplyKeyboardRemove
  Input should be a valid dictionary or instance of ReplyKeyboardRemove [type=model_type, input_value=(), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.4/v/model_type
reply_markup.ForceReply
  Input should be a valid dictionary or instance of ForceReply [type=model_type, input_value=(), input_type=tuple]
    For further information visit https://errors.pydantic.dev/2.4/v/model_type
2024-12-03 11:29:27,010 - aiogram.event - INFO - Update id=659305774 is handled. Duration 1515 ms by bot id=7444575424
2024-12-03 11:29:27,501 - aiogram.event - INFO - Update id=659305775 is not handled. Duration 0 ms by bot id=7444575424
2024-12-03 11:29:31,151 - aiogram.event - INFO - Update id=659305776 is not handled. Duration 15 ms by bot id=7444575424
2024-12-03 11:29:34,360 - aiogram.event - INFO - Update id=659305777 is not handled. Duration 0 ms by bot id=7444575424
2024-12-03 11:31:26,466 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 11:31:26,722 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 11:31:26,728 - root - INFO - Бот остановлен вручную.
2024-12-03 11:37:19,430 - root - INFO - Инициализация бота...
2024-12-03 11:37:19,450 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 11:37:19,450 - root - INFO - Инициализация диспетчера...
2024-12-03 11:37:19,451 - root - INFO - Регистрация обработчиков...
2024-12-03 11:37:19,454 - root - INFO - Запуск polling...
2024-12-03 11:37:19,455 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 11:37:19,456 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 11:37:19,456 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 11:37:19,457 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 11:37:19,457 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 11:37:19,458 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 11:37:19,758 - aiogram.dispatcher - INFO - Start polling
2024-12-03 11:37:19,822 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 11:37:23,574 - aiogram.event - INFO - Update id=659305778 is handled. Duration 577 ms by bot id=7444575424
2024-12-03 11:37:26,134 - aiogram.event - INFO - Update id=659305779 is handled. Duration 234 ms by bot id=7444575424
2024-12-03 11:37:27,535 - aiogram.event - INFO - Update id=659305780 is handled. Duration 422 ms by bot id=7444575424
2024-12-03 11:37:40,969 - aiogram.event - INFO - Update id=659305781 is handled. Duration 155 ms by bot id=7444575424
2024-12-03 11:37:49,666 - root - INFO - {
    "message_id": 1418,
    "date": 1733215070,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 100000,
        "invoice_payload": "c8d2ad8a-3015-406b-b7f0-a1ef05933e3c",
        "telegram_payment_charge_id": "7444575424_528155210_326297",
        "provider_payment_charge_id": "7444575424_528155210_326297",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 11:37:50,959 - root - INFO - Key created: OutlineKey(key_id='86', name='VPN Key73', password='J3UhrTdKU51dteowRWCZRL', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpKM1VoclRkS1U1MWR0ZW93UldDWlJM@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 11:37:51,269 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 11:37:51,278 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 11:37:51,279 - sqlalchemy.engine.Engine - INFO - [generated in 0.00107s] ('528155210', 1, 0)
2024-12-03 11:37:51,288 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-03 11:37:51,289 - sqlalchemy.engine.Engine - INFO - [generated in 0.00142s] ('86', '528155210', '2025-11-28 11:37:51.282307', '2024-12-03 11:37:51.282307')
2024-12-03 11:37:51,295 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 11:37:51,306 - aiogram.event - INFO - Update id=659305782 is handled. Duration 1657 ms by bot id=7444575424
2024-12-03 11:37:54,529 - aiogram.event - INFO - Update id=659305783 is handled. Duration 217 ms by bot id=7444575424
2024-12-03 11:38:24,444 - aiogram.event - INFO - Update id=659305784 is handled. Duration 344 ms by bot id=7444575424
2024-12-03 11:38:36,265 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 11:38:36,266 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 11:38:36,267 - sqlalchemy.engine.Engine - INFO - [cached since 44.99s ago] ('528155210', 1, 0)
2024-12-03 11:38:36,276 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 11:38:36,276 - sqlalchemy.engine.Engine - INFO - [generated in 0.00100s] ('528155210',)
2024-12-03 11:38:36,369 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 11:38:36,496 - aiogram.event - INFO - Update id=659305785 is handled. Duration 375 ms by bot id=7444575424
2024-12-03 11:39:15,772 - aiogram.event - INFO - Update id=659305786 is handled. Duration 500 ms by bot id=7444575424
2024-12-03 11:39:24,174 - aiogram.event - INFO - Update id=659305787 is handled. Duration 172 ms by bot id=7444575424
2024-12-03 11:39:25,561 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 11:39:25,562 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 11:39:25,562 - sqlalchemy.engine.Engine - INFO - [cached since 94.28s ago] ('528155210', 1, 0)
2024-12-03 11:39:25,836 - aiogram.event - INFO - Update id=659305788 is handled. Duration 280 ms by bot id=7444575424
2024-12-03 11:39:41,915 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 11:39:42,179 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 11:39:42,183 - root - INFO - Бот остановлен вручную.
2024-12-03 11:48:24,724 - root - INFO - Инициализация бота...
2024-12-03 11:48:24,741 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 11:48:24,741 - root - INFO - Инициализация диспетчера...
2024-12-03 11:48:24,742 - root - INFO - Регистрация обработчиков...
2024-12-03 11:48:24,744 - root - INFO - Запуск polling...
2024-12-03 11:48:24,745 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 11:48:24,745 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 11:48:24,745 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 11:48:24,746 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 11:48:24,747 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 11:48:24,748 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 11:48:25,034 - aiogram.dispatcher - INFO - Start polling
2024-12-03 11:48:25,095 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 11:48:31,729 - aiogram.event - INFO - Update id=659305789 is handled. Duration 375 ms by bot id=7444575424
2024-12-03 11:48:33,150 - aiogram.event - INFO - Update id=659305790 is handled. Duration 265 ms by bot id=7444575424
2024-12-03 11:48:34,261 - aiogram.event - INFO - Update id=659305791 is handled. Duration 172 ms by bot id=7444575424
2024-12-03 11:48:35,092 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 11:48:35,095 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 11:48:35,096 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ('528155210', 1, 0)
2024-12-03 11:48:35,098 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 11:48:35,099 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ('528155210',)
2024-12-03 11:48:35,184 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 11:48:35,322 - aiogram.event - INFO - Update id=659305792 is handled. Duration 327 ms by bot id=7444575424
2024-12-03 11:48:36,642 - aiogram.event - INFO - Update id=659305793 is handled. Duration 202 ms by bot id=7444575424
2024-12-03 11:48:41,425 - aiogram.event - INFO - Update id=659305794 is handled. Duration 156 ms by bot id=7444575424
2024-12-03 11:48:43,303 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 11:48:43,304 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 11:48:43,304 - sqlalchemy.engine.Engine - INFO - [cached since 8.209s ago] ('528155210', 1, 0)
2024-12-03 11:48:43,393 - aiogram.event - INFO - Update id=659305795 is handled. Duration 93 ms by bot id=7444575424
2024-12-03 11:48:44,734 - aiogram.event - INFO - Update id=659305796 is handled. Duration 186 ms by bot id=7444575424
2024-12-03 11:48:57,349 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 11:48:57,610 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 11:48:57,611 - root - INFO - Бот остановлен вручную.
2024-12-03 11:50:25,560 - root - INFO - Инициализация бота...
2024-12-03 11:50:25,589 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 11:51:22,583 - root - INFO - Инициализация бота...
2024-12-03 11:51:22,599 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 11:51:22,599 - root - INFO - Инициализация диспетчера...
2024-12-03 11:51:22,600 - root - INFO - Регистрация обработчиков...
2024-12-03 11:51:22,600 - root - ERROR - Произошла ошибка при запуске бота: name 'asyncio' is not defined
2024-12-03 11:52:12,250 - root - INFO - Инициализация бота...
2024-12-03 11:52:12,266 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 11:52:12,267 - root - INFO - Инициализация диспетчера...
2024-12-03 11:52:12,267 - root - INFO - Регистрация обработчиков...
2024-12-03 11:52:12,269 - root - INFO - Запуск polling...
2024-12-03 11:52:12,270 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 11:52:12,271 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 11:52:12,271 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 11:52:12,272 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 11:52:12,272 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 11:52:12,273 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 11:52:12,274 - root - ERROR - Произошла ошибка при запуске бота: name 'set_main_menu' is not defined
2024-12-03 11:52:28,101 - root - INFO - Инициализация бота...
2024-12-03 11:52:28,118 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 11:52:28,118 - root - INFO - Инициализация диспетчера...
2024-12-03 11:52:28,119 - root - INFO - Регистрация обработчиков...
2024-12-03 11:52:28,121 - root - INFO - Запуск polling...
2024-12-03 11:52:28,122 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 11:52:28,122 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 11:52:28,123 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 11:52:28,124 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 11:52:28,124 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 11:52:28,124 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 11:52:28,125 - aiogram.dispatcher - INFO - Start polling
2024-12-03 11:52:28,356 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 11:52:39,868 - aiogram.event - INFO - Update id=659305797 is handled. Duration 342 ms by bot id=7444575424
2024-12-03 11:52:41,238 - aiogram.event - INFO - Update id=659305798 is handled. Duration 140 ms by bot id=7444575424
2024-12-03 11:52:43,421 - aiogram.event - INFO - Update id=659305799 is handled. Duration 359 ms by bot id=7444575424
2024-12-03 11:52:50,701 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 11:52:50,960 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 11:52:50,962 - root - INFO - Бот остановлен вручную.
2024-12-03 11:59:41,357 - root - INFO - Инициализация бота...
2024-12-03 12:00:11,064 - root - INFO - Инициализация бота...
2024-12-03 12:00:54,629 - root - INFO - Инициализация бота...
2024-12-03 12:00:54,807 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 12:00:54,807 - root - INFO - Инициализация диспетчера...
2024-12-03 12:00:54,808 - root - INFO - Регистрация обработчиков...
2024-12-03 12:00:54,811 - root - INFO - Запуск polling...
2024-12-03 12:00:54,812 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 12:00:54,813 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 12:00:54,813 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:00:54,814 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 12:00:54,814 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:00:54,815 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 12:00:54,815 - aiogram.dispatcher - INFO - Start polling
2024-12-03 12:00:55,157 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 12:00:59,181 - aiogram.event - INFO - Update id=659305800 is handled. Duration 390 ms by bot id=7444575424
2024-12-03 12:01:00,447 - aiogram.event - INFO - Update id=659305801 is handled. Duration 359 ms by bot id=7444575424
2024-12-03 12:01:02,437 - aiogram.event - INFO - Update id=659305802 is handled. Duration 344 ms by bot id=7444575424
2024-12-03 12:01:04,598 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 12:07:59,781 - root - INFO - Инициализация бота...
2024-12-03 12:08:00,054 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 12:08:00,054 - root - INFO - Инициализация диспетчера...
2024-12-03 12:08:00,057 - root - INFO - Регистрация обработчиков...
2024-12-03 12:08:00,105 - root - INFO - Запуск polling...
2024-12-03 12:08:00,108 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 12:08:00,109 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 12:08:00,109 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:08:00,112 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 12:08:00,113 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:08:00,115 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 12:08:00,116 - aiogram.dispatcher - INFO - Start polling
2024-12-03 12:08:00,419 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 12:08:04,942 - aiogram.event - INFO - Update id=659305803 is handled. Duration 437 ms by bot id=7444575424
2024-12-03 12:08:05,975 - aiogram.event - INFO - Update id=659305804 is handled. Duration 171 ms by bot id=7444575424
2024-12-03 12:08:07,897 - aiogram.event - INFO - Update id=659305805 is handled. Duration 265 ms by bot id=7444575424
2024-12-03 12:08:09,134 - aiogram.event - INFO - Update id=659305806 is handled. Duration 407 ms by bot id=7444575424
2024-12-03 12:08:09,861 - aiogram.event - INFO - Update id=659305807 is not handled. Duration 0 ms by bot id=7444575424
2024-12-03 12:08:09,861 - aiogram.event - ERROR - Cause exception while process update id=659305807 by bot id=7444575424
NameError: name 'provider_token' is not defined
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 140, in handle_period_selection
    provider_token=provider_token,
                   ^^^^^^^^^^^^^^
NameError: name 'provider_token' is not defined
2024-12-03 12:08:14,978 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 12:08:15,253 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 12:08:15,258 - root - INFO - Бот остановлен вручную.
2024-12-03 12:09:02,112 - root - INFO - Инициализация бота...
2024-12-03 12:09:39,088 - root - INFO - Инициализация бота...
2024-12-03 12:09:39,279 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 12:09:39,280 - root - INFO - Инициализация диспетчера...
2024-12-03 12:09:39,281 - root - INFO - Регистрация обработчиков...
2024-12-03 12:09:39,313 - root - INFO - Запуск polling...
2024-12-03 12:09:39,315 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 12:09:39,316 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 12:09:39,316 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:09:39,317 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 12:09:39,318 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:09:39,319 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 12:09:39,319 - aiogram.dispatcher - INFO - Start polling
2024-12-03 12:09:39,574 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 12:09:40,098 - aiogram.event - INFO - Update id=659305808 is handled. Duration 405 ms by bot id=7444575424
2024-12-03 12:09:42,875 - aiogram.event - INFO - Update id=659305809 is handled. Duration 141 ms by bot id=7444575424
2024-12-03 12:09:44,601 - aiogram.event - INFO - Update id=659305810 is handled. Duration 312 ms by bot id=7444575424
2024-12-03 12:09:45,822 - aiogram.event - INFO - Update id=659305811 is handled. Duration 390 ms by bot id=7444575424
2024-12-03 12:10:12,496 - aiogram.event - INFO - Update id=659305812 is handled. Duration 219 ms by bot id=7444575424
2024-12-03 12:10:20,743 - root - INFO - {
    "message_id": 1456,
    "date": 1733217021,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 100000,
        "invoice_payload": "c7072d7d-2281-49c4-9c41-06560481a651",
        "telegram_payment_charge_id": "7444575424_528155210_326335",
        "provider_payment_charge_id": "7444575424_528155210_326335",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 12:10:21,882 - root - INFO - Key created: OutlineKey(key_id='87', name='VPN Key74', password='FlFLzxoUDUw802828iMWAl', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpGbEZMenhvVURVdzgwMjgyOGlNV0Fs@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 12:10:22,028 - root - ERROR - Ошибка обновления базы данных: type object 'DbProcessor' has no attribute 'session'
2024-12-03 12:10:22,028 - root - ERROR - Произошла ошибка: cannot access local variable 'session' where it is not associated with a value
2024-12-03 12:10:22,145 - aiogram.event - INFO - Update id=659305813 is handled. Duration 1407 ms by bot id=7444575424
2024-12-03 12:10:49,110 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 12:10:49,365 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 12:10:49,366 - root - INFO - Бот остановлен вручную.
2024-12-03 12:12:53,831 - root - INFO - Инициализация бота...
2024-12-03 12:12:54,079 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 12:12:54,079 - root - INFO - Инициализация диспетчера...
2024-12-03 12:12:54,082 - root - INFO - Регистрация обработчиков...
2024-12-03 12:12:54,085 - root - INFO - Запуск polling...
2024-12-03 12:12:54,088 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 12:12:54,089 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 12:12:54,090 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:12:54,092 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 12:12:54,093 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:12:54,093 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 12:12:54,094 - aiogram.dispatcher - INFO - Start polling
2024-12-03 12:12:54,404 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 12:12:55,504 - aiogram.event - INFO - Update id=659305814 is handled. Duration 969 ms by bot id=7444575424
2024-12-03 12:12:56,811 - aiogram.event - INFO - Update id=659305815 is handled. Duration 250 ms by bot id=7444575424
2024-12-03 12:12:57,837 - aiogram.event - INFO - Update id=659305816 is handled. Duration 202 ms by bot id=7444575424
2024-12-03 12:13:12,450 - aiogram.event - INFO - Update id=659305817 is handled. Duration 77 ms by bot id=7444575424
2024-12-03 12:13:21,831 - root - INFO - {
    "message_id": 1463,
    "date": 1733217203,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 100000,
        "invoice_payload": "fde32a0c-f9eb-4640-b568-4b04cf3d02df",
        "telegram_payment_charge_id": "7444575424_528155210_326342",
        "provider_payment_charge_id": "7444575424_528155210_326342",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 12:13:23,150 - root - INFO - Key created: OutlineKey(key_id='88', name='VPN Key75', password='sdUg1GsCEyKqGAhtxtO6ru', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpzZFVnMUdzQ0V5S3FHQWh0eHRPNnJ1@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 12:13:23,309 - root - ERROR - Ошибка обновления базы данных: 'sessionmaker' object has no attribute 'query'
2024-12-03 12:13:23,310 - root - ERROR - Произошла ошибка: 'sessionmaker' object has no attribute 'close'
2024-12-03 12:13:23,473 - aiogram.event - INFO - Update id=659305818 is handled. Duration 1640 ms by bot id=7444575424
2024-12-03 12:13:50,300 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 12:13:50,564 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 12:13:50,566 - root - INFO - Бот остановлен вручную.
2024-12-03 12:16:04,713 - root - INFO - Инициализация бота...
2024-12-03 12:17:05,768 - root - INFO - Инициализация бота...
2024-12-03 12:17:05,888 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 12:17:05,888 - root - INFO - Инициализация диспетчера...
2024-12-03 12:17:05,889 - root - INFO - Регистрация обработчиков...
2024-12-03 12:17:05,891 - root - INFO - Запуск polling...
2024-12-03 12:17:05,892 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 12:17:05,892 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 12:17:05,892 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:17:05,894 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 12:17:05,894 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:17:05,894 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 12:17:05,895 - aiogram.dispatcher - INFO - Start polling
2024-12-03 12:17:06,172 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 12:17:10,306 - aiogram.event - INFO - Update id=659305819 is handled. Duration 375 ms by bot id=7444575424
2024-12-03 12:17:11,360 - aiogram.event - INFO - Update id=659305820 is handled. Duration 140 ms by bot id=7444575424
2024-12-03 12:17:12,434 - aiogram.event - INFO - Update id=659305821 is handled. Duration 204 ms by bot id=7444575424
2024-12-03 12:17:22,991 - aiogram.event - INFO - Update id=659305822 is handled. Duration 61 ms by bot id=7444575424
2024-12-03 12:17:31,412 - root - INFO - {
    "message_id": 1470,
    "date": 1733217452,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 100000,
        "invoice_payload": "9e916f59-27dc-42b2-8e7f-9020f1685199",
        "telegram_payment_charge_id": "7444575424_528155210_326349",
        "provider_payment_charge_id": "7444575424_528155210_326349",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 12:17:32,595 - root - INFO - Key created: OutlineKey(key_id='89', name='VPN Key76', password='5Eu79qcwMNHmRZX5BuzF0C', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTo1RXU3OXFjd01OSG1SWlg1QnV6RjBD@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 12:17:32,823 - root - ERROR - Ошибка обновления базы данных: 'sessionmaker' object has no attribute 'query'
2024-12-03 12:17:32,823 - root - ERROR - Произошла ошибка: 'sessionmaker' object has no attribute 'close'
2024-12-03 12:17:32,932 - aiogram.event - INFO - Update id=659305823 is handled. Duration 1532 ms by bot id=7444575424
2024-12-03 12:17:38,064 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 12:17:38,315 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 12:17:38,316 - root - INFO - Бот остановлен вручную.
2024-12-03 12:17:57,039 - root - INFO - Инициализация бота...
2024-12-03 12:18:28,652 - root - INFO - Инициализация бота...
2024-12-03 12:18:28,906 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 12:18:28,906 - root - INFO - Инициализация диспетчера...
2024-12-03 12:18:28,908 - root - INFO - Регистрация обработчиков...
2024-12-03 12:18:28,911 - root - INFO - Запуск polling...
2024-12-03 12:18:28,914 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 12:18:28,914 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 12:18:28,914 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:18:28,916 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 12:18:28,917 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:18:28,918 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 12:18:28,918 - aiogram.dispatcher - INFO - Start polling
2024-12-03 12:18:29,153 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 12:18:33,776 - aiogram.event - INFO - Update id=659305824 is handled. Duration 405 ms by bot id=7444575424
2024-12-03 12:18:35,080 - aiogram.event - INFO - Update id=659305825 is handled. Duration 250 ms by bot id=7444575424
2024-12-03 12:18:35,992 - aiogram.event - INFO - Update id=659305826 is handled. Duration 155 ms by bot id=7444575424
2024-12-03 12:18:45,165 - aiogram.event - INFO - Update id=659305827 is handled. Duration 109 ms by bot id=7444575424
2024-12-03 12:18:53,621 - root - INFO - {
    "message_id": 1477,
    "date": 1733217534,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 100000,
        "invoice_payload": "1c1a61d8-c63e-4c87-b5a8-d4d2a514d573",
        "telegram_payment_charge_id": "7444575424_528155210_326356",
        "provider_payment_charge_id": "7444575424_528155210_326356",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 12:18:55,086 - root - INFO - Key created: OutlineKey(key_id='90', name='VPN Key77', password='tBR1ATMkRFB7yCSGPs8PFn', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTp0QlIxQVRNa1JGQjd5Q1NHUHM4UEZu@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 12:18:55,292 - root - ERROR - Ошибка обновления базы данных: 'DbProcessor' object has no attribute 'session'
2024-12-03 12:18:55,293 - root - ERROR - Произошла ошибка: cannot access local variable 'session' where it is not associated with a value
2024-12-03 12:18:55,479 - aiogram.event - INFO - Update id=659305828 is handled. Duration 1858 ms by bot id=7444575424
2024-12-03 12:18:57,647 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 12:18:57,941 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 12:18:57,946 - root - INFO - Бот остановлен вручную.
2024-12-03 12:19:57,462 - root - INFO - Инициализация бота...
2024-12-03 12:19:57,598 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 12:19:57,598 - root - INFO - Инициализация диспетчера...
2024-12-03 12:19:57,599 - root - INFO - Регистрация обработчиков...
2024-12-03 12:19:57,601 - root - INFO - Запуск polling...
2024-12-03 12:19:57,602 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 12:19:57,602 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 12:19:57,602 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:19:57,603 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 12:19:57,604 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:19:57,604 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 12:19:57,604 - aiogram.dispatcher - INFO - Start polling
2024-12-03 12:19:57,961 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 12:20:01,703 - aiogram.event - INFO - Update id=659305829 is handled. Duration 390 ms by bot id=7444575424
2024-12-03 12:20:02,787 - aiogram.event - INFO - Update id=659305830 is handled. Duration 187 ms by bot id=7444575424
2024-12-03 12:20:03,823 - aiogram.event - INFO - Update id=659305831 is handled. Duration 327 ms by bot id=7444575424
2024-12-03 12:20:12,871 - aiogram.event - INFO - Update id=659305832 is handled. Duration 94 ms by bot id=7444575424
2024-12-03 12:20:20,903 - root - INFO - {
    "message_id": 1484,
    "date": 1733217622,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 100000,
        "invoice_payload": "1c9dba39-4445-4300-a2ce-6bc94562254d",
        "telegram_payment_charge_id": "7444575424_528155210_326363",
        "provider_payment_charge_id": "7444575424_528155210_326363",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 12:20:22,154 - root - INFO - Key created: OutlineKey(key_id='91', name='VPN Key78', password='UZkb4cLB5B4zmzSqUTzwlW', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpVWmtiNGNMQjVCNHptelNxVVR6d2xX@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 12:20:22,338 - root - ERROR - Ошибка обновления базы данных: 'sessionmaker' object has no attribute 'query'
2024-12-03 12:20:22,338 - root - ERROR - Произошла ошибка: 'sessionmaker' object has no attribute 'close'
2024-12-03 12:20:22,480 - aiogram.event - INFO - Update id=659305833 is handled. Duration 1577 ms by bot id=7444575424
2024-12-03 12:20:26,531 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 12:20:26,803 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 12:20:26,804 - root - INFO - Бот остановлен вручную.
2024-12-03 12:30:26,060 - root - INFO - Инициализация бота...
2024-12-03 12:30:26,330 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 12:30:26,330 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 12:30:26,331 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:30:26,332 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 12:30:26,333 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:30:26,333 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 12:30:26,337 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 12:30:26,338 - root - INFO - Инициализация диспетчера...
2024-12-03 12:30:26,339 - root - INFO - Регистрация обработчиков...
2024-12-03 12:30:26,342 - root - INFO - Запуск polling...
2024-12-03 12:30:26,343 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 12:30:26,344 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 12:30:26,344 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:30:26,345 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 12:30:26,345 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:30:26,346 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 12:30:26,347 - aiogram.dispatcher - INFO - Start polling
2024-12-03 12:30:26,698 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 12:30:27,220 - aiogram.event - INFO - Update id=659305834 is handled. Duration 405 ms by bot id=7444575424
2024-12-03 12:30:29,769 - aiogram.event - INFO - Update id=659305835 is handled. Duration 125 ms by bot id=7444575424
2024-12-03 12:30:31,336 - aiogram.event - INFO - Update id=659305836 is handled. Duration 202 ms by bot id=7444575424
2024-12-03 12:30:32,590 - aiogram.event - INFO - Update id=659305837 is handled. Duration 343 ms by bot id=7444575424
2024-12-03 12:30:53,995 - aiogram.event - INFO - Update id=659305838 is handled. Duration 250 ms by bot id=7444575424
2024-12-03 12:31:02,055 - root - INFO - {
    "message_id": 1493,
    "date": 1733218263,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 100000,
        "invoice_payload": "9cbf10a7-be1e-40d9-8461-fcd69a92b422",
        "telegram_payment_charge_id": "7444575424_528155210_326372",
        "provider_payment_charge_id": "7444575424_528155210_326372",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 12:31:03,119 - root - INFO - Key created: OutlineKey(key_id='92', name='VPN Key79', password='a1Ek84i6jiu9N5CjfMpPiM', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTphMUVrODRpNmppdTlONUNqZk1wUGlN@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 12:31:03,230 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 12:31:03,233 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 12:31:03,233 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ('528155210', 1, 0)
2024-12-03 12:31:03,236 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-03 12:31:03,237 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ('92', '528155210', '2025-11-28 12:31:03.234460', '2024-12-03 12:31:03.234460')
2024-12-03 12:31:03,238 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 12:31:03,244 - aiogram.event - INFO - Update id=659305839 is handled. Duration 1202 ms by bot id=7444575424
2024-12-03 12:31:07,272 - aiogram.event - INFO - Update id=659305840 is handled. Duration 234 ms by bot id=7444575424
2024-12-03 12:31:08,984 - aiogram.event - INFO - Update id=659305841 is handled. Duration 202 ms by bot id=7444575424
2024-12-03 12:31:12,782 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 12:31:12,782 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 12:31:12,782 - sqlalchemy.engine.Engine - INFO - [cached since 9.549s ago] ('528155210', 1, 0)
2024-12-03 12:31:12,784 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 12:31:12,784 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ('528155210',)
2024-12-03 12:31:12,870 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 12:31:13,010 - aiogram.event - INFO - Update id=659305842 is handled. Duration 390 ms by bot id=7444575424
2024-12-03 12:31:15,172 - aiogram.event - INFO - Update id=659305843 is handled. Duration 281 ms by bot id=7444575424
2024-12-03 12:31:18,606 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 12:31:18,878 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 12:31:18,880 - root - INFO - Бот остановлен вручную.
2024-12-03 12:54:46,483 - root - INFO - Инициализация бота...
2024-12-03 12:54:46,661 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 12:54:46,661 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 12:54:46,661 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:54:46,663 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 12:54:46,663 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:54:46,664 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 12:54:46,667 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 12:54:46,667 - root - INFO - Инициализация диспетчера...
2024-12-03 12:54:46,668 - root - INFO - Регистрация обработчиков...
2024-12-03 12:55:48,795 - root - INFO - Инициализация бота...
2024-12-03 12:55:48,995 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 12:55:48,996 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 12:55:48,996 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:55:48,997 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 12:55:48,998 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:55:48,999 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 12:55:49,018 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 12:55:49,018 - root - INFO - Инициализация диспетчера...
2024-12-03 12:55:49,019 - root - INFO - Регистрация обработчиков...
2024-12-03 12:56:10,580 - root - INFO - Инициализация бота...
2024-12-03 12:56:10,725 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 12:56:10,726 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 12:56:10,726 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:56:10,728 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 12:56:10,728 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 12:56:10,728 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 12:56:10,737 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 12:56:10,737 - root - INFO - Инициализация диспетчера...
2024-12-03 12:56:10,738 - root - INFO - Регистрация обработчиков...
2024-12-03 12:56:10,739 - root - INFO - Запуск polling...
2024-12-03 12:56:10,739 - aiogram.dispatcher - INFO - Start polling
2024-12-03 12:56:11,085 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 12:56:17,802 - aiogram.event - INFO - Update id=659305844 is handled. Duration 359 ms by bot id=7444575424
2024-12-03 12:56:19,220 - aiogram.event - INFO - Update id=659305845 is handled. Duration 140 ms by bot id=7444575424
2024-12-03 12:56:20,171 - aiogram.event - INFO - Update id=659305846 is handled. Duration 141 ms by bot id=7444575424
2024-12-03 12:56:35,720 - aiogram.event - INFO - Update id=659305847 is handled. Duration 234 ms by bot id=7444575424
2024-12-03 12:56:43,587 - root - INFO - {
    "message_id": 1504,
    "date": 1733219804,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 100000,
        "invoice_payload": "18f7f0fe-86b5-46dc-bbe6-045c81c98b8b",
        "telegram_payment_charge_id": "7444575424_528155210_326383",
        "provider_payment_charge_id": "7444575424_528155210_326383",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 12:56:44,895 - root - INFO - Key created: OutlineKey(key_id='93', name='VPN Key80', password='axZspomebq8JWYl8xMxQNl', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpheFpzcG9tZWJxOEpXWWw4eE14UU5s@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 12:56:44,896 - root - INFO - Key created: OutlineKey(key_id='93', name='VPN Key80', password='axZspomebq8JWYl8xMxQNl', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpheFpzcG9tZWJxOEpXWWw4eE14UU5s@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 12:56:44,992 - root - ERROR - Произошла ошибка: 'OutlineProcessor' object has no attribute 'update_database_with_key'
2024-12-03 12:56:45,084 - aiogram.event - INFO - Update id=659305848 is handled. Duration 1500 ms by bot id=7444575424
2024-12-03 12:56:57,339 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 12:56:57,604 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 12:56:57,606 - root - INFO - Бот остановлен вручную.
2024-12-03 13:00:55,600 - root - INFO - Инициализация бота...
2024-12-03 13:00:55,714 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 13:00:55,714 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 13:00:55,714 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 13:00:55,715 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 13:00:55,715 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 13:00:55,716 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 13:00:55,723 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 13:00:55,724 - root - INFO - Инициализация диспетчера...
2024-12-03 13:00:55,724 - root - INFO - Регистрация обработчиков...
2024-12-03 13:00:55,725 - root - INFO - Запуск polling...
2024-12-03 13:00:55,726 - aiogram.dispatcher - INFO - Start polling
2024-12-03 13:00:56,023 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 13:01:00,354 - aiogram.event - INFO - Update id=659305849 is handled. Duration 545 ms by bot id=7444575424
2024-12-03 13:01:01,833 - aiogram.event - INFO - Update id=659305850 is handled. Duration 155 ms by bot id=7444575424
2024-12-03 13:01:03,618 - aiogram.event - INFO - Update id=659305851 is handled. Duration 156 ms by bot id=7444575424
2024-12-03 13:01:16,077 - aiogram.event - INFO - Update id=659305852 is handled. Duration 77 ms by bot id=7444575424
2024-12-03 13:01:23,055 - root - INFO - {
    "message_id": 1511,
    "date": 1733220084,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 50000,
        "invoice_payload": "dc848831-7f97-4b4d-85ae-a4ed1f9de9ba",
        "telegram_payment_charge_id": "7444575424_528155210_326390",
        "provider_payment_charge_id": "7444575424_528155210_326390",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 13:01:24,411 - root - INFO - Key created: OutlineKey(key_id='94', name='VPN Key81', password='YXIfANC2fwp6L4BQaSDjp6', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpZWElmQU5DMmZ3cDZMNEJRYVNEanA2@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 13:01:24,411 - root - INFO - Key created: OutlineKey(key_id='94', name='VPN Key81', password='YXIfANC2fwp6L4BQaSDjp6', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpZWElmQU5DMmZ3cDZMNEJRYVNEanA2@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 13:01:24,549 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 13:01:24,553 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 13:01:24,553 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ('528155210', 1, 0)
2024-12-03 13:01:24,557 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-03 13:01:24,558 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ('94', '528155210', '2025-06-01 13:01:24.554889', '2024-12-03 13:01:24.554889')
2024-12-03 13:01:24,562 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 13:01:24,567 - root - ERROR - Произошла ошибка: object NoneType can't be used in 'await' expression
2024-12-03 13:01:24,647 - aiogram.event - INFO - Update id=659305853 is handled. Duration 1593 ms by bot id=7444575424
2024-12-03 13:02:17,157 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 13:02:17,413 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 13:02:17,415 - root - INFO - Бот остановлен вручную.
2024-12-03 13:02:51,053 - root - INFO - Инициализация бота...
2024-12-03 13:02:51,194 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 13:02:51,194 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 13:02:51,195 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 13:02:51,196 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 13:02:51,196 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 13:02:51,197 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 13:02:51,207 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 13:02:51,207 - root - INFO - Инициализация диспетчера...
2024-12-03 13:02:51,208 - root - INFO - Регистрация обработчиков...
2024-12-03 13:02:51,209 - root - INFO - Запуск polling...
2024-12-03 13:02:51,210 - aiogram.dispatcher - INFO - Start polling
2024-12-03 13:02:51,437 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 13:02:51,921 - aiogram.event - INFO - Update id=659305854 is handled. Duration 391 ms by bot id=7444575424
2024-12-03 13:02:53,286 - aiogram.event - INFO - Update id=659305855 is handled. Duration 140 ms by bot id=7444575424
2024-12-03 13:02:54,837 - aiogram.event - INFO - Update id=659305856 is handled. Duration 172 ms by bot id=7444575424
2024-12-03 13:03:03,795 - aiogram.event - INFO - Update id=659305857 is handled. Duration 500 ms by bot id=7444575424
2024-12-03 13:03:11,548 - root - INFO - {
    "message_id": 1518,
    "date": 1733220192,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 10000,
        "invoice_payload": "8ccb896b-7cb5-4459-b898-32eda98e3e2a",
        "telegram_payment_charge_id": "7444575424_528155210_326397",
        "provider_payment_charge_id": "7444575424_528155210_326397",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 13:03:12,711 - root - INFO - Key created: OutlineKey(key_id='95', name='VPN Key82', password='YmO2WD5SuKhOF3z19n9sUS', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpZbU8yV0Q1U3VLaE9GM3oxOW45c1VT@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 13:03:12,719 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 13:03:12,721 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 13:03:12,721 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('528155210', 1, 0)
2024-12-03 13:03:12,723 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-03 13:03:12,723 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ('95', '528155210', '2025-03-03 13:03:12.722234', '2024-12-03 13:03:12.722234')
2024-12-03 13:03:12,725 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 13:03:12,730 - root - ERROR - Произошла ошибка: object NoneType can't be used in 'await' expression
2024-12-03 13:03:12,817 - aiogram.event - INFO - Update id=659305858 is handled. Duration 1265 ms by bot id=7444575424
2024-12-03 13:03:22,148 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 13:03:22,407 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 13:03:22,409 - root - INFO - Бот остановлен вручную.
2024-12-03 13:04:06,983 - root - INFO - Инициализация бота...
2024-12-03 13:04:07,075 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 13:04:07,075 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 13:04:07,075 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 13:04:07,076 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 13:04:07,076 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 13:04:07,076 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 13:04:07,083 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 13:04:07,083 - root - INFO - Инициализация диспетчера...
2024-12-03 13:04:07,084 - root - INFO - Регистрация обработчиков...
2024-12-03 13:04:07,085 - root - INFO - Запуск polling...
2024-12-03 13:04:07,085 - aiogram.dispatcher - INFO - Start polling
2024-12-03 13:04:07,312 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 13:04:11,930 - aiogram.event - INFO - Update id=659305859 is handled. Duration 328 ms by bot id=7444575424
2024-12-03 13:04:12,944 - aiogram.event - INFO - Update id=659305860 is handled. Duration 157 ms by bot id=7444575424
2024-12-03 13:04:14,641 - aiogram.event - INFO - Update id=659305861 is handled. Duration 202 ms by bot id=7444575424
2024-12-03 13:04:23,375 - aiogram.event - INFO - Update id=659305862 is handled. Duration 94 ms by bot id=7444575424
2024-12-03 13:04:30,964 - root - INFO - {
    "message_id": 1524,
    "date": 1733220272,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 50000,
        "invoice_payload": "9f3c2636-e0db-482a-9316-9b93fd597008",
        "telegram_payment_charge_id": "7444575424_528155210_326403",
        "provider_payment_charge_id": "7444575424_528155210_326403",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 13:04:32,868 - root - INFO - Key created: OutlineKey(key_id='96', name='VPN Key83', password='g0byoyoL0y7wIRI35N7yp3', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpnMGJ5b3lvTDB5N3dJUkkzNU43eXAz@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 13:04:32,868 - root - INFO - Key created: OutlineKey(key_id='96', name='VPN Key83', password='g0byoyoL0y7wIRI35N7yp3', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpnMGJ5b3lvTDB5N3dJUkkzNU43eXAz@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 13:04:32,964 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 13:04:32,969 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 13:04:32,969 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ('528155210', 1, 0)
2024-12-03 13:04:32,971 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-03 13:04:32,972 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] ('96', '528155210', '2025-06-01 13:04:32.970662', '2024-12-03 13:04:32.970662')
2024-12-03 13:04:32,975 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 13:04:32,980 - aiogram.event - INFO - Update id=659305863 is handled. Duration 2015 ms by bot id=7444575424
2024-12-03 13:04:35,966 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 13:07:46,898 - root - INFO - Инициализация бота...
2024-12-03 13:07:47,098 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 13:07:47,098 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 13:07:47,099 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 13:07:47,101 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 13:07:47,101 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 13:07:47,102 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 13:07:47,121 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 13:07:47,121 - root - INFO - Инициализация диспетчера...
2024-12-03 13:07:47,122 - root - INFO - Регистрация обработчиков...
2024-12-03 13:07:47,124 - root - INFO - Запуск polling...
2024-12-03 13:07:47,124 - aiogram.dispatcher - INFO - Start polling
2024-12-03 13:07:48,434 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 13:07:55,105 - aiogram.event - INFO - Update id=659305864 is handled. Duration 500 ms by bot id=7444575424
2024-12-03 13:07:56,012 - aiogram.event - INFO - Update id=659305865 is handled. Duration 157 ms by bot id=7444575424
2024-12-03 13:07:57,211 - aiogram.event - INFO - Update id=659305866 is handled. Duration 155 ms by bot id=7444575424
2024-12-03 13:07:58,036 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 13:07:58,042 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 13:07:58,042 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] ('528155210', 1, 0)
2024-12-03 13:07:58,048 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 13:07:58,048 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('528155210',)
2024-12-03 13:07:58,181 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 13:07:58,316 - aiogram.event - INFO - Update id=659305867 is handled. Duration 359 ms by bot id=7444575424
2024-12-03 13:08:02,533 - aiogram.event - INFO - Update id=659305868 is handled. Duration 640 ms by bot id=7444575424
2024-12-03 13:08:06,597 - aiogram.event - INFO - Update id=659305869 is handled. Duration 296 ms by bot id=7444575424
2024-12-03 13:15:53,195 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 13:15:53,461 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 13:15:53,463 - root - INFO - Бот остановлен вручную.
2024-12-03 13:17:40,379 - root - INFO - Инициализация бота...
2024-12-03 13:17:40,519 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 13:17:40,519 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 13:17:40,519 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 13:17:40,520 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 13:17:40,521 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 13:17:40,521 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 13:17:40,532 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 13:17:40,532 - root - INFO - Инициализация диспетчера...
2024-12-03 13:17:40,533 - root - INFO - Регистрация обработчиков...
2024-12-03 13:17:40,534 - root - INFO - Запуск polling...
2024-12-03 13:17:40,534 - aiogram.dispatcher - INFO - Start polling
2024-12-03 13:17:40,788 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 13:17:45,813 - aiogram.event - INFO - Update id=659305870 is handled. Duration 297 ms by bot id=7444575424
2024-12-03 13:17:47,488 - aiogram.event - INFO - Update id=659305871 is handled. Duration 171 ms by bot id=7444575424
2024-12-03 13:17:49,343 - aiogram.event - INFO - Update id=659305872 is handled. Duration 577 ms by bot id=7444575424
2024-12-03 13:18:02,927 - aiogram.event - INFO - Update id=659305873 is handled. Duration 62 ms by bot id=7444575424
2024-12-03 13:18:10,385 - root - INFO - {
    "message_id": 1538,
    "date": 1733221090,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 10000,
        "invoice_payload": "7a1ed6f4-6b19-45ee-a660-0fd232910f96",
        "telegram_payment_charge_id": "7444575424_528155210_326426",
        "provider_payment_charge_id": "7444575424_528155210_326426",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 13:18:12,225 - root - INFO - Key created: OutlineKey(key_id='97', name='VPN Key84', password='iYGG4t0jitNMatPHKlGprE', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTppWUdHNHQwaml0Tk1hdFBIS2xHcHJF@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 13:18:12,225 - root - INFO - Key created: OutlineKey(key_id='97', name='VPN Key84', password='iYGG4t0jitNMatPHKlGprE', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTppWUdHNHQwaml0Tk1hdFBIS2xHcHJF@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 13:18:12,322 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 13:18:12,325 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 13:18:12,325 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('528155210', 1, 0)
2024-12-03 13:18:12,329 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-03 13:18:12,329 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('97', '528155210', '2025-03-03 13:18:12.326555', '2024-12-03 13:18:12.326555')
2024-12-03 13:18:12,331 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 13:18:12,337 - aiogram.event - INFO - Update id=659305874 is handled. Duration 1954 ms by bot id=7444575424
2024-12-03 13:41:52,722 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 13:41:52,981 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 13:41:52,987 - root - INFO - Бот остановлен вручную.
2024-12-03 13:58:17,341 - root - INFO - Инициализация бота...
2024-12-03 13:58:17,492 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 13:58:17,492 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 13:58:17,492 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 13:58:17,494 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 13:58:17,494 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 13:58:17,494 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 13:58:41,000 - root - INFO - Инициализация бота...
2024-12-03 13:58:41,133 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 13:58:41,133 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 13:58:41,134 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 13:58:41,135 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 13:58:41,135 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 13:58:41,135 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 13:58:41,148 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 13:58:41,148 - root - INFO - Инициализация диспетчера...
2024-12-03 13:58:41,149 - root - INFO - Регистрация обработчиков...
2024-12-03 13:58:41,151 - root - INFO - Запуск polling...
2024-12-03 13:58:41,151 - aiogram.dispatcher - INFO - Start polling
2024-12-03 13:58:41,472 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 13:58:50,431 - aiogram.event - INFO - Update id=659305875 is handled. Duration 515 ms by bot id=7444575424
2024-12-03 13:58:51,707 - aiogram.event - INFO - Update id=659305876 is handled. Duration 250 ms by bot id=7444575424
2024-12-03 13:58:53,112 - aiogram.event - INFO - Update id=659305877 is handled. Duration 421 ms by bot id=7444575424
2024-12-03 13:59:05,356 - aiogram.event - INFO - Update id=659305878 is handled. Duration 77 ms by bot id=7444575424
2024-12-03 13:59:13,823 - root - INFO - {
    "message_id": 1544,
    "date": 1733223553,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 100000,
        "invoice_payload": "b18f792b-4645-4c48-aec3-c66f5900bbbb",
        "telegram_payment_charge_id": "7444575424_528155210_326563",
        "provider_payment_charge_id": "7444575424_528155210_326563",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-03 13:59:15,049 - root - INFO - Key created: OutlineKey(key_id='98', name='VPN Key85', password='x8To5OQE8o7uq4S86rpoja', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTp4OFRvNU9RRThvN3VxNFM4NnJwb2ph@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 13:59:15,050 - root - INFO - Key created: OutlineKey(key_id='98', name='VPN Key85', password='x8To5OQE8o7uq4S86rpoja', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTp4OFRvNU9RRThvN3VxNFM4NnJwb2ph@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-03 13:59:15,230 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 13:59:15,248 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 13:59:15,249 - sqlalchemy.engine.Engine - INFO - [generated in 0.00187s] ('528155210', 1, 0)
2024-12-03 13:59:15,259 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date) VALUES (?, ?, ?, ?)
2024-12-03 13:59:15,259 - sqlalchemy.engine.Engine - INFO - [generated in 0.00108s] ('98', '528155210', '2025-11-28 13:59:15.252579', '2024-12-03 13:59:15.252579')
2024-12-03 13:59:15,267 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 13:59:15,278 - aiogram.event - INFO - Update id=659305879 is handled. Duration 1468 ms by bot id=7444575424
2024-12-03 13:59:17,442 - aiogram.event - INFO - Update id=659305880 is handled. Duration 203 ms by bot id=7444575424
2024-12-03 13:59:20,798 - aiogram.event - INFO - Update id=659305881 is handled. Duration 217 ms by bot id=7444575424
2024-12-03 13:59:23,387 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 13:59:23,389 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 13:59:23,390 - sqlalchemy.engine.Engine - INFO - [cached since 8.143s ago] ('528155210', 1, 0)
2024-12-03 13:59:23,404 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 13:59:23,405 - sqlalchemy.engine.Engine - INFO - [generated in 0.00104s] ('528155210',)
2024-12-03 13:59:23,655 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 13:59:23,997 - aiogram.event - INFO - Update id=659305882 is handled. Duration 780 ms by bot id=7444575424
2024-12-03 13:59:25,165 - aiogram.event - INFO - Update id=659305883 is handled. Duration 218 ms by bot id=7444575424
2024-12-03 13:59:27,525 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 14:25:35,609 - root - INFO - Инициализация бота...
2024-12-03 14:25:35,851 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 14:25:35,853 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 14:25:35,853 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 14:25:35,854 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 14:25:35,854 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 14:25:35,855 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 14:27:36,337 - root - INFO - Инициализация бота...
2024-12-03 14:27:36,505 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 14:27:36,505 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 14:27:36,506 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 14:27:36,508 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 14:27:36,508 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 14:27:36,509 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 14:34:50,217 - root - INFO - Инициализация бота...
2024-12-03 14:34:50,445 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 14:34:50,446 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 14:34:50,446 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 14:34:50,448 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 14:34:50,448 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 14:34:50,450 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 14:34:50,476 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 14:34:50,476 - root - INFO - Инициализация диспетчера...
2024-12-03 14:34:50,478 - root - INFO - Регистрация обработчиков...
2024-12-03 14:34:50,480 - root - INFO - Запуск polling...
2024-12-03 14:34:50,481 - aiogram.dispatcher - INFO - Start polling
2024-12-03 14:34:50,811 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 14:34:56,364 - aiogram.event - INFO - Update id=659305884 is handled. Duration 515 ms by bot id=7444575424
2024-12-03 14:34:57,849 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 14:34:57,857 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 14:34:57,858 - sqlalchemy.engine.Engine - INFO - [generated in 0.00139s] ('528155210', 1, 0)
2024-12-03 14:34:57,868 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 14:34:57,868 - sqlalchemy.engine.Engine - INFO - [generated in 0.00099s] ('528155210',)
2024-12-03 14:34:58,022 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 14:34:58,188 - aiogram.event - INFO - Update id=659305885 is handled. Duration 438 ms by bot id=7444575424
2024-12-03 14:35:00,368 - aiogram.event - INFO - Update id=659305886 is handled. Duration 312 ms by bot id=7444575424
2024-12-03 14:35:02,231 - aiogram.event - INFO - Update id=659305887 is handled. Duration 405 ms by bot id=7444575424
2024-12-03 14:35:05,777 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 14:35:05,778 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 14:35:05,778 - sqlalchemy.engine.Engine - INFO - [cached since 7.921s ago] ('528155210', 1, 0)
2024-12-03 14:35:05,962 - aiogram.event - INFO - Update id=659305888 is handled. Duration 187 ms by bot id=7444575424
2024-12-03 14:35:07,932 - aiogram.event - INFO - Update id=659305889 is handled. Duration 217 ms by bot id=7444575424
2024-12-03 14:35:09,636 - aiogram.event - INFO - Update id=659305890 is handled. Duration 500 ms by bot id=7444575424
2024-12-03 14:35:15,411 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 14:36:21,079 - root - INFO - Инициализация бота...
2024-12-03 14:36:21,283 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 14:36:21,283 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-03 14:36:21,284 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 14:36:21,285 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-03 14:36:21,285 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-03 14:36:21,286 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-03 14:36:21,303 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-03 14:36:21,303 - root - INFO - Инициализация диспетчера...
2024-12-03 14:36:21,303 - root - INFO - Регистрация обработчиков...
2024-12-03 14:36:21,305 - root - INFO - Запуск polling...
2024-12-03 14:36:21,306 - aiogram.dispatcher - INFO - Start polling
2024-12-03 14:36:21,661 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-03 14:36:26,764 - aiogram.event - INFO - Update id=659305891 is handled. Duration 406 ms by bot id=7444575424
2024-12-03 14:36:28,444 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 14:36:28,449 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 14:36:28,450 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] ('528155210', 1, 0)
2024-12-03 14:36:28,456 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-03 14:36:28,457 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] ('528155210',)
2024-12-03 14:36:28,587 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-03 14:36:28,774 - aiogram.event - INFO - Update id=659305892 is handled. Duration 452 ms by bot id=7444575424
2024-12-03 14:36:29,971 - aiogram.event - INFO - Update id=659305893 is handled. Duration 297 ms by bot id=7444575424
2024-12-03 14:36:31,413 - aiogram.event - INFO - Update id=659305894 is handled. Duration 250 ms by bot id=7444575424
2024-12-03 14:36:32,687 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-03 14:36:32,690 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-03 14:36:32,691 - sqlalchemy.engine.Engine - INFO - [cached since 4.242s ago] ('528155210', 1, 0)
2024-12-03 14:36:32,822 - aiogram.event - INFO - Update id=659305895 is handled. Duration 141 ms by bot id=7444575424
2024-12-03 14:36:34,586 - aiogram.event - INFO - Update id=659305896 is handled. Duration 484 ms by bot id=7444575424
2024-12-03 14:36:47,807 - aiogram.dispatcher - INFO - Polling stopped
2024-12-03 17:52:36,444 - root - INFO - РРЅРёС†РёР°Р»РёР·Р°С†РёСЏ Р±РѕС‚Р°...
2024-12-04 01:08:00,355 - root - INFO - Инициализация бота...
2024-12-04 01:08:00,975 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 01:08:00,975 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 01:08:00,976 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 01:08:00,980 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 01:08:00,980 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 01:08:00,981 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 01:08:00,981 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 01:08:00,982 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 01:08:00,983 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 01:08:00,984 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 01:08:00,984 - sqlalchemy.engine.Engine - INFO - [no key 0.00038s] ()
2024-12-04 01:08:00,997 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 01:08:00,997 - sqlalchemy.engine.Engine - INFO - [no key 0.00044s] ()
2024-12-04 01:08:01,006 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 01:08:01,059 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 01:08:01,059 - root - INFO - Инициализация диспетчера...
2024-12-04 01:08:01,062 - root - INFO - Регистрация обработчиков...
2024-12-04 01:08:01,065 - root - INFO - Запуск polling...
2024-12-04 01:08:01,065 - aiogram.dispatcher - INFO - Start polling
2024-12-04 01:08:01,418 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 01:08:02,231 - aiogram.event - INFO - Update id=659306101 is handled. Duration 577 ms by bot id=7444575424
2024-12-04 01:08:11,870 - aiogram.event - INFO - Update id=659306102 is handled. Duration 202 ms by bot id=7444575424
2024-12-04 01:08:13,586 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 01:08:13,599 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 01:08:13,600 - sqlalchemy.engine.Engine - INFO - [generated in 0.00152s] ('528155210', 1, 0)
2024-12-04 01:08:13,736 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 01:08:13,921 - aiogram.event - INFO - Update id=659306103 is handled. Duration 452 ms by bot id=7444575424
2024-12-04 01:08:16,603 - aiogram.event - INFO - Update id=659306104 is not handled. Duration 0 ms by bot id=7444575424
2024-12-04 01:08:18,545 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 01:08:18,547 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 01:08:18,547 - sqlalchemy.engine.Engine - INFO - [cached since 4.949s ago] ('528155210', 1, 0)
2024-12-04 01:08:18,552 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 01:08:18,553 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ('528155210', 'active', 0)
2024-12-04 01:08:18,557 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 01:08:18,566 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 01:08:18,568 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 01:08:18,568 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ('528155210',)
2024-12-04 01:08:18,573 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 01:08:18,574 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] (1, '528155210')
2024-12-04 01:08:18,576 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 01:08:19,820 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 01:08:19,827 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 01:08:19,828 - sqlalchemy.engine.Engine - INFO - [generated in 0.00202s] ('85', '528155210', '2024-12-06 01:08:19.818012', '2024-12-04 01:08:19.818012', 0)
2024-12-04 01:08:19,834 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 01:08:19,846 - root - INFO - Key created: OutlineKey(key_id='85', name='VPN Key72', password='TUT3rsnuX7ujB28m4czB5g', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpUVVQzcnNudVg3dWpCMjhtNGN6QjVn@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 7444575424
2024-12-04 01:08:19,993 - aiogram.event - INFO - Update id=659306105 is handled. Duration 1452 ms by bot id=7444575424
2024-12-04 01:08:20,068 - aiogram.event - INFO - Update id=659306106 is not handled. Duration 0 ms by bot id=7444575424
2024-12-04 01:08:26,110 - aiogram.event - INFO - Update id=659306107 is handled. Duration 202 ms by bot id=7444575424
2024-12-04 01:08:27,940 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 01:08:27,941 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 01:08:27,941 - sqlalchemy.engine.Engine - INFO - [cached since 14.34s ago] ('528155210', 1, 0)
2024-12-04 01:08:27,952 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 01:08:27,952 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('528155210',)
2024-12-04 01:08:28,968 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 01:08:29,103 - aiogram.event - INFO - Update id=659306108 is handled. Duration 1265 ms by bot id=7444575424
2024-12-04 01:08:34,595 - aiogram.event - INFO - Update id=659306109 is handled. Duration 202 ms by bot id=7444575424
2024-12-04 01:08:35,790 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 01:08:35,790 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 01:08:35,791 - sqlalchemy.engine.Engine - INFO - [cached since 22.19s ago] ('528155210', 1, 0)
2024-12-04 01:08:35,793 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 01:08:35,793 - sqlalchemy.engine.Engine - INFO - [cached since 7.843s ago] ('528155210',)
2024-12-04 01:08:37,094 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 01:08:37,229 - aiogram.event - INFO - Update id=659306110 is handled. Duration 1530 ms by bot id=7444575424
2024-12-04 01:08:39,698 - aiogram.event - INFO - Update id=659306111 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 01:08:41,404 - aiogram.event - INFO - Update id=659306112 is handled. Duration 157 ms by bot id=7444575424
2024-12-04 01:09:11,446 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 01:09:11,447 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 01:09:22,630 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 7444575424)
2024-12-04 01:09:22,634 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 01:09:22,634 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 01:09:33,852 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 7444575424)
2024-12-04 01:09:57,196 - aiogram.event - INFO - Update id=659306113 is handled. Duration 266 ms by bot id=7444575424
2024-12-04 01:09:58,729 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 01:09:58,731 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 01:09:58,732 - sqlalchemy.engine.Engine - INFO - [cached since 105.1s ago] ('528155210', 1, 0)
2024-12-04 01:09:58,736 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 01:09:58,738 - sqlalchemy.engine.Engine - INFO - [cached since 90.79s ago] ('528155210',)
2024-12-04 01:09:59,787 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 01:09:59,921 - aiogram.event - INFO - Update id=659306114 is handled. Duration 1390 ms by bot id=7444575424
2024-12-04 01:10:02,250 - aiogram.event - INFO - Update id=659306115 is handled. Duration 358 ms by bot id=7444575424
2024-12-04 01:10:03,766 - aiogram.event - INFO - Update id=659306116 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 01:10:06,378 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 01:10:06,379 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 01:10:06,379 - sqlalchemy.engine.Engine - INFO - [cached since 112.8s ago] ('528155210', 1, 0)
2024-12-04 01:10:06,456 - aiogram.event - INFO - Update id=659306117 is handled. Duration 79 ms by bot id=7444575424
2024-12-04 01:10:09,678 - aiogram.event - INFO - Update id=659306118 is handled. Duration 202 ms by bot id=7444575424
2024-12-04 01:10:11,008 - aiogram.event - INFO - Update id=659306119 is handled. Duration 155 ms by bot id=7444575424
2024-12-04 01:10:12,373 - aiogram.event - INFO - Update id=659306120 is handled. Duration 186 ms by bot id=7444575424
2024-12-04 01:10:32,716 - aiogram.event - INFO - Update id=659306121 is handled. Duration 280 ms by bot id=7444575424
2024-12-04 01:10:41,418 - root - INFO - {
    "message_id": 1863,
    "date": 1733263841,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 12000,
        "invoice_payload": "fac5e9ae-2af2-48a0-a3c6-52be13268cf9",
        "telegram_payment_charge_id": "7444575424_528155210_327354",
        "provider_payment_charge_id": "7444575424_528155210_327354",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-04 01:10:42,593 - root - INFO - Key created: OutlineKey(key_id='86', name='VPN Key73', password='d7z2WIVI7bbC7ScpQlEtAV', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpkN3oyV0lWSTdiYkM3U2NwUWxFdEFW@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 01:10:42,594 - root - INFO - Key created: OutlineKey(key_id='86', name='VPN Key73', password='d7z2WIVI7bbC7ScpQlEtAV', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpkN3oyV0lWSTdiYkM3U2NwUWxFdEFW@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 01:10:42,689 - root - ERROR - Произошла ошибка: DbProcessor.update_database_with_key() missing 1 required positional argument: 'period'
2024-12-04 01:10:42,774 - aiogram.event - INFO - Update id=659306122 is handled. Duration 1359 ms by bot id=7444575424
2024-12-04 01:11:26,825 - aiogram.event - INFO - Update id=659306123 is handled. Duration 437 ms by bot id=7444575424
2024-12-04 01:11:54,969 - aiogram.event - INFO - Update id=659306124 is handled. Duration 280 ms by bot id=7444575424
2024-12-04 01:11:56,648 - aiogram.event - INFO - Update id=659306125 is handled. Duration 141 ms by bot id=7444575424
2024-12-04 01:11:58,368 - aiogram.event - INFO - Update id=659306126 is handled. Duration 187 ms by bot id=7444575424
2024-12-04 01:11:59,751 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 01:11:59,753 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 01:11:59,754 - sqlalchemy.engine.Engine - INFO - [cached since 226.2s ago] ('528155210', 1, 0)
2024-12-04 01:11:59,757 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 01:11:59,757 - sqlalchemy.engine.Engine - INFO - [cached since 211.8s ago] ('528155210',)
2024-12-04 01:12:00,865 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 01:12:01,033 - aiogram.event - INFO - Update id=659306127 is handled. Duration 1390 ms by bot id=7444575424
2024-12-04 01:12:04,701 - aiogram.event - INFO - Update id=659306128 is handled. Duration 407 ms by bot id=7444575424
2024-12-04 01:12:06,022 - aiogram.event - INFO - Update id=659306129 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 01:12:07,946 - aiogram.event - INFO - Update id=659306130 is handled. Duration 141 ms by bot id=7444575424
2024-12-04 01:12:22,304 - aiogram.event - INFO - Update id=659306131 is handled. Duration 62 ms by bot id=7444575424
2024-12-04 01:12:30,341 - root - INFO - {
    "message_id": 1875,
    "date": 1733263950,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 120000,
        "invoice_payload": "9245d011-6a31-4c5d-957f-a061ed69078d",
        "telegram_payment_charge_id": "7444575424_528155210_327371",
        "provider_payment_charge_id": "7444575424_528155210_327371",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-04 01:12:31,467 - root - INFO - Key created: OutlineKey(key_id='87', name='VPN Key74', password='JRykCTL1bWGRd5DWTgemnu', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpKUnlrQ1RMMWJXR1JkNURXVGdlbW51@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 01:12:31,468 - root - INFO - Key created: OutlineKey(key_id='87', name='VPN Key74', password='JRykCTL1bWGRd5DWTgemnu', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpKUnlrQ1RMMWJXR1JkNURXVGdlbW51@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 01:12:31,566 - root - ERROR - Произошла ошибка: DbProcessor.update_database_with_key() missing 1 required positional argument: 'period'
2024-12-04 01:12:31,651 - aiogram.event - INFO - Update id=659306132 is handled. Duration 1312 ms by bot id=7444575424
2024-12-04 01:12:37,422 - aiogram.event - INFO - Update id=659306133 is handled. Duration 217 ms by bot id=7444575424
2024-12-04 01:12:38,963 - aiogram.event - INFO - Update id=659306134 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 01:12:40,260 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 01:12:40,263 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 01:12:40,263 - sqlalchemy.engine.Engine - INFO - [cached since 266.7s ago] ('528155210', 1, 0)
2024-12-04 01:12:40,268 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 01:12:40,268 - sqlalchemy.engine.Engine - INFO - [cached since 252.3s ago] ('528155210',)
2024-12-04 01:12:41,302 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 01:12:41,452 - aiogram.event - INFO - Update id=659306135 is handled. Duration 1282 ms by bot id=7444575424
2024-12-04 01:12:43,873 - aiogram.event - INFO - Update id=659306136 is handled. Duration 202 ms by bot id=7444575424
2024-12-04 01:12:53,679 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 01:12:53,724 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2702)
2024-12-04 01:12:53,725 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 02:07:49,280 - root - INFO - Инициализация бота...
2024-12-04 02:07:49,376 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:07:49,377 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:07:49,377 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:07:49,379 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:07:49,379 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:07:49,380 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:07:49,419 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:07:49,419 - root - INFO - Инициализация диспетчера...
2024-12-04 02:07:49,421 - root - INFO - Регистрация обработчиков...
2024-12-04 02:07:49,423 - root - INFO - Запуск polling...
2024-12-04 02:07:49,424 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:07:49,793 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:08:03,402 - aiogram.event - INFO - Update id=659306161 is handled. Duration 265 ms by bot id=7444575424
2024-12-04 02:08:06,224 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:08:06,230 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:08:06,230 - sqlalchemy.engine.Engine - INFO - [generated in 0.00106s] ('528155210', 1, 0)
2024-12-04 02:08:06,241 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:08:06,242 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('528155210',)
2024-12-04 02:08:07,259 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:08:07,412 - aiogram.event - INFO - Update id=659306162 is handled. Duration 1297 ms by bot id=7444575424
2024-12-04 02:08:11,362 - aiogram.event - INFO - Update id=659306163 is handled. Duration 187 ms by bot id=7444575424
2024-12-04 02:08:13,207 - aiogram.event - INFO - Update id=659306164 is handled. Duration 140 ms by bot id=7444575424
2024-12-04 02:08:15,325 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:08:15,325 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:08:15,326 - sqlalchemy.engine.Engine - INFO - [cached since 9.096s ago] ('528155210', 1, 0)
2024-12-04 02:08:15,408 - aiogram.event - INFO - Update id=659306165 is handled. Duration 93 ms by bot id=7444575424
2024-12-04 02:08:18,118 - aiogram.event - INFO - Update id=659306166 is handled. Duration 187 ms by bot id=7444575424
2024-12-04 02:08:19,953 - aiogram.event - INFO - Update id=659306167 is handled. Duration 140 ms by bot id=7444575424
2024-12-04 02:08:21,987 - aiogram.event - INFO - Update id=659306168 is handled. Duration 155 ms by bot id=7444575424
2024-12-04 02:08:43,542 - aiogram.event - INFO - Update id=659306169 is handled. Duration 265 ms by bot id=7444575424
2024-12-04 02:08:52,124 - root - INFO - {
    "message_id": 1923,
    "date": 1733267332,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 60000,
        "invoice_payload": "57ca52f0-9d1c-4e9f-974e-1d3188304379",
        "telegram_payment_charge_id": "7444575424_528155210_327659",
        "provider_payment_charge_id": "7444575424_528155210_327659",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-04 02:08:53,162 - root - INFO - Key created: OutlineKey(key_id='92', name='VPN Key79', password='BSYxnZDd2PZNrKQfumifor', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpCU1l4blpEZDJQWk5yS1FmdW1pZm9y@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 02:08:53,163 - root - INFO - Key created: OutlineKey(key_id='92', name='VPN Key79', password='BSYxnZDd2PZNrKQfumifor', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpCU1l4blpEZDJQWk5yS1FmdW1pZm9y@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 02:08:53,266 - root - ERROR - Произошла ошибка: DbProcessor.update_database_with_key() missing 1 required positional argument: 'period'
2024-12-04 02:08:53,352 - aiogram.event - INFO - Update id=659306170 is handled. Duration 1234 ms by bot id=7444575424
2024-12-04 02:10:12,728 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:10:12,875 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2702)
2024-12-04 02:10:12,876 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 02:10:52,954 - root - INFO - Инициализация бота...
2024-12-04 02:10:53,027 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:10:53,027 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:10:53,028 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:10:53,029 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:10:53,030 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:10:53,031 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:10:53,055 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:10:53,056 - root - INFO - Инициализация диспетчера...
2024-12-04 02:10:53,057 - root - INFO - Регистрация обработчиков...
2024-12-04 02:10:53,059 - root - INFO - Запуск polling...
2024-12-04 02:10:53,060 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:10:53,439 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:11:08,940 - aiogram.event - INFO - Update id=659306171 is handled. Duration 391 ms by bot id=7444575424
2024-12-04 02:11:10,288 - aiogram.event - INFO - Update id=659306172 is handled. Duration 187 ms by bot id=7444575424
2024-12-04 02:11:11,668 - aiogram.event - INFO - Update id=659306173 is handled. Duration 155 ms by bot id=7444575424
2024-12-04 02:11:28,246 - aiogram.event - INFO - Update id=659306174 is handled. Duration 233 ms by bot id=7444575424
2024-12-04 02:11:36,882 - root - INFO - {
    "message_id": 1930,
    "date": 1733267497,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 120000,
        "invoice_payload": "b701c5c7-a026-46a3-9552-0f0e7577bab6",
        "telegram_payment_charge_id": "7444575424_528155210_327678",
        "provider_payment_charge_id": "7444575424_528155210_327678",
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-04 02:11:38,026 - root - INFO - Key created: OutlineKey(key_id='93', name='VPN Key80', password='6whVUJfIT4SlkLTOfIUQHu', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTo2d2hWVUpmSVQ0U2xrTFRPZklVUUh1@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 02:11:38,027 - root - INFO - Key created: OutlineKey(key_id='93', name='VPN Key80', password='6whVUJfIT4SlkLTOfIUQHu', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTo2d2hWVUpmSVQ0U2xrTFRPZklVUUh1@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 02:11:38,160 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:11:38,176 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:11:38,177 - sqlalchemy.engine.Engine - INFO - [generated in 0.00138s] ('528155210', 1, 0)
2024-12-04 02:11:38,189 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 02:11:38,189 - sqlalchemy.engine.Engine - INFO - [generated in 0.00150s] ('93', '528155210', '2025-11-29 02:11:38.181015', '2024-12-04 02:11:38.181015', 0)
2024-12-04 02:11:38,194 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:11:38,209 - aiogram.event - INFO - Update id=659306175 is handled. Duration 1329 ms by bot id=7444575424
2024-12-04 02:11:49,839 - aiogram.event - INFO - Update id=659306176 is handled. Duration 265 ms by bot id=7444575424
2024-12-04 02:11:52,345 - aiogram.event - INFO - Update id=659306177 is handled. Duration 390 ms by bot id=7444575424
2024-12-04 02:11:54,358 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:11:54,359 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:11:54,360 - sqlalchemy.engine.Engine - INFO - [cached since 16.18s ago] ('528155210', 1, 0)
2024-12-04 02:11:54,375 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:11:54,376 - sqlalchemy.engine.Engine - INFO - [generated in 0.00175s] ('528155210',)
2024-12-04 02:11:56,135 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:11:56,283 - aiogram.event - INFO - Update id=659306178 is handled. Duration 2125 ms by bot id=7444575424
2024-12-04 02:12:04,098 - aiogram.event - INFO - Update id=659306179 is handled. Duration 234 ms by bot id=7444575424
2024-12-04 02:12:07,706 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:12:07,956 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:12:07,963 - root - INFO - Бот остановлен вручную.
2024-12-04 02:13:23,005 - root - INFO - Инициализация бота...
2024-12-04 02:13:23,097 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:13:23,097 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:13:23,098 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:13:23,100 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:13:23,100 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:13:23,101 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:13:23,124 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:13:23,125 - root - INFO - Инициализация диспетчера...
2024-12-04 02:13:23,126 - root - INFO - Регистрация обработчиков...
2024-12-04 02:13:23,128 - root - INFO - Запуск polling...
2024-12-04 02:13:23,128 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:13:23,450 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:13:30,158 - aiogram.event - INFO - Update id=659306180 is handled. Duration 297 ms by bot id=7444575424
2024-12-04 02:13:32,625 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:13:32,635 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:13:32,636 - sqlalchemy.engine.Engine - INFO - [generated in 0.00134s] ('528155210', 1, 0)
2024-12-04 02:13:32,649 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:13:32,650 - sqlalchemy.engine.Engine - INFO - [generated in 0.00121s] ('528155210',)
2024-12-04 02:13:34,419 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:13:34,567 - aiogram.event - INFO - Update id=659306181 is handled. Duration 2063 ms by bot id=7444575424
2024-12-04 02:13:39,874 - aiogram.event - INFO - Update id=659306182 is handled. Duration 217 ms by bot id=7444575424
2024-12-04 02:14:12,882 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:14:13,149 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:14:13,152 - root - INFO - Бот остановлен вручную.
2024-12-04 02:14:21,479 - root - INFO - Инициализация бота...
2024-12-04 02:14:21,583 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:14:21,583 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:14:21,584 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:14:21,586 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:14:21,586 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:14:21,588 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:14:21,612 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:14:21,613 - root - INFO - Инициализация диспетчера...
2024-12-04 02:14:21,614 - root - INFO - Регистрация обработчиков...
2024-12-04 02:14:21,617 - root - INFO - Запуск polling...
2024-12-04 02:14:21,618 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:14:21,628 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:14:21,633 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:14:21,633 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] ()
2024-12-04 02:14:21,640 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:14:21,640 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ('528155210',)
2024-12-04 02:14:21,642 - root - ERROR - Ошибка проверки базы данных: 'Key' object has no attribute 'remembering'
2024-12-04 02:14:21,643 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-2' coro=<DbProcessor.check_db() done, defined at C:\Users\Хороший человек\Documents\coding\LISA\src\database\user_db.py:82> exception=AttributeError("'Key' object has no attribute 'remembering'")>
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\database\user_db.py", line 89, in check_db
    if (key.remembering == False) and (
        ^^^^^^^^^^^^^^^
AttributeError: 'Key' object has no attribute 'remembering'
2024-12-04 02:14:21,891 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:14:24,802 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:14:25,059 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:14:25,065 - root - INFO - Бот остановлен вручную.
2024-12-04 02:15:27,880 - root - INFO - Инициализация бота...
2024-12-04 02:15:27,960 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:15:27,960 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:15:27,961 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:15:27,963 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:15:27,963 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:15:27,964 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:15:27,988 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:15:27,988 - root - INFO - Инициализация диспетчера...
2024-12-04 02:15:27,989 - root - INFO - Регистрация обработчиков...
2024-12-04 02:15:27,992 - root - INFO - Запуск polling...
2024-12-04 02:15:27,992 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:15:28,003 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:15:28,006 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:15:28,007 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ()
2024-12-04 02:15:28,014 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:15:28,014 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ('528155210',)
2024-12-04 02:15:28,016 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:15:28,017 - root - ERROR - Ошибка проверки базы данных: send_message_subscription_ends() missing 1 required positional argument: 'user'
2024-12-04 02:15:28,017 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-2' coro=<DbProcessor.check_db() done, defined at C:\Users\Хороший человек\Documents\coding\LISA\src\database\user_db.py:82> exception=TypeError("send_message_subscription_ends() missing 1 required positional argument: 'user'")>
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\database\user_db.py", line 94, in check_db
    await send_message_subscription_ends()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: send_message_subscription_ends() missing 1 required positional argument: 'user'
2024-12-04 02:15:28,324 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:15:44,176 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:15:44,440 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:15:44,444 - root - INFO - Бот остановлен вручную.
2024-12-04 02:15:53,233 - root - INFO - Инициализация бота...
2024-12-04 02:15:53,303 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:15:53,303 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:15:53,303 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:15:53,305 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:15:53,305 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:15:53,306 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:15:53,322 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:15:53,322 - root - INFO - Инициализация диспетчера...
2024-12-04 02:15:53,323 - root - INFO - Регистрация обработчиков...
2024-12-04 02:15:53,325 - root - INFO - Запуск polling...
2024-12-04 02:15:53,325 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:15:53,333 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:15:53,335 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:15:53,335 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ()
2024-12-04 02:15:53,340 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:15:53,340 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ('528155210',)
2024-12-04 02:15:53,341 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:15:53,342 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:15:53,343 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 02:15:53,343 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ('528155210',)
2024-12-04 02:15:53,351 - root - ERROR - Ошибка проверки базы данных: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<Notification.SUBSCRIPTIO... кабинете.</b>'>, input_type=Notification]
    For further information visit https://errors.pydantic.dev/2.4/v/string_type
2024-12-04 02:15:53,351 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-2' coro=<DbProcessor.check_db() done, defined at C:\Users\Хороший человек\Documents\coding\LISA\src\database\user_db.py:82> exception=1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<Notification.SUBSCRIPTIO... кабинете.</b>'>, input_type=Notification]
    For further information visit https://errors.pydantic.dev/2.4/v/string_type>
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\database\user_db.py", line 94, in check_db
    await send_message_subscription_ends(user)
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\send_message.py", line 42, in send_message_subscription_ends
    await bot.send_message(
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\client\bot.py", line 2895, in send_message
    call = SendMessage(
           ^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<Notification.SUBSCRIPTIO... кабинете.</b>'>, input_type=Notification]
    For further information visit https://errors.pydantic.dev/2.4/v/string_type
2024-12-04 02:15:53,677 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:17:21,530 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:17:21,789 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:17:21,794 - root - INFO - Бот остановлен вручную.
2024-12-04 02:17:29,741 - root - INFO - Инициализация бота...
2024-12-04 02:17:29,838 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:17:29,839 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:17:29,839 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:17:29,842 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:17:29,842 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:17:29,843 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:17:29,867 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:17:29,867 - root - INFO - Инициализация диспетчера...
2024-12-04 02:17:29,869 - root - INFO - Регистрация обработчиков...
2024-12-04 02:17:29,871 - root - INFO - Запуск polling...
2024-12-04 02:17:29,872 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:17:29,882 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:17:29,886 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:17:29,887 - sqlalchemy.engine.Engine - INFO - [generated in 0.00085s] ()
2024-12-04 02:17:29,894 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:17:29,894 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ('528155210',)
2024-12-04 02:17:29,896 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:17:29,897 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:17:29,899 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 02:17:29,899 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ('528155210',)
2024-12-04 02:17:29,901 - root - ERROR - Ошибка проверки базы данных: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<Notification.SUBSCRIPTIO... кабинете.</b>'>, input_type=Notification]
    For further information visit https://errors.pydantic.dev/2.4/v/string_type
2024-12-04 02:17:29,901 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-2' coro=<DbProcessor.check_db() done, defined at C:\Users\Хороший человек\Documents\coding\LISA\src\database\user_db.py:82> exception=1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<Notification.SUBSCRIPTIO... кабинете.</b>'>, input_type=Notification]
    For further information visit https://errors.pydantic.dev/2.4/v/string_type>
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\database\user_db.py", line 94, in check_db
    await send_message_subscription_ends(user)
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\send_message.py", line 42, in send_message_subscription_ends
    await bot.send_message(
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\client\bot.py", line 2895, in send_message
    call = SendMessage(
           ^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<Notification.SUBSCRIPTIO... кабинете.</b>'>, input_type=Notification]
    For further information visit https://errors.pydantic.dev/2.4/v/string_type
2024-12-04 02:17:30,276 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:18:00,991 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:18:01,253 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:18:01,259 - root - INFO - Бот остановлен вручную.
2024-12-04 02:18:10,959 - root - INFO - Инициализация бота...
2024-12-04 02:18:11,031 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:18:11,032 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:18:11,032 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:18:11,034 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:18:11,034 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:18:11,035 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:18:11,051 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:18:11,051 - root - INFO - Инициализация диспетчера...
2024-12-04 02:18:11,052 - root - INFO - Регистрация обработчиков...
2024-12-04 02:18:11,054 - root - INFO - Запуск polling...
2024-12-04 02:18:11,054 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:18:11,061 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:18:11,064 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:18:11,065 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ()
2024-12-04 02:18:11,069 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:18:11,070 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ('528155210',)
2024-12-04 02:18:11,071 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:18:11,072 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:18:11,073 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 02:18:11,073 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ('528155210',)
2024-12-04 02:18:11,323 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:18:11,380 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 02:18:11,380 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ('93',)
2024-12-04 02:18:22,536 - aiogram.event - INFO - Update id=659306183 is not handled. Duration 0 ms by bot id=7444575424
2024-12-04 02:18:24,955 - aiogram.event - INFO - Update id=659306184 is handled. Duration 312 ms by bot id=7444575424
2024-12-04 02:18:30,383 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:18:30,651 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:18:30,656 - root - INFO - Бот остановлен вручную.
2024-12-04 02:18:57,481 - root - INFO - Инициализация бота...
2024-12-04 02:18:57,551 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:18:57,552 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:18:57,552 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:18:57,554 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:18:57,554 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:18:57,555 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:18:57,571 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:18:57,572 - root - INFO - Инициализация диспетчера...
2024-12-04 02:18:57,573 - root - INFO - Регистрация обработчиков...
2024-12-04 02:18:57,575 - root - INFO - Запуск polling...
2024-12-04 02:18:57,575 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:18:57,583 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:18:57,586 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:18:57,587 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ()
2024-12-04 02:18:57,594 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:18:57,594 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ('528155210',)
2024-12-04 02:18:57,596 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:18:57,597 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:18:57,598 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 02:18:57,599 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('528155210',)
2024-12-04 02:18:57,922 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 02:18:57,923 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('93',)
2024-12-04 02:18:57,931 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:19:10,220 - aiogram.event - INFO - Update id=659306185 is handled. Duration 140 ms by bot id=7444575424
2024-12-04 02:19:12,360 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:19:12,366 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:19:12,367 - sqlalchemy.engine.Engine - INFO - [generated in 0.00176s] ('528155210', 1, 0)
2024-12-04 02:19:12,370 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:19:12,371 - sqlalchemy.engine.Engine - INFO - [cached since 14.78s ago] ('528155210',)
2024-12-04 02:19:14,009 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:19:14,154 - aiogram.event - INFO - Update id=659306186 is handled. Duration 1890 ms by bot id=7444575424
2024-12-04 02:19:16,063 - aiogram.event - INFO - Update id=659306187 is handled. Duration 375 ms by bot id=7444575424
2024-12-04 02:19:25,974 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:20:13,565 - root - INFO - Инициализация бота...
2024-12-04 02:20:13,638 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:20:13,638 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:20:13,639 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:20:13,640 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:20:13,640 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:20:13,642 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:20:13,658 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:20:13,658 - root - INFO - Инициализация диспетчера...
2024-12-04 02:20:13,660 - root - INFO - Регистрация обработчиков...
2024-12-04 02:20:13,662 - root - INFO - Запуск polling...
2024-12-04 02:20:13,662 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:20:13,674 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:20:13,678 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:20:13,678 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ()
2024-12-04 02:20:13,685 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:20:13,686 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ('528155210',)
2024-12-04 02:20:13,687 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:20:13,688 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:20:13,690 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 02:20:13,690 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ('528155210',)
2024-12-04 02:20:14,060 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:20:14,127 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 02:20:14,127 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] ('93',)
2024-12-04 02:20:30,760 - aiogram.event - INFO - Update id=659306188 is not handled. Duration 0 ms by bot id=7444575424
2024-12-04 02:21:27,518 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:25:19,638 - root - INFO - Инициализация бота...
2024-12-04 02:25:19,718 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:25:19,720 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:25:19,720 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:25:19,721 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:25:19,721 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:25:19,722 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:25:19,741 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:25:19,742 - root - INFO - Инициализация диспетчера...
2024-12-04 02:25:19,743 - root - INFO - Регистрация обработчиков...
2024-12-04 02:25:19,745 - root - INFO - Запуск polling...
2024-12-04 02:25:19,745 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:25:19,754 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:25:19,756 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:25:19,757 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] ()
2024-12-04 02:25:19,762 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:25:19,762 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ('528155210',)
2024-12-04 02:25:19,764 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:25:19,765 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:25:19,766 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 02:25:19,767 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ('528155210',)
2024-12-04 02:25:20,106 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:25:20,217 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 02:25:20,217 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('93',)
2024-12-04 02:25:20,390 - aiogram.event - INFO - Update id=659306189 is handled. Duration 125 ms by bot id=7444575424
2024-12-04 02:25:29,911 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:25:29,918 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:25:29,919 - sqlalchemy.engine.Engine - INFO - [generated in 0.00195s] ('528155210', 1, 0)
2024-12-04 02:25:29,926 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:25:29,928 - sqlalchemy.engine.Engine - INFO - [cached since 10.17s ago] ('528155210',)
2024-12-04 02:25:31,623 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:25:31,764 - aiogram.event - INFO - Update id=659306190 is handled. Duration 1937 ms by bot id=7444575424
2024-12-04 02:26:04,897 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:26:05,152 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:26:05,161 - root - INFO - Бот остановлен вручную.
2024-12-04 02:28:05,068 - root - INFO - Инициализация бота...
2024-12-04 02:28:05,145 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:28:05,146 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:28:05,146 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:28:05,148 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:28:05,149 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:28:05,150 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:28:05,178 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:28:05,178 - root - INFO - Инициализация диспетчера...
2024-12-04 02:28:05,180 - root - INFO - Регистрация обработчиков...
2024-12-04 02:28:05,182 - root - INFO - Запуск polling...
2024-12-04 02:28:05,183 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:28:05,193 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:28:05,198 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:28:05,198 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] ()
2024-12-04 02:28:05,204 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:28:05,205 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] ('528155210',)
2024-12-04 02:28:05,207 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:28:05,208 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:28:05,210 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 02:28:05,211 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ('528155210',)
2024-12-04 02:28:05,724 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:28:05,859 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 02:28:05,859 - sqlalchemy.engine.Engine - INFO - [generated in 0.00117s] ('93',)
2024-12-04 02:28:06,145 - aiogram.event - INFO - Update id=659306191 is handled. Duration 156 ms by bot id=7444575424
2024-12-04 02:28:07,865 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:28:07,873 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:28:07,874 - sqlalchemy.engine.Engine - INFO - [generated in 0.00197s] ('528155210', 1, 0)
2024-12-04 02:28:07,881 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:28:07,883 - sqlalchemy.engine.Engine - INFO - [cached since 2.678s ago] ('528155210',)
2024-12-04 02:28:09,736 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:28:09,951 - aiogram.event - INFO - Update id=659306192 is handled. Duration 2219 ms by bot id=7444575424
2024-12-04 02:28:15,603 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:28:34,076 - root - INFO - Инициализация бота...
2024-12-04 02:28:34,426 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:28:34,427 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:28:34,427 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:28:34,431 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:28:34,432 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:28:34,434 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:28:34,478 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:28:34,478 - root - INFO - Инициализация диспетчера...
2024-12-04 02:28:34,481 - root - INFO - Регистрация обработчиков...
2024-12-04 02:28:34,485 - root - INFO - Запуск polling...
2024-12-04 02:28:34,485 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:28:34,501 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:28:34,506 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:28:34,506 - sqlalchemy.engine.Engine - INFO - [generated in 0.00091s] ()
2024-12-04 02:28:34,517 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:28:34,519 - sqlalchemy.engine.Engine - INFO - [generated in 0.00149s] ('528155210',)
2024-12-04 02:28:34,522 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:28:34,525 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:28:34,526 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 02:28:34,527 - sqlalchemy.engine.Engine - INFO - [generated in 0.00080s] ('528155210',)
2024-12-04 02:28:34,817 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 02:28:34,818 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] ('93',)
2024-12-04 02:28:34,837 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:28:40,014 - aiogram.event - INFO - Update id=659306193 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 02:28:43,143 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:28:43,148 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:28:43,149 - sqlalchemy.engine.Engine - INFO - [generated in 0.00099s] ('528155210', 1, 0)
2024-12-04 02:28:43,152 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:28:43,153 - sqlalchemy.engine.Engine - INFO - [cached since 8.635s ago] ('528155210',)
2024-12-04 02:28:45,171 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:28:45,342 - aiogram.event - INFO - Update id=659306194 is handled. Duration 2359 ms by bot id=7444575424
2024-12-04 02:28:52,753 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:28:53,011 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:28:53,018 - root - INFO - Бот остановлен вручную.
2024-12-04 02:29:01,509 - root - INFO - Инициализация бота...
2024-12-04 02:29:01,612 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:29:01,612 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:29:01,613 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:29:01,615 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:29:01,615 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:29:01,616 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:29:01,643 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:29:01,643 - root - INFO - Инициализация диспетчера...
2024-12-04 02:29:01,646 - root - INFO - Регистрация обработчиков...
2024-12-04 02:29:01,648 - root - INFO - Запуск polling...
2024-12-04 02:29:01,649 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:29:01,657 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:29:01,661 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:29:01,661 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ()
2024-12-04 02:29:01,668 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:29:01,669 - sqlalchemy.engine.Engine - INFO - [generated in 0.00100s] ('528155210',)
2024-12-04 02:29:01,672 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:29:01,674 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:29:01,677 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 02:29:01,677 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] ('528155210',)
2024-12-04 02:29:01,953 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:29:02,119 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 02:29:02,120 - sqlalchemy.engine.Engine - INFO - [generated in 0.00158s] ('93',)
2024-12-04 02:29:05,563 - aiogram.event - INFO - Update id=659306195 is not handled. Duration 0 ms by bot id=7444575424
2024-12-04 02:29:08,652 - aiogram.event - INFO - Update id=659306196 is handled. Duration 125 ms by bot id=7444575424
2024-12-04 02:29:10,399 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:29:10,402 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:29:10,403 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] ('528155210', 1, 0)
2024-12-04 02:29:10,407 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:29:10,407 - sqlalchemy.engine.Engine - INFO - [cached since 8.739s ago] ('528155210',)
2024-12-04 02:29:12,220 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:29:12,359 - aiogram.event - INFO - Update id=659306197 is handled. Duration 2046 ms by bot id=7444575424
2024-12-04 02:29:32,003 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:29:32,267 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:29:32,273 - root - INFO - Бот остановлен вручную.
2024-12-04 02:41:17,392 - root - INFO - Инициализация бота...
2024-12-04 02:41:17,505 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:41:17,506 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:41:17,507 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:41:17,511 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:41:17,511 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:41:17,513 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:41:17,554 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:41:17,554 - root - INFO - Инициализация диспетчера...
2024-12-04 02:41:17,556 - root - INFO - Регистрация обработчиков...
2024-12-04 02:41:17,559 - root - INFO - Запуск polling...
2024-12-04 02:41:17,560 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:41:17,575 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:41:17,580 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:41:17,581 - sqlalchemy.engine.Engine - INFO - [generated in 0.00135s] ()
2024-12-04 02:41:17,590 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:41:17,591 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] ('528155210',)
2024-12-04 02:41:17,593 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:41:17,595 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:41:17,597 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 02:41:17,598 - sqlalchemy.engine.Engine - INFO - [generated in 0.00112s] ('528155210',)
2024-12-04 02:41:18,164 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 02:41:18,165 - sqlalchemy.engine.Engine - INFO - [generated in 0.00141s] ('93',)
2024-12-04 02:41:18,188 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:41:29,482 - aiogram.event - INFO - Update id=659306198 is handled. Duration 125 ms by bot id=7444575424
2024-12-04 02:41:31,258 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:41:31,263 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:41:31,263 - sqlalchemy.engine.Engine - INFO - [generated in 0.00118s] ('528155210', 1, 0)
2024-12-04 02:41:31,269 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:41:31,270 - sqlalchemy.engine.Engine - INFO - [cached since 13.68s ago] ('528155210',)
2024-12-04 02:41:31,275 - root - ERROR - Ошибка при выборе ключа: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
2024-12-04 02:41:31,354 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:41:31,430 - aiogram.event - INFO - Update id=659306199 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 02:41:37,212 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:41:37,488 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:41:37,500 - root - INFO - Бот остановлен вручную.
2024-12-04 02:43:05,958 - root - INFO - Инициализация бота...
2024-12-04 02:43:06,023 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:43:06,023 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:43:06,023 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:43:06,025 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:43:06,025 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:43:06,026 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:43:06,047 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:43:06,047 - root - INFO - Инициализация диспетчера...
2024-12-04 02:43:06,048 - root - INFO - Регистрация обработчиков...
2024-12-04 02:43:06,052 - root - INFO - Запуск polling...
2024-12-04 02:43:06,052 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:43:06,063 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:43:06,068 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:43:06,068 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ()
2024-12-04 02:43:06,074 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:43:06,074 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('528155210',)
2024-12-04 02:43:06,077 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:43:06,078 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:43:06,080 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 02:43:06,080 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('528155210',)
2024-12-04 02:43:06,340 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:43:06,405 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 02:43:06,405 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ('93',)
2024-12-04 02:43:08,406 - aiogram.event - INFO - Update id=659306200 is handled. Duration 140 ms by bot id=7444575424
2024-12-04 02:43:10,575 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:43:10,581 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:43:10,582 - sqlalchemy.engine.Engine - INFO - [generated in 0.00156s] ('528155210', 1, 0)
2024-12-04 02:43:10,586 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:43:10,587 - sqlalchemy.engine.Engine - INFO - [cached since 4.513s ago] ('528155210',)
2024-12-04 02:43:10,590 - root - ERROR - Ошибка при выборе ключа: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
2024-12-04 02:43:10,677 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:43:10,754 - aiogram.event - INFO - Update id=659306201 is handled. Duration 186 ms by bot id=7444575424
2024-12-04 02:43:36,418 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:43:36,680 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:43:36,685 - root - INFO - Бот остановлен вручную.
2024-12-04 02:43:46,980 - root - INFO - Инициализация бота...
2024-12-04 02:43:47,055 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:43:47,056 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:43:47,056 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:43:47,058 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:43:47,058 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:43:47,059 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:43:47,078 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:43:47,078 - root - INFO - Инициализация диспетчера...
2024-12-04 02:43:47,079 - root - INFO - Регистрация обработчиков...
2024-12-04 02:43:47,081 - root - INFO - Запуск polling...
2024-12-04 02:43:47,081 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:43:47,090 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:43:47,093 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:43:47,093 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ()
2024-12-04 02:43:47,098 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:43:47,098 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ('528155210',)
2024-12-04 02:43:47,100 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:43:47,101 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:43:47,102 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 02:43:47,102 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ('528155210',)
2024-12-04 02:43:47,364 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:43:47,421 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 02:43:47,422 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('93',)
2024-12-04 02:43:51,767 - aiogram.event - INFO - Update id=659306202 is handled. Duration 125 ms by bot id=7444575424
2024-12-04 02:43:53,364 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:43:53,370 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:43:53,371 - sqlalchemy.engine.Engine - INFO - [generated in 0.00177s] ('528155210', 1, 0)
2024-12-04 02:43:53,377 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:43:53,378 - sqlalchemy.engine.Engine - INFO - [cached since 6.28s ago] ('528155210',)
2024-12-04 02:43:53,380 - root - ERROR - Ошибка при выборе ключа: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
2024-12-04 02:43:53,468 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:43:53,540 - aiogram.event - INFO - Update id=659306203 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 02:48:28,076 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:48:28,335 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:48:28,340 - root - INFO - Бот остановлен вручную.
2024-12-04 02:48:39,290 - root - INFO - Инициализация бота...
2024-12-04 02:48:39,411 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:48:39,411 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:48:39,412 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:48:39,414 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:48:39,415 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:48:39,416 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:48:39,441 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:48:39,442 - root - INFO - Инициализация диспетчера...
2024-12-04 02:48:39,444 - root - INFO - Регистрация обработчиков...
2024-12-04 02:48:39,445 - root - INFO - Запуск polling...
2024-12-04 02:48:39,446 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:48:39,459 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:48:39,463 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:48:39,463 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ()
2024-12-04 02:48:39,472 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:48:39,472 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('528155210',)
2024-12-04 02:48:39,807 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:48:40,305 - aiogram.event - INFO - Update id=659306204 is handled. Duration 312 ms by bot id=7444575424
2024-12-04 02:48:41,617 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:48:41,622 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:48:41,623 - sqlalchemy.engine.Engine - INFO - [generated in 0.00108s] ('528155210', 1, 0)
2024-12-04 02:48:41,628 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:48:41,629 - sqlalchemy.engine.Engine - INFO - [cached since 2.158s ago] ('528155210',)
2024-12-04 02:48:41,633 - root - ERROR - Ошибка при выборе ключа: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={'row_width': 1}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
2024-12-04 02:48:41,713 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:48:41,788 - aiogram.event - INFO - Update id=659306205 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 02:49:11,263 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:49:11,536 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:49:11,541 - root - INFO - Бот остановлен вручную.
2024-12-04 02:49:23,649 - root - INFO - Инициализация бота...
2024-12-04 02:49:23,770 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:49:23,771 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:49:23,771 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:49:23,774 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:49:23,775 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:49:23,777 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:49:23,811 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:49:23,812 - root - INFO - Инициализация диспетчера...
2024-12-04 02:49:23,813 - root - INFO - Регистрация обработчиков...
2024-12-04 02:49:23,816 - root - INFO - Запуск polling...
2024-12-04 02:49:23,816 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:49:23,827 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:49:23,831 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:49:23,831 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] ()
2024-12-04 02:49:23,838 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:49:23,839 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] ('528155210',)
2024-12-04 02:49:24,114 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:49:27,654 - aiogram.event - INFO - Update id=659306206 is handled. Duration 312 ms by bot id=7444575424
2024-12-04 02:49:29,063 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:49:29,069 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:49:29,070 - sqlalchemy.engine.Engine - INFO - [generated in 0.00133s] ('528155210', 1, 0)
2024-12-04 02:49:29,074 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:49:29,075 - sqlalchemy.engine.Engine - INFO - [cached since 5.237s ago] ('528155210',)
2024-12-04 02:49:29,077 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:49:29,079 - aiogram.event - INFO - Update id=659306207 is not handled. Duration 15 ms by bot id=7444575424
2024-12-04 02:49:29,080 - aiogram.event - ERROR - Cause exception while process update id=659306207 by bot id=7444575424
ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 56, in main_menu_handler
    await choosing_key_handler(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_management_router.py", line 41, in choosing_key_handler
    reply_markup=get_key_name_choosing_keyboard(user.keys)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 146, in get_key_name_choosing_keyboard
    keyboard = InlineKeyboardMarkup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
2024-12-04 02:50:10,163 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:50:10,424 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:50:10,427 - root - INFO - Бот остановлен вручную.
2024-12-04 02:50:21,713 - root - INFO - Инициализация бота...
2024-12-04 02:50:21,826 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:50:21,827 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:50:21,827 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:50:21,830 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:50:21,830 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:50:21,831 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:50:21,858 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:50:21,858 - root - INFO - Инициализация диспетчера...
2024-12-04 02:50:21,860 - root - INFO - Регистрация обработчиков...
2024-12-04 02:50:21,862 - root - INFO - Запуск polling...
2024-12-04 02:50:21,862 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:50:21,874 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:50:21,878 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:50:21,878 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ()
2024-12-04 02:50:21,885 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:50:21,886 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] ('528155210',)
2024-12-04 02:50:22,203 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:50:22,721 - aiogram.event - INFO - Update id=659306208 is handled. Duration 344 ms by bot id=7444575424
2024-12-04 02:50:24,543 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:50:24,545 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:50:24,545 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ('528155210', 1, 0)
2024-12-04 02:50:24,548 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:50:24,549 - sqlalchemy.engine.Engine - INFO - [cached since 2.663s ago] ('528155210',)
2024-12-04 02:50:24,551 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:50:24,552 - aiogram.event - INFO - Update id=659306209 is not handled. Duration 15 ms by bot id=7444575424
2024-12-04 02:50:24,552 - aiogram.event - ERROR - Cause exception while process update id=659306209 by bot id=7444575424
ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={'row_width': 1}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 56, in main_menu_handler
    await choosing_key_handler(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_management_router.py", line 41, in choosing_key_handler
    reply_markup=get_key_name_choosing_keyboard(user.keys)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 152, in get_key_name_choosing_keyboard
    keyboard = InlineKeyboardMarkup(row_width=1)  # row_width для настройки кнопок в строке
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={'row_width': 1}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
2024-12-04 02:51:19,121 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:51:19,379 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:51:19,383 - root - INFO - Бот остановлен вручную.
2024-12-04 02:51:29,695 - root - INFO - Инициализация бота...
2024-12-04 02:51:29,814 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:51:29,815 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:51:29,815 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:51:29,817 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:51:29,818 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:51:29,819 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:51:29,847 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:51:29,848 - root - INFO - Инициализация диспетчера...
2024-12-04 02:51:29,849 - root - INFO - Регистрация обработчиков...
2024-12-04 02:51:29,851 - root - INFO - Запуск polling...
2024-12-04 02:51:29,852 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:51:29,863 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:51:29,867 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:51:29,867 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] ()
2024-12-04 02:51:29,876 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:51:29,877 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ('528155210',)
2024-12-04 02:51:30,126 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:51:34,386 - aiogram.event - INFO - Update id=659306210 is handled. Duration 312 ms by bot id=7444575424
2024-12-04 02:51:36,184 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:51:36,189 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:51:36,190 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] ('528155210', 1, 0)
2024-12-04 02:51:36,192 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:51:36,193 - sqlalchemy.engine.Engine - INFO - [cached since 6.318s ago] ('528155210',)
2024-12-04 02:51:36,194 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:51:36,195 - aiogram.event - INFO - Update id=659306211 is not handled. Duration 16 ms by bot id=7444575424
2024-12-04 02:51:36,195 - aiogram.event - ERROR - Cause exception while process update id=659306211 by bot id=7444575424
ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={'row_width': 1}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 56, in main_menu_handler
    await choosing_key_handler(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_management_router.py", line 41, in choosing_key_handler
    reply_markup=get_key_name_choosing_keyboard(user.keys)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 153, in get_key_name_choosing_keyboard
    for key in keys:
               ^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={'row_width': 1}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
2024-12-04 02:54:13,882 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:54:14,149 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:54:14,152 - root - INFO - Бот остановлен вручную.
2024-12-04 02:54:24,619 - root - INFO - Инициализация бота...
2024-12-04 02:54:24,744 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:54:24,744 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:54:24,745 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:54:24,747 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:54:24,748 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:54:24,750 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:54:24,774 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:54:24,775 - root - INFO - Инициализация диспетчера...
2024-12-04 02:54:24,777 - root - INFO - Регистрация обработчиков...
2024-12-04 02:54:24,779 - root - INFO - Запуск polling...
2024-12-04 02:54:24,779 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:54:24,790 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:54:24,795 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:54:24,795 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ()
2024-12-04 02:54:24,801 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:54:24,802 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('528155210',)
2024-12-04 02:54:25,123 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:54:25,580 - aiogram.event - INFO - Update id=659306212 is handled. Duration 282 ms by bot id=7444575424
2024-12-04 02:54:27,296 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:54:27,299 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:54:27,299 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ('528155210', 1, 0)
2024-12-04 02:54:27,303 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:54:27,303 - sqlalchemy.engine.Engine - INFO - [cached since 2.501s ago] ('528155210',)
2024-12-04 02:54:27,304 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:54:27,306 - aiogram.event - INFO - Update id=659306213 is not handled. Duration 0 ms by bot id=7444575424
2024-12-04 02:54:27,306 - aiogram.event - ERROR - Cause exception while process update id=659306213 by bot id=7444575424
AttributeError: 'Key' object has no attribute 'name'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 56, in main_menu_handler
    await choosing_key_handler(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_management_router.py", line 41, in choosing_key_handler
    reply_markup=get_key_name_choosing_keyboard(user.keys)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 147, in get_key_name_choosing_keyboard
    button = InlineKeyboardButton(text=key.name,  # Имя ключа отображается на кнопке
                                       ^^^^^^^^
AttributeError: 'Key' object has no attribute 'name'
2024-12-04 02:54:36,529 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:54:36,788 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:54:36,793 - root - INFO - Бот остановлен вручную.
2024-12-04 02:54:51,120 - root - INFO - Инициализация бота...
2024-12-04 02:54:51,197 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:54:51,197 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:54:51,197 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:54:51,199 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:54:51,199 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:54:51,200 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:54:51,219 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:54:51,219 - root - INFO - Инициализация диспетчера...
2024-12-04 02:54:51,220 - root - INFO - Регистрация обработчиков...
2024-12-04 02:54:51,222 - root - INFO - Запуск polling...
2024-12-04 02:54:51,222 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:54:51,232 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:54:51,236 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:54:51,236 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ()
2024-12-04 02:54:51,242 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:54:51,242 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ('528155210',)
2024-12-04 02:54:51,492 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:54:55,582 - aiogram.event - INFO - Update id=659306214 is handled. Duration 265 ms by bot id=7444575424
2024-12-04 02:54:56,699 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:54:56,702 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:54:56,703 - sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] ('528155210', 1, 0)
2024-12-04 02:54:56,705 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:54:56,706 - sqlalchemy.engine.Engine - INFO - [cached since 5.464s ago] ('528155210',)
2024-12-04 02:54:56,708 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:54:56,709 - aiogram.event - INFO - Update id=659306215 is not handled. Duration 15 ms by bot id=7444575424
2024-12-04 02:54:56,710 - aiogram.event - ERROR - Cause exception while process update id=659306215 by bot id=7444575424
AttributeError: 'Key' object has no attribute 'name'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 56, in main_menu_handler
    await choosing_key_handler(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_management_router.py", line 41, in choosing_key_handler
    reply_markup=get_key_name_choosing_keyboard(user.keys)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 148, in get_key_name_choosing_keyboard
    button = InlineKeyboardButton(text=key.name,  # Имя ключа отображается на кнопке
                                       ^^^^^^^^
AttributeError: 'Key' object has no attribute 'name'
2024-12-04 02:56:02,124 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:56:02,382 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:56:02,386 - root - INFO - Бот остановлен вручную.
2024-12-04 02:56:09,655 - root - INFO - Инициализация бота...
2024-12-04 02:56:09,726 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:56:09,727 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:56:09,727 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:56:09,729 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:56:09,729 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:56:09,730 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:56:09,746 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:56:09,746 - root - INFO - Инициализация диспетчера...
2024-12-04 02:56:09,747 - root - INFO - Регистрация обработчиков...
2024-12-04 02:56:09,748 - root - INFO - Запуск polling...
2024-12-04 02:56:09,749 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:56:09,757 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:56:09,760 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:56:09,761 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ()
2024-12-04 02:56:09,766 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:56:09,766 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ('528155210',)
2024-12-04 02:56:10,020 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:56:13,760 - aiogram.event - INFO - Update id=659306216 is handled. Duration 467 ms by bot id=7444575424
2024-12-04 02:56:14,648 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:56:14,651 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:56:14,652 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] ('528155210', 1, 0)
2024-12-04 02:56:14,656 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:56:14,657 - sqlalchemy.engine.Engine - INFO - [cached since 4.891s ago] ('528155210',)
2024-12-04 02:56:14,659 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:56:14,661 - aiogram.event - INFO - Update id=659306217 is not handled. Duration 15 ms by bot id=7444575424
2024-12-04 02:56:14,661 - aiogram.event - ERROR - Cause exception while process update id=659306217 by bot id=7444575424
AttributeError: 'Key' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 56, in main_menu_handler
    await choosing_key_handler(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_management_router.py", line 41, in choosing_key_handler
    reply_markup=get_key_name_choosing_keyboard(user.keys)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 147, in get_key_name_choosing_keyboard
    button = InlineKeyboardButton(text=key.id,  # Имя ключа отображается на кнопке
                                       ^^^^^^
AttributeError: 'Key' object has no attribute 'id'
2024-12-04 02:56:27,667 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:56:27,935 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:56:27,940 - root - INFO - Бот остановлен вручную.
2024-12-04 02:56:57,312 - root - INFO - Инициализация бота...
2024-12-04 02:56:57,424 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:56:57,424 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:56:57,425 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:56:57,427 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:56:57,427 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:56:57,429 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:56:57,463 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:56:57,463 - root - INFO - Инициализация диспетчера...
2024-12-04 02:56:57,465 - root - INFO - Регистрация обработчиков...
2024-12-04 02:56:57,469 - root - INFO - Запуск polling...
2024-12-04 02:56:57,469 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:56:57,488 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:56:57,492 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:56:57,492 - sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] ()
2024-12-04 02:56:57,500 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:56:57,500 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] ('528155210',)
2024-12-04 02:56:57,867 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:57:00,069 - aiogram.event - INFO - Update id=659306218 is handled. Duration 328 ms by bot id=7444575424
2024-12-04 02:57:01,911 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:57:01,916 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:57:01,917 - sqlalchemy.engine.Engine - INFO - [generated in 0.00159s] ('528155210', 1, 0)
2024-12-04 02:57:01,921 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:57:01,922 - sqlalchemy.engine.Engine - INFO - [cached since 4.423s ago] ('528155210',)
2024-12-04 02:57:01,924 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:57:01,926 - aiogram.event - INFO - Update id=659306219 is not handled. Duration 15 ms by bot id=7444575424
2024-12-04 02:57:01,926 - aiogram.event - ERROR - Cause exception while process update id=659306219 by bot id=7444575424
AttributeError: 'Key' object has no attribute 'name'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 56, in main_menu_handler
    await choosing_key_handler(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_management_router.py", line 42, in choosing_key_handler
    reply_markup=get_key_name_choosing_keyboard(user.keys)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 147, in get_key_name_choosing_keyboard
    button = InlineKeyboardButton(text=key.name,  # Имя ключа отображается на кнопке
                                       ^^^^^^^^
AttributeError: 'Key' object has no attribute 'name'
2024-12-04 02:58:08,394 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:58:08,654 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:58:08,657 - root - INFO - Бот остановлен вручную.
2024-12-04 02:58:16,286 - root - INFO - Инициализация бота...
2024-12-04 02:58:16,370 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:58:16,371 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:58:16,371 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:58:16,373 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:58:16,373 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:58:16,374 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:58:16,400 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:58:16,400 - root - INFO - Инициализация диспетчера...
2024-12-04 02:58:16,401 - root - INFO - Регистрация обработчиков...
2024-12-04 02:58:16,404 - root - INFO - Запуск polling...
2024-12-04 02:58:16,404 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:58:16,414 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:58:16,419 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:58:16,419 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] ()
2024-12-04 02:58:16,426 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:58:16,426 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] ('528155210',)
2024-12-04 02:58:16,677 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:58:20,958 - aiogram.event - INFO - Update id=659306220 is handled. Duration 265 ms by bot id=7444575424
2024-12-04 02:58:24,472 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:58:24,475 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:58:24,475 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ('528155210', 1, 0)
2024-12-04 02:58:24,477 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:58:24,478 - sqlalchemy.engine.Engine - INFO - [cached since 8.053s ago] ('528155210',)
2024-12-04 02:58:24,479 - root - INFO - [<database.user_db.DbProcessor.Key object at 0x00000223D78A83D0>, <database.user_db.DbProcessor.Key object at 0x00000223D78AA390>]
2024-12-04 02:58:24,480 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:58:24,480 - aiogram.event - INFO - Update id=659306221 is not handled. Duration 15 ms by bot id=7444575424
2024-12-04 02:58:24,480 - aiogram.event - ERROR - Cause exception while process update id=659306221 by bot id=7444575424
AttributeError: 'Key' object has no attribute 'name'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 56, in main_menu_handler
    await choosing_key_handler(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_management_router.py", line 42, in choosing_key_handler
    reply_markup=get_key_name_choosing_keyboard(user.keys)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 147, in get_key_name_choosing_keyboard
    button = InlineKeyboardButton(text=key.name,  # Имя ключа отображается на кнопке
                                       ^^^^^^^^
AttributeError: 'Key' object has no attribute 'name'
2024-12-04 02:58:58,200 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 02:58:58,456 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:58:58,459 - root - INFO - Бот остановлен вручную.
2024-12-04 02:59:07,439 - root - INFO - Инициализация бота...
2024-12-04 02:59:07,505 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:59:07,506 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:59:07,506 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:59:07,507 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:59:07,507 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:59:07,508 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:59:17,391 - root - INFO - Инициализация бота...
2024-12-04 02:59:17,456 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:59:17,456 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 02:59:17,457 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:59:17,458 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 02:59:17,458 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 02:59:17,459 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 02:59:17,479 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 02:59:17,480 - root - INFO - Инициализация диспетчера...
2024-12-04 02:59:17,481 - root - INFO - Регистрация обработчиков...
2024-12-04 02:59:17,482 - root - INFO - Запуск polling...
2024-12-04 02:59:17,483 - aiogram.dispatcher - INFO - Start polling
2024-12-04 02:59:17,490 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:59:17,492 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 02:59:17,493 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] ()
2024-12-04 02:59:17,498 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:59:17,498 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ('528155210',)
2024-12-04 02:59:17,771 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 02:59:18,156 - aiogram.event - INFO - Update id=659306222 is handled. Duration 265 ms by bot id=7444575424
2024-12-04 02:59:20,121 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 02:59:20,124 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 02:59:20,125 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ('528155210', 1, 0)
2024-12-04 02:59:20,128 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 02:59:20,129 - sqlalchemy.engine.Engine - INFO - [cached since 2.631s ago] ('528155210',)
2024-12-04 02:59:20,130 - root - INFO - <database.user_db.DbProcessor.Key object at 0x000001D7A16F1310>
2024-12-04 02:59:20,131 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 02:59:20,131 - aiogram.event - INFO - Update id=659306223 is not handled. Duration 15 ms by bot id=7444575424
2024-12-04 02:59:20,132 - aiogram.event - ERROR - Cause exception while process update id=659306223 by bot id=7444575424
AttributeError: 'Key' object has no attribute 'name'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 56, in main_menu_handler
    await choosing_key_handler(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_management_router.py", line 42, in choosing_key_handler
    reply_markup=get_key_name_choosing_keyboard(user.keys)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 147, in get_key_name_choosing_keyboard
    button = InlineKeyboardButton(text=key.name,  # Имя ключа отображается на кнопке
                                       ^^^^^^^^
AttributeError: 'Key' object has no attribute 'name'
2024-12-04 02:59:27,231 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:00:03,266 - root - INFO - Инициализация бота...
2024-12-04 03:00:03,331 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:00:03,331 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:00:03,331 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:00:03,333 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:00:03,333 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:00:03,333 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:00:03,351 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:00:03,352 - root - INFO - Инициализация диспетчера...
2024-12-04 03:00:03,352 - root - INFO - Регистрация обработчиков...
2024-12-04 03:00:03,354 - root - INFO - Запуск polling...
2024-12-04 03:00:03,354 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:00:03,361 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:00:03,364 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:00:03,364 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ()
2024-12-04 03:00:03,368 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:00:03,368 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ('528155210',)
2024-12-04 03:00:03,670 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:00:04,102 - aiogram.event - INFO - Update id=659306224 is handled. Duration 265 ms by bot id=7444575424
2024-12-04 03:00:05,368 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:00:05,372 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:00:05,372 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] ('528155210', 1, 0)
2024-12-04 03:00:05,376 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:00:05,377 - sqlalchemy.engine.Engine - INFO - [cached since 2.008s ago] ('528155210',)
2024-12-04 03:00:05,378 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:00:05,379 - aiogram.event - INFO - Update id=659306225 is not handled. Duration 15 ms by bot id=7444575424
2024-12-04 03:00:05,380 - aiogram.event - ERROR - Cause exception while process update id=659306225 by bot id=7444575424
ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<database.user_db.DbProce...t at 0x000001836D361690>, input_type=DbProcessor.Key]
    For further information visit https://errors.pydantic.dev/2.4/v/string_type
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 56, in main_menu_handler
    await choosing_key_handler(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_management_router.py", line 39, in choosing_key_handler
    await callback.message.answer(user.keys[0])
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\types\message.py", line 2037, in answer
    return SendMessage(
           ^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<database.user_db.DbProce...t at 0x000001836D361690>, input_type=DbProcessor.Key]
    For further information visit https://errors.pydantic.dev/2.4/v/string_type
2024-12-04 03:00:23,450 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:00:23,728 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:00:23,730 - root - INFO - Бот остановлен вручную.
2024-12-04 03:00:31,627 - root - INFO - Инициализация бота...
2024-12-04 03:00:31,694 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:00:31,694 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:00:31,694 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:00:31,695 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:00:31,695 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:00:31,696 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:00:31,714 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:00:31,716 - root - INFO - Инициализация диспетчера...
2024-12-04 03:00:31,716 - root - INFO - Регистрация обработчиков...
2024-12-04 03:00:31,717 - root - INFO - Запуск polling...
2024-12-04 03:00:31,718 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:00:31,725 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:00:31,726 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:00:31,727 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ()
2024-12-04 03:00:31,732 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:00:31,732 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ('528155210',)
2024-12-04 03:00:31,971 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:00:32,393 - aiogram.event - INFO - Update id=659306226 is handled. Duration 297 ms by bot id=7444575424
2024-12-04 03:00:33,801 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:00:33,805 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:00:33,806 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] ('528155210', 1, 0)
2024-12-04 03:00:33,809 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:00:33,810 - sqlalchemy.engine.Engine - INFO - [cached since 2.077s ago] ('528155210',)
2024-12-04 03:00:33,890 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:00:33,891 - aiogram.event - INFO - Update id=659306227 is not handled. Duration 94 ms by bot id=7444575424
2024-12-04 03:00:33,892 - aiogram.event - ERROR - Cause exception while process update id=659306227 by bot id=7444575424
AttributeError: 'Key' object has no attribute 'name'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 56, in main_menu_handler
    await choosing_key_handler(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_management_router.py", line 42, in choosing_key_handler
    reply_markup=get_key_name_choosing_keyboard(user.keys)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 147, in get_key_name_choosing_keyboard
    button = InlineKeyboardButton(text=key.name,  # Имя ключа отображается на кнопке
                                       ^^^^^^^^
AttributeError: 'Key' object has no attribute 'name'
2024-12-04 03:00:44,785 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:00:45,040 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:00:45,046 - root - INFO - Бот остановлен вручную.
2024-12-04 03:12:56,960 - root - INFO - Инициализация бота...
2024-12-04 03:15:22,201 - root - INFO - Инициализация бота...
2024-12-04 03:15:41,414 - root - INFO - Инициализация бота...
2024-12-04 03:16:33,502 - root - INFO - Инициализация бота...
2024-12-04 03:16:51,989 - root - INFO - Инициализация бота...
2024-12-04 03:16:52,053 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:16:52,054 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:16:52,054 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:16:52,056 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:16:52,056 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:16:52,057 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:17:10,262 - root - INFO - Инициализация бота...
2024-12-04 03:17:10,366 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:17:10,366 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:17:10,367 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:17:10,368 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:17:10,369 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:17:10,369 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:17:10,402 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:17:10,403 - root - INFO - Инициализация диспетчера...
2024-12-04 03:17:10,404 - root - INFO - Регистрация обработчиков...
2024-12-04 03:17:10,406 - root - INFO - Запуск polling...
2024-12-04 03:17:10,407 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:17:10,417 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:17:10,421 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:17:10,421 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ()
2024-12-04 03:17:10,430 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:17:10,430 - sqlalchemy.engine.Engine - INFO - [generated in 0.00085s] ('528155210',)
2024-12-04 03:17:10,747 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:17:11,343 - aiogram.event - INFO - Update id=659306228 is handled. Duration 469 ms by bot id=7444575424
2024-12-04 03:17:16,842 - aiogram.event - INFO - Update id=659306229 is handled. Duration 125 ms by bot id=7444575424
2024-12-04 03:17:18,714 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:17:18,717 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:17:18,717 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('528155210', 1, 0)
2024-12-04 03:17:18,721 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:17:18,721 - sqlalchemy.engine.Engine - INFO - [cached since 8.291s ago] ('528155210',)
2024-12-04 03:17:18,723 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:17:18,724 - aiogram.event - INFO - Update id=659306230 is not handled. Duration 15 ms by bot id=7444575424
2024-12-04 03:17:18,724 - aiogram.event - ERROR - Cause exception while process update id=659306230 by bot id=7444575424
ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 56, in main_menu_handler
    await choosing_key_handler(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_management_router.py", line 42, in choosing_key_handler
    reply_markup=get_key_name_choosing_keyboard(user.keys)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 158, in get_key_name_choosing_keyboard
    keyboard = InlineKeyboardMarkup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
2024-12-04 03:17:32,963 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:17:33,224 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:17:33,230 - root - INFO - Бот остановлен вручную.
2024-12-04 03:18:30,639 - root - INFO - Инициализация бота...
2024-12-04 03:18:30,707 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:18:30,707 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:18:30,708 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:18:30,709 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:18:30,709 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:18:30,710 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:18:30,725 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:18:30,725 - root - INFO - Инициализация диспетчера...
2024-12-04 03:18:30,726 - root - INFO - Регистрация обработчиков...
2024-12-04 03:18:30,727 - root - INFO - Запуск polling...
2024-12-04 03:18:30,728 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:18:30,735 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:18:30,739 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:18:30,739 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ()
2024-12-04 03:18:30,744 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:18:30,744 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ('528155210',)
2024-12-04 03:18:31,062 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:18:35,161 - aiogram.event - INFO - Update id=659306231 is handled. Duration 327 ms by bot id=7444575424
2024-12-04 03:18:36,361 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:18:36,365 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:18:36,365 - sqlalchemy.engine.Engine - INFO - [generated in 0.00095s] ('528155210', 1, 0)
2024-12-04 03:18:36,369 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:18:36,370 - sqlalchemy.engine.Engine - INFO - [cached since 5.626s ago] ('528155210',)
2024-12-04 03:18:36,371 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:18:36,372 - aiogram.event - INFO - Update id=659306232 is not handled. Duration 15 ms by bot id=7444575424
2024-12-04 03:18:36,373 - aiogram.event - ERROR - Cause exception while process update id=659306232 by bot id=7444575424
ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 56, in main_menu_handler
    await choosing_key_handler(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_management_router.py", line 42, in choosing_key_handler
    reply_markup=get_key_name_choosing_keyboard(user.keys)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 158, in get_key_name_choosing_keyboard
    keyboard = InlineKeyboardMarkup()
               ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
2024-12-04 03:18:38,588 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:19:39,052 - root - INFO - Инициализация бота...
2024-12-04 03:19:39,175 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:19:39,175 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:19:39,176 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:19:39,178 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:19:39,178 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:19:39,179 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:19:39,204 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:19:39,204 - root - INFO - Инициализация диспетчера...
2024-12-04 03:19:39,206 - root - INFO - Регистрация обработчиков...
2024-12-04 03:19:39,208 - root - INFO - Запуск polling...
2024-12-04 03:19:39,209 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:19:39,220 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:19:39,224 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:19:39,224 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ()
2024-12-04 03:19:39,231 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:19:39,231 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ('528155210',)
2024-12-04 03:19:39,529 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:19:40,032 - aiogram.event - INFO - Update id=659306233 is handled. Duration 312 ms by bot id=7444575424
2024-12-04 03:19:42,382 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:19:42,389 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:19:42,390 - sqlalchemy.engine.Engine - INFO - [generated in 0.00113s] ('528155210', 1, 0)
2024-12-04 03:19:42,394 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:19:42,395 - sqlalchemy.engine.Engine - INFO - [cached since 3.163s ago] ('528155210',)
2024-12-04 03:19:42,397 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:19:42,399 - aiogram.event - INFO - Update id=659306234 is not handled. Duration 16 ms by bot id=7444575424
2024-12-04 03:19:42,399 - aiogram.event - ERROR - Cause exception while process update id=659306234 by bot id=7444575424
NameError: name 'get_user_keys' is not defined
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 56, in main_menu_handler
    await choosing_key_handler(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_management_router.py", line 42, in choosing_key_handler
    reply_markup=get_key_name_choosing_keyboard(user.keys)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 158, in get_key_name_choosing_keyboard
    keys = get_user_keys(user_telegram_id)  # Получаем ключи пользователя
           ^^^^^^^^^^^^^
NameError: name 'get_user_keys' is not defined
2024-12-04 03:19:52,423 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:19:52,477 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2702)
2024-12-04 03:19:52,477 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 03:19:52,680 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:19:52,686 - root - INFO - Бот остановлен вручную.
2024-12-04 03:20:29,131 - root - INFO - Инициализация бота...
2024-12-04 03:20:29,254 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:20:29,255 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:20:29,255 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:20:29,258 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:20:29,259 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:20:29,260 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:20:29,290 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:20:29,290 - root - INFO - Инициализация диспетчера...
2024-12-04 03:20:29,293 - root - INFO - Регистрация обработчиков...
2024-12-04 03:20:29,296 - root - INFO - Запуск polling...
2024-12-04 03:20:29,296 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:20:29,310 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:20:29,314 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:20:29,315 - sqlalchemy.engine.Engine - INFO - [generated in 0.00096s] ()
2024-12-04 03:20:29,323 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:20:29,323 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] ('528155210',)
2024-12-04 03:20:29,595 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:20:30,070 - aiogram.event - INFO - Update id=659306235 is handled. Duration 281 ms by bot id=7444575424
2024-12-04 03:20:31,523 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:20:31,526 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:20:31,526 - sqlalchemy.engine.Engine - INFO - [generated in 0.00074s] ('528155210', 1, 0)
2024-12-04 03:20:31,529 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:20:31,530 - sqlalchemy.engine.Engine - INFO - [cached since 2.208s ago] ('528155210',)
2024-12-04 03:20:31,532 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:20:31,534 - aiogram.event - INFO - Update id=659306236 is not handled. Duration 15 ms by bot id=7444575424
2024-12-04 03:20:31,534 - aiogram.event - ERROR - Cause exception while process update id=659306236 by bot id=7444575424
AttributeError: 'Key' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 56, in main_menu_handler
    await choosing_key_handler(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_management_router.py", line 42, in choosing_key_handler
    reply_markup=get_key_name_choosing_keyboard(user.keys)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 162, in get_key_name_choosing_keyboard
    key_info = outline_processor.get_key_info(key.id)
                                              ^^^^^^
AttributeError: 'Key' object has no attribute 'id'
2024-12-04 03:20:36,516 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:20:36,775 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:20:36,780 - root - INFO - Бот остановлен вручную.
2024-12-04 03:21:09,512 - root - INFO - Инициализация бота...
2024-12-04 03:21:09,582 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:21:09,582 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:21:09,582 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:21:09,584 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:21:09,584 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:21:09,584 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:21:09,600 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:21:09,600 - root - INFO - Инициализация диспетчера...
2024-12-04 03:21:09,601 - root - INFO - Регистрация обработчиков...
2024-12-04 03:21:09,603 - root - INFO - Запуск polling...
2024-12-04 03:21:09,604 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:21:09,610 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:21:09,613 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:21:09,613 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ()
2024-12-04 03:21:09,618 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:21:09,618 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ('528155210',)
2024-12-04 03:21:09,927 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:21:13,810 - aiogram.event - INFO - Update id=659306237 is handled. Duration 328 ms by bot id=7444575424
2024-12-04 03:21:14,878 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:21:14,882 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:21:14,883 - sqlalchemy.engine.Engine - INFO - [generated in 0.00099s] ('528155210', 1, 0)
2024-12-04 03:21:14,886 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:21:14,887 - sqlalchemy.engine.Engine - INFO - [cached since 5.268s ago] ('528155210',)
2024-12-04 03:21:15,725 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:21:15,726 - aiogram.event - INFO - Update id=659306238 is not handled. Duration 844 ms by bot id=7444575424
2024-12-04 03:21:15,726 - aiogram.event - ERROR - Cause exception while process update id=659306238 by bot id=7444575424
ValidationError: 1 validation error for InlineKeyboardButton
text
  Input should be a valid string [type=string_type, input_value=OutlineKey(key_id='85', n..., data_limit=1073741824), input_type=OutlineKey]
    For further information visit https://errors.pydantic.dev/2.4/v/string_type
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 56, in main_menu_handler
    await choosing_key_handler(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_management_router.py", line 42, in choosing_key_handler
    reply_markup=get_key_name_choosing_keyboard(user.keys)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 163, in get_key_name_choosing_keyboard
    button = InlineKeyboardButton(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 1 validation error for InlineKeyboardButton
text
  Input should be a valid string [type=string_type, input_value=OutlineKey(key_id='85', n..., data_limit=1073741824), input_type=OutlineKey]
    For further information visit https://errors.pydantic.dev/2.4/v/string_type
2024-12-04 03:21:43,521 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:21:43,780 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:21:43,782 - root - INFO - Бот остановлен вручную.
2024-12-04 03:21:54,669 - root - INFO - Инициализация бота...
2024-12-04 03:21:54,903 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:21:54,905 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:21:54,905 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:21:54,908 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:21:54,909 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:21:54,911 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:21:54,949 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:21:54,950 - root - INFO - Инициализация диспетчера...
2024-12-04 03:21:54,952 - root - INFO - Регистрация обработчиков...
2024-12-04 03:21:54,955 - root - INFO - Запуск polling...
2024-12-04 03:21:54,956 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:21:54,970 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:21:54,975 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:21:54,975 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ()
2024-12-04 03:21:54,981 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:21:54,981 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ('528155210',)
2024-12-04 03:21:55,262 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:21:55,748 - aiogram.event - INFO - Update id=659306239 is handled. Duration 311 ms by bot id=7444575424
2024-12-04 03:21:57,252 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:21:57,256 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:21:57,256 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] ('528155210', 1, 0)
2024-12-04 03:21:57,259 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:21:57,260 - sqlalchemy.engine.Engine - INFO - [cached since 2.279s ago] ('528155210',)
2024-12-04 03:21:58,137 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:21:58,137 - aiogram.event - INFO - Update id=659306240 is not handled. Duration 891 ms by bot id=7444575424
2024-12-04 03:21:58,138 - aiogram.event - ERROR - Cause exception while process update id=659306240 by bot id=7444575424
TypeError: 'OutlineKey' object is not subscriptable
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 56, in main_menu_handler
    await choosing_key_handler(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_management_router.py", line 42, in choosing_key_handler
    reply_markup=get_key_name_choosing_keyboard(user.keys)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 164, in get_key_name_choosing_keyboard
    text=key_info[0],  # Отображаем имя ключа на кнопке
         ~~~~~~~~^^^
TypeError: 'OutlineKey' object is not subscriptable
2024-12-04 03:22:03,937 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:22:04,212 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:22:04,215 - root - INFO - Бот остановлен вручную.
2024-12-04 03:22:20,539 - root - INFO - Инициализация бота...
2024-12-04 03:22:20,683 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:22:20,684 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:22:20,685 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:22:20,687 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:22:20,687 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:22:20,689 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:22:20,720 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:22:20,720 - root - INFO - Инициализация диспетчера...
2024-12-04 03:22:20,723 - root - INFO - Регистрация обработчиков...
2024-12-04 03:22:20,727 - root - INFO - Запуск polling...
2024-12-04 03:22:20,727 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:22:20,744 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:22:20,752 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:22:20,752 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ()
2024-12-04 03:22:20,765 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:22:20,766 - sqlalchemy.engine.Engine - INFO - [generated in 0.00124s] ('528155210',)
2024-12-04 03:22:21,080 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:22:26,113 - aiogram.event - INFO - Update id=659306241 is handled. Duration 312 ms by bot id=7444575424
2024-12-04 03:22:27,184 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:22:27,188 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:22:27,188 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] ('528155210', 1, 0)
2024-12-04 03:22:27,191 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:22:27,192 - sqlalchemy.engine.Engine - INFO - [cached since 6.427s ago] ('528155210',)
2024-12-04 03:22:29,135 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:22:29,203 - aiogram.event - INFO - Update id=659306242 is handled. Duration 2032 ms by bot id=7444575424
2024-12-04 03:22:37,852 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:22:37,855 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:22:37,856 - sqlalchemy.engine.Engine - INFO - [cached since 10.67s ago] ('528155210', 1, 0)
2024-12-04 03:22:37,859 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:22:37,860 - sqlalchemy.engine.Engine - INFO - [cached since 17.09s ago] ('528155210',)
2024-12-04 03:22:39,810 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:22:39,812 - aiogram.event - INFO - Update id=659306243 is handled. Duration 1969 ms by bot id=7444575424
2024-12-04 03:22:44,451 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:22:44,703 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:22:44,708 - root - INFO - Бот остановлен вручную.
2024-12-04 03:31:16,637 - root - INFO - Инициализация бота...
2024-12-04 03:31:16,744 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:31:16,744 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:31:16,744 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:31:16,746 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:31:16,746 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:31:16,747 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:31:16,773 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:31:16,773 - root - INFO - Инициализация диспетчера...
2024-12-04 03:31:16,774 - root - INFO - Регистрация обработчиков...
2024-12-04 03:31:16,776 - root - INFO - Запуск polling...
2024-12-04 03:31:16,776 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:31:16,785 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:31:16,788 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:31:16,788 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ()
2024-12-04 03:31:16,793 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:31:16,794 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ('528155210',)
2024-12-04 03:31:17,091 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:31:48,457 - aiogram.event - INFO - Update id=659306244 is handled. Duration 312 ms by bot id=7444575424
2024-12-04 03:31:50,061 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:31:50,064 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:31:50,065 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] ('528155210', 1, 0)
2024-12-04 03:31:50,067 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:31:50,068 - sqlalchemy.engine.Engine - INFO - [cached since 33.27s ago] ('528155210',)
2024-12-04 03:31:51,943 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:31:52,066 - aiogram.event - INFO - Update id=659306245 is handled. Duration 2000 ms by bot id=7444575424
2024-12-04 03:31:53,536 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:31:53,537 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:31:53,537 - sqlalchemy.engine.Engine - INFO - [cached since 3.474s ago] ('528155210', 1, 0)
2024-12-04 03:31:53,541 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:31:53,541 - sqlalchemy.engine.Engine - INFO - [cached since 36.75s ago] ('528155210',)
2024-12-04 03:31:55,035 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:31:55,035 - aiogram.event - INFO - Update id=659306246 is handled. Duration 1500 ms by bot id=7444575424
2024-12-04 03:32:04,918 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:32:05,184 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:32:05,190 - root - INFO - Бот остановлен вручную.
2024-12-04 03:32:54,478 - root - INFO - Инициализация бота...
2024-12-04 03:32:54,586 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:32:54,588 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:32:54,588 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:32:54,590 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:32:54,591 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:32:54,592 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:32:54,622 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:32:54,623 - root - INFO - Инициализация диспетчера...
2024-12-04 03:32:54,625 - root - INFO - Регистрация обработчиков...
2024-12-04 03:32:54,628 - root - INFO - Запуск polling...
2024-12-04 03:32:54,628 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:32:54,638 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:32:54,643 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:32:54,644 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ()
2024-12-04 03:32:54,650 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:32:54,651 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ('528155210',)
2024-12-04 03:32:54,971 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:32:55,394 - aiogram.event - INFO - Update id=659306247 is handled. Duration 266 ms by bot id=7444575424
2024-12-04 03:32:57,127 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:32:57,133 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:32:57,133 - sqlalchemy.engine.Engine - INFO - [generated in 0.00095s] ('528155210', 1, 0)
2024-12-04 03:32:57,136 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:32:57,137 - sqlalchemy.engine.Engine - INFO - [cached since 2.487s ago] ('528155210',)
2024-12-04 03:32:58,806 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:32:58,886 - aiogram.event - INFO - Update id=659306248 is handled. Duration 1766 ms by bot id=7444575424
2024-12-04 03:33:00,162 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:33:00,164 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:33:00,164 - sqlalchemy.engine.Engine - INFO - [cached since 3.032s ago] ('528155210', 1, 0)
2024-12-04 03:33:00,166 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:33:00,167 - sqlalchemy.engine.Engine - INFO - [cached since 5.517s ago] ('528155210',)
2024-12-04 03:33:01,719 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:33:01,720 - aiogram.event - INFO - Update id=659306249 is handled. Duration 1562 ms by bot id=7444575424
2024-12-04 03:33:06,371 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:33:55,704 - root - INFO - Инициализация бота...
2024-12-04 03:33:55,792 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:33:55,793 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:33:55,793 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:33:55,795 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:33:55,795 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:33:55,796 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:34:22,488 - root - INFO - Инициализация бота...
2024-12-04 03:34:22,573 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:34:22,574 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:34:22,574 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:34:22,577 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:34:22,577 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:34:22,578 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:34:22,605 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:34:22,605 - root - INFO - Инициализация диспетчера...
2024-12-04 03:34:22,606 - root - INFO - Регистрация обработчиков...
2024-12-04 03:34:22,609 - root - INFO - Запуск polling...
2024-12-04 03:34:22,609 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:34:22,617 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:34:22,620 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:34:22,621 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ()
2024-12-04 03:34:22,627 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:34:22,627 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('528155210',)
2024-12-04 03:34:22,878 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:34:27,274 - aiogram.event - INFO - Update id=659306250 is handled. Duration 297 ms by bot id=7444575424
2024-12-04 03:34:28,810 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:34:28,812 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:34:28,813 - sqlalchemy.engine.Engine - INFO - [generated in 0.00080s] ('528155210', 1, 0)
2024-12-04 03:34:28,816 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:34:28,816 - sqlalchemy.engine.Engine - INFO - [cached since 6.189s ago] ('528155210',)
2024-12-04 03:34:30,426 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:34:30,490 - aiogram.event - INFO - Update id=659306251 is handled. Duration 1687 ms by bot id=7444575424
2024-12-04 03:34:31,614 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:34:31,615 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:34:31,615 - sqlalchemy.engine.Engine - INFO - [cached since 2.803s ago] ('528155210', 1, 0)
2024-12-04 03:34:31,619 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:34:31,620 - sqlalchemy.engine.Engine - INFO - [cached since 8.993s ago] ('528155210',)
2024-12-04 03:34:33,171 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:34:33,172 - aiogram.event - INFO - Update id=659306252 is handled. Duration 1562 ms by bot id=7444575424
2024-12-04 03:34:41,696 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:36:25,596 - root - INFO - Инициализация бота...
2024-12-04 03:36:25,734 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:36:25,735 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:36:25,736 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:36:25,738 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:36:25,738 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:36:25,740 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:36:25,783 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:36:25,783 - root - INFO - Инициализация диспетчера...
2024-12-04 03:36:25,785 - root - INFO - Регистрация обработчиков...
2024-12-04 03:36:25,788 - root - INFO - Запуск polling...
2024-12-04 03:36:25,788 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:36:25,802 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:36:25,807 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:36:25,808 - sqlalchemy.engine.Engine - INFO - [generated in 0.00110s] ()
2024-12-04 03:36:25,819 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:36:25,820 - sqlalchemy.engine.Engine - INFO - [generated in 0.00101s] ('528155210',)
2024-12-04 03:36:26,137 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:36:29,165 - aiogram.event - INFO - Update id=659306253 is handled. Duration 1297 ms by bot id=7444575424
2024-12-04 03:36:31,270 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:36:31,275 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:36:31,275 - sqlalchemy.engine.Engine - INFO - [generated in 0.00089s] ('528155210', 1, 0)
2024-12-04 03:36:31,278 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:36:31,279 - sqlalchemy.engine.Engine - INFO - [cached since 5.46s ago] ('528155210',)
2024-12-04 03:36:32,975 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:36:33,050 - aiogram.event - INFO - Update id=659306254 is handled. Duration 1780 ms by bot id=7444575424
2024-12-04 03:36:34,561 - aiogram.event - INFO - Update id=659306255 is handled. Duration 94 ms by bot id=7444575424
2024-12-04 03:36:42,009 - aiogram.event - INFO - Update id=659306256 is handled. Duration 108 ms by bot id=7444575424
2024-12-04 03:36:47,037 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:36:47,293 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:36:47,300 - root - INFO - Бот остановлен вручную.
2024-12-04 03:40:00,789 - root - INFO - Инициализация бота...
2024-12-04 03:40:00,855 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:40:00,855 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:40:00,856 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:40:00,857 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:40:00,858 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:40:00,858 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:40:00,880 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:40:00,880 - root - INFO - Инициализация диспетчера...
2024-12-04 03:40:00,881 - root - INFO - Регистрация обработчиков...
2024-12-04 03:40:00,883 - root - INFO - Запуск polling...
2024-12-04 03:40:00,883 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:40:00,891 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:40:00,894 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:40:00,894 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ()
2024-12-04 03:40:00,899 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:40:00,899 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ('528155210',)
2024-12-04 03:40:02,249 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:40:04,864 - aiogram.event - INFO - Update id=659306257 is handled. Duration 327 ms by bot id=7444575424
2024-12-04 03:40:06,357 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:40:06,363 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:40:06,363 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] ('528155210', 1, 0)
2024-12-04 03:40:06,368 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:40:06,369 - sqlalchemy.engine.Engine - INFO - [cached since 5.47s ago] ('528155210',)
2024-12-04 03:40:08,208 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:40:08,278 - aiogram.event - INFO - Update id=659306258 is handled. Duration 1937 ms by bot id=7444575424
2024-12-04 03:40:09,576 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:40:09,580 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:40:09,581 - sqlalchemy.engine.Engine - INFO - [generated in 0.00121s] ('93', 1, 0)
2024-12-04 03:40:09,584 - aiogram.event - INFO - Update id=659306259 is not handled. Duration 125 ms by bot id=7444575424
2024-12-04 03:40:09,585 - aiogram.event - ERROR - Cause exception while process update id=659306259 by bot id=7444575424
ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 42, in choosing_key_handler
    markup = InlineKeyboardMarkup()
             ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
2024-12-04 03:40:23,042 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:47:22,282 - root - INFO - Инициализация бота...
2024-12-04 03:47:22,357 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:47:22,358 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:47:22,358 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:47:22,360 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:47:22,360 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:47:22,361 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:47:22,387 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:47:22,387 - root - INFO - Инициализация диспетчера...
2024-12-04 03:47:22,388 - root - INFO - Регистрация обработчиков...
2024-12-04 03:47:22,390 - root - INFO - Запуск polling...
2024-12-04 03:47:22,390 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:47:22,398 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:47:22,401 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:47:22,401 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ()
2024-12-04 03:47:22,406 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:47:22,407 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] ('528155210',)
2024-12-04 03:47:22,720 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:47:25,370 - aiogram.event - INFO - Update id=659306260 is handled. Duration 280 ms by bot id=7444575424
2024-12-04 03:47:26,825 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:47:26,827 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:47:26,828 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ('528155210', 1, 0)
2024-12-04 03:47:26,830 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:47:26,830 - sqlalchemy.engine.Engine - INFO - [cached since 4.424s ago] ('528155210',)
2024-12-04 03:47:28,616 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:47:28,696 - aiogram.event - INFO - Update id=659306261 is handled. Duration 1859 ms by bot id=7444575424
2024-12-04 03:47:29,885 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:47:29,890 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:47:29,890 - sqlalchemy.engine.Engine - INFO - [generated in 0.00113s] ('85', 1, 0)
2024-12-04 03:47:29,893 - aiogram.event - INFO - Update id=659306262 is not handled. Duration 94 ms by bot id=7444575424
2024-12-04 03:47:29,894 - aiogram.event - ERROR - Cause exception while process update id=659306262 by bot id=7444575424
ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 42, in choosing_key_handler
    markup = InlineKeyboardMarkup()
             ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
2024-12-04 03:48:33,323 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:48:33,582 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:48:33,586 - root - INFO - Бот остановлен вручную.
2024-12-04 03:48:42,893 - root - INFO - Инициализация бота...
2024-12-04 03:48:42,989 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:48:42,990 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:48:42,990 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:48:42,992 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:48:42,993 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:48:42,994 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:48:43,022 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:48:43,022 - root - INFO - Инициализация диспетчера...
2024-12-04 03:48:43,023 - root - INFO - Регистрация обработчиков...
2024-12-04 03:48:43,025 - root - INFO - Запуск polling...
2024-12-04 03:48:43,025 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:48:43,033 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:48:43,035 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:48:43,036 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] ()
2024-12-04 03:48:43,040 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:48:43,040 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ('528155210',)
2024-12-04 03:48:43,274 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:48:46,007 - aiogram.event - INFO - Update id=659306263 is handled. Duration 295 ms by bot id=7444575424
2024-12-04 03:48:47,288 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:48:47,291 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:48:47,292 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] ('528155210', 1, 0)
2024-12-04 03:48:47,296 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:48:47,296 - sqlalchemy.engine.Engine - INFO - [cached since 4.256s ago] ('528155210',)
2024-12-04 03:48:49,061 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:48:49,162 - aiogram.event - INFO - Update id=659306264 is handled. Duration 1875 ms by bot id=7444575424
2024-12-04 03:48:50,275 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:48:50,279 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:48:50,280 - sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] ('85', 1, 0)
2024-12-04 03:48:50,283 - aiogram.event - INFO - Update id=659306265 is not handled. Duration 77 ms by bot id=7444575424
2024-12-04 03:48:50,284 - aiogram.event - ERROR - Cause exception while process update id=659306265 by bot id=7444575424
TypeError: get_key_action_keyboard() missing 1 required positional argument: 'key_info'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 41, in choosing_key_handler
    await callback.message.answer("Выберите действие для ключа:", reply_markup=get_key_action_keyboard())
                                                                               ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: get_key_action_keyboard() missing 1 required positional argument: 'key_info'
2024-12-04 03:50:05,619 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:50:05,875 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:50:05,877 - root - INFO - Бот остановлен вручную.
2024-12-04 03:50:17,120 - root - INFO - Инициализация бота...
2024-12-04 03:50:17,237 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:50:17,237 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:50:17,238 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:50:17,240 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:50:17,240 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:50:17,242 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:50:17,285 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:50:17,285 - root - INFO - Инициализация диспетчера...
2024-12-04 03:50:17,287 - root - INFO - Регистрация обработчиков...
2024-12-04 03:50:17,289 - root - INFO - Запуск polling...
2024-12-04 03:50:17,290 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:50:17,301 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:50:17,305 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:50:17,306 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ()
2024-12-04 03:50:17,313 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:50:17,314 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ('528155210',)
2024-12-04 03:50:17,621 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:50:18,027 - aiogram.event - INFO - Update id=659306266 is handled. Duration 282 ms by bot id=7444575424
2024-12-04 03:50:19,882 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:50:19,885 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:50:19,886 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ('528155210', 1, 0)
2024-12-04 03:50:19,889 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:50:19,889 - sqlalchemy.engine.Engine - INFO - [cached since 2.575s ago] ('528155210',)
2024-12-04 03:50:21,819 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:50:21,886 - aiogram.event - INFO - Update id=659306267 is handled. Duration 2016 ms by bot id=7444575424
2024-12-04 03:50:23,106 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:50:23,109 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:50:23,110 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] ('85', 1, 0)
2024-12-04 03:50:24,025 - aiogram.event - INFO - Update id=659306268 is not handled. Duration 1000 ms by bot id=7444575424
2024-12-04 03:50:24,026 - aiogram.event - ERROR - Cause exception while process update id=659306268 by bot id=7444575424
TypeError: BaseModel.__init__() takes 1 positional argument but 2 were given
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 44, in choosing_key_handler
    await callback.message.answer("Выберите действие для ключа:", reply_markup=get_key_action_keyboard(key_info))
                                                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 161, in get_key_action_keyboard
    view_traffic = InlineKeyboardButton("Посмотреть объем трафика", callback_data=f"traffic_{key_info.key_id}")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.__init__() takes 1 positional argument but 2 were given
2024-12-04 03:50:39,850 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:50:40,108 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:50:40,116 - root - INFO - Бот остановлен вручную.
2024-12-04 03:51:17,031 - root - INFO - Инициализация бота...
2024-12-04 03:51:17,187 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:51:17,188 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:51:17,189 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:51:17,192 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:51:17,192 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:51:17,194 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:51:17,237 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:51:17,238 - root - INFO - Инициализация диспетчера...
2024-12-04 03:51:17,240 - root - INFO - Регистрация обработчиков...
2024-12-04 03:51:17,243 - root - INFO - Запуск polling...
2024-12-04 03:51:17,244 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:51:17,258 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:51:17,262 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:51:17,262 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ()
2024-12-04 03:51:17,269 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:51:17,270 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ('528155210',)
2024-12-04 03:51:17,526 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:51:17,962 - aiogram.event - INFO - Update id=659306269 is handled. Duration 297 ms by bot id=7444575424
2024-12-04 03:51:20,351 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:51:20,353 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:51:20,354 - sqlalchemy.engine.Engine - INFO - [generated in 0.00081s] ('528155210', 1, 0)
2024-12-04 03:51:20,356 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:51:20,357 - sqlalchemy.engine.Engine - INFO - [cached since 3.088s ago] ('528155210',)
2024-12-04 03:51:22,201 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:51:22,302 - aiogram.event - INFO - Update id=659306270 is handled. Duration 1952 ms by bot id=7444575424
2024-12-04 03:51:23,349 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:51:23,352 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:51:23,353 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] ('85', 1, 0)
2024-12-04 03:51:24,339 - aiogram.event - INFO - Update id=659306271 is handled. Duration 1077 ms by bot id=7444575424
2024-12-04 03:51:35,476 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:51:35,727 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:51:35,733 - root - INFO - Бот остановлен вручную.
2024-12-04 03:52:47,206 - root - INFO - Инициализация бота...
2024-12-04 03:52:47,311 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:52:47,312 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:52:47,312 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:52:47,315 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:52:47,315 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:52:47,316 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:52:47,381 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:52:47,382 - root - INFO - Инициализация диспетчера...
2024-12-04 03:52:47,385 - root - INFO - Регистрация обработчиков...
2024-12-04 03:52:47,389 - root - INFO - Запуск polling...
2024-12-04 03:52:47,390 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:52:47,407 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:52:47,413 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:52:47,413 - sqlalchemy.engine.Engine - INFO - [generated in 0.00067s] ()
2024-12-04 03:52:47,422 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:52:47,423 - sqlalchemy.engine.Engine - INFO - [generated in 0.00106s] ('528155210',)
2024-12-04 03:52:47,775 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:52:53,084 - aiogram.event - INFO - Update id=659306272 is handled. Duration 329 ms by bot id=7444575424
2024-12-04 03:52:54,457 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:52:54,460 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:52:54,461 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ('528155210', 1, 0)
2024-12-04 03:52:54,464 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:52:54,464 - sqlalchemy.engine.Engine - INFO - [cached since 7.043s ago] ('528155210',)
2024-12-04 03:52:56,280 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:52:56,347 - aiogram.event - INFO - Update id=659306273 is handled. Duration 1890 ms by bot id=7444575424
2024-12-04 03:52:58,809 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:52:58,815 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:52:58,817 - sqlalchemy.engine.Engine - INFO - [generated in 0.00192s] ('93', 1, 0)
2024-12-04 03:52:58,964 - aiogram.event - INFO - Update id=659306274 is handled. Duration 1109 ms by bot id=7444575424
2024-12-04 03:53:05,345 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:53:05,346 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:53:05,346 - sqlalchemy.engine.Engine - INFO - [cached since 6.532s ago] ('93', 1, 0)
2024-12-04 03:53:05,480 - aiogram.event - INFO - Update id=659306275 is handled. Duration 1172 ms by bot id=7444575424
2024-12-04 03:53:10,458 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:53:10,717 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:53:10,724 - root - INFO - Бот остановлен вручную.
2024-12-04 03:55:15,159 - root - INFO - Инициализация бота...
2024-12-04 03:55:15,210 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:55:15,211 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 03:55:15,211 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:55:15,212 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 03:55:15,212 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 03:55:15,213 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 03:55:15,232 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 03:55:15,232 - root - INFO - Инициализация диспетчера...
2024-12-04 03:55:15,233 - root - INFO - Регистрация обработчиков...
2024-12-04 03:55:15,234 - root - INFO - Запуск polling...
2024-12-04 03:55:15,234 - aiogram.dispatcher - INFO - Start polling
2024-12-04 03:55:15,240 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:55:15,242 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 03:55:15,242 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ()
2024-12-04 03:55:15,245 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:55:15,245 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ('528155210',)
2024-12-04 03:55:15,465 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:55:19,972 - aiogram.event - INFO - Update id=659306276 is handled. Duration 219 ms by bot id=7444575424
2024-12-04 03:55:21,367 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:55:21,368 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:55:21,368 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ('528155210', 1, 0)
2024-12-04 03:55:21,370 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 03:55:21,370 - sqlalchemy.engine.Engine - INFO - [cached since 6.125s ago] ('528155210',)
2024-12-04 03:55:22,930 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 03:55:22,992 - aiogram.event - INFO - Update id=659306277 is handled. Duration 1625 ms by bot id=7444575424
2024-12-04 03:55:25,182 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:55:25,184 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:55:25,184 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ('93', 1, 0)
2024-12-04 03:55:25,298 - aiogram.event - INFO - Update id=659306278 is handled. Duration 983 ms by bot id=7444575424
2024-12-04 03:55:29,267 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 03:55:29,268 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 03:55:29,268 - sqlalchemy.engine.Engine - INFO - [cached since 4.085s ago] ('93', 1, 0)
2024-12-04 03:55:29,393 - aiogram.event - INFO - Update id=659306279 is handled. Duration 1062 ms by bot id=7444575424
2024-12-04 03:55:32,551 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 03:55:32,795 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 03:55:32,797 - root - INFO - Бот остановлен вручную.
2024-12-04 04:01:20,565 - root - INFO - Инициализация бота...
2024-12-04 04:01:20,622 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:01:20,623 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 04:01:20,623 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:01:20,624 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 04:01:20,624 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:01:20,625 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:03:04,300 - root - INFO - Инициализация бота...
2024-12-04 04:03:04,384 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:03:04,384 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 04:03:04,385 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:03:04,386 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 04:03:04,386 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:03:04,387 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:03:04,417 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 04:03:04,417 - root - INFO - Инициализация диспетчера...
2024-12-04 04:03:04,419 - root - INFO - Регистрация обработчиков...
2024-12-04 04:03:04,420 - root - INFO - Запуск polling...
2024-12-04 04:03:04,421 - aiogram.dispatcher - INFO - Start polling
2024-12-04 04:03:04,428 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:03:04,431 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 04:03:04,432 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ()
2024-12-04 04:03:04,436 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:03:04,437 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ('528155210',)
2024-12-04 04:03:04,726 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:03:05,061 - aiogram.event - INFO - Update id=659306280 is handled. Duration 234 ms by bot id=7444575424
2024-12-04 04:03:07,822 - aiogram.event - INFO - Update id=659306281 is handled. Duration 109 ms by bot id=7444575424
2024-12-04 04:03:09,131 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:03:09,132 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:03:09,133 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('528155210', 1, 0)
2024-12-04 04:03:09,134 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:03:09,134 - sqlalchemy.engine.Engine - INFO - [cached since 4.698s ago] ('528155210',)
2024-12-04 04:03:10,770 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:03:10,838 - aiogram.event - INFO - Update id=659306282 is handled. Duration 1704 ms by bot id=7444575424
2024-12-04 04:03:12,862 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:03:12,863 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:03:12,864 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('85', 1, 0)
2024-12-04 04:03:12,997 - aiogram.event - INFO - Update id=659306283 is handled. Duration 1092 ms by bot id=7444575424
2024-12-04 04:03:14,942 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:03:14,942 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:03:14,943 - sqlalchemy.engine.Engine - INFO - [cached since 2.079s ago] ('85', 1, 0)
2024-12-04 04:03:15,024 - aiogram.event - INFO - Update id=659306284 is handled. Duration 77 ms by bot id=7444575424
2024-12-04 04:03:18,707 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:03:18,707 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:03:18,707 - sqlalchemy.engine.Engine - INFO - [cached since 5.844s ago] ('85', 1, 0)
2024-12-04 04:03:18,780 - aiogram.event - INFO - Update id=659306285 is handled. Duration 77 ms by bot id=7444575424
2024-12-04 04:03:20,974 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:03:20,975 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:03:20,975 - sqlalchemy.engine.Engine - INFO - [cached since 8.112s ago] ('85', 1, 0)
2024-12-04 04:03:20,977 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:03:21,053 - aiogram.event - INFO - Update id=659306286 is handled. Duration 77 ms by bot id=7444575424
2024-12-04 04:03:24,265 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:03:24,265 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:03:24,265 - sqlalchemy.engine.Engine - INFO - [cached since 11.4s ago] ('85', 1, 0)
2024-12-04 04:03:24,267 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:03:24,339 - aiogram.event - INFO - Update id=659306287 is handled. Duration 94 ms by bot id=7444575424
2024-12-04 04:03:28,772 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 04:03:29,028 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:03:29,030 - root - INFO - Бот остановлен вручную.
2024-12-04 04:03:39,261 - root - INFO - Инициализация бота...
2024-12-04 04:03:39,320 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:03:39,321 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 04:03:39,321 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:03:39,323 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 04:03:39,323 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:03:39,324 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:03:39,348 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 04:03:39,348 - root - INFO - Инициализация диспетчера...
2024-12-04 04:03:39,349 - root - INFO - Регистрация обработчиков...
2024-12-04 04:03:39,350 - root - INFO - Запуск polling...
2024-12-04 04:03:39,351 - aiogram.dispatcher - INFO - Start polling
2024-12-04 04:03:39,356 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:03:39,359 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 04:03:39,360 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ()
2024-12-04 04:03:39,363 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:03:39,364 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ('528155210',)
2024-12-04 04:03:39,594 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:03:40,144 - aiogram.event - INFO - Update id=659306288 is handled. Duration 359 ms by bot id=7444575424
2024-12-04 04:03:41,560 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:03:41,561 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:03:41,561 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ('528155210', 1, 0)
2024-12-04 04:03:41,562 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:03:41,562 - sqlalchemy.engine.Engine - INFO - [cached since 2.199s ago] ('528155210',)
2024-12-04 04:03:43,178 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:03:43,243 - aiogram.event - INFO - Update id=659306289 is handled. Duration 1671 ms by bot id=7444575424
2024-12-04 04:03:47,263 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:03:47,265 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:03:47,266 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ('93', 1, 0)
2024-12-04 04:03:47,390 - aiogram.event - INFO - Update id=659306290 is handled. Duration 1312 ms by bot id=7444575424
2024-12-04 04:03:49,889 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:03:49,889 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:03:49,889 - sqlalchemy.engine.Engine - INFO - [cached since 2.624s ago] ('93', 1, 0)
2024-12-04 04:03:49,960 - aiogram.event - INFO - Update id=659306291 is handled. Duration 62 ms by bot id=7444575424
2024-12-04 04:03:53,060 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 04:03:53,321 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:03:53,323 - root - INFO - Бот остановлен вручную.
2024-12-04 04:05:26,113 - root - INFO - Инициализация бота...
2024-12-04 04:05:26,203 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:05:26,203 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 04:05:26,204 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:05:26,205 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 04:05:26,205 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:05:26,207 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:05:26,245 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 04:05:26,245 - root - INFO - Инициализация диспетчера...
2024-12-04 04:05:26,247 - root - INFO - Регистрация обработчиков...
2024-12-04 04:05:26,248 - root - INFO - Запуск polling...
2024-12-04 04:05:26,249 - aiogram.dispatcher - INFO - Start polling
2024-12-04 04:05:26,258 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:05:26,261 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 04:05:26,261 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ()
2024-12-04 04:05:26,266 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:05:26,267 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] ('528155210',)
2024-12-04 04:05:26,505 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:05:36,844 - aiogram.event - INFO - Update id=659306292 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 04:05:37,990 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:05:37,993 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:05:37,993 - sqlalchemy.engine.Engine - INFO - [generated in 0.00072s] ('528155210', 1, 0)
2024-12-04 04:05:37,997 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:05:37,997 - sqlalchemy.engine.Engine - INFO - [cached since 11.73s ago] ('528155210',)
2024-12-04 04:05:39,716 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:05:39,785 - aiogram.event - INFO - Update id=659306293 is handled. Duration 1797 ms by bot id=7444575424
2024-12-04 04:05:41,944 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:05:41,946 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:05:41,947 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ('85', 1, 0)
2024-12-04 04:05:42,078 - aiogram.event - INFO - Update id=659306294 is handled. Duration 1219 ms by bot id=7444575424
2024-12-04 04:05:43,970 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:05:43,971 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:05:43,972 - sqlalchemy.engine.Engine - INFO - [cached since 2.026s ago] ('85', 1, 0)
2024-12-04 04:05:44,080 - aiogram.event - INFO - Update id=659306295 is handled. Duration 109 ms by bot id=7444575424
2024-12-04 04:05:46,242 - aiogram.event - INFO - Update id=659306296 is handled. Duration 187 ms by bot id=7444575424
2024-12-04 04:05:47,551 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:05:47,552 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:05:47,552 - sqlalchemy.engine.Engine - INFO - [cached since 9.56s ago] ('528155210', 1, 0)
2024-12-04 04:05:47,554 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:05:47,554 - sqlalchemy.engine.Engine - INFO - [cached since 21.29s ago] ('528155210',)
2024-12-04 04:05:49,337 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:05:49,427 - aiogram.event - INFO - Update id=659306297 is handled. Duration 1875 ms by bot id=7444575424
2024-12-04 04:05:52,198 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:05:52,199 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:05:52,199 - sqlalchemy.engine.Engine - INFO - [cached since 10.25s ago] ('93', 1, 0)
2024-12-04 04:05:52,414 - aiogram.event - INFO - Update id=659306298 is handled. Duration 1390 ms by bot id=7444575424
2024-12-04 04:05:55,360 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:05:55,361 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:05:55,361 - sqlalchemy.engine.Engine - INFO - [cached since 13.42s ago] ('93', 1, 0)
2024-12-04 04:05:55,362 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:05:55,438 - aiogram.event - INFO - Update id=659306299 is handled. Duration 78 ms by bot id=7444575424
2024-12-04 04:05:59,122 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 04:05:59,391 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:05:59,393 - root - INFO - Бот остановлен вручную.
2024-12-04 04:13:22,824 - root - INFO - Инициализация бота...
2024-12-04 04:13:22,880 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:13:22,880 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 04:13:22,880 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:13:22,881 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 04:13:22,881 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:13:22,882 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:13:22,905 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 04:13:22,905 - root - INFO - Инициализация диспетчера...
2024-12-04 04:13:22,906 - root - INFO - Регистрация обработчиков...
2024-12-04 04:13:22,907 - root - INFO - Запуск polling...
2024-12-04 04:13:22,908 - aiogram.dispatcher - INFO - Start polling
2024-12-04 04:13:22,913 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:13:22,915 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 04:13:22,915 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ()
2024-12-04 04:13:22,919 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:13:22,919 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('528155210',)
2024-12-04 04:13:23,208 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:13:31,063 - aiogram.event - INFO - Update id=659306300 is handled. Duration 297 ms by bot id=7444575424
2024-12-04 04:13:32,692 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:13:32,695 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:13:32,695 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ('528155210', 1, 0)
2024-12-04 04:13:32,698 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:13:32,699 - sqlalchemy.engine.Engine - INFO - [cached since 9.78s ago] ('528155210',)
2024-12-04 04:13:34,276 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:13:34,339 - aiogram.event - INFO - Update id=659306301 is handled. Duration 1655 ms by bot id=7444575424
2024-12-04 04:13:36,785 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:13:36,787 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:13:36,787 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('93', 1, 0)
2024-12-04 04:13:36,917 - aiogram.event - INFO - Update id=659306302 is handled. Duration 1172 ms by bot id=7444575424
2024-12-04 04:13:39,182 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:13:39,183 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:13:39,184 - sqlalchemy.engine.Engine - INFO - [cached since 2.397s ago] ('93', 1, 0)
2024-12-04 04:13:39,876 - aiogram.event - INFO - Update id=659306303 is not handled. Duration 702 ms by bot id=7444575424
2024-12-04 04:13:39,876 - aiogram.event - ERROR - Cause exception while process update id=659306303 by bot id=7444575424
TypeError: 'NoneType' object is not callable
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 63, in show_traffic_handler
    total_traffic = key_info.used_bytes() / (1024 ** 2)
                    ^^^^^^^^^^^^^^^^^^^^^
TypeError: 'NoneType' object is not callable
2024-12-04 04:13:56,089 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 04:13:56,347 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:13:56,350 - root - INFO - Бот остановлен вручную.
2024-12-04 04:14:06,593 - root - INFO - Инициализация бота...
2024-12-04 04:14:06,689 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:14:06,690 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 04:14:06,690 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:14:06,692 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 04:14:06,692 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:14:06,693 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:14:06,732 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 04:14:06,732 - root - INFO - Инициализация диспетчера...
2024-12-04 04:14:06,734 - root - INFO - Регистрация обработчиков...
2024-12-04 04:14:06,736 - root - INFO - Запуск polling...
2024-12-04 04:14:06,737 - aiogram.dispatcher - INFO - Start polling
2024-12-04 04:14:06,745 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:14:06,749 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 04:14:06,749 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ()
2024-12-04 04:14:06,755 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:14:06,756 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ('528155210',)
2024-12-04 04:14:06,998 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:14:07,393 - aiogram.event - INFO - Update id=659306304 is handled. Duration 281 ms by bot id=7444575424
2024-12-04 04:14:09,606 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:14:09,608 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:14:09,608 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ('528155210', 1, 0)
2024-12-04 04:14:09,610 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:14:09,610 - sqlalchemy.engine.Engine - INFO - [cached since 2.855s ago] ('528155210',)
2024-12-04 04:14:11,277 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:14:11,348 - aiogram.event - INFO - Update id=659306305 is handled. Duration 1734 ms by bot id=7444575424
2024-12-04 04:14:13,355 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:14:13,358 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:14:13,358 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ('85', 1, 0)
2024-12-04 04:14:13,489 - aiogram.event - INFO - Update id=659306306 is handled. Duration 1062 ms by bot id=7444575424
2024-12-04 04:14:15,338 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:14:15,340 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:14:15,340 - sqlalchemy.engine.Engine - INFO - [cached since 1.982s ago] ('85', 1, 0)
2024-12-04 04:14:16,124 - aiogram.event - INFO - Update id=659306307 is not handled. Duration 795 ms by bot id=7444575424
2024-12-04 04:14:16,125 - aiogram.event - ERROR - Cause exception while process update id=659306307 by bot id=7444575424
TypeError: unsupported operand type(s) for /: 'NoneType' and 'int'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 63, in show_traffic_handler
    total_traffic = key_info.used_bytes / (1024 ** 2)
                    ~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for /: 'NoneType' and 'int'
2024-12-04 04:14:23,514 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 04:14:23,785 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:14:23,789 - root - INFO - Бот остановлен вручную.
2024-12-04 04:15:08,246 - root - INFO - Инициализация бота...
2024-12-04 04:15:08,328 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:15:08,329 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 04:15:08,329 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:15:08,331 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 04:15:08,331 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:15:08,332 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:15:08,361 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 04:15:08,361 - root - INFO - Инициализация диспетчера...
2024-12-04 04:15:08,362 - root - INFO - Регистрация обработчиков...
2024-12-04 04:15:08,364 - root - INFO - Запуск polling...
2024-12-04 04:15:08,364 - aiogram.dispatcher - INFO - Start polling
2024-12-04 04:15:08,371 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:15:08,374 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 04:15:08,374 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ()
2024-12-04 04:15:08,379 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:15:08,379 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ('528155210',)
2024-12-04 04:15:08,617 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:15:14,557 - aiogram.event - INFO - Update id=659306308 is handled. Duration 219 ms by bot id=7444575424
2024-12-04 04:15:16,162 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:15:16,165 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:15:16,165 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] ('528155210', 1, 0)
2024-12-04 04:15:16,166 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:15:16,166 - sqlalchemy.engine.Engine - INFO - [cached since 7.787s ago] ('528155210',)
2024-12-04 04:15:17,831 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:15:17,899 - aiogram.event - INFO - Update id=659306309 is handled. Duration 1734 ms by bot id=7444575424
2024-12-04 04:15:20,836 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:15:20,838 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:15:20,838 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] ('85', 1, 0)
2024-12-04 04:15:20,957 - aiogram.event - INFO - Update id=659306310 is handled. Duration 1094 ms by bot id=7444575424
2024-12-04 04:15:22,746 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:15:22,747 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:15:22,747 - sqlalchemy.engine.Engine - INFO - [cached since 1.909s ago] ('85', 1, 0)
2024-12-04 04:15:23,410 - aiogram.event - INFO - Update id=659306311 is not handled. Duration 672 ms by bot id=7444575424
2024-12-04 04:15:23,410 - aiogram.event - ERROR - Cause exception while process update id=659306311 by bot id=7444575424
TypeError: unsupported operand type(s) for /: 'NoneType' and 'int'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 65, in show_traffic_handler
    total_traffic = key_info.used_bytes / (1024 ** 2)
                    ~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for /: 'NoneType' and 'int'
2024-12-04 04:15:30,429 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 04:15:30,674 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:15:30,676 - root - INFO - Бот остановлен вручную.
2024-12-04 04:16:27,335 - root - INFO - Инициализация бота...
2024-12-04 04:16:27,393 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:16:27,393 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 04:16:27,393 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:16:27,394 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 04:16:27,394 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:16:27,395 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:16:27,418 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 04:16:27,418 - root - INFO - Инициализация диспетчера...
2024-12-04 04:16:27,419 - root - INFO - Регистрация обработчиков...
2024-12-04 04:16:27,420 - root - INFO - Запуск polling...
2024-12-04 04:16:27,420 - aiogram.dispatcher - INFO - Start polling
2024-12-04 04:16:27,425 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:16:27,427 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 04:16:27,428 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ()
2024-12-04 04:16:27,431 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:16:27,431 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('528155210',)
2024-12-04 04:16:27,661 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:16:28,972 - aiogram.event - INFO - Update id=659306312 is handled. Duration 1219 ms by bot id=7444575424
2024-12-04 04:16:31,131 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:16:31,132 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:16:31,133 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ('528155210', 1, 0)
2024-12-04 04:16:31,134 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:16:31,135 - sqlalchemy.engine.Engine - INFO - [cached since 3.704s ago] ('528155210',)
2024-12-04 04:16:32,759 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:16:32,820 - aiogram.event - INFO - Update id=659306313 is handled. Duration 1688 ms by bot id=7444575424
2024-12-04 04:16:35,157 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:16:35,158 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:16:35,158 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('85', 1, 0)
2024-12-04 04:16:35,274 - aiogram.event - INFO - Update id=659306314 is handled. Duration 1125 ms by bot id=7444575424
2024-12-04 04:16:36,848 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:16:36,848 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:16:36,848 - sqlalchemy.engine.Engine - INFO - [cached since 1.691s ago] ('85', 1, 0)
2024-12-04 04:16:37,627 - aiogram.event - INFO - Update id=659306315 is not handled. Duration 780 ms by bot id=7444575424
2024-12-04 04:16:37,627 - aiogram.event - ERROR - Cause exception while process update id=659306315 by bot id=7444575424
TypeError: unsupported operand type(s) for /: 'NoneType' and 'int'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 65, in show_traffic_handler
    total_traffic = key_info.used_bytes / (1024 ** 2)
                    ~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for /: 'NoneType' and 'int'
2024-12-04 04:16:57,635 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 04:16:57,907 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:16:57,909 - root - INFO - Бот остановлен вручную.
2024-12-04 04:18:42,202 - root - INFO - Инициализация бота...
2024-12-04 04:18:42,251 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:18:42,251 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 04:18:42,252 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:18:42,252 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 04:18:42,253 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:18:42,253 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:18:42,274 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 04:18:42,274 - root - INFO - Инициализация диспетчера...
2024-12-04 04:18:42,275 - root - INFO - Регистрация обработчиков...
2024-12-04 04:18:42,276 - root - INFO - Запуск polling...
2024-12-04 04:18:42,276 - aiogram.dispatcher - INFO - Start polling
2024-12-04 04:18:42,281 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:18:42,283 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 04:18:42,284 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ()
2024-12-04 04:18:42,287 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:18:42,287 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('528155210',)
2024-12-04 04:18:42,580 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:18:48,003 - aiogram.event - INFO - Update id=659306316 is handled. Duration 280 ms by bot id=7444575424
2024-12-04 04:18:49,960 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:18:49,962 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:18:49,962 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('528155210', 1, 0)
2024-12-04 04:18:49,963 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:18:49,963 - sqlalchemy.engine.Engine - INFO - [cached since 7.676s ago] ('528155210',)
2024-12-04 04:18:51,599 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:18:51,660 - aiogram.event - INFO - Update id=659306317 is handled. Duration 1702 ms by bot id=7444575424
2024-12-04 04:18:54,508 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:18:54,509 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:18:54,509 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('85', 1, 0)
2024-12-04 04:18:54,637 - aiogram.event - INFO - Update id=659306318 is handled. Duration 1077 ms by bot id=7444575424
2024-12-04 04:18:56,255 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:18:56,255 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:18:56,255 - sqlalchemy.engine.Engine - INFO - [cached since 1.746s ago] ('85', 1, 0)
2024-12-04 04:18:57,264 - aiogram.event - INFO - Update id=659306319 is handled. Duration 1016 ms by bot id=7444575424
2024-12-04 04:19:02,379 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 04:23:03,121 - root - INFO - Инициализация бота...
2024-12-04 04:23:03,242 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:23:03,243 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 04:23:03,243 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:23:03,246 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 04:23:03,246 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:23:03,247 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:23:03,295 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 04:23:03,295 - root - INFO - Инициализация диспетчера...
2024-12-04 04:23:03,298 - root - INFO - Регистрация обработчиков...
2024-12-04 04:23:03,300 - root - INFO - Запуск polling...
2024-12-04 04:23:03,301 - aiogram.dispatcher - INFO - Start polling
2024-12-04 04:23:03,311 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:23:03,317 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 04:23:03,317 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ()
2024-12-04 04:23:03,324 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:23:03,324 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('528155210',)
2024-12-04 04:23:03,671 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:23:04,100 - aiogram.event - INFO - Update id=659306320 is handled. Duration 280 ms by bot id=7444575424
2024-12-04 04:23:06,000 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:23:06,003 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:23:06,004 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] ('528155210', 1, 0)
2024-12-04 04:23:06,007 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:23:06,007 - sqlalchemy.engine.Engine - INFO - [cached since 2.683s ago] ('528155210',)
2024-12-04 04:23:07,906 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:23:07,983 - aiogram.event - INFO - Update id=659306321 is handled. Duration 1984 ms by bot id=7444575424
2024-12-04 04:23:10,269 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:23:10,272 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:23:10,272 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] ('85', 1, 0)
2024-12-04 04:23:10,546 - aiogram.event - INFO - Update id=659306322 is handled. Duration 1437 ms by bot id=7444575424
2024-12-04 04:23:14,959 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:23:14,961 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:23:14,961 - sqlalchemy.engine.Engine - INFO - [cached since 4.689s ago] ('85', 1, 0)
2024-12-04 04:23:14,964 - aiogram.event - INFO - Update id=659306323 is not handled. Duration 15 ms by bot id=7444575424
2024-12-04 04:23:14,964 - aiogram.event - ERROR - Cause exception while process update id=659306323 by bot id=7444575424
NameError: name 'datetime' is not defined
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 100, in show_expiration_handler
    remaining_days = (expiration_date - datetime.now()).days
                                        ^^^^^^^^
NameError: name 'datetime' is not defined
2024-12-04 04:23:35,536 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 04:23:35,805 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:23:35,808 - root - INFO - Бот остановлен вручную.
2024-12-04 04:23:44,124 - root - INFO - Инициализация бота...
2024-12-04 04:23:44,196 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:23:44,197 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 04:23:44,197 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:23:44,198 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 04:23:44,199 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:23:44,199 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:23:44,232 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 04:23:44,232 - root - INFO - Инициализация диспетчера...
2024-12-04 04:23:44,233 - root - INFO - Регистрация обработчиков...
2024-12-04 04:23:44,234 - root - INFO - Запуск polling...
2024-12-04 04:23:44,235 - aiogram.dispatcher - INFO - Start polling
2024-12-04 04:23:44,242 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:23:44,245 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 04:23:44,246 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ()
2024-12-04 04:23:44,250 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:23:44,251 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] ('528155210',)
2024-12-04 04:23:44,532 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:23:48,852 - aiogram.event - INFO - Update id=659306324 is handled. Duration 202 ms by bot id=7444575424
2024-12-04 04:23:50,370 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:23:50,373 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:23:50,373 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] ('528155210', 1, 0)
2024-12-04 04:23:50,375 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:23:50,375 - sqlalchemy.engine.Engine - INFO - [cached since 6.125s ago] ('528155210',)
2024-12-04 04:23:52,137 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:23:52,201 - aiogram.event - INFO - Update id=659306325 is handled. Duration 1844 ms by bot id=7444575424
2024-12-04 04:23:54,733 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:23:54,736 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:23:54,736 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('93', 1, 0)
2024-12-04 04:23:54,867 - aiogram.event - INFO - Update id=659306326 is handled. Duration 1280 ms by bot id=7444575424
2024-12-04 04:23:56,973 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:23:56,973 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:23:56,974 - sqlalchemy.engine.Engine - INFO - [cached since 2.238s ago] ('93', 1, 0)
2024-12-04 04:23:57,045 - aiogram.event - INFO - Update id=659306327 is handled. Duration 77 ms by bot id=7444575424
2024-12-04 04:24:06,308 - aiogram.event - INFO - Update id=659306328 is handled. Duration 219 ms by bot id=7444575424
2024-12-04 04:24:12,724 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:24:12,724 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:24:12,724 - sqlalchemy.engine.Engine - INFO - [cached since 22.35s ago] ('528155210', 1, 0)
2024-12-04 04:24:12,725 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:24:12,725 - sqlalchemy.engine.Engine - INFO - [cached since 28.48s ago] ('528155210',)
2024-12-04 04:24:14,508 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:24:14,568 - aiogram.event - INFO - Update id=659306329 is handled. Duration 1844 ms by bot id=7444575424
2024-12-04 04:24:17,262 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:24:17,263 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:24:17,263 - sqlalchemy.engine.Engine - INFO - [cached since 22.53s ago] ('85', 1, 0)
2024-12-04 04:24:17,383 - aiogram.event - INFO - Update id=659306330 is handled. Duration 1125 ms by bot id=7444575424
2024-12-04 04:24:19,080 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:24:19,080 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:24:19,080 - sqlalchemy.engine.Engine - INFO - [cached since 24.34s ago] ('85', 1, 0)
2024-12-04 04:24:19,171 - aiogram.event - INFO - Update id=659306331 is handled. Duration 92 ms by bot id=7444575424
2024-12-04 04:24:21,699 - aiogram.event - INFO - Update id=659306332 is handled. Duration 204 ms by bot id=7444575424
2024-12-04 04:24:24,480 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 04:24:24,756 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:24:24,760 - root - INFO - Бот остановлен вручную.
2024-12-04 04:29:16,667 - root - INFO - Инициализация бота...
2024-12-04 04:29:16,758 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:29:16,758 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 04:29:16,759 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:29:16,760 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 04:29:16,760 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:29:16,761 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:29:42,908 - root - INFO - Инициализация бота...
2024-12-04 04:29:42,967 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:29:42,967 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 04:29:42,967 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:29:42,969 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 04:29:42,969 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:29:42,970 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:29:42,992 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 04:29:42,992 - root - INFO - Инициализация диспетчера...
2024-12-04 04:29:42,993 - root - INFO - Регистрация обработчиков...
2024-12-04 04:29:42,995 - root - INFO - Запуск polling...
2024-12-04 04:29:42,995 - aiogram.dispatcher - INFO - Start polling
2024-12-04 04:29:43,000 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:29:43,002 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 04:29:43,003 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] ()
2024-12-04 04:29:43,006 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:29:43,007 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ('528155210',)
2024-12-04 04:29:43,294 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:29:47,700 - aiogram.event - INFO - Update id=659306333 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 04:29:49,774 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:29:49,775 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:29:49,775 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('528155210', 1, 0)
2024-12-04 04:29:49,777 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:29:49,777 - sqlalchemy.engine.Engine - INFO - [cached since 6.77s ago] ('528155210',)
2024-12-04 04:29:51,516 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:29:51,587 - aiogram.event - INFO - Update id=659306334 is handled. Duration 1812 ms by bot id=7444575424
2024-12-04 04:29:54,465 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:29:54,466 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:29:54,466 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] ('85', 1, 0)
2024-12-04 04:29:54,671 - aiogram.event - INFO - Update id=659306335 is handled. Duration 1202 ms by bot id=7444575424
2024-12-04 04:29:56,171 - aiogram.event - INFO - Update id=659306336 is handled. Duration 77 ms by bot id=7444575424
2024-12-04 04:29:58,373 - aiogram.event - INFO - Update id=659306337 is not handled. Duration 0 ms by bot id=7444575424
2024-12-04 04:29:58,373 - aiogram.event - ERROR - Cause exception while process update id=659306337 by bot id=7444575424
ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 169, in receive_new_name_handler
    reply_markup=get_confirmation_keyboard())
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 177, in get_confirmation_keyboard
    markup = InlineKeyboardMarkup()
             ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.4/v/missing
2024-12-04 04:30:15,465 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 04:30:15,725 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:30:15,726 - root - INFO - Бот остановлен вручную.
2024-12-04 04:31:33,695 - root - INFO - Инициализация бота...
2024-12-04 04:31:33,842 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:31:33,843 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 04:31:33,844 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:31:33,846 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 04:31:33,847 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:31:33,848 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:31:33,901 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 04:31:33,901 - root - INFO - Инициализация диспетчера...
2024-12-04 04:31:33,903 - root - INFO - Регистрация обработчиков...
2024-12-04 04:31:33,906 - root - INFO - Запуск polling...
2024-12-04 04:31:33,907 - aiogram.dispatcher - INFO - Start polling
2024-12-04 04:31:33,924 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:31:33,930 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 04:31:33,931 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] ()
2024-12-04 04:31:33,941 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:31:33,941 - sqlalchemy.engine.Engine - INFO - [generated in 0.00081s] ('528155210',)
2024-12-04 04:31:34,199 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:31:34,725 - aiogram.event - INFO - Update id=659306338 is handled. Duration 390 ms by bot id=7444575424
2024-12-04 04:31:36,514 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:31:36,516 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:31:36,517 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] ('528155210', 1, 0)
2024-12-04 04:31:36,520 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:31:36,521 - sqlalchemy.engine.Engine - INFO - [cached since 2.58s ago] ('528155210',)
2024-12-04 04:31:38,196 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:31:38,310 - aiogram.event - INFO - Update id=659306339 is handled. Duration 1797 ms by bot id=7444575424
2024-12-04 04:31:40,440 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:31:40,442 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:31:40,443 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('85', 1, 0)
2024-12-04 04:31:40,566 - aiogram.event - INFO - Update id=659306340 is handled. Duration 1125 ms by bot id=7444575424
2024-12-04 04:31:42,587 - aiogram.event - INFO - Update id=659306341 is handled. Duration 79 ms by bot id=7444575424
2024-12-04 04:31:43,925 - aiogram.event - INFO - Update id=659306342 is not handled. Duration 0 ms by bot id=7444575424
2024-12-04 04:31:43,926 - aiogram.event - ERROR - Cause exception while process update id=659306342 by bot id=7444575424
TypeError: BaseModel.__init__() takes 1 positional argument but 2 were given
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 169, in receive_new_name_handler
    reply_markup=get_confirmation_keyboard())
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 178, in get_confirmation_keyboard
    confirm_button = InlineKeyboardButton("Подтвердить", callback_data="confirm_rename")
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.__init__() takes 1 positional argument but 2 were given
2024-12-04 04:31:48,694 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 04:31:48,949 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:31:48,951 - root - INFO - Бот остановлен вручную.
2024-12-04 04:32:09,396 - root - INFO - Инициализация бота...
2024-12-04 04:32:09,500 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:32:09,501 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 04:32:09,501 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:32:09,503 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 04:32:09,503 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:32:09,504 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:32:09,541 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 04:32:09,542 - root - INFO - Инициализация диспетчера...
2024-12-04 04:32:09,543 - root - INFO - Регистрация обработчиков...
2024-12-04 04:32:09,545 - root - INFO - Запуск polling...
2024-12-04 04:32:09,545 - aiogram.dispatcher - INFO - Start polling
2024-12-04 04:32:09,555 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:32:09,558 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 04:32:09,558 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ()
2024-12-04 04:32:09,566 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:32:09,567 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] ('528155210',)
2024-12-04 04:32:09,868 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:32:11,717 - aiogram.event - INFO - Update id=659306343 is handled. Duration 297 ms by bot id=7444575424
2024-12-04 04:32:13,362 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:32:13,364 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:32:13,365 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ('528155210', 1, 0)
2024-12-04 04:32:13,367 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:32:13,367 - sqlalchemy.engine.Engine - INFO - [cached since 3.802s ago] ('528155210',)
2024-12-04 04:32:15,044 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:32:15,109 - aiogram.event - INFO - Update id=659306344 is handled. Duration 1750 ms by bot id=7444575424
2024-12-04 04:32:17,227 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:32:17,229 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:32:17,229 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ('85', 1, 0)
2024-12-04 04:32:17,353 - aiogram.event - INFO - Update id=659306345 is handled. Duration 984 ms by bot id=7444575424
2024-12-04 04:32:19,040 - aiogram.event - INFO - Update id=659306346 is handled. Duration 77 ms by bot id=7444575424
2024-12-04 04:32:20,872 - aiogram.event - INFO - Update id=659306347 is handled. Duration 77 ms by bot id=7444575424
2024-12-04 04:32:25,045 - aiogram.event - INFO - Update id=659306348 is not handled. Duration 77 ms by bot id=7444575424
2024-12-04 04:32:25,046 - aiogram.event - ERROR - Cause exception while process update id=659306348 by bot id=7444575424
AttributeError: 'FSMContext' object has no attribute 'finish'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 207, in cancel_rename_handler
    await state.finish()
          ^^^^^^^^^^^^
AttributeError: 'FSMContext' object has no attribute 'finish'
2024-12-04 04:32:27,309 - aiogram.event - INFO - Update id=659306349 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 04:32:29,632 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:32:29,633 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:32:29,633 - sqlalchemy.engine.Engine - INFO - [cached since 16.27s ago] ('528155210', 1, 0)
2024-12-04 04:32:29,635 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:32:29,635 - sqlalchemy.engine.Engine - INFO - [cached since 20.07s ago] ('528155210',)
2024-12-04 04:32:31,373 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:32:31,436 - aiogram.event - INFO - Update id=659306350 is handled. Duration 1813 ms by bot id=7444575424
2024-12-04 04:32:34,651 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:32:34,652 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:32:34,652 - sqlalchemy.engine.Engine - INFO - [cached since 17.42s ago] ('85', 1, 0)
2024-12-04 04:32:34,787 - aiogram.event - INFO - Update id=659306351 is handled. Duration 1062 ms by bot id=7444575424
2024-12-04 04:32:36,352 - aiogram.event - INFO - Update id=659306352 is handled. Duration 77 ms by bot id=7444575424
2024-12-04 04:32:43,801 - aiogram.event - INFO - Update id=659306353 is handled. Duration 140 ms by bot id=7444575424
2024-12-04 04:32:45,289 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:32:45,289 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:32:45,289 - sqlalchemy.engine.Engine - INFO - [cached since 28.06s ago] ('85', 1, 0)
2024-12-04 04:32:45,290 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:32:45,291 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:32:45,292 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 04:32:45,292 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('85',)
2024-12-04 04:32:45,615 - aiogram.event - INFO - Update id=659306354 is not handled. Duration 327 ms by bot id=7444575424
2024-12-04 04:32:45,615 - aiogram.event - ERROR - Cause exception while process update id=659306354 by bot id=7444575424
AttributeError: 'FSMContext' object has no attribute 'finish'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 49, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 170, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 142, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 137, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\router.py", line 162, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 200, in confirm_rename_handler
    await state.finish()
          ^^^^^^^^^^^^
AttributeError: 'FSMContext' object has no attribute 'finish'
2024-12-04 04:32:48,434 - aiogram.event - INFO - Update id=659306355 is handled. Duration 188 ms by bot id=7444575424
2024-12-04 04:32:49,683 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:32:49,683 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:32:49,684 - sqlalchemy.engine.Engine - INFO - [cached since 36.32s ago] ('528155210', 1, 0)
2024-12-04 04:32:49,685 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:32:49,685 - sqlalchemy.engine.Engine - INFO - [cached since 40.12s ago] ('528155210',)
2024-12-04 04:32:51,219 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:32:51,279 - aiogram.event - INFO - Update id=659306356 is handled. Duration 1609 ms by bot id=7444575424
2024-12-04 04:32:57,731 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 04:36:30,105 - root - INFO - Инициализация бота...
2024-12-04 04:36:30,190 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:36:30,191 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 04:36:30,191 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:36:30,192 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 04:36:30,193 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:36:30,193 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:36:30,228 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 04:36:30,228 - root - INFO - Инициализация диспетчера...
2024-12-04 04:36:30,229 - root - INFO - Регистрация обработчиков...
2024-12-04 04:36:30,231 - root - INFO - Запуск polling...
2024-12-04 04:36:30,231 - aiogram.dispatcher - INFO - Start polling
2024-12-04 04:36:30,237 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:36:30,240 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 04:36:30,240 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ()
2024-12-04 04:36:30,245 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:36:30,245 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('528155210',)
2024-12-04 04:36:30,538 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:36:35,258 - aiogram.event - INFO - Update id=659306357 is handled. Duration 265 ms by bot id=7444575424
2024-12-04 04:36:37,763 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:36:37,764 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:36:37,765 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('528155210', 1, 0)
2024-12-04 04:36:37,766 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:36:37,767 - sqlalchemy.engine.Engine - INFO - [cached since 7.522s ago] ('528155210',)
2024-12-04 04:36:39,365 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:36:39,429 - aiogram.event - INFO - Update id=659306358 is handled. Duration 1655 ms by bot id=7444575424
2024-12-04 04:36:41,780 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:36:41,781 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:36:41,782 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ('93', 1, 0)
2024-12-04 04:36:41,966 - aiogram.event - INFO - Update id=659306359 is handled. Duration 1172 ms by bot id=7444575424
2024-12-04 04:36:48,961 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:36:48,962 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:36:48,962 - sqlalchemy.engine.Engine - INFO - [cached since 7.181s ago] ('93', 1, 0)
2024-12-04 04:36:49,096 - aiogram.event - INFO - Update id=659306360 is handled. Duration 140 ms by bot id=7444575424
2024-12-04 04:36:52,508 - aiogram.event - INFO - Update id=659306361 is handled. Duration 186 ms by bot id=7444575424
2024-12-04 04:36:54,344 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 04:36:54,606 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:36:54,607 - root - INFO - Бот остановлен вручную.
2024-12-04 04:38:59,262 - root - INFO - Инициализация бота...
2024-12-04 04:38:59,376 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:38:59,376 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 04:38:59,377 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:38:59,379 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 04:38:59,379 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 04:38:59,380 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 04:38:59,427 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 04:38:59,427 - root - INFO - Инициализация диспетчера...
2024-12-04 04:38:59,429 - root - INFO - Регистрация обработчиков...
2024-12-04 04:38:59,431 - root - INFO - Запуск polling...
2024-12-04 04:38:59,431 - aiogram.dispatcher - INFO - Start polling
2024-12-04 04:38:59,442 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:38:59,446 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 04:38:59,447 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ()
2024-12-04 04:38:59,453 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:38:59,454 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ('528155210',)
2024-12-04 04:38:59,744 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:39:00,141 - aiogram.event - INFO - Update id=659306362 is handled. Duration 281 ms by bot id=7444575424
2024-12-04 04:39:01,877 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:39:01,880 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:39:01,880 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ('528155210', 1, 0)
2024-12-04 04:39:01,882 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 04:39:01,883 - sqlalchemy.engine.Engine - INFO - [cached since 2.429s ago] ('528155210',)
2024-12-04 04:39:03,516 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 04:39:03,605 - aiogram.event - INFO - Update id=659306363 is handled. Duration 1734 ms by bot id=7444575424
2024-12-04 04:39:06,114 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:39:06,115 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:39:06,115 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ('85', 1, 0)
2024-12-04 04:39:06,250 - aiogram.event - INFO - Update id=659306364 is handled. Duration 1077 ms by bot id=7444575424
2024-12-04 04:39:09,020 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 04:39:09,021 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 04:39:09,021 - sqlalchemy.engine.Engine - INFO - [cached since 2.906s ago] ('85', 1, 0)
2024-12-04 04:39:09,855 - aiogram.event - INFO - Update id=659306365 is handled. Duration 843 ms by bot id=7444575424
2024-12-04 04:39:13,406 - aiogram.event - INFO - Update id=659306366 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 04:39:15,128 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 04:39:15,380 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 04:39:15,384 - root - INFO - Бот остановлен вручную.
