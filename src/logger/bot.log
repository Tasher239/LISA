2024-12-04 13:36:02,705 - root - INFO - Инициализация бота...
2024-12-04 13:36:02,783 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 13:36:02,783 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 13:36:02,783 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 13:36:02,785 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 13:36:02,785 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 13:36:02,786 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 13:36:02,818 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 13:36:02,818 - root - INFO - Инициализация диспетчера...
2024-12-04 13:36:02,821 - root - INFO - Регистрация обработчиков...
2024-12-04 13:36:02,824 - root - INFO - Запуск polling...
2024-12-04 13:36:02,824 - aiogram.dispatcher - INFO - Start polling
2024-12-04 13:36:02,832 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 13:36:02,835 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 13:36:02,836 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ()
2024-12-04 13:36:03,220 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 13:36:09,397 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 13:36:09,398 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 13:36:09,856 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 13:36:10,121 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 13:36:10,145 - root - INFO - Бот остановлен вручную.
2024-12-04 13:56:13,792 - root - INFO - Инициализация бота...
2024-12-04 13:56:13,831 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 13:56:13,831 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 13:56:13,831 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 13:56:13,832 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 13:56:13,832 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 13:56:13,832 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 13:56:13,850 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 13:56:13,852 - root - INFO - Инициализация диспетчера...
2024-12-04 13:56:13,852 - root - INFO - Регистрация обработчиков...
2024-12-04 13:56:13,853 - root - INFO - Запуск polling...
2024-12-04 13:56:13,853 - aiogram.dispatcher - INFO - Start polling
2024-12-04 13:56:13,857 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 13:56:13,859 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 13:56:13,859 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] ()
2024-12-04 13:56:14,243 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 13:56:18,458 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 13:56:18,458 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 13:56:26,812 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 13:56:26,812 - aiogram.dispatcher - WARNING - Sleep for 1.254156 seconds and try again... (tryings = 1, bot id = 7444575424)
2024-12-04 13:56:32,647 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 13:56:32,647 - aiogram.dispatcher - WARNING - Sleep for 1.664253 seconds and try again... (tryings = 2, bot id = 7444575424)
2024-12-04 13:56:36,220 - aiogram.dispatcher - INFO - Connection established (tryings = 3, bot id = 7444575424)
2024-12-04 13:56:36,223 - aiogram.event - INFO - Update id=659306398 is not handled. Duration 0 ms by bot id=7444575424
2024-12-04 13:56:38,483 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 13:56:38,484 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 13:56:45,632 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 13:56:45,633 - aiogram.dispatcher - WARNING - Sleep for 1.246900 seconds and try again... (tryings = 1, bot id = 7444575424)
2024-12-04 13:56:47,605 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:07:15,003 - root - INFO - Инициализация бота...
2024-12-04 14:07:15,099 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:07:15,099 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:07:15,099 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:07:15,101 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:07:15,101 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:07:15,102 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:07:15,124 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:07:15,124 - root - INFO - Инициализация диспетчера...
2024-12-04 14:07:15,125 - root - INFO - Регистрация обработчиков...
2024-12-04 14:07:15,127 - root - INFO - Запуск polling...
2024-12-04 14:07:15,127 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:07:15,134 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:07:15,136 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:07:15,136 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ()
2024-12-04 14:07:15,494 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 14:07:15,984 - aiogram.event - INFO - Update id=659306399 is handled. Duration 390 ms by bot id=7444575424
2024-12-04 14:07:20,684 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:07:20,684 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 14:07:22,530 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 7444575424)
2024-12-04 14:07:22,866 - aiogram.event - INFO - Update id=659306402 is handled. Duration 327 ms by bot id=7444575424
2024-12-04 14:07:25,967 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:07:25,967 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 14:07:27,545 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 7444575424)
2024-12-04 14:07:27,697 - aiogram.event - INFO - Update id=659306405 is handled. Duration 141 ms by bot id=7444575424
2024-12-04 14:07:31,201 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:07:31,201 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 14:07:35,266 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:07:35,525 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 14:07:35,527 - root - INFO - Бот остановлен вручную.
2024-12-04 14:14:30,957 - root - INFO - Инициализация бота...
2024-12-04 14:14:31,075 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:14:31,075 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:14:31,076 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:14:31,077 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:14:31,078 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:14:31,078 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:14:31,110 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:14:31,111 - root - INFO - Инициализация диспетчера...
2024-12-04 14:14:31,112 - root - INFO - Регистрация обработчиков...
2024-12-04 14:14:31,115 - root - INFO - Запуск polling...
2024-12-04 14:14:31,116 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:14:31,128 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:14:31,131 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:14:31,131 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ()
2024-12-04 14:14:31,828 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 14:14:37,877 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:14:37,879 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 14:14:43,312 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:14:43,312 - aiogram.dispatcher - WARNING - Sleep for 1.394831 seconds and try again... (tryings = 1, bot id = 7444575424)
2024-12-04 14:14:45,947 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:14:46,215 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 14:14:46,220 - root - INFO - Бот остановлен вручную.
2024-12-04 14:15:00,185 - root - INFO - Инициализация бота...
2024-12-04 14:15:00,311 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:15:00,313 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:15:00,314 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:15:00,317 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:15:00,318 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:15:00,319 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:15:00,375 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:15:00,375 - root - INFO - Инициализация диспетчера...
2024-12-04 14:15:00,377 - root - INFO - Регистрация обработчиков...
2024-12-04 14:15:00,381 - root - INFO - Запуск polling...
2024-12-04 14:15:00,381 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:15:00,393 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:15:00,398 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:15:00,398 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ()
2024-12-04 14:15:01,748 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 14:15:07,326 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:15:07,327 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 14:15:12,995 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:15:12,996 - aiogram.dispatcher - WARNING - Sleep for 1.361496 seconds and try again... (tryings = 1, bot id = 7444575424)
2024-12-04 14:15:13,192 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:17:10,164 - root - INFO - Инициализация бота...
2024-12-04 14:17:10,233 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:17:10,233 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:17:10,234 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:17:10,236 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:17:10,236 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:17:10,236 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:17:10,266 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:17:10,266 - root - INFO - Инициализация диспетчера...
2024-12-04 14:17:10,267 - root - INFO - Регистрация обработчиков...
2024-12-04 14:17:10,269 - root - INFO - Запуск polling...
2024-12-04 14:17:10,269 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:17:10,278 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:17:10,282 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:17:10,282 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ()
2024-12-04 14:17:10,766 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 14:17:15,269 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:17:15,270 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 14:17:17,571 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:17:17,836 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 14:17:17,842 - root - INFO - Бот остановлен вручную.
2024-12-04 14:17:26,872 - root - INFO - Инициализация бота...
2024-12-04 14:17:26,944 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:17:26,944 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:17:26,944 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:17:26,946 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:17:26,946 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:17:26,947 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:17:26,974 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:17:26,974 - root - INFO - Инициализация диспетчера...
2024-12-04 14:17:26,975 - root - INFO - Регистрация обработчиков...
2024-12-04 14:17:26,977 - root - INFO - Запуск polling...
2024-12-04 14:17:26,977 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:17:26,987 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:17:26,992 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:17:26,992 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ()
2024-12-04 14:17:27,465 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 14:17:32,535 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:17:32,536 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 14:17:37,316 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:17:37,316 - aiogram.dispatcher - WARNING - Sleep for 1.177091 seconds and try again... (tryings = 1, bot id = 7444575424)
2024-12-04 14:17:46,022 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:17:46,023 - aiogram.dispatcher - WARNING - Sleep for 1.527387 seconds and try again... (tryings = 2, bot id = 7444575424)
2024-12-04 14:17:54,775 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:17:54,777 - aiogram.dispatcher - WARNING - Sleep for 2.015668 seconds and try again... (tryings = 3, bot id = 7444575424)
2024-12-04 14:17:57,676 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:21:03,620 - root - INFO - Инициализация бота...
2024-12-04 14:21:03,809 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:21:03,810 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:21:03,810 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:21:03,813 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:21:03,813 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:21:03,814 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:21:03,868 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:21:03,868 - root - INFO - Инициализация диспетчера...
2024-12-04 14:21:03,870 - root - INFO - Регистрация обработчиков...
2024-12-04 14:21:03,873 - root - INFO - Запуск polling...
2024-12-04 14:21:03,874 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:21:03,884 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:21:03,889 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:21:03,889 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] ()
2024-12-04 14:21:04,500 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:21:05,043 - aiogram.event - INFO - Update id=746486422 is handled. Duration 390 ms by bot id=6588698079
2024-12-04 14:21:05,044 - aiogram.event - INFO - Update id=746486423 is handled. Duration 375 ms by bot id=6588698079
2024-12-04 14:21:08,352 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:21:08,360 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:21:08,362 - sqlalchemy.engine.Engine - INFO - [generated in 0.00215s] ('528155210', 1, 0)
2024-12-04 14:21:08,507 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 14:21:08,671 - aiogram.event - INFO - Update id=746486424 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 14:21:10,112 - aiogram.event - INFO - Update id=746486425 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 14:21:16,658 - aiogram.event - INFO - Update id=746486426 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 14:21:18,275 - aiogram.event - INFO - Update id=746486427 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:21:20,784 - aiogram.event - INFO - Update id=746486428 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 14:21:22,054 - aiogram.event - INFO - Update id=746486429 is handled. Duration 233 ms by bot id=6588698079
2024-12-04 14:21:22,922 - aiogram.event - INFO - Update id=746486430 is not handled. Duration 92 ms by bot id=6588698079
2024-12-04 14:21:22,922 - aiogram.event - ERROR - Cause exception while process update id=746486430 by bot id=6588698079
TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 85, in handle_period_selection
    await bot.send_invoice(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2771, in send_invoice
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
2024-12-04 14:23:14,216 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 14:23:14,217 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 14:23:25,500 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 14:23:25,502 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 14:23:25,503 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 14:23:27,726 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 14:23:28,226 - aiogram.event - INFO - Update id=746486431 is handled. Duration 500 ms by bot id=6588698079
2024-12-04 14:23:29,699 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:23:29,701 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:23:29,702 - sqlalchemy.engine.Engine - INFO - [cached since 141.3s ago] ('528155210', 1, 0)
2024-12-04 14:23:29,787 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 14:23:29,861 - aiogram.event - INFO - Update id=746486432 is handled. Duration 171 ms by bot id=6588698079
2024-12-04 14:23:31,031 - aiogram.event - INFO - Update id=746486433 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:23:33,264 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:23:33,520 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:23:33,525 - root - INFO - Бот остановлен вручную.
2024-12-04 14:24:52,886 - root - INFO - Инициализация бота...
2024-12-04 14:24:52,996 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:24:52,997 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:24:52,998 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:24:53,001 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:24:53,001 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:24:53,003 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:24:53,046 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:24:53,047 - root - INFO - Инициализация диспетчера...
2024-12-04 14:24:53,048 - root - INFO - Регистрация обработчиков...
2024-12-04 14:24:53,050 - root - INFO - Запуск polling...
2024-12-04 14:24:53,051 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:24:53,063 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:24:53,067 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:24:53,067 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ()
2024-12-04 14:24:53,658 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:24:57,833 - aiogram.event - INFO - Update id=746486434 is handled. Duration 329 ms by bot id=6588698079
2024-12-04 14:25:07,500 - aiogram.event - INFO - Update id=746486435 is handled. Duration 358 ms by bot id=6588698079
2024-12-04 14:25:11,757 - aiogram.event - INFO - Update id=746486436 is not handled. Duration 92 ms by bot id=6588698079
2024-12-04 14:25:11,758 - aiogram.event - ERROR - Cause exception while process update id=746486436 by bot id=6588698079
TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 85, in handle_period_selection
    await bot.send_invoice(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2771, in send_invoice
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
2024-12-04 14:25:43,463 - aiogram.event - INFO - Update id=746486437 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:27:44,716 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
2024-12-04 14:27:44,717 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 14:27:45,957 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 14:27:46,129 - aiogram.event - INFO - Update id=746486438 is not handled. Duration 170 ms by bot id=6588698079
2024-12-04 14:29:06,708 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 14:29:06,708 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 14:29:17,918 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 14:30:34,214 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:30:34,474 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:30:34,483 - root - INFO - Бот остановлен вручную.
2024-12-04 14:30:44,568 - root - INFO - Инициализация бота...
2024-12-04 14:30:45,417 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:30:45,418 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:30:45,418 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:30:45,420 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:30:45,421 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:30:45,422 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:30:45,466 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:30:45,466 - root - INFO - Инициализация диспетчера...
2024-12-04 14:30:45,468 - root - INFO - Регистрация обработчиков...
2024-12-04 14:30:45,470 - root - INFO - Запуск polling...
2024-12-04 14:30:45,471 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:30:45,480 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:30:45,484 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:30:45,484 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ()
2024-12-04 14:30:45,920 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:30:46,432 - aiogram.event - INFO - Update id=746486439 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 14:30:48,024 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:30:48,033 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:30:48,035 - sqlalchemy.engine.Engine - INFO - [generated in 0.00194s] ('528155210', 1, 0)
2024-12-04 14:30:48,158 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 14:30:48,245 - aiogram.event - INFO - Update id=746486440 is handled. Duration 218 ms by bot id=6588698079
2024-12-04 14:30:53,245 - aiogram.event - INFO - Update id=746486441 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:30:55,346 - aiogram.event - INFO - Update id=746486442 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 14:30:56,834 - aiogram.event - INFO - Update id=746486443 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 14:30:58,021 - aiogram.event - INFO - Update id=746486444 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:31:01,632 - aiogram.event - INFO - Update id=746486445 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 14:31:10,825 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:31:11,103 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:31:11,108 - root - INFO - Бот остановлен вручную.
2024-12-04 14:31:39,741 - root - INFO - Инициализация бота...
2024-12-04 14:31:41,155 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:31:41,156 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:31:41,157 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:31:41,162 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:31:41,162 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:31:41,165 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:31:41,310 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:31:41,310 - root - INFO - Инициализация диспетчера...
2024-12-04 14:31:41,312 - root - INFO - Регистрация обработчиков...
2024-12-04 14:31:41,315 - root - INFO - Запуск polling...
2024-12-04 14:31:41,315 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:31:41,328 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:31:41,331 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:31:41,331 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ()
2024-12-04 14:31:41,599 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:31:42,084 - aiogram.event - INFO - Update id=746486446 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 14:31:43,910 - aiogram.event - INFO - Update id=746486447 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 14:31:44,687 - aiogram.event - INFO - Update id=746486448 is not handled. Duration 16 ms by bot id=6588698079
2024-12-04 14:31:47,945 - aiogram.event - INFO - Update id=746486449 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:34:35,829 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:34:36,088 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:34:36,092 - root - INFO - Бот остановлен вручную.
2024-12-04 14:34:45,097 - root - INFO - Инициализация бота...
2024-12-04 14:34:46,021 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:34:46,022 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:34:46,022 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:34:46,025 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:34:46,025 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:34:46,027 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:34:46,084 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:34:46,085 - root - INFO - Инициализация диспетчера...
2024-12-04 14:34:46,087 - root - INFO - Регистрация обработчиков...
2024-12-04 14:34:46,089 - root - INFO - Запуск polling...
2024-12-04 14:34:46,090 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:34:46,101 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:34:46,105 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:34:46,107 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] ()
2024-12-04 14:34:46,439 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:34:47,089 - aiogram.event - INFO - Update id=746486450 is handled. Duration 452 ms by bot id=6588698079
2024-12-04 14:34:48,806 - aiogram.event - INFO - Update id=746486451 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 14:34:49,746 - aiogram.event - INFO - Update id=746486452 is not handled. Duration 108 ms by bot id=6588698079
2024-12-04 14:34:49,746 - aiogram.event - ERROR - Cause exception while process update id=746486452 by bot id=6588698079
TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 37, in handle_period_selection
    await bot.send_invoice(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2771, in send_invoice
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
2024-12-04 14:35:20,755 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:35:21,023 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:35:21,030 - root - INFO - Бот остановлен вручную.
2024-12-04 14:36:12,383 - root - INFO - Инициализация бота...
2024-12-04 14:36:13,744 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:36:13,745 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:36:13,745 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:36:13,749 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:36:13,750 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:36:13,752 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:36:13,877 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:36:13,878 - root - INFO - Инициализация диспетчера...
2024-12-04 14:36:13,881 - root - INFO - Регистрация обработчиков...
2024-12-04 14:36:13,886 - root - INFO - Запуск polling...
2024-12-04 14:36:13,887 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:36:13,918 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:36:13,929 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:36:13,931 - sqlalchemy.engine.Engine - INFO - [generated in 0.00141s] ()
2024-12-04 14:36:14,271 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:36:14,924 - aiogram.event - INFO - Update id=746486453 is handled. Duration 452 ms by bot id=6588698079
2024-12-04 14:36:16,130 - aiogram.event - INFO - Update id=746486454 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 14:36:16,898 - aiogram.event - INFO - Update id=746486455 is not handled. Duration 109 ms by bot id=6588698079
2024-12-04 14:36:16,900 - aiogram.event - ERROR - Cause exception while process update id=746486455 by bot id=6588698079
TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 37, in handle_period_selection
    await bot.send_invoice(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2771, in send_invoice
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
2024-12-04 14:36:23,563 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:36:23,825 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:36:23,830 - root - INFO - Бот остановлен вручную.
2024-12-04 14:38:22,760 - root - INFO - Инициализация бота...
2024-12-04 14:38:23,779 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:38:23,781 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:38:23,782 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:38:23,784 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:38:23,786 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:38:23,788 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:38:23,901 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:38:23,901 - root - INFO - Инициализация диспетчера...
2024-12-04 14:38:23,903 - root - INFO - Регистрация обработчиков...
2024-12-04 14:38:23,908 - root - INFO - Запуск polling...
2024-12-04 14:38:23,909 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:38:23,935 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:38:23,946 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:38:23,948 - sqlalchemy.engine.Engine - INFO - [generated in 0.00195s] ()
2024-12-04 14:38:24,473 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:38:25,220 - aiogram.event - INFO - Update id=746486456 is handled. Duration 530 ms by bot id=6588698079
2024-12-04 14:38:26,530 - aiogram.event - INFO - Update id=746486457 is handled. Duration 359 ms by bot id=6588698079
2024-12-04 14:38:27,240 - aiogram.event - INFO - Update id=746486458 is not handled. Duration 77 ms by bot id=6588698079
2024-12-04 14:38:27,241 - aiogram.event - ERROR - Cause exception while process update id=746486458 by bot id=6588698079
TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 37, in handle_period_selection
    await bot.send_invoice(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2771, in send_invoice
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
2024-12-04 14:38:48,181 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:38:48,457 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:38:48,460 - root - INFO - Бот остановлен вручную.
2024-12-04 14:38:59,370 - root - INFO - Инициализация бота...
2024-12-04 14:39:00,140 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:39:00,140 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:39:00,140 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:39:00,142 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:39:00,142 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:39:00,144 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:39:00,199 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:39:00,200 - root - INFO - Инициализация диспетчера...
2024-12-04 14:39:00,201 - root - INFO - Регистрация обработчиков...
2024-12-04 14:39:00,203 - root - INFO - Запуск polling...
2024-12-04 14:39:00,203 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:39:00,213 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:39:00,216 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:39:00,216 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] ()
2024-12-04 14:39:00,503 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:39:01,060 - aiogram.event - INFO - Update id=746486459 is handled. Duration 453 ms by bot id=6588698079
2024-12-04 14:39:02,636 - aiogram.event - INFO - Update id=746486460 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 14:39:04,301 - aiogram.event - INFO - Update id=746486461 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 14:39:32,584 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:39:32,850 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:39:32,855 - root - INFO - Бот остановлен вручную.
2024-12-04 14:39:43,615 - root - INFO - Инициализация бота...
2024-12-04 14:39:44,627 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:39:44,628 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:39:44,628 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:39:44,630 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:39:44,631 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:39:44,632 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:39:44,743 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:39:44,744 - root - INFO - Инициализация диспетчера...
2024-12-04 14:39:44,748 - root - INFO - Регистрация обработчиков...
2024-12-04 14:39:44,753 - root - INFO - Запуск polling...
2024-12-04 14:39:44,755 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:39:44,784 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:39:44,798 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:39:44,799 - sqlalchemy.engine.Engine - INFO - [generated in 0.00122s] ()
2024-12-04 14:39:45,152 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:39:48,663 - aiogram.event - INFO - Update id=746486462 is handled. Duration 593 ms by bot id=6588698079
2024-12-04 14:39:49,862 - aiogram.event - INFO - Update id=746486463 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 14:39:51,056 - aiogram.event - INFO - Update id=746486464 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:39:51,057 - aiogram.event - ERROR - Cause exception while process update id=746486464 by bot id=6588698079
KeyError: 'Go'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 29, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Go'
2024-12-04 14:39:57,709 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:39:57,967 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:39:57,972 - root - INFO - Бот остановлен вручную.
2024-12-04 14:41:28,839 - root - INFO - Инициализация бота...
2024-12-04 14:41:29,819 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:41:29,820 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:41:29,821 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:41:29,824 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:41:29,825 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:41:29,826 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:41:29,914 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:41:29,915 - root - INFO - Инициализация диспетчера...
2024-12-04 14:41:29,917 - root - INFO - Регистрация обработчиков...
2024-12-04 14:41:29,920 - root - INFO - Запуск polling...
2024-12-04 14:41:29,921 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:41:29,940 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:41:29,949 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:41:29,950 - sqlalchemy.engine.Engine - INFO - [generated in 0.00097s] ()
2024-12-04 14:41:30,220 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:41:33,699 - aiogram.event - INFO - Update id=746486465 is handled. Duration 515 ms by bot id=6588698079
2024-12-04 14:41:35,325 - aiogram.event - INFO - Update id=746486466 is handled. Duration 375 ms by bot id=6588698079
2024-12-04 14:41:36,944 - aiogram.event - INFO - Update id=746486467 is handled. Duration 313 ms by bot id=6588698079
2024-12-04 14:41:45,935 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:41:46,196 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:41:46,203 - root - INFO - Бот остановлен вручную.
2024-12-04 14:42:06,258 - root - INFO - Инициализация бота...
2024-12-04 14:42:07,837 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:42:07,838 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:42:07,839 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:42:07,843 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:42:07,844 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:42:07,845 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:42:08,005 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:42:08,007 - root - INFO - Инициализация диспетчера...
2024-12-04 14:42:08,014 - root - INFO - Регистрация обработчиков...
2024-12-04 14:42:08,019 - root - INFO - Запуск polling...
2024-12-04 14:42:08,020 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:42:08,044 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:42:08,053 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:42:08,054 - sqlalchemy.engine.Engine - INFO - [generated in 0.00137s] ()
2024-12-04 14:42:08,373 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:42:09,033 - aiogram.event - INFO - Update id=746486468 is handled. Duration 468 ms by bot id=6588698079
2024-12-04 14:42:13,289 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:42:13,295 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:42:13,296 - sqlalchemy.engine.Engine - INFO - [generated in 0.00123s] ('528155210', 1, 0)
2024-12-04 14:42:13,475 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 14:42:13,658 - aiogram.event - INFO - Update id=746486469 is handled. Duration 375 ms by bot id=6588698079
2024-12-04 14:42:15,067 - aiogram.event - INFO - Update id=746486470 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:42:16,995 - aiogram.event - INFO - Update id=746486471 is handled. Duration 125 ms by bot id=6588698079
2024-12-04 14:42:18,495 - aiogram.event - INFO - Update id=746486472 is handled. Duration 170 ms by bot id=6588698079
2024-12-04 14:42:20,070 - aiogram.event - INFO - Update id=746486473 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:42:20,071 - aiogram.event - ERROR - Cause exception while process update id=746486473 by bot id=6588698079
KeyError: 'Go'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 31, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Go'
2024-12-04 14:42:26,928 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:42:27,189 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:42:27,194 - root - INFO - Бот остановлен вручную.
2024-12-04 14:48:22,866 - root - INFO - Инициализация бота...
2024-12-04 14:48:23,611 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:48:23,612 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:48:23,612 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:48:23,614 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:48:23,615 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:48:23,616 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:49:36,720 - root - INFO - Инициализация бота...
2024-12-04 14:49:37,658 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:49:37,659 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:49:37,659 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:49:37,662 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:49:37,662 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:49:37,662 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:50:07,410 - root - INFO - Инициализация бота...
2024-12-04 14:50:08,597 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:50:08,599 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:50:08,600 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:50:08,602 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:50:08,603 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:50:08,604 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:50:08,669 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:50:08,669 - root - INFO - Инициализация диспетчера...
2024-12-04 14:50:08,674 - root - INFO - Регистрация обработчиков...
2024-12-04 14:50:08,678 - root - INFO - Запуск polling...
2024-12-04 14:50:08,678 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:50:08,699 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:50:08,705 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:50:08,705 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ()
2024-12-04 14:50:09,386 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:50:10,151 - aiogram.event - INFO - Update id=746486474 is handled. Duration 391 ms by bot id=6588698079
2024-12-04 14:50:11,900 - aiogram.event - INFO - Update id=746486475 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 14:50:13,539 - aiogram.event - INFO - Update id=746486476 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:50:13,539 - aiogram.event - ERROR - Cause exception while process update id=746486476 by bot id=6588698079
TypeError: Message.answer() got multiple values for argument 'text'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 58, in back_to_main_menu_handler
    await callback.message.answer(
          ^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() got multiple values for argument 'text'
2024-12-04 14:50:40,557 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:50:40,818 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:50:40,825 - root - INFO - Бот остановлен вручную.
2024-12-04 14:50:50,767 - root - INFO - Инициализация бота...
2024-12-04 14:50:51,374 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:50:51,374 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:50:51,374 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:50:51,376 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:50:51,376 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:50:51,377 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:50:51,411 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:50:51,411 - root - INFO - Инициализация диспетчера...
2024-12-04 14:50:51,413 - root - INFO - Регистрация обработчиков...
2024-12-04 14:50:51,415 - root - INFO - Запуск polling...
2024-12-04 14:50:51,415 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:50:51,426 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:50:51,429 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:50:51,430 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ()
2024-12-04 14:50:51,728 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:50:52,330 - aiogram.event - INFO - Update id=746486477 is handled. Duration 484 ms by bot id=6588698079
2024-12-04 14:50:55,225 - aiogram.event - INFO - Update id=746486478 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 14:50:58,079 - aiogram.event - INFO - Update id=746486479 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 14:51:05,950 - aiogram.event - INFO - Update id=746486480 is handled. Duration 157 ms by bot id=6588698079
2024-12-04 14:51:07,377 - aiogram.event - INFO - Update id=746486481 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 14:51:09,842 - aiogram.event - INFO - Update id=746486482 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 14:51:10,834 - aiogram.event - INFO - Update id=746486483 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 14:51:13,139 - aiogram.event - INFO - Update id=746486484 is handled. Duration 452 ms by bot id=6588698079
2024-12-04 14:51:14,287 - aiogram.event - INFO - Update id=746486485 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:51:17,796 - aiogram.event - INFO - Update id=746486486 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 14:51:21,510 - aiogram.event - INFO - Update id=746486487 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 14:51:22,628 - aiogram.event - INFO - Update id=746486488 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 14:51:48,337 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 14:51:48,338 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 14:51:49,386 - aiogram.event - INFO - Update id=746486489 is handled. Duration 1266 ms by bot id=6588698079
2024-12-04 14:51:59,580 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 14:51:59,590 - root - INFO - {
    "message_id": 672,
    "date": 1733313120,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 120000,
        "invoice_payload": "37b7210d-f2fa-40f7-a386-ac27e3642832",
        "telegram_payment_charge_id": "6588698079_528155210_328291",
        "provider_payment_charge_id": "6588698079_528155210_328291",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-04 14:52:01,151 - root - INFO - Key created: OutlineKey(key_id='67', name='VPN Key54', password='oZSJYvljVO6QctFxl9VwGP', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpvWlNKWXZsalZPNlFjdEZ4bDlWd0dQ@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 14:52:01,152 - root - INFO - Key created: OutlineKey(key_id='67', name='VPN Key54', password='oZSJYvljVO6QctFxl9VwGP', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpvWlNKWXZsalZPNlFjdEZ4bDlWd0dQ@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 14:52:01,323 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:52:01,328 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:52:01,329 - sqlalchemy.engine.Engine - INFO - [generated in 0.00116s] ('528155210', 1, 0)
2024-12-04 14:52:01,338 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 14:52:01,339 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] ('528155210', 'active', 0)
2024-12-04 14:52:01,344 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:52:01,355 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:52:01,366 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 14:52:01,366 - sqlalchemy.engine.Engine - INFO - [generated in 0.00135s] ('67', '528155210', '2025-11-29 14:52:01.353940', '2024-12-04 14:52:01.353940', 0)
2024-12-04 14:52:01,371 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:52:01,380 - aiogram.event - INFO - Update id=746486490 is handled. Duration 1795 ms by bot id=6588698079
2024-12-04 14:53:35,960 - aiogram.event - INFO - Update id=746486491 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:53:41,499 - aiogram.event - INFO - Update id=746486492 is handled. Duration 280 ms by bot id=6588698079
2024-12-04 14:53:43,262 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:53:43,263 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:53:43,264 - sqlalchemy.engine.Engine - INFO - [cached since 101.9s ago] ('528155210', 1, 0)
2024-12-04 14:53:43,270 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 14:53:43,271 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('528155210',)
2024-12-04 14:53:44,664 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 14:53:44,986 - aiogram.event - INFO - Update id=746486493 is handled. Duration 1718 ms by bot id=6588698079
2024-12-04 14:53:48,076 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:53:48,080 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:53:48,081 - sqlalchemy.engine.Engine - INFO - [generated in 0.00089s] ('67', 1, 0)
2024-12-04 14:53:48,280 - aiogram.event - INFO - Update id=746486494 is handled. Duration 1812 ms by bot id=6588698079
2024-12-04 14:53:50,476 - aiogram.event - INFO - Update id=746486495 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 14:53:56,743 - aiogram.event - INFO - Update id=746486496 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 14:53:58,420 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:53:58,420 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:53:58,421 - sqlalchemy.engine.Engine - INFO - [cached since 10.34s ago] ('67', 1, 0)
2024-12-04 14:53:58,422 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:53:58,423 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:53:58,425 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 14:53:58,426 - sqlalchemy.engine.Engine - INFO - [generated in 0.00080s] ('67',)
2024-12-04 14:53:58,985 - aiogram.event - INFO - Update id=746486497 is not handled. Duration 577 ms by bot id=6588698079
2024-12-04 14:53:58,987 - aiogram.event - ERROR - Cause exception while process update id=746486497 by bot id=6588698079
AttributeError: 'FSMContext' object has no attribute 'finish'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 221, in confirm_rename_handler
    await state.finish()
          ^^^^^^^^^^^^
AttributeError: 'FSMContext' object has no attribute 'finish'
2024-12-04 14:54:01,386 - aiogram.event - INFO - Update id=746486498 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 14:54:07,234 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:54:07,235 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:54:07,235 - sqlalchemy.engine.Engine - INFO - [cached since 125.9s ago] ('528155210', 1, 0)
2024-12-04 14:54:07,238 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 14:54:07,238 - sqlalchemy.engine.Engine - INFO - [cached since 23.97s ago] ('528155210',)
2024-12-04 14:54:09,088 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 14:54:09,210 - aiogram.event - INFO - Update id=746486499 is handled. Duration 1984 ms by bot id=6588698079
2024-12-04 14:54:11,897 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:54:11,898 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:54:11,899 - sqlalchemy.engine.Engine - INFO - [cached since 23.82s ago] ('67', 1, 0)
2024-12-04 14:54:12,019 - aiogram.event - INFO - Update id=746486500 is handled. Duration 1375 ms by bot id=6588698079
2024-12-04 14:54:17,795 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:54:17,796 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:54:17,797 - sqlalchemy.engine.Engine - INFO - [cached since 29.72s ago] ('67', 1, 0)
2024-12-04 14:54:18,999 - aiogram.event - INFO - Update id=746486501 is handled. Duration 1217 ms by bot id=6588698079
2024-12-04 14:54:25,269 - aiogram.event - INFO - Update id=746486502 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 14:54:44,029 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:54:44,286 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:54:44,294 - root - INFO - Бот остановлен вручную.
2024-12-04 14:58:25,275 - root - INFO - Инициализация бота...
2024-12-04 14:58:26,564 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:58:26,566 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:58:26,566 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:58:26,569 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:58:26,570 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:58:26,571 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:58:26,668 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:58:26,668 - root - INFO - Инициализация диспетчера...
2024-12-04 14:58:26,671 - root - INFO - Регистрация обработчиков...
2024-12-04 14:58:26,674 - root - INFO - Запуск polling...
2024-12-04 14:58:26,675 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:58:26,695 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:58:26,702 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:58:26,703 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] ()
2024-12-04 14:58:26,718 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 14:58:26,720 - sqlalchemy.engine.Engine - INFO - [generated in 0.00108s] ('528155210',)
2024-12-04 14:58:27,396 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:58:41,211 - aiogram.event - INFO - Update id=746486503 is handled. Duration 500 ms by bot id=6588698079
2024-12-04 14:58:42,819 - aiogram.event - INFO - Update id=746486504 is handled. Duration 422 ms by bot id=6588698079
2024-12-04 14:58:43,980 - aiogram.event - INFO - Update id=746486505 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 14:58:45,571 - aiogram.event - INFO - Update id=746486506 is handled. Duration 188 ms by bot id=6588698079
2024-12-04 14:58:46,829 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:58:46,834 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:58:46,835 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] ('528155210', 1, 0)
2024-12-04 14:58:46,839 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 14:58:46,839 - sqlalchemy.engine.Engine - INFO - [cached since 20.12s ago] ('528155210',)
2024-12-04 14:58:48,349 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 14:58:48,421 - aiogram.event - INFO - Update id=746486507 is handled. Duration 1592 ms by bot id=6588698079
2024-12-04 14:58:53,529 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:58:53,534 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:58:53,536 - sqlalchemy.engine.Engine - INFO - [generated in 0.00118s] ('67', 1, 0)
2024-12-04 14:58:53,739 - aiogram.event - INFO - Update id=746486508 is handled. Duration 2000 ms by bot id=6588698079
2024-12-04 14:58:55,814 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:58:55,815 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:58:55,815 - sqlalchemy.engine.Engine - INFO - [cached since 2.281s ago] ('67', 1, 0)
2024-12-04 14:58:56,977 - aiogram.event - INFO - Update id=746486509 is handled. Duration 1172 ms by bot id=6588698079
2024-12-04 14:58:59,182 - aiogram.event - INFO - Update id=746486510 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 14:59:01,180 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:59:01,180 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:59:01,181 - sqlalchemy.engine.Engine - INFO - [cached since 14.35s ago] ('528155210', 1, 0)
2024-12-04 14:59:01,184 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 14:59:01,184 - sqlalchemy.engine.Engine - INFO - [cached since 34.47s ago] ('528155210',)
2024-12-04 14:59:02,602 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 14:59:02,742 - aiogram.event - INFO - Update id=746486511 is handled. Duration 1562 ms by bot id=6588698079
2024-12-04 14:59:04,860 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:59:04,862 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:59:04,862 - sqlalchemy.engine.Engine - INFO - [cached since 11.33s ago] ('67', 1, 0)
2024-12-04 14:59:05,000 - aiogram.event - INFO - Update id=746486512 is handled. Duration 1561 ms by bot id=6588698079
2024-12-04 14:59:06,268 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:59:06,268 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:59:06,269 - sqlalchemy.engine.Engine - INFO - [cached since 12.73s ago] ('67', 1, 0)
2024-12-04 14:59:07,608 - aiogram.event - INFO - Update id=746486513 is handled. Duration 1359 ms by bot id=6588698079
2024-12-04 14:59:08,859 - aiogram.event - INFO - Update id=746486514 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 14:59:10,388 - aiogram.event - INFO - Update id=746486515 is handled. Duration 344 ms by bot id=6588698079
2024-12-04 14:59:12,887 - aiogram.event - INFO - Update id=746486516 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 14:59:34,232 - aiogram.event - INFO - Update id=746486517 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 14:59:43,243 - root - INFO - {
    "message_id": 704,
    "date": 1733313583,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 60000,
        "invoice_payload": "7039e125-a3c9-4036-bc13-3496404d2580",
        "telegram_payment_charge_id": "6588698079_528155210_328323",
        "provider_payment_charge_id": "6588698079_528155210_328323",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-04 14:59:44,722 - root - INFO - Key created: OutlineKey(key_id='68', name='VPN Key55', password='M1bUge7DaGkxuaSqPBcksd', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpNMWJVZ2U3RGFHa3h1YVNxUEJja3Nk@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 14:59:44,723 - root - INFO - Key created: OutlineKey(key_id='68', name='VPN Key55', password='M1bUge7DaGkxuaSqPBcksd', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpNMWJVZ2U3RGFHa3h1YVNxUEJja3Nk@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 14:59:44,989 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:59:44,991 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:59:44,992 - sqlalchemy.engine.Engine - INFO - [cached since 58.16s ago] ('528155210', 1, 0)
2024-12-04 14:59:45,002 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 14:59:45,003 - sqlalchemy.engine.Engine - INFO - [generated in 0.00190s] ('68', '528155210', '2025-06-02 14:59:44.995212', '2024-12-04 14:59:44.995212', 0)
2024-12-04 14:59:45,010 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:59:45,024 - aiogram.event - INFO - Update id=746486518 is handled. Duration 1781 ms by bot id=6588698079
2024-12-04 14:59:47,032 - aiogram.event - INFO - Update id=746486519 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 14:59:49,514 - aiogram.event - INFO - Update id=746486520 is handled. Duration 391 ms by bot id=6588698079
2024-12-04 14:59:51,114 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:59:51,115 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:59:51,115 - sqlalchemy.engine.Engine - INFO - [cached since 64.28s ago] ('528155210', 1, 0)
2024-12-04 14:59:51,119 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 14:59:51,120 - sqlalchemy.engine.Engine - INFO - [cached since 84.4s ago] ('528155210',)
2024-12-04 14:59:53,939 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 14:59:54,060 - aiogram.event - INFO - Update id=746486521 is handled. Duration 2953 ms by bot id=6588698079
2024-12-04 14:59:56,912 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:59:56,913 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:59:56,913 - sqlalchemy.engine.Engine - INFO - [cached since 63.38s ago] ('68', 1, 0)
2024-12-04 14:59:57,065 - aiogram.event - INFO - Update id=746486522 is handled. Duration 1547 ms by bot id=6588698079
2024-12-04 14:59:59,854 - aiogram.event - INFO - Update id=746486523 is handled. Duration 94 ms by bot id=6588698079
2024-12-04 15:00:05,949 - aiogram.event - INFO - Update id=746486524 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 15:00:07,738 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:00:07,739 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:00:07,741 - sqlalchemy.engine.Engine - INFO - [cached since 74.21s ago] ('68', 1, 0)
2024-12-04 15:00:07,743 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:00:07,745 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:00:07,749 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 15:00:07,750 - sqlalchemy.engine.Engine - INFO - [generated in 0.00115s] ('68',)
2024-12-04 15:00:08,101 - aiogram.event - INFO - Update id=746486525 is not handled. Duration 359 ms by bot id=6588698079
2024-12-04 15:00:08,101 - aiogram.event - ERROR - Cause exception while process update id=746486525 by bot id=6588698079
AttributeError: 'FSMContext' object has no attribute 'finish'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 221, in confirm_rename_handler
    await state.finish()
          ^^^^^^^^^^^^
AttributeError: 'FSMContext' object has no attribute 'finish'
2024-12-04 15:00:09,507 - aiogram.event - INFO - Update id=746486526 is handled. Duration 186 ms by bot id=6588698079
2024-12-04 15:00:10,826 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:00:10,827 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:00:10,828 - sqlalchemy.engine.Engine - INFO - [cached since 83.99s ago] ('528155210', 1, 0)
2024-12-04 15:00:10,837 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 15:00:10,838 - sqlalchemy.engine.Engine - INFO - [cached since 104.1s ago] ('528155210',)
2024-12-04 15:00:14,076 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 15:00:14,161 - aiogram.event - INFO - Update id=746486527 is handled. Duration 3327 ms by bot id=6588698079
2024-12-04 15:00:20,205 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 15:05:19,265 - root - INFO - Инициализация бота...
2024-12-04 15:05:20,408 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:05:20,408 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 15:05:20,409 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:05:20,412 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 15:05:20,412 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:05:20,413 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:05:20,461 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 15:05:20,462 - root - INFO - Инициализация диспетчера...
2024-12-04 15:05:20,463 - root - INFO - Регистрация обработчиков...
2024-12-04 15:05:20,466 - root - INFO - Запуск polling...
2024-12-04 15:05:20,466 - aiogram.dispatcher - INFO - Start polling
2024-12-04 15:05:20,478 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:05:20,482 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 15:05:20,483 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ()
2024-12-04 15:05:20,493 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 15:05:20,494 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('528155210',)
2024-12-04 15:05:20,808 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:05:22,201 - aiogram.event - INFO - Update id=746486528 is handled. Duration 422 ms by bot id=6588698079
2024-12-04 15:05:24,194 - aiogram.event - INFO - Update id=746486529 is handled. Duration 344 ms by bot id=6588698079
2024-12-04 15:05:25,115 - aiogram.event - INFO - Update id=746486530 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 15:05:26,857 - aiogram.event - INFO - Update id=746486531 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 15:05:28,169 - aiogram.event - INFO - Update id=746486532 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 15:05:30,193 - aiogram.event - INFO - Update id=746486533 is handled. Duration 438 ms by bot id=6588698079
2024-12-04 15:05:45,765 - aiogram.event - INFO - Update id=746486534 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 15:05:55,008 - root - INFO - {
    "message_id": 723,
    "date": 1733313955,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 12000,
        "invoice_payload": "9cbd5aa3-a964-443e-9141-71147a93e289",
        "telegram_payment_charge_id": "6588698079_528155210_328342",
        "provider_payment_charge_id": "6588698079_528155210_328342",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-04 15:05:57,285 - root - INFO - Key created: OutlineKey(key_id='69', name='VPN Key56', password='8EQQPPtuq8vOOYvKapvH0v', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTo4RVFRUFB0dXE4dk9PWXZLYXB2SDB2@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 15:05:57,285 - root - INFO - Key created: OutlineKey(key_id='69', name='VPN Key56', password='8EQQPPtuq8vOOYvKapvH0v', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTo4RVFRUFB0dXE4dk9PWXZLYXB2SDB2@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 15:05:57,534 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:05:57,538 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:05:57,539 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] ('528155210', 1, 0)
2024-12-04 15:05:57,545 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 15:05:57,545 - sqlalchemy.engine.Engine - INFO - [generated in 0.00085s] ('69', '528155210', '2025-03-04 15:05:57.541416', '2024-12-04 15:05:57.541416', 0)
2024-12-04 15:05:57,548 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:05:57,555 - aiogram.event - INFO - Update id=746486535 is handled. Duration 2547 ms by bot id=6588698079
2024-12-04 15:05:59,892 - aiogram.event - INFO - Update id=746486536 is handled. Duration 469 ms by bot id=6588698079
2024-12-04 15:06:01,188 - aiogram.event - INFO - Update id=746486537 is handled. Duration 422 ms by bot id=6588698079
2024-12-04 15:06:53,932 - aiogram.event - INFO - Update id=746486538 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 15:06:54,964 - aiogram.event - INFO - Update id=746486539 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 15:07:42,459 - aiogram.event - INFO - Update id=746486540 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 15:08:09,842 - aiogram.event - INFO - Update id=746486541 is handled. Duration 375 ms by bot id=6588698079
2024-12-04 15:08:11,966 - aiogram.event - INFO - Update id=746486542 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 15:08:13,275 - aiogram.event - INFO - Update id=746486543 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 15:08:15,217 - aiogram.event - INFO - Update id=746486544 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 15:08:16,439 - aiogram.event - INFO - Update id=746486545 is not handled. Duration 16 ms by bot id=6588698079
2024-12-04 15:08:21,501 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 15:08:21,755 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:08:21,764 - root - INFO - Бот остановлен вручную.
2024-12-04 15:09:23,914 - root - INFO - Инициализация бота...
2024-12-04 15:09:24,805 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:09:24,806 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 15:09:24,806 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:09:24,808 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 15:09:24,808 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:09:24,810 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:09:24,867 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 15:09:24,868 - root - INFO - Инициализация диспетчера...
2024-12-04 15:09:24,870 - root - INFO - Регистрация обработчиков...
2024-12-04 15:09:24,873 - root - INFO - Запуск polling...
2024-12-04 15:09:24,873 - aiogram.dispatcher - INFO - Start polling
2024-12-04 15:09:24,886 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:09:24,890 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 15:09:24,891 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ()
2024-12-04 15:09:24,901 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 15:09:24,902 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] ('528155210',)
2024-12-04 15:09:25,231 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:09:25,730 - aiogram.event - INFO - Update id=746486546 is handled. Duration 343 ms by bot id=6588698079
2024-12-04 15:09:28,240 - aiogram.event - INFO - Update id=746486547 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 15:09:29,562 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:09:29,569 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:09:29,571 - sqlalchemy.engine.Engine - INFO - [generated in 0.00196s] ('528155210', 1, 0)
2024-12-04 15:09:29,584 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 15:09:29,585 - sqlalchemy.engine.Engine - INFO - [generated in 0.00116s] (1, '528155210')
2024-12-04 15:09:29,591 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:09:31,279 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:09:31,283 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 15:09:31,284 - sqlalchemy.engine.Engine - INFO - [generated in 0.00144s] ('70', '528155210', '2024-12-06 15:09:31.277681', '2024-12-04 15:09:31.277681', 0)
2024-12-04 15:09:31,289 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:09:31,297 - root - INFO - Key created: OutlineKey(key_id='70', name='VPN Key57', password='pcfe6DYEu3pka2TCjjPW4C', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpwY2ZlNkRZRXUzcGthMlRDampQVzRD@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 6588698079
2024-12-04 15:09:31,505 - aiogram.event - INFO - Update id=746486548 is handled. Duration 1952 ms by bot id=6588698079
2024-12-04 15:09:36,564 - aiogram.event - INFO - Update id=746486549 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 15:09:36,565 - aiogram.event - ERROR - Cause exception while process update id=746486549 by bot id=6588698079
KeyError: 'Installation'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 38, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Installation'
2024-12-04 15:09:43,245 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 15:09:43,519 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:09:43,522 - root - INFO - Бот остановлен вручную.
2024-12-04 15:10:09,639 - root - INFO - Инициализация бота...
2024-12-04 15:10:10,932 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:10:10,933 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 15:10:10,933 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:10:10,935 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 15:10:10,936 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:10:10,938 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:10:11,015 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 15:10:11,016 - root - INFO - Инициализация диспетчера...
2024-12-04 15:10:11,019 - root - INFO - Регистрация обработчиков...
2024-12-04 15:10:11,022 - root - INFO - Запуск polling...
2024-12-04 15:10:11,022 - aiogram.dispatcher - INFO - Start polling
2024-12-04 15:10:11,035 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:10:11,041 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 15:10:11,041 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ()
2024-12-04 15:10:11,051 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 15:10:11,052 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] ('528155210',)
2024-12-04 15:10:11,054 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:10:11,057 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:10:11,060 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 15:10:11,060 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('528155210',)
2024-12-04 15:10:11,387 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:10:11,783 - aiogram.event - INFO - Update id=746486550 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 15:10:19,214 - aiogram.event - INFO - Update id=746486551 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 15:10:20,151 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:10:20,158 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:10:20,159 - sqlalchemy.engine.Engine - INFO - [generated in 0.00132s] ('528155210', 1, 0)
2024-12-04 15:10:20,261 - aiogram.event - INFO - Update id=746486552 is handled. Duration 125 ms by bot id=6588698079
2024-12-04 15:10:22,757 - aiogram.event - INFO - Update id=746486553 is handled. Duration 530 ms by bot id=6588698079
2024-12-04 15:10:26,397 - aiogram.event - INFO - Update id=746486554 is handled. Duration 266 ms by bot id=6588698079
2024-12-04 15:10:27,656 - aiogram.event - INFO - Update id=746486555 is handled. Duration 422 ms by bot id=6588698079
2024-12-04 15:10:28,902 - aiogram.event - INFO - Update id=746486556 is handled. Duration 218 ms by bot id=6588698079
2024-12-04 15:10:30,125 - aiogram.event - INFO - Update id=746486557 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 15:10:46,347 - aiogram.event - INFO - Update id=746486558 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 15:10:54,955 - root - INFO - {
    "message_id": 745,
    "date": 1733314255,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 60000,
        "invoice_payload": "b8c6e905-fc8c-4800-8a7b-95466845a85f",
        "telegram_payment_charge_id": "6588698079_528155210_328373",
        "provider_payment_charge_id": "6588698079_528155210_328373",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-04 15:10:56,400 - root - INFO - Key created: OutlineKey(key_id='71', name='VPN Key58', password='Nc2H3q0vTF2x54ZssZbfvq', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpOYzJIM3EwdlRGMng1NFpzc1piZnZx@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 15:10:56,401 - root - INFO - Key created: OutlineKey(key_id='71', name='VPN Key58', password='Nc2H3q0vTF2x54ZssZbfvq', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpOYzJIM3EwdlRGMng1NFpzc1piZnZx@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 15:10:56,630 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:10:56,631 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:10:56,632 - sqlalchemy.engine.Engine - INFO - [cached since 36.47s ago] ('528155210', 1, 0)
2024-12-04 15:10:56,646 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 15:10:56,647 - sqlalchemy.engine.Engine - INFO - [generated in 0.00189s] ('71', '528155210', '2025-06-02 15:10:56.637001', '2024-12-04 15:10:56.637001', 0)
2024-12-04 15:10:56,655 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:10:56,667 - aiogram.event - INFO - Update id=746486559 is handled. Duration 1717 ms by bot id=6588698079
2024-12-04 15:11:00,261 - aiogram.event - INFO - Update id=746486560 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 15:11:01,352 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:11:01,353 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:11:01,354 - sqlalchemy.engine.Engine - INFO - [cached since 41.2s ago] ('528155210', 1, 0)
2024-12-04 15:11:01,359 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 15:11:01,359 - sqlalchemy.engine.Engine - INFO - [cached since 50.31s ago] ('528155210',)
2024-12-04 15:11:01,403 - root - ERROR - Ошибка при выборе ключа: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2024-12-04 15:11:01,761 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 15:11:01,911 - aiogram.event - INFO - Update id=746486561 is handled. Duration 562 ms by bot id=6588698079
2024-12-04 15:11:03,910 - aiogram.event - INFO - Update id=746486562 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 15:11:23,158 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 15:11:23,425 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:11:23,431 - root - INFO - Бот остановлен вручную.
2024-12-04 15:29:48,044 - root - INFO - Инициализация бота...
2024-12-04 15:29:48,846 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:29:48,847 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 15:29:48,847 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:29:48,850 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 15:29:48,850 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:29:48,852 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:29:48,904 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 15:29:48,904 - root - INFO - Инициализация диспетчера...
2024-12-04 15:29:48,906 - root - INFO - Регистрация обработчиков...
2024-12-04 15:29:48,908 - root - INFO - Запуск polling...
2024-12-04 15:29:48,909 - aiogram.dispatcher - INFO - Start polling
2024-12-04 15:29:48,921 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:29:48,925 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 15:29:48,926 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ()
2024-12-04 15:29:48,937 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 15:29:48,937 - sqlalchemy.engine.Engine - INFO - [generated in 0.00091s] ('528155210',)
2024-12-04 15:29:48,939 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:29:48,941 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:29:48,942 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 15:29:48,943 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('528155210',)
2024-12-04 15:29:49,413 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:29:49,504 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 15:29:49,505 - sqlalchemy.engine.Engine - INFO - [generated in 0.00136s] ('71',)
2024-12-04 15:29:54,471 - aiogram.event - INFO - Update id=746486563 is handled. Duration 155 ms by bot id=6588698079
2024-12-04 15:30:01,085 - aiogram.event - INFO - Update id=746486564 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 15:30:02,849 - aiogram.event - INFO - Update id=746486565 is handled. Duration 375 ms by bot id=6588698079
2024-12-04 15:30:04,145 - aiogram.event - INFO - Update id=746486566 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 15:30:05,063 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:30:05,066 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:30:05,067 - sqlalchemy.engine.Engine - INFO - [generated in 0.00081s] ('528155210', 1, 0)
2024-12-04 15:30:05,220 - aiogram.event - INFO - Update id=746486567 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 15:30:07,538 - aiogram.event - INFO - Update id=746486568 is handled. Duration 359 ms by bot id=6588698079
2024-12-04 15:30:09,139 - aiogram.event - INFO - Update id=746486569 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 15:30:16,279 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:30:16,281 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:30:16,281 - sqlalchemy.engine.Engine - INFO - [cached since 11.22s ago] ('528155210', 1, 0)
2024-12-04 15:30:16,386 - aiogram.event - INFO - Update id=746486570 is handled. Duration 125 ms by bot id=6588698079
2024-12-04 15:48:51,765 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 15:48:52,029 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:48:52,035 - root - INFO - Бот остановлен вручную.
2024-12-04 15:49:00,482 - root - INFO - Инициализация бота...
2024-12-04 15:49:01,049 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:49:01,049 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 15:49:01,049 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:49:01,051 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 15:49:01,051 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:49:01,051 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:49:31,329 - root - INFO - Инициализация бота...
2024-12-04 15:49:32,005 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:49:32,006 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 15:49:32,006 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:49:32,008 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 15:49:32,009 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:49:32,010 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:49:32,059 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 15:49:32,060 - root - INFO - Инициализация диспетчера...
2024-12-04 15:49:32,061 - root - INFO - Регистрация обработчиков...
2024-12-04 15:50:13,075 - root - INFO - Инициализация бота...
2024-12-04 15:50:13,724 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:50:13,725 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 15:50:13,725 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:50:13,727 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 15:50:13,728 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:50:13,729 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:50:13,782 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 15:50:13,783 - root - INFO - Инициализация диспетчера...
2024-12-04 15:50:13,785 - root - INFO - Регистрация обработчиков...
2024-12-04 15:50:13,787 - root - INFO - Запуск polling...
2024-12-04 15:50:13,788 - aiogram.dispatcher - INFO - Start polling
2024-12-04 15:50:13,798 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:50:13,804 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 15:50:13,805 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ()
2024-12-04 15:50:13,811 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 15:50:13,811 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('528155210',)
2024-12-04 15:50:13,813 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:50:13,814 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:50:13,816 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 15:50:13,817 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('528155210',)
2024-12-04 15:50:14,126 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:50:14,181 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 15:50:14,181 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('71',)
2024-12-04 15:50:14,424 - aiogram.event - INFO - Update id=746486571 is handled. Duration 155 ms by bot id=6588698079
2024-12-04 15:50:19,497 - aiogram.event - INFO - Update id=746486572 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 15:50:21,809 - aiogram.event - INFO - Update id=746486573 is handled. Duration 750 ms by bot id=6588698079
2024-12-04 15:50:24,211 - aiogram.event - INFO - Update id=746486574 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 15:50:25,886 - aiogram.event - INFO - Update id=746486575 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 15:50:31,162 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:50:31,166 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:50:31,167 - sqlalchemy.engine.Engine - INFO - [generated in 0.00130s] ('528155210', 1, 0)
2024-12-04 15:50:31,433 - aiogram.event - INFO - Update id=746486576 is handled. Duration 281 ms by bot id=6588698079
2024-12-04 15:50:37,250 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 15:50:37,519 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:50:37,525 - root - INFO - Бот остановлен вручную.
2024-12-04 15:57:15,005 - root - INFO - Инициализация бота...
2024-12-04 15:57:15,774 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:57:15,775 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 15:57:15,775 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:57:15,778 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 15:57:15,779 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:57:15,780 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:57:15,839 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 15:57:15,839 - root - INFO - Инициализация диспетчера...
2024-12-04 15:57:15,841 - root - INFO - Регистрация обработчиков...
2024-12-04 15:57:15,843 - root - INFO - Запуск polling...
2024-12-04 15:57:15,844 - aiogram.dispatcher - INFO - Start polling
2024-12-04 15:57:15,854 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:57:15,861 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 15:57:15,861 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] ()
2024-12-04 15:57:15,867 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 15:57:15,868 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] ('528155210',)
2024-12-04 15:57:15,870 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:57:15,872 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:57:15,874 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 15:57:15,874 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ('528155210',)
2024-12-04 15:57:16,213 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:57:16,287 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 15:57:16,287 - sqlalchemy.engine.Engine - INFO - [generated in 0.00095s] ('71',)
2024-12-04 15:57:22,415 - aiogram.event - INFO - Update id=746486577 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 15:57:24,203 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:57:24,206 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:57:24,207 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] ('528155210', 1, 0)
2024-12-04 15:57:24,210 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 15:57:24,210 - sqlalchemy.engine.Engine - INFO - [cached since 8.342s ago] ('528155210',)
2024-12-04 15:57:30,013 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 15:57:30,109 - aiogram.event - INFO - Update id=746486578 is handled. Duration 5905 ms by bot id=6588698079
2024-12-04 15:57:38,111 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:57:38,114 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:57:38,114 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ('69', 1, 0)
2024-12-04 15:57:38,268 - aiogram.event - INFO - Update id=746486579 is handled. Duration 1359 ms by bot id=6588698079
2024-12-04 15:57:43,952 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:57:43,952 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:57:43,952 - sqlalchemy.engine.Engine - INFO - [cached since 5.839s ago] ('69', 1, 0)
2024-12-04 15:57:45,609 - aiogram.event - INFO - Update id=746486580 is handled. Duration 1671 ms by bot id=6588698079
2024-12-04 15:59:56,166 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 15:59:56,426 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:59:56,436 - root - INFO - Бот остановлен вручную.
2024-12-04 16:00:05,246 - root - INFO - Инициализация бота...
2024-12-04 16:00:05,859 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:00:05,860 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:00:05,861 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:00:05,863 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:00:05,863 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:00:05,864 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:00:05,911 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:00:05,911 - root - INFO - Инициализация диспетчера...
2024-12-04 16:00:05,914 - root - INFO - Регистрация обработчиков...
2024-12-04 16:00:05,916 - root - INFO - Запуск polling...
2024-12-04 16:00:05,917 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:00:05,928 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:00:05,933 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:00:05,933 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ()
2024-12-04 16:00:05,942 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:00:05,942 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('528155210',)
2024-12-04 16:00:05,945 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:00:05,946 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:00:05,948 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:00:05,948 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('528155210',)
2024-12-04 16:00:06,322 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:00:06,323 - sqlalchemy.engine.Engine - INFO - [generated in 0.00116s] ('71',)
2024-12-04 16:00:06,338 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:00:06,667 - aiogram.event - INFO - Update id=746486581 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 16:00:09,614 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:00:09,620 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:00:09,620 - sqlalchemy.engine.Engine - INFO - [generated in 0.00119s] ('528155210', 1, 0)
2024-12-04 16:00:09,625 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:00:09,626 - sqlalchemy.engine.Engine - INFO - [cached since 3.684s ago] ('528155210',)
2024-12-04 16:00:15,659 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 16:00:15,735 - aiogram.event - INFO - Update id=746486582 is handled. Duration 6125 ms by bot id=6588698079
2024-12-04 16:00:50,512 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:00:50,882 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:00:50,885 - root - INFO - Бот остановлен вручную.
2024-12-04 16:00:59,040 - root - INFO - Инициализация бота...
2024-12-04 16:01:00,140 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:01:00,140 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:01:00,141 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:01:00,142 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:01:00,143 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:01:00,144 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:01:00,192 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:01:00,192 - root - INFO - Инициализация диспетчера...
2024-12-04 16:01:00,193 - root - INFO - Регистрация обработчиков...
2024-12-04 16:01:00,196 - root - INFO - Запуск polling...
2024-12-04 16:01:00,196 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:01:00,206 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:01:00,212 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:01:00,212 - sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] ()
2024-12-04 16:01:00,218 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:01:00,218 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ('528155210',)
2024-12-04 16:01:00,219 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:01:00,220 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:01:00,222 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:01:00,222 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ('528155210',)
2024-12-04 16:01:00,528 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:01:00,619 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:01:00,619 - sqlalchemy.engine.Engine - INFO - [generated in 0.00115s] ('71',)
2024-12-04 16:01:01,804 - aiogram.event - INFO - Update id=746486583 is handled. Duration 233 ms by bot id=6588698079
2024-12-04 16:01:03,302 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:01:03,310 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:01:03,311 - sqlalchemy.engine.Engine - INFO - [generated in 0.00145s] ('528155210', 1, 0)
2024-12-04 16:01:03,316 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:01:03,317 - sqlalchemy.engine.Engine - INFO - [cached since 3.1s ago] ('528155210',)
2024-12-04 16:01:09,796 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 16:01:09,980 - aiogram.event - INFO - Update id=746486584 is handled. Duration 6687 ms by bot id=6588698079
2024-12-04 16:01:11,535 - aiogram.event - INFO - Update id=746486585 is not handled. Duration 250 ms by bot id=6588698079
2024-12-04 16:01:11,535 - aiogram.event - ERROR - Cause exception while process update id=746486585 by bot id=6588698079
OutlineServerErrorException: Unable to get key
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 26, in choosing_key_handler
    key_info = outline_processor.get_key_info(selected_key_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\outline_processor.py", line 14, in get_key_info
    return self.client.get_key(key_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\outline_vpn\outline_vpn.py", line 128, in get_key
    raise OutlineServerErrorException("Unable to get key")
outline_vpn.outline_vpn.OutlineServerErrorException: Unable to get key
2024-12-04 16:01:19,857 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:01:20,123 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:01:20,130 - root - INFO - Бот остановлен вручную.
2024-12-04 16:05:51,485 - root - INFO - Инициализация бота...
2024-12-04 16:05:52,386 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:05:52,388 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:05:52,390 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:05:52,394 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:05:52,394 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:05:52,396 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:05:52,486 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:05:52,487 - root - INFO - Инициализация диспетчера...
2024-12-04 16:05:52,490 - root - INFO - Регистрация обработчиков...
2024-12-04 16:05:52,494 - root - INFO - Запуск polling...
2024-12-04 16:05:52,495 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:05:52,518 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:05:52,525 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:05:52,526 - sqlalchemy.engine.Engine - INFO - [generated in 0.00104s] ()
2024-12-04 16:05:52,543 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:05:52,544 - sqlalchemy.engine.Engine - INFO - [generated in 0.00110s] ('528155210',)
2024-12-04 16:05:52,547 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:05:52,549 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:05:52,552 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:05:52,553 - sqlalchemy.engine.Engine - INFO - [generated in 0.00104s] ('528155210',)
2024-12-04 16:05:52,875 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:05:53,179 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:05:53,179 - sqlalchemy.engine.Engine - INFO - [generated in 0.00153s] ('71',)
2024-12-04 16:05:53,452 - aiogram.event - INFO - Update id=746486586 is handled. Duration 422 ms by bot id=6588698079
2024-12-04 16:05:56,204 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:05:56,207 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:05:56,208 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ('528155210', 1, 0)
2024-12-04 16:05:56,211 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:05:56,211 - sqlalchemy.engine.Engine - INFO - [cached since 3.669s ago] ('528155210',)
2024-12-04 16:06:01,722 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 16:06:01,793 - aiogram.event - INFO - Update id=746486587 is handled. Duration 5592 ms by bot id=6588698079
2024-12-04 16:06:03,633 - aiogram.event - INFO - Update id=746486588 is not handled. Duration 233 ms by bot id=6588698079
2024-12-04 16:06:03,634 - aiogram.event - ERROR - Cause exception while process update id=746486588 by bot id=6588698079
OutlineServerErrorException: Unable to get key
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 26, in choosing_key_handler
    key_info = outline_processor.get_key_info(selected_key_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\outline_processor.py", line 14, in get_key_info
    return self.client.get_key(key_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\outline_vpn\outline_vpn.py", line 128, in get_key
    raise OutlineServerErrorException("Unable to get key")
outline_vpn.outline_vpn.OutlineServerErrorException: Unable to get key
2024-12-04 16:06:14,075 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:06:14,336 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:06:14,339 - root - INFO - Бот остановлен вручную.
2024-12-04 16:06:49,113 - root - INFO - Инициализация бота...
2024-12-04 16:06:50,080 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:06:50,081 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:06:50,081 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:06:50,085 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:06:50,086 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:06:50,087 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:06:50,176 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:06:50,176 - root - INFO - Инициализация диспетчера...
2024-12-04 16:06:50,178 - root - INFO - Регистрация обработчиков...
2024-12-04 16:06:50,181 - root - INFO - Запуск polling...
2024-12-04 16:06:50,182 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:06:50,203 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:06:50,207 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:06:50,208 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] ()
2024-12-04 16:06:50,217 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:06:50,218 - sqlalchemy.engine.Engine - INFO - [generated in 0.00100s] ('528155210',)
2024-12-04 16:06:50,221 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:06:50,223 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:06:50,225 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:06:50,225 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('528155210',)
2024-12-04 16:06:50,538 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:06:50,809 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:06:50,810 - sqlalchemy.engine.Engine - INFO - [generated in 0.00124s] ('71',)
2024-12-04 16:06:51,087 - aiogram.event - INFO - Update id=746486589 is handled. Duration 359 ms by bot id=6588698079
2024-12-04 16:06:53,861 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:06:53,867 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:06:53,868 - sqlalchemy.engine.Engine - INFO - [generated in 0.00164s] ('528155210', 1, 0)
2024-12-04 16:06:53,874 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:06:53,874 - sqlalchemy.engine.Engine - INFO - [cached since 3.658s ago] ('528155210',)
2024-12-04 16:06:59,238 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 16:06:59,414 - aiogram.event - INFO - Update id=746486590 is handled. Duration 5547 ms by bot id=6588698079
2024-12-04 16:07:00,762 - aiogram.event - INFO - Update id=746486591 is not handled. Duration 234 ms by bot id=6588698079
2024-12-04 16:07:00,764 - aiogram.event - ERROR - Cause exception while process update id=746486591 by bot id=6588698079
OutlineServerErrorException: Unable to get key
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 26, in choosing_key_handler
    key_info = outline_processor.get_key_info(selected_key_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\outline_processor.py", line 14, in get_key_info
    return self.client.get_key(key_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\outline_vpn\outline_vpn.py", line 128, in get_key
    raise OutlineServerErrorException("Unable to get key")
outline_vpn.outline_vpn.OutlineServerErrorException: Unable to get key
2024-12-04 16:07:15,949 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:09:02,295 - root - INFO - Инициализация бота...
2024-12-04 16:09:03,643 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:09:03,644 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:09:03,645 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:09:03,649 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:09:03,649 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:09:03,652 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:09:03,723 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:09:03,723 - root - INFO - Инициализация диспетчера...
2024-12-04 16:09:03,725 - root - INFO - Регистрация обработчиков...
2024-12-04 16:09:03,727 - root - INFO - Запуск polling...
2024-12-04 16:09:03,727 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:09:03,737 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:09:03,741 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:09:03,741 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ()
2024-12-04 16:09:03,748 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:09:03,748 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ('528155210',)
2024-12-04 16:09:03,750 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:09:03,751 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:09:03,752 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:09:03,752 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ('528155210',)
2024-12-04 16:09:04,134 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:09:04,363 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:09:04,364 - sqlalchemy.engine.Engine - INFO - [generated in 0.00123s] ('71',)
2024-12-04 16:09:04,691 - aiogram.event - INFO - Update id=746486592 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 16:09:06,928 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:09:06,935 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:09:06,936 - sqlalchemy.engine.Engine - INFO - [generated in 0.00163s] ('528155210', 1, 0)
2024-12-04 16:09:06,943 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:09:06,944 - sqlalchemy.engine.Engine - INFO - [cached since 3.196s ago] ('528155210',)
2024-12-04 16:09:13,454 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 16:09:13,524 - aiogram.event - INFO - Update id=746486593 is handled. Duration 6594 ms by bot id=6588698079
2024-12-04 16:09:15,147 - aiogram.event - INFO - Update id=746486594 is handled. Duration 156 ms by bot id=6588698079
2024-12-04 16:10:20,344 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:10:20,610 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:10:20,617 - root - INFO - Бот остановлен вручную.
2024-12-04 16:10:28,904 - root - INFO - Инициализация бота...
2024-12-04 16:10:29,454 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:10:29,455 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:10:29,455 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:10:29,456 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:10:29,456 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:10:29,457 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:10:29,494 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:10:29,494 - root - INFO - Инициализация диспетчера...
2024-12-04 16:10:29,495 - root - INFO - Регистрация обработчиков...
2024-12-04 16:10:29,497 - root - INFO - Запуск polling...
2024-12-04 16:10:29,497 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:10:29,506 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:10:29,510 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:10:29,510 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ()
2024-12-04 16:10:29,516 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:10:29,516 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('528155210',)
2024-12-04 16:10:29,518 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:10:29,519 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:10:29,520 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:10:29,520 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] ('528155210',)
2024-12-04 16:10:29,767 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:10:30,011 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:10:30,012 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] ('71',)
2024-12-04 16:10:35,227 - aiogram.event - INFO - Update id=746486595 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 16:10:37,745 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:10:37,747 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:10:37,747 - sqlalchemy.engine.Engine - INFO - [generated in 0.00082s] ('528155210', 1, 0)
2024-12-04 16:10:37,753 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:10:37,753 - sqlalchemy.engine.Engine - INFO - [cached since 8.237s ago] ('528155210',)
2024-12-04 16:10:43,455 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 16:10:43,533 - aiogram.event - INFO - Update id=746486596 is handled. Duration 5797 ms by bot id=6588698079
2024-12-04 16:10:44,552 - aiogram.event - INFO - Update id=746486597 is handled. Duration 155 ms by bot id=6588698079
2024-12-04 16:10:47,703 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:11:31,494 - root - INFO - Инициализация бота...
2024-12-04 16:11:32,231 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:11:32,232 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:11:32,232 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:11:32,233 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:11:32,234 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:11:32,234 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:11:32,274 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:11:32,274 - root - INFO - Инициализация диспетчера...
2024-12-04 16:11:32,275 - root - INFO - Регистрация обработчиков...
2024-12-04 16:11:32,277 - root - INFO - Запуск polling...
2024-12-04 16:11:32,278 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:11:32,288 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:11:32,291 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:11:32,292 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ()
2024-12-04 16:11:32,297 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:11:32,298 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ('528155210',)
2024-12-04 16:11:32,300 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:11:32,301 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:11:32,303 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:11:32,303 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ('528155210',)
2024-12-04 16:11:32,688 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:11:32,839 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:11:32,840 - sqlalchemy.engine.Engine - INFO - [generated in 0.00114s] ('71',)
2024-12-04 16:11:36,210 - aiogram.event - INFO - Update id=746486598 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 16:11:37,731 - aiogram.event - INFO - Update id=746486599 is handled. Duration 515 ms by bot id=6588698079
2024-12-04 16:11:39,171 - aiogram.event - INFO - Update id=746486600 is handled. Duration 562 ms by bot id=6588698079
2024-12-04 16:11:42,574 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:11:42,837 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:11:42,839 - root - INFO - Бот остановлен вручную.
2024-12-04 16:13:31,990 - root - INFO - Инициализация бота...
2024-12-04 16:13:32,848 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:13:32,849 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:13:32,849 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:13:32,851 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:13:32,852 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:13:32,852 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:13:32,940 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:13:32,941 - root - INFO - Инициализация диспетчера...
2024-12-04 16:13:32,943 - root - INFO - Регистрация обработчиков...
2024-12-04 16:13:32,946 - root - INFO - Запуск polling...
2024-12-04 16:13:32,947 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:13:32,969 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:13:32,974 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:13:32,975 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ()
2024-12-04 16:13:32,985 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:13:32,985 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] ('528155210',)
2024-12-04 16:13:32,989 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:13:32,990 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:13:32,992 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:13:32,993 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('528155210',)
2024-12-04 16:13:33,402 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:13:33,403 - sqlalchemy.engine.Engine - INFO - [generated in 0.00108s] ('71',)
2024-12-04 16:13:33,415 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:13:33,983 - aiogram.event - INFO - Update id=746486601 is handled. Duration 171 ms by bot id=6588698079
2024-12-04 16:13:36,194 - aiogram.event - INFO - Update id=746486602 is handled. Duration 703 ms by bot id=6588698079
2024-12-04 16:13:36,695 - aiogram.event - INFO - Update id=746486603 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:14:54,350 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:14:54,613 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:14:54,619 - root - INFO - Бот остановлен вручную.
2024-12-04 16:15:02,443 - root - INFO - Инициализация бота...
2024-12-04 16:15:03,038 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:15:03,039 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:15:03,039 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:15:03,040 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:15:03,040 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:15:03,041 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:15:03,084 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:15:03,085 - root - INFO - Инициализация диспетчера...
2024-12-04 16:15:03,087 - root - INFO - Регистрация обработчиков...
2024-12-04 16:15:03,090 - root - INFO - Запуск polling...
2024-12-04 16:15:03,090 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:15:03,101 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:15:03,106 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:15:03,106 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ()
2024-12-04 16:15:03,112 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:15:03,112 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ('528155210',)
2024-12-04 16:15:03,114 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:15:03,115 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:15:03,117 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:15:03,117 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('528155210',)
2024-12-04 16:15:03,489 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:15:03,489 - sqlalchemy.engine.Engine - INFO - [generated in 0.00148s] ('71',)
2024-12-04 16:15:03,502 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:15:06,938 - aiogram.event - INFO - Update id=746486604 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 16:15:09,158 - aiogram.event - INFO - Update id=746486605 is handled. Duration 547 ms by bot id=6588698079
2024-12-04 16:15:10,143 - aiogram.event - INFO - Update id=746486606 is not handled. Duration 16 ms by bot id=6588698079
2024-12-04 16:15:13,775 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:16:45,408 - root - INFO - Инициализация бота...
2024-12-04 16:16:46,145 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:16:46,146 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:16:46,146 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:16:46,148 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:16:46,148 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:16:46,150 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:16:46,199 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:16:46,199 - root - INFO - Инициализация диспетчера...
2024-12-04 16:16:46,202 - root - INFO - Регистрация обработчиков...
2024-12-04 16:16:46,203 - root - INFO - Запуск polling...
2024-12-04 16:16:46,204 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:16:46,217 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:16:46,220 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:16:46,221 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ()
2024-12-04 16:16:46,227 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:16:46,228 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('528155210',)
2024-12-04 16:16:46,230 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:16:46,231 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:16:46,233 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:16:46,233 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ('528155210',)
2024-12-04 16:16:46,568 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:16:46,815 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:16:46,815 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ('71',)
2024-12-04 16:16:47,271 - aiogram.event - INFO - Update id=746486607 is handled. Duration 500 ms by bot id=6588698079
2024-12-04 16:16:48,827 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:16:48,831 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:16:48,832 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('528155210', 1, 0)
2024-12-04 16:16:48,835 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:16:48,835 - sqlalchemy.engine.Engine - INFO - [cached since 2.608s ago] ('528155210',)
2024-12-04 16:16:55,538 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 16:16:55,751 - aiogram.event - INFO - Update id=746486608 is handled. Duration 6920 ms by bot id=6588698079
2024-12-04 16:16:57,098 - aiogram.event - INFO - Update id=746486609 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 16:16:58,824 - aiogram.event - INFO - Update id=746486610 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 16:17:00,498 - aiogram.event - INFO - Update id=746486611 is handled. Duration 515 ms by bot id=6588698079
2024-12-04 16:17:03,850 - aiogram.event - INFO - Update id=746486612 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 16:17:05,091 - aiogram.event - INFO - Update id=746486613 is handled. Duration 280 ms by bot id=6588698079
2024-12-04 16:17:06,503 - aiogram.event - INFO - Update id=746486614 is handled. Duration 280 ms by bot id=6588698079
2024-12-04 16:17:07,470 - aiogram.event - INFO - Update id=746486615 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:17:11,193 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:17:11,468 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:17:11,473 - root - INFO - Бот остановлен вручную.
2024-12-04 16:18:23,103 - root - INFO - Инициализация бота...
2024-12-04 16:18:23,666 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:18:23,667 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:18:23,667 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:18:23,669 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:18:23,670 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:18:23,671 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:18:23,720 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:18:23,720 - root - INFO - Инициализация диспетчера...
2024-12-04 16:18:23,722 - root - INFO - Регистрация обработчиков...
2024-12-04 16:18:23,723 - root - INFO - Запуск polling...
2024-12-04 16:18:23,724 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:18:23,736 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:18:23,739 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:18:23,739 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ()
2024-12-04 16:18:23,744 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:18:23,744 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ('528155210',)
2024-12-04 16:18:23,747 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:18:23,747 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:18:23,749 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:18:23,750 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ('528155210',)
2024-12-04 16:18:24,055 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:18:24,056 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ('71',)
2024-12-04 16:18:24,064 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:18:45,132 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:18:45,399 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:18:45,405 - root - INFO - Бот остановлен вручную.
2024-12-04 16:18:53,297 - root - INFO - Инициализация бота...
2024-12-04 16:18:53,888 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:18:53,888 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:18:53,888 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:18:53,890 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:18:53,890 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:18:53,891 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:18:53,947 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:18:53,948 - root - INFO - Инициализация диспетчера...
2024-12-04 16:18:53,951 - root - INFO - Регистрация обработчиков...
2024-12-04 16:18:53,955 - root - INFO - Запуск polling...
2024-12-04 16:18:53,956 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:18:53,983 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:18:53,992 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:18:53,993 - sqlalchemy.engine.Engine - INFO - [generated in 0.00112s] ()
2024-12-04 16:18:54,006 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:18:54,008 - sqlalchemy.engine.Engine - INFO - [generated in 0.00159s] ('528155210',)
2024-12-04 16:18:54,013 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:18:54,016 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:18:54,019 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:18:54,020 - sqlalchemy.engine.Engine - INFO - [generated in 0.00129s] ('528155210',)
2024-12-04 16:18:54,281 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:18:54,380 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:18:54,380 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] ('71',)
2024-12-04 16:18:57,748 - aiogram.event - INFO - Update id=746486616 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 16:19:01,380 - aiogram.event - INFO - Update id=746486617 is handled. Duration 405 ms by bot id=6588698079
2024-12-04 16:19:02,409 - aiogram.event - INFO - Update id=746486618 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:19:06,014 - aiogram.event - INFO - Update id=746486619 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 16:19:07,742 - aiogram.event - INFO - Update id=746486620 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 16:19:09,056 - aiogram.event - INFO - Update id=746486621 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:19:10,434 - aiogram.event - INFO - Update id=746486622 is handled. Duration 188 ms by bot id=6588698079
2024-12-04 16:19:11,279 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:19:11,283 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:19:11,284 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] ('528155210', 1, 0)
2024-12-04 16:19:11,289 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:19:11,290 - sqlalchemy.engine.Engine - INFO - [cached since 17.28s ago] ('528155210',)
2024-12-04 16:19:16,775 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 16:19:16,856 - aiogram.event - INFO - Update id=746486623 is handled. Duration 5593 ms by bot id=6588698079
2024-12-04 16:19:19,820 - aiogram.event - INFO - Update id=746486624 is handled. Duration 156 ms by bot id=6588698079
2024-12-04 16:19:23,326 - aiogram.event - INFO - Update id=746486625 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 16:19:25,834 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:19:26,080 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:19:26,086 - root - INFO - Бот остановлен вручную.
2024-12-04 16:21:11,426 - root - INFO - Инициализация бота...
2024-12-04 16:21:12,625 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:21:12,625 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:21:12,626 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:21:12,627 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:21:12,628 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:21:12,629 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:21:12,686 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:21:12,686 - root - INFO - Инициализация диспетчера...
2024-12-04 16:21:12,687 - root - INFO - Регистрация обработчиков...
2024-12-04 16:21:12,689 - root - INFO - Запуск polling...
2024-12-04 16:21:12,690 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:21:12,702 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:21:12,707 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:21:12,708 - sqlalchemy.engine.Engine - INFO - [generated in 0.00089s] ()
2024-12-04 16:21:12,714 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:21:12,715 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] ('528155210',)
2024-12-04 16:21:12,717 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:21:12,717 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:21:12,719 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:21:12,719 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ('528155210',)
2024-12-04 16:21:13,063 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:21:13,213 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:21:13,213 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ('71',)
2024-12-04 16:21:33,641 - aiogram.event - INFO - Update id=746486626 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 16:21:40,487 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:21:40,491 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:21:40,492 - sqlalchemy.engine.Engine - INFO - [generated in 0.00116s] ('528155210', 1, 0)
2024-12-04 16:21:40,497 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:21:40,498 - sqlalchemy.engine.Engine - INFO - [cached since 27.78s ago] ('528155210',)
2024-12-04 16:21:46,709 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 16:21:46,894 - aiogram.event - INFO - Update id=746486627 is handled. Duration 6406 ms by bot id=6588698079
2024-12-04 16:21:50,756 - aiogram.event - INFO - Update id=746486628 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 16:21:52,212 - aiogram.event - INFO - Update id=746486629 is handled. Duration 329 ms by bot id=6588698079
2024-12-04 16:21:53,677 - aiogram.event - INFO - Update id=746486630 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:21:56,211 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:21:56,479 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:21:56,484 - root - INFO - Бот остановлен вручную.
2024-12-04 16:22:31,264 - root - INFO - Инициализация бота...
2024-12-04 16:22:32,000 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:22:32,001 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:22:32,001 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:22:32,003 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:22:32,003 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:22:32,004 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:22:32,059 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:22:32,060 - root - INFO - Инициализация диспетчера...
2024-12-04 16:22:32,061 - root - INFO - Регистрация обработчиков...
2024-12-04 16:22:32,064 - root - INFO - Запуск polling...
2024-12-04 16:22:32,064 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:22:32,078 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:22:32,084 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:22:32,084 - sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] ()
2024-12-04 16:22:32,092 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:22:32,093 - sqlalchemy.engine.Engine - INFO - [generated in 0.00072s] ('528155210',)
2024-12-04 16:22:32,094 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:22:32,095 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:22:32,097 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:22:32,098 - sqlalchemy.engine.Engine - INFO - [generated in 0.00081s] ('528155210',)
2024-12-04 16:22:32,488 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:22:32,489 - sqlalchemy.engine.Engine - INFO - [generated in 0.00133s] ('71',)
2024-12-04 16:22:32,500 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:22:32,790 - aiogram.event - INFO - Update id=746486631 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 16:22:38,783 - aiogram.event - INFO - Update id=746486632 is handled. Duration 500 ms by bot id=6588698079
2024-12-04 16:22:39,475 - aiogram.event - INFO - Update id=746486633 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:22:42,033 - aiogram.event - INFO - Update id=746486634 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 16:32:03,757 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:32:04,016 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:32:04,024 - root - INFO - Бот остановлен вручную.
2024-12-04 16:33:55,451 - root - INFO - Инициализация бота...
2024-12-04 16:33:56,461 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:33:56,462 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:33:56,463 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:33:56,466 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:33:56,467 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:33:56,469 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:33:56,569 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:33:56,570 - root - INFO - Инициализация диспетчера...
2024-12-04 16:33:56,574 - root - INFO - Регистрация обработчиков...
2024-12-04 16:33:56,579 - root - INFO - Запуск polling...
2024-12-04 16:33:56,580 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:33:56,610 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:33:56,618 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:33:56,620 - sqlalchemy.engine.Engine - INFO - [generated in 0.00207s] ()
2024-12-04 16:33:56,638 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:33:56,639 - sqlalchemy.engine.Engine - INFO - [generated in 0.00196s] ('528155210',)
2024-12-04 16:33:56,644 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:33:56,649 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:33:56,657 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:33:56,659 - sqlalchemy.engine.Engine - INFO - [generated in 0.00236s] ('528155210',)
2024-12-04 16:33:57,110 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:33:57,357 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:33:57,357 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] ('71',)
2024-12-04 16:34:01,305 - aiogram.event - INFO - Update id=746486635 is handled. Duration 280 ms by bot id=6588698079
2024-12-04 16:34:03,195 - aiogram.event - INFO - Update id=746486636 is handled. Duration 641 ms by bot id=6588698079
2024-12-04 16:34:04,220 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:34:04,227 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:34:04,229 - sqlalchemy.engine.Engine - INFO - [generated in 0.00180s] ('528155210', 1, 0)
2024-12-04 16:34:04,472 - aiogram.event - INFO - Update id=746486637 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 16:34:09,769 - aiogram.event - INFO - Update id=746486638 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 16:34:11,724 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:34:11,989 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:34:11,998 - root - INFO - Бот остановлен вручную.
2024-12-04 16:34:40,533 - root - INFO - Инициализация бота...
2024-12-04 16:34:41,283 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:34:41,283 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:34:41,283 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:34:41,285 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:34:41,286 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:34:41,286 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:34:41,327 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:34:41,327 - root - INFO - Инициализация диспетчера...
2024-12-04 16:34:41,328 - root - INFO - Регистрация обработчиков...
2024-12-04 16:34:41,330 - root - INFO - Запуск polling...
2024-12-04 16:34:41,331 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:34:41,340 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:34:41,343 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:34:41,344 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ()
2024-12-04 16:34:41,350 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:34:41,350 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('528155210',)
2024-12-04 16:34:41,352 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:34:41,353 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:34:41,354 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:34:41,355 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ('528155210',)
2024-12-04 16:34:41,759 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:34:41,759 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] ('71',)
2024-12-04 16:34:41,773 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:34:45,503 - aiogram.event - INFO - Update id=746486639 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 16:34:47,812 - aiogram.event - INFO - Update id=746486640 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 16:34:49,427 - aiogram.event - INFO - Update id=746486641 is handled. Duration 358 ms by bot id=6588698079
2024-12-04 16:34:50,791 - aiogram.event - INFO - Update id=746486642 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:34:54,405 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:34:54,664 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:34:54,671 - root - INFO - Бот остановлен вручную.
2024-12-04 16:36:44,802 - root - INFO - Инициализация бота...
2024-12-04 16:36:45,926 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:36:45,927 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:36:45,927 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:36:45,929 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:36:45,929 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:36:45,930 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:36:45,992 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:36:45,994 - root - INFO - Инициализация диспетчера...
2024-12-04 16:36:45,998 - root - INFO - Регистрация обработчиков...
2024-12-04 16:36:46,002 - root - INFO - Запуск polling...
2024-12-04 16:36:46,003 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:36:46,032 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:36:46,040 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:36:46,042 - sqlalchemy.engine.Engine - INFO - [generated in 0.00172s] ()
2024-12-04 16:36:46,060 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:36:46,061 - sqlalchemy.engine.Engine - INFO - [generated in 0.00159s] ('528155210',)
2024-12-04 16:36:46,068 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:36:46,072 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:36:46,076 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:36:46,078 - sqlalchemy.engine.Engine - INFO - [generated in 0.00183s] ('528155210',)
2024-12-04 16:36:46,563 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:36:46,707 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:36:46,708 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] ('71',)
2024-12-04 16:36:46,964 - aiogram.event - INFO - Update id=746486643 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 16:36:48,743 - aiogram.event - INFO - Update id=746486644 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 16:36:49,767 - aiogram.event - INFO - Update id=746486645 is not handled. Duration 16 ms by bot id=6588698079
2024-12-04 16:36:53,222 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:36:53,480 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:36:53,486 - root - INFO - Бот остановлен вручную.
2024-12-04 16:47:10,742 - root - INFO - Инициализация бота...
2024-12-04 16:47:11,919 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:47:11,919 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:47:11,919 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:47:11,921 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:47:11,921 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:47:11,923 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:47:11,981 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:47:11,981 - root - INFO - Инициализация диспетчера...
2024-12-04 16:47:11,983 - root - INFO - Регистрация обработчиков...
2024-12-04 16:47:11,985 - root - INFO - Запуск polling...
2024-12-04 16:47:11,985 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:47:11,998 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:47:12,001 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:47:12,002 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ()
2024-12-04 16:47:12,008 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:47:12,008 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('528155210',)
2024-12-04 16:47:12,011 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:47:12,012 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:47:12,014 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:47:12,014 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ('528155210',)
2024-12-04 16:47:12,417 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:47:12,518 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:47:12,519 - sqlalchemy.engine.Engine - INFO - [generated in 0.00141s] ('71',)
2024-12-04 16:47:12,775 - aiogram.event - INFO - Update id=746486646 is handled. Duration 141 ms by bot id=6588698079
2024-12-04 16:47:21,756 - aiogram.event - INFO - Update id=746486647 is handled. Duration 311 ms by bot id=6588698079
2024-12-04 16:47:22,986 - aiogram.event - INFO - Update id=746486648 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 16:47:24,723 - aiogram.event - INFO - Update id=746486649 is handled. Duration 280 ms by bot id=6588698079
2024-12-04 16:47:25,687 - aiogram.event - INFO - Update id=746486650 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:47:27,333 - aiogram.event - INFO - Update id=746486651 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:47:29,067 - aiogram.event - INFO - Update id=746486652 is handled. Duration 188 ms by bot id=6588698079
2024-12-04 16:47:30,294 - aiogram.event - INFO - Update id=746486653 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 16:47:31,131 - aiogram.event - INFO - Update id=746486654 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:47:34,067 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:47:34,325 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:47:34,330 - root - INFO - Бот остановлен вручную.
2024-12-04 16:48:00,269 - root - INFO - Инициализация бота...
2024-12-04 16:48:01,170 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:48:01,171 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:48:01,171 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:48:01,173 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:48:01,173 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:48:01,174 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:48:01,232 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:48:01,233 - root - INFO - Инициализация диспетчера...
2024-12-04 16:48:01,234 - root - INFO - Регистрация обработчиков...
2024-12-04 16:48:01,236 - root - INFO - Запуск polling...
2024-12-04 16:48:01,237 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:48:01,250 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:48:01,255 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:48:01,255 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ()
2024-12-04 16:48:01,262 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:48:01,262 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ('528155210',)
2024-12-04 16:48:01,264 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:48:01,265 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:48:01,267 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:48:01,267 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] ('528155210',)
2024-12-04 16:48:01,582 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:48:01,899 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:48:01,900 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] ('71',)
2024-12-04 16:48:06,446 - aiogram.event - INFO - Update id=746486655 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 16:48:07,995 - aiogram.event - INFO - Update id=746486656 is handled. Duration 280 ms by bot id=6588698079
2024-12-04 16:48:08,914 - aiogram.event - INFO - Update id=746486657 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 16:48:10,714 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:52:13,461 - root - INFO - Инициализация бота...
2024-12-04 16:52:14,304 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:52:14,304 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:52:14,305 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:52:14,306 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:52:14,306 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:52:14,307 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:52:14,355 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:52:14,355 - root - INFO - Инициализация диспетчера...
2024-12-04 16:52:14,357 - root - INFO - Регистрация обработчиков...
2024-12-04 16:52:14,360 - root - INFO - Запуск polling...
2024-12-04 16:52:14,360 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:52:14,371 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:52:14,375 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:52:14,376 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ()
2024-12-04 16:52:14,381 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:52:14,382 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] ('528155210',)
2024-12-04 16:52:14,384 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:52:14,385 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:52:14,387 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:52:14,387 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ('528155210',)
2024-12-04 16:52:14,715 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:52:14,852 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:52:14,853 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('71',)
2024-12-04 16:52:20,969 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:52:21,232 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:52:21,240 - root - INFO - Бот остановлен вручную.
2024-12-04 16:52:28,888 - root - INFO - Инициализация бота...
2024-12-04 16:52:30,055 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:52:30,056 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:52:30,058 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:52:30,060 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:52:30,062 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:52:30,063 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:52:30,151 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:52:30,151 - root - INFO - Инициализация диспетчера...
2024-12-04 16:52:30,153 - root - INFO - Регистрация обработчиков...
2024-12-04 16:52:30,157 - root - INFO - Запуск polling...
2024-12-04 16:52:30,158 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:52:30,176 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:52:30,183 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:52:30,183 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] ()
2024-12-04 16:52:30,193 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:52:30,194 - sqlalchemy.engine.Engine - INFO - [generated in 0.00145s] ('528155210',)
2024-12-04 16:52:30,198 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:52:30,200 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:52:30,203 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:52:30,203 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] ('528155210',)
2024-12-04 16:52:30,429 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:52:30,561 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:52:30,562 - sqlalchemy.engine.Engine - INFO - [generated in 0.00155s] ('71',)
2024-12-04 16:52:36,243 - aiogram.event - INFO - Update id=746486658 is handled. Duration 155 ms by bot id=6588698079
2024-12-04 16:52:37,810 - aiogram.event - INFO - Update id=746486659 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:52:37,811 - aiogram.event - ERROR - Cause exception while process update id=746486659 by bot id=6588698079
TypeError: buy_key_menu() missing 1 required positional argument: 'state'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 50, in main_menu_handler
    await buy_key_menu(callback)
          ^^^^^^^^^^^^^^^^^^^^^^
TypeError: buy_key_menu() missing 1 required positional argument: 'state'
2024-12-04 16:52:52,477 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:52:52,751 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:52:52,756 - root - INFO - Бот остановлен вручную.
2024-12-04 16:53:05,188 - root - INFO - Инициализация бота...
2024-12-04 16:53:06,468 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:53:06,469 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:53:06,469 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:53:06,472 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:53:06,473 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:53:06,474 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:53:06,566 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:53:06,566 - root - INFO - Инициализация диспетчера...
2024-12-04 16:53:06,571 - root - INFO - Регистрация обработчиков...
2024-12-04 16:53:06,577 - root - INFO - Запуск polling...
2024-12-04 16:53:06,578 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:53:06,603 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:53:06,612 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:53:06,613 - sqlalchemy.engine.Engine - INFO - [generated in 0.00099s] ()
2024-12-04 16:53:06,625 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:53:06,626 - sqlalchemy.engine.Engine - INFO - [generated in 0.00125s] ('528155210',)
2024-12-04 16:53:06,629 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:53:06,632 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:53:06,634 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:53:06,635 - sqlalchemy.engine.Engine - INFO - [generated in 0.00089s] ('528155210',)
2024-12-04 16:53:06,929 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:53:07,107 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:53:07,107 - sqlalchemy.engine.Engine - INFO - [generated in 0.00104s] ('71',)
2024-12-04 16:53:10,055 - aiogram.event - INFO - Update id=746486660 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 16:53:11,662 - aiogram.event - INFO - Update id=746486661 is handled. Duration 282 ms by bot id=6588698079
2024-12-04 16:53:12,832 - aiogram.event - INFO - Update id=746486662 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 16:53:15,757 - aiogram.event - INFO - Update id=746486663 is handled. Duration 342 ms by bot id=6588698079
2024-12-04 16:53:17,051 - aiogram.event - INFO - Update id=746486664 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 16:53:18,449 - aiogram.event - INFO - Update id=746486665 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 16:53:20,837 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:53:21,114 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:56:48,548 - root - INFO - Инициализация бота...
2024-12-04 16:56:49,265 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:56:49,266 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:56:49,266 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:56:49,269 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:56:49,269 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:56:49,270 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:56:49,327 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:56:49,327 - root - INFO - Инициализация диспетчера...
2024-12-04 16:56:49,328 - root - INFO - Регистрация обработчиков...
2024-12-04 16:56:49,331 - root - INFO - Запуск polling...
2024-12-04 16:56:49,331 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:56:49,344 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:56:49,347 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:56:49,348 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ()
2024-12-04 16:56:49,355 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:56:49,355 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('528155210',)
2024-12-04 16:56:49,358 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:56:49,359 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:56:49,361 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:56:49,361 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ('528155210',)
2024-12-04 16:56:49,677 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:56:49,846 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:56:49,846 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ('71',)
2024-12-04 16:56:50,044 - aiogram.event - INFO - Update id=746486666 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 16:56:52,207 - aiogram.event - INFO - Update id=746486667 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 16:56:53,889 - aiogram.event - INFO - Update id=746486668 is not handled. Duration 16 ms by bot id=6588698079
2024-12-04 16:56:55,741 - aiogram.event - INFO - Update id=746486669 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 16:56:57,448 - aiogram.event - INFO - Update id=746486670 is handled. Duration 422 ms by bot id=6588698079
2024-12-04 16:56:58,242 - aiogram.event - INFO - Update id=746486671 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:57:00,664 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:57:00,927 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:57:00,933 - root - INFO - Бот остановлен вручную.
2024-12-04 16:58:06,210 - root - INFO - Инициализация бота...
2024-12-04 16:58:07,335 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:58:07,336 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:58:07,337 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:58:07,341 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:58:07,341 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:58:07,344 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:58:07,454 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:58:07,455 - root - INFO - Инициализация диспетчера...
2024-12-04 16:58:07,458 - root - INFO - Регистрация обработчиков...
2024-12-04 16:58:07,464 - root - INFO - Запуск polling...
2024-12-04 16:58:07,465 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:58:07,488 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:58:07,496 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:58:07,497 - sqlalchemy.engine.Engine - INFO - [generated in 0.00107s] ()
2024-12-04 16:58:07,508 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:58:07,509 - sqlalchemy.engine.Engine - INFO - [generated in 0.00128s] ('528155210',)
2024-12-04 16:58:07,513 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:58:07,515 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:58:07,519 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:58:07,519 - sqlalchemy.engine.Engine - INFO - [generated in 0.00112s] ('528155210',)
2024-12-04 16:58:07,820 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:58:07,931 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:58:07,932 - sqlalchemy.engine.Engine - INFO - [generated in 0.00237s] ('71',)
2024-12-04 16:58:08,142 - aiogram.event - INFO - Update id=746486672 is handled. Duration 141 ms by bot id=6588698079
2024-12-04 16:58:09,982 - aiogram.event - INFO - Update id=746486673 is handled. Duration 359 ms by bot id=6588698079
2024-12-04 16:58:11,286 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:58:11,292 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:58:11,294 - sqlalchemy.engine.Engine - INFO - [generated in 0.00211s] ('528155210', 1, 0)
2024-12-04 16:58:11,576 - aiogram.event - INFO - Update id=746486674 is handled. Duration 532 ms by bot id=6588698079
2024-12-04 16:58:16,590 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:58:16,852 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:58:16,859 - root - INFO - Бот остановлен вручную.
2024-12-04 17:01:15,880 - root - INFO - Инициализация бота...
2024-12-04 17:01:16,660 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:01:16,661 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:01:16,661 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:01:16,663 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:01:16,663 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:01:16,664 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:01:16,725 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:01:16,726 - root - INFO - Инициализация диспетчера...
2024-12-04 17:01:16,727 - root - INFO - Регистрация обработчиков...
2024-12-04 17:01:16,730 - root - INFO - Запуск polling...
2024-12-04 17:01:16,731 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:01:16,743 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:01:16,748 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:01:16,749 - sqlalchemy.engine.Engine - INFO - [generated in 0.00082s] ()
2024-12-04 17:01:16,755 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:01:16,756 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ('528155210',)
2024-12-04 17:01:16,758 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:01:16,759 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:01:16,761 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:01:16,761 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ('528155210',)
2024-12-04 17:01:17,075 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:01:17,210 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:01:17,211 - sqlalchemy.engine.Engine - INFO - [generated in 0.00095s] ('71',)
2024-12-04 17:01:21,905 - aiogram.event - INFO - Update id=746486675 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 17:01:23,750 - aiogram.event - INFO - Update id=746486676 is handled. Duration 780 ms by bot id=6588698079
2024-12-04 17:01:24,550 - aiogram.event - INFO - Update id=746486677 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 17:01:27,843 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:01:44,300 - root - INFO - Инициализация бота...
2024-12-04 17:01:46,057 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:01:46,058 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:01:46,059 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:01:46,063 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:01:46,064 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:01:46,067 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:01:46,189 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:01:46,190 - root - INFO - Инициализация диспетчера...
2024-12-04 17:01:46,195 - root - INFO - Регистрация обработчиков...
2024-12-04 17:01:46,200 - root - INFO - Запуск polling...
2024-12-04 17:01:46,201 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:01:46,228 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:01:46,239 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:01:46,241 - sqlalchemy.engine.Engine - INFO - [generated in 0.00187s] ()
2024-12-04 17:01:46,255 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:01:46,257 - sqlalchemy.engine.Engine - INFO - [generated in 0.00188s] ('528155210',)
2024-12-04 17:01:46,262 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:01:46,266 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:01:46,270 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:01:46,272 - sqlalchemy.engine.Engine - INFO - [generated in 0.00194s] ('528155210',)
2024-12-04 17:01:46,626 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:01:47,165 - aiogram.event - INFO - Update id=746486678 is handled. Duration 343 ms by bot id=6588698079
2024-12-04 17:01:47,558 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:01:47,560 - sqlalchemy.engine.Engine - INFO - [generated in 0.00179s] ('71',)
2024-12-04 17:01:49,871 - aiogram.event - INFO - Update id=746486679 is handled. Duration 467 ms by bot id=6588698079
2024-12-04 17:01:51,376 - aiogram.event - INFO - Update id=746486680 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 17:01:53,569 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:01:53,818 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:01:53,822 - root - INFO - Бот остановлен вручную.
2024-12-04 17:09:39,937 - root - INFO - Инициализация бота...
2024-12-04 17:09:40,653 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:09:40,653 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:09:40,654 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:09:40,656 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:09:40,656 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:09:40,657 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:09:40,734 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:09:40,734 - root - INFO - Инициализация диспетчера...
2024-12-04 17:09:40,736 - root - INFO - Регистрация обработчиков...
2024-12-04 17:09:40,738 - root - INFO - Запуск polling...
2024-12-04 17:09:40,739 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:09:40,751 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:09:40,755 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:09:40,756 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ()
2024-12-04 17:09:40,767 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:09:40,767 - sqlalchemy.engine.Engine - INFO - [generated in 0.00089s] ('528155210',)
2024-12-04 17:09:40,770 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:09:40,771 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:09:40,773 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:09:40,773 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('528155210',)
2024-12-04 17:09:41,156 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:09:41,247 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:09:41,248 - sqlalchemy.engine.Engine - INFO - [generated in 0.00103s] ('71',)
2024-12-04 17:09:41,588 - aiogram.event - INFO - Update id=746486681 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 17:09:44,049 - aiogram.event - INFO - Update id=746486682 is handled. Duration 342 ms by bot id=6588698079
2024-12-04 17:09:45,227 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:09:45,234 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:09:45,234 - sqlalchemy.engine.Engine - INFO - [generated in 0.00133s] ('528155210', 1, 0)
2024-12-04 17:09:45,356 - aiogram.event - INFO - Update id=746486683 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 17:09:48,358 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:09:48,611 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:09:48,614 - root - INFO - Бот остановлен вручную.
2024-12-04 17:10:17,190 - root - INFO - Инициализация бота...
2024-12-04 17:10:18,258 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:10:18,260 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:10:18,260 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:10:18,264 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:10:18,265 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:10:18,267 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:10:18,387 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:10:18,388 - root - INFO - Инициализация диспетчера...
2024-12-04 17:10:18,394 - root - INFO - Регистрация обработчиков...
2024-12-04 17:10:18,399 - root - INFO - Запуск polling...
2024-12-04 17:10:18,400 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:10:18,430 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:10:18,438 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:10:18,439 - sqlalchemy.engine.Engine - INFO - [generated in 0.00131s] ()
2024-12-04 17:10:18,456 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:10:18,458 - sqlalchemy.engine.Engine - INFO - [generated in 0.00160s] ('528155210',)
2024-12-04 17:10:18,462 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:10:18,467 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:10:18,471 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:10:18,472 - sqlalchemy.engine.Engine - INFO - [generated in 0.00146s] ('528155210',)
2024-12-04 17:10:18,768 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:10:18,868 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:10:18,868 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ('71',)
2024-12-04 17:10:19,089 - aiogram.event - INFO - Update id=746486684 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 17:10:21,031 - aiogram.event - INFO - Update id=746486685 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 17:10:22,351 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:10:22,357 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:10:22,357 - sqlalchemy.engine.Engine - INFO - [generated in 0.00095s] ('528155210', 1, 0)
2024-12-04 17:10:22,474 - aiogram.event - INFO - Update id=746486686 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 17:10:30,835 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:10:31,092 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:10:31,100 - root - INFO - Бот остановлен вручную.
2024-12-04 17:10:42,230 - root - INFO - Инициализация бота...
2024-12-04 17:10:43,496 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:10:43,497 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:10:43,497 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:10:43,501 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:10:43,502 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:10:43,505 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:10:43,609 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:10:43,609 - root - INFO - Инициализация диспетчера...
2024-12-04 17:10:43,613 - root - INFO - Регистрация обработчиков...
2024-12-04 17:10:43,617 - root - INFO - Запуск polling...
2024-12-04 17:10:43,619 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:10:43,643 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:10:43,651 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:10:43,652 - sqlalchemy.engine.Engine - INFO - [generated in 0.00114s] ()
2024-12-04 17:10:43,664 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:10:43,666 - sqlalchemy.engine.Engine - INFO - [generated in 0.00102s] ('528155210',)
2024-12-04 17:10:43,671 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:10:43,675 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:10:43,681 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:10:43,683 - sqlalchemy.engine.Engine - INFO - [generated in 0.00270s] ('528155210',)
2024-12-04 17:10:43,962 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:10:44,125 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:10:44,126 - sqlalchemy.engine.Engine - INFO - [generated in 0.00115s] ('71',)
2024-12-04 17:10:49,094 - aiogram.event - INFO - Update id=746486687 is handled. Duration 375 ms by bot id=6588698079
2024-12-04 17:10:51,535 - aiogram.event - INFO - Update id=746486688 is handled. Duration 407 ms by bot id=6588698079
2024-12-04 17:10:52,959 - aiogram.event - INFO - Update id=746486689 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 17:10:54,479 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:10:54,483 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:10:54,483 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('528155210', 1, 0)
2024-12-04 17:10:54,485 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:10:54,487 - sqlalchemy.engine.Engine - INFO - [cached since 10.82s ago] ('528155210',)
2024-12-04 17:10:59,789 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:10:59,911 - aiogram.event - INFO - Update id=746486690 is handled. Duration 5437 ms by bot id=6588698079
2024-12-04 17:11:37,103 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 17:11:37,104 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 17:11:38,568 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:11:38,573 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:11:38,573 - sqlalchemy.engine.Engine - INFO - [generated in 0.00114s] ('69', 1, 0)
2024-12-04 17:11:38,579 - aiogram.event - INFO - Update id=746486691 is not handled. Duration 1484 ms by bot id=6588698079
2024-12-04 17:11:38,579 - aiogram.event - ERROR - Cause exception while process update id=746486691 by bot id=6588698079
ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard.5.0
  Input should be a valid dictionary or instance of InlineKeyboardButton [type=model_type, input_value=[InlineKeyboardButton(tex...ck_game=None, pay=None)], input_type=list]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 51, in choosing_key_handler
    "Выберите действие для ключа:", reply_markup=get_key_action_keyboard(key_info)
                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 201, in get_key_action_keyboard
    return InlineKeyboardMarkup(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\pydantic\main.py", line 212, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard.5.0
  Input should be a valid dictionary or instance of InlineKeyboardButton [type=model_type, input_value=[InlineKeyboardButton(tex...ck_game=None, pay=None)], input_type=list]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
2024-12-04 17:11:43,445 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 17:11:43,447 - aiogram.event - INFO - Update id=746486692 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 17:16:49,450 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:16:49,719 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:16:49,726 - root - INFO - Бот остановлен вручную.
2024-12-04 17:17:00,794 - root - INFO - Инициализация бота...
2024-12-04 17:17:02,363 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:17:02,364 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:17:02,364 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:17:02,366 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:17:02,366 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:17:02,368 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:17:02,414 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:17:02,414 - root - INFO - Инициализация диспетчера...
2024-12-04 17:17:02,415 - root - INFO - Регистрация обработчиков...
2024-12-04 17:17:02,418 - root - INFO - Запуск polling...
2024-12-04 17:17:02,419 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:17:02,432 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:17:02,436 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:17:02,436 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ()
2024-12-04 17:17:02,443 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:17:02,443 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('528155210',)
2024-12-04 17:17:02,446 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:17:02,447 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:17:02,449 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:17:02,449 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('528155210',)
2024-12-04 17:17:02,833 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:17:03,073 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:17:03,074 - sqlalchemy.engine.Engine - INFO - [generated in 0.00144s] ('71',)
2024-12-04 17:17:17,226 - aiogram.event - INFO - Update id=746486693 is handled. Duration 155 ms by bot id=6588698079
2024-12-04 17:17:20,993 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:17:21,001 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:17:21,002 - sqlalchemy.engine.Engine - INFO - [generated in 0.00179s] ('528155210', 1, 0)
2024-12-04 17:17:21,007 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:17:21,008 - sqlalchemy.engine.Engine - INFO - [cached since 18.57s ago] ('528155210',)
2024-12-04 17:17:26,355 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:17:26,441 - aiogram.event - INFO - Update id=746486694 is handled. Duration 5453 ms by bot id=6588698079
2024-12-04 17:17:30,387 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:17:30,392 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:17:30,393 - sqlalchemy.engine.Engine - INFO - [generated in 0.00140s] ('70', 1, 0)
2024-12-04 17:17:30,400 - aiogram.event - INFO - Update id=746486695 is not handled. Duration 1344 ms by bot id=6588698079
2024-12-04 17:17:30,400 - aiogram.event - ERROR - Cause exception while process update id=746486695 by bot id=6588698079
ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard.5.0
  Input should be a valid dictionary or instance of InlineKeyboardButton [type=model_type, input_value=[InlineKeyboardButton(tex...ck_game=None, pay=None)], input_type=list]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 51, in choosing_key_handler
    "Выберите действие для ключа:", reply_markup=get_key_action_keyboard(key_info)
                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 201, in get_key_action_keyboard
    return InlineKeyboardMarkup(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\pydantic\main.py", line 212, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard.5.0
  Input should be a valid dictionary or instance of InlineKeyboardButton [type=model_type, input_value=[InlineKeyboardButton(tex...ck_game=None, pay=None)], input_type=list]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
2024-12-04 17:17:49,311 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 17:17:49,312 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 17:18:00,511 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 17:18:55,169 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:18:55,437 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:18:55,445 - root - INFO - Бот остановлен вручную.
2024-12-04 17:19:35,591 - root - INFO - Инициализация бота...
2024-12-04 17:19:35,923 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:19:35,923 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:19:35,923 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:19:35,924 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:19:35,924 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:19:35,924 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:19:35,944 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:19:35,945 - root - INFO - Инициализация диспетчера...
2024-12-04 17:19:35,945 - root - INFO - Регистрация обработчиков...
2024-12-04 17:19:35,946 - root - INFO - Запуск polling...
2024-12-04 17:19:35,946 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:19:35,952 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:19:35,953 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:19:35,953 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
2024-12-04 17:19:35,956 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:19:35,956 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ('528155210',)
2024-12-04 17:19:35,957 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:19:35,957 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:19:35,958 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:19:35,958 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('528155210',)
2024-12-04 17:19:36,291 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:19:36,292 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('71',)
2024-12-04 17:19:36,321 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:19:39,682 - aiogram.event - INFO - Update id=746486696 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 17:19:41,545 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:19:41,547 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:19:41,547 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('528155210', 1, 0)
2024-12-04 17:19:41,548 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:19:41,548 - sqlalchemy.engine.Engine - INFO - [cached since 5.592s ago] ('528155210',)
2024-12-04 17:19:47,092 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:19:47,154 - aiogram.event - INFO - Update id=746486697 is handled. Duration 5609 ms by bot id=6588698079
2024-12-04 17:19:51,249 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:19:51,250 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:19:51,250 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('68', 1, 0)
2024-12-04 17:19:51,252 - aiogram.event - INFO - Update id=746486698 is not handled. Duration 1030 ms by bot id=6588698079
2024-12-04 17:19:51,252 - aiogram.event - ERROR - Cause exception while process update id=746486698 by bot id=6588698079
ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard.5.0
  Input should be a valid dictionary or instance of InlineKeyboardButton [type=model_type, input_value=[InlineKeyboardButton(tex...ck_game=None, pay=None)], input_type=list]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 51, in choosing_key_handler
    "Выберите действие для ключа:", reply_markup=get_key_action_keyboard(key_info)
                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 201, in get_key_action_keyboard
    return InlineKeyboardMarkup(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\pydantic\main.py", line 212, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard.5.0
  Input should be a valid dictionary or instance of InlineKeyboardButton [type=model_type, input_value=[InlineKeyboardButton(tex...ck_game=None, pay=None)], input_type=list]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
2024-12-04 17:25:12,879 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 17:25:12,879 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 17:25:25,193 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 17:29:32,098 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:29:32,354 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:29:32,356 - root - INFO - Бот остановлен вручную.
2024-12-04 17:32:10,881 - root - INFO - Инициализация бота...
2024-12-04 17:32:11,299 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:32:11,299 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:32:11,299 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:32:11,300 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:32:11,300 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:32:11,301 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:32:11,328 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:32:11,328 - root - INFO - Инициализация диспетчера...
2024-12-04 17:32:11,329 - root - INFO - Регистрация обработчиков...
2024-12-04 17:32:11,330 - root - INFO - Запуск polling...
2024-12-04 17:32:11,331 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:32:11,337 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:32:11,339 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:32:11,339 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ()
2024-12-04 17:32:11,343 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:32:11,343 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('528155210',)
2024-12-04 17:32:11,344 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:32:11,345 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:32:11,345 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:32:11,346 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('528155210',)
2024-12-04 17:32:11,636 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:32:11,636 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ('71',)
2024-12-04 17:32:11,775 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:32:12,034 - aiogram.event - INFO - Update id=746486699 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 17:32:13,183 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:32:13,185 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:32:13,185 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ('528155210', 1, 0)
2024-12-04 17:32:13,186 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:32:13,186 - sqlalchemy.engine.Engine - INFO - [cached since 1.843s ago] ('528155210',)
2024-12-04 17:32:18,532 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:32:18,614 - aiogram.event - INFO - Update id=746486700 is handled. Duration 5437 ms by bot id=6588698079
2024-12-04 17:32:20,633 - aiogram.event - INFO - Update id=746486701 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 17:32:21,579 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:32:21,579 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:32:21,579 - sqlalchemy.engine.Engine - INFO - [cached since 8.395s ago] ('528155210', 1, 0)
2024-12-04 17:32:21,580 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:32:21,580 - sqlalchemy.engine.Engine - INFO - [cached since 10.24s ago] ('528155210',)
2024-12-04 17:32:26,701 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:32:26,845 - aiogram.event - INFO - Update id=746486702 is handled. Duration 5265 ms by bot id=6588698079
2024-12-04 17:32:29,440 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:32:29,442 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:32:29,442 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ('70', 1, 0)
2024-12-04 17:32:29,563 - aiogram.event - INFO - Update id=746486703 is handled. Duration 1656 ms by bot id=6588698079
2024-12-04 17:32:34,303 - aiogram.event - INFO - Update id=746486704 is handled. Duration 217 ms by bot id=6588698079
2024-12-04 17:32:57,737 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:32:57,737 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:32:57,738 - sqlalchemy.engine.Engine - INFO - [cached since 44.55s ago] ('528155210', 1, 0)
2024-12-04 17:32:57,738 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:32:57,738 - sqlalchemy.engine.Engine - INFO - [cached since 46.4s ago] ('528155210',)
2024-12-04 17:33:03,170 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:33:03,254 - aiogram.event - INFO - Update id=746486705 is handled. Duration 5515 ms by bot id=6588698079
2024-12-04 17:33:05,775 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:33:05,776 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:33:05,776 - sqlalchemy.engine.Engine - INFO - [cached since 36.33s ago] ('70', 1, 0)
2024-12-04 17:33:05,938 - aiogram.event - INFO - Update id=746486706 is handled. Duration 1375 ms by bot id=6588698079
2024-12-04 17:33:13,513 - aiogram.event - INFO - Update id=746486707 is handled. Duration 109 ms by bot id=6588698079
2024-12-04 17:33:17,711 - aiogram.event - INFO - Update id=746486708 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 17:33:20,139 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:33:20,139 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:33:20,139 - sqlalchemy.engine.Engine - INFO - [cached since 50.7s ago] ('70', 1, 0)
2024-12-04 17:33:20,140 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:33:20,141 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:33:20,141 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:33:20,141 - sqlalchemy.engine.Engine - INFO - [cached since 68.51s ago] ('70',)
2024-12-04 17:33:20,497 - aiogram.event - INFO - Update id=746486709 is not handled. Duration 358 ms by bot id=6588698079
2024-12-04 17:33:20,497 - aiogram.event - ERROR - Cause exception while process update id=746486709 by bot id=6588698079
AttributeError: 'FSMContext' object has no attribute 'finish'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 224, in confirm_rename_handler
    await state.finish()
          ^^^^^^^^^^^^
AttributeError: 'FSMContext' object has no attribute 'finish'
2024-12-04 17:33:24,212 - aiogram.event - INFO - Update id=746486710 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 17:33:40,321 - aiogram.event - INFO - Update id=746486711 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 17:33:43,687 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:33:43,953 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:33:43,955 - root - INFO - Бот остановлен вручную.
2024-12-04 17:35:12,797 - root - INFO - Инициализация бота...
2024-12-04 17:35:13,331 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:35:13,331 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:35:13,332 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:35:13,333 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:35:13,333 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:35:13,334 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:35:13,372 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:35:13,372 - root - INFO - Инициализация диспетчера...
2024-12-04 17:35:13,373 - root - INFO - Регистрация обработчиков...
2024-12-04 17:35:13,375 - root - INFO - Запуск polling...
2024-12-04 17:35:13,375 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:35:13,383 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:35:13,386 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:35:13,387 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] ()
2024-12-04 17:35:13,393 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:35:13,394 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ('528155210',)
2024-12-04 17:35:13,395 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:35:13,396 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:35:13,397 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:35:13,397 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ('528155210',)
2024-12-04 17:35:13,722 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:35:13,723 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] ('71',)
2024-12-04 17:35:13,753 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:35:16,217 - aiogram.event - INFO - Update id=746486712 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 17:35:17,698 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:35:17,699 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:35:17,700 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('528155210', 1, 0)
2024-12-04 17:35:17,702 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:35:17,702 - sqlalchemy.engine.Engine - INFO - [cached since 4.309s ago] ('528155210',)
2024-12-04 17:35:23,803 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:35:24,003 - aiogram.event - INFO - Update id=746486713 is handled. Duration 6311 ms by bot id=6588698079
2024-12-04 17:35:31,249 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:35:31,250 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:35:31,251 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('71', 1, 0)
2024-12-04 17:35:31,392 - aiogram.event - INFO - Update id=746486714 is handled. Duration 1641 ms by bot id=6588698079
2024-12-04 17:35:34,804 - aiogram.event - INFO - Update id=746486715 is handled. Duration 92 ms by bot id=6588698079
2024-12-04 17:35:39,873 - aiogram.event - INFO - Update id=746486716 is handled. Duration 170 ms by bot id=6588698079
2024-12-04 17:35:42,508 - aiogram.event - INFO - Update id=746486717 is handled. Duration 125 ms by bot id=6588698079
2024-12-04 17:35:44,498 - aiogram.event - INFO - Update id=746486718 is handled. Duration 186 ms by bot id=6588698079
2024-12-04 17:35:45,824 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:35:45,826 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:35:45,826 - sqlalchemy.engine.Engine - INFO - [cached since 28.13s ago] ('528155210', 1, 0)
2024-12-04 17:35:45,827 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:35:45,827 - sqlalchemy.engine.Engine - INFO - [cached since 32.43s ago] ('528155210',)
2024-12-04 17:35:51,971 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:35:52,158 - aiogram.event - INFO - Update id=746486719 is handled. Duration 6327 ms by bot id=6588698079
2024-12-04 17:35:58,740 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:35:58,741 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:35:58,741 - sqlalchemy.engine.Engine - INFO - [cached since 27.49s ago] ('71', 1, 0)
2024-12-04 17:35:58,877 - aiogram.event - INFO - Update id=746486720 is handled. Duration 1327 ms by bot id=6588698079
2024-12-04 17:36:02,503 - aiogram.event - INFO - Update id=746486721 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 17:36:06,156 - aiogram.event - INFO - Update id=746486722 is handled. Duration 93 ms by bot id=6588698079
2024-12-04 17:36:07,839 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:36:07,839 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:36:07,840 - sqlalchemy.engine.Engine - INFO - [cached since 36.59s ago] ('71', 1, 0)
2024-12-04 17:36:07,840 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:36:07,841 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:36:07,841 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:36:07,841 - sqlalchemy.engine.Engine - INFO - [cached since 54.12s ago] ('71',)
2024-12-04 17:36:08,379 - aiogram.event - INFO - Update id=746486723 is handled. Duration 545 ms by bot id=6588698079
2024-12-04 17:36:09,692 - aiogram.event - INFO - Update id=746486724 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 17:36:11,020 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:36:11,020 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:36:11,021 - sqlalchemy.engine.Engine - INFO - [cached since 53.32s ago] ('528155210', 1, 0)
2024-12-04 17:36:11,021 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:36:11,022 - sqlalchemy.engine.Engine - INFO - [cached since 57.63s ago] ('528155210',)
2024-12-04 17:36:17,147 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:36:17,235 - aiogram.event - INFO - Update id=746486725 is handled. Duration 6218 ms by bot id=6588698079
2024-12-04 17:36:19,761 - aiogram.event - INFO - Update id=746486726 is handled. Duration 344 ms by bot id=6588698079
2024-12-04 17:36:21,282 - aiogram.event - INFO - Update id=746486727 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 17:36:22,824 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:36:22,824 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:36:22,824 - sqlalchemy.engine.Engine - INFO - [cached since 65.12s ago] ('528155210', 1, 0)
2024-12-04 17:36:22,917 - aiogram.event - INFO - Update id=746486728 is handled. Duration 108 ms by bot id=6588698079
2024-12-04 17:36:24,335 - aiogram.event - INFO - Update id=746486729 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 17:36:25,947 - aiogram.event - INFO - Update id=746486730 is handled. Duration 391 ms by bot id=6588698079
2024-12-04 17:36:27,045 - aiogram.event - INFO - Update id=746486731 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 17:36:56,286 - aiogram.event - INFO - Update id=746486732 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 17:37:05,038 - root - INFO - {
    "message_id": 977,
    "date": 1733323025,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 60000,
        "invoice_payload": "5c575b10-83dd-4ce0-82f1-7d40c06a1f97",
        "telegram_payment_charge_id": "6588698079_528155210_328638",
        "provider_payment_charge_id": "6588698079_528155210_328638",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-04 17:37:06,368 - root - INFO - Key created: OutlineKey(key_id='72', name='VPN Key59', password='zczFtxiBdGCMv7ESADPDDO', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTp6Y3pGdHhpQmRHQ012N0VTQURQRERP@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 17:37:06,368 - root - INFO - Key created: OutlineKey(key_id='72', name='VPN Key59', password='zczFtxiBdGCMv7ESADPDDO', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTp6Y3pGdHhpQmRHQ012N0VTQURQRERP@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 17:37:06,514 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:37:06,515 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:37:06,515 - sqlalchemy.engine.Engine - INFO - [cached since 108.8s ago] ('528155210', 1, 0)
2024-12-04 17:37:06,517 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 17:37:06,517 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('72', '528155210', '2025-06-02 17:37:06.516869', '2024-12-04 17:37:06.516869', 0)
2024-12-04 17:37:06,518 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:37:06,525 - aiogram.event - INFO - Update id=746486733 is handled. Duration 1484 ms by bot id=6588698079
2024-12-04 17:37:31,451 - aiogram.event - INFO - Update id=746486734 is handled. Duration 375 ms by bot id=6588698079
2024-12-04 17:37:32,715 - aiogram.event - INFO - Update id=746486735 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 17:37:33,828 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:37:33,829 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:37:33,829 - sqlalchemy.engine.Engine - INFO - [cached since 136.1s ago] ('528155210', 1, 0)
2024-12-04 17:37:33,830 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:37:33,830 - sqlalchemy.engine.Engine - INFO - [cached since 140.4s ago] ('528155210',)
2024-12-04 17:37:39,724 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:37:39,849 - aiogram.event - INFO - Update id=746486736 is handled. Duration 6015 ms by bot id=6588698079
2024-12-04 17:37:42,285 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 17:37:42,285 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 17:37:43,377 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:37:43,378 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:37:43,378 - sqlalchemy.engine.Engine - INFO - [cached since 132.1s ago] ('72', 1, 0)
2024-12-04 17:37:43,542 - aiogram.event - INFO - Update id=746486737 is handled. Duration 1265 ms by bot id=6588698079
2024-12-04 17:37:45,076 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 17:37:45,082 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:37:45,082 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:37:45,083 - sqlalchemy.engine.Engine - INFO - [cached since 133.8s ago] ('72', 1, 0)
2024-12-04 17:37:46,924 - aiogram.event - INFO - Update id=746486738 is handled. Duration 1842 ms by bot id=6588698079
2024-12-04 17:37:48,380 - aiogram.event - INFO - Update id=746486739 is handled. Duration 233 ms by bot id=6588698079
2024-12-04 17:37:54,379 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:37:54,628 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:37:54,630 - root - INFO - Бот остановлен вручную.
2024-12-04 17:38:02,213 - root - INFO - Инициализация бота...
2024-12-04 17:38:02,772 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:38:02,773 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:38:02,773 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:38:02,775 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:38:02,775 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:38:02,775 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:38:02,813 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:38:02,813 - root - INFO - Инициализация диспетчера...
2024-12-04 17:38:02,814 - root - INFO - Регистрация обработчиков...
2024-12-04 17:38:02,816 - root - INFO - Запуск polling...
2024-12-04 17:38:02,816 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:38:02,826 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:38:02,829 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:38:02,829 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ()
2024-12-04 17:38:02,834 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:38:02,834 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ('528155210',)
2024-12-04 17:38:02,835 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:38:02,836 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:38:02,838 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:38:02,838 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ('528155210',)
2024-12-04 17:38:03,140 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:38:03,194 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:38:03,195 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ('71',)
2024-12-04 17:38:03,196 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:38:03,196 - sqlalchemy.engine.Engine - INFO - [cached since 0.002316s ago] ('72',)
2024-12-04 17:38:28,417 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:38:28,671 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:38:28,676 - root - INFO - Бот остановлен вручную.
2024-12-04 17:38:32,563 - root - INFO - Инициализация бота...
2024-12-04 17:38:32,941 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:38:32,942 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:38:32,942 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:38:32,943 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:38:32,943 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:38:32,943 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:38:32,966 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:38:32,966 - root - INFO - Инициализация диспетчера...
2024-12-04 17:38:32,967 - root - INFO - Регистрация обработчиков...
2024-12-04 17:38:32,968 - root - INFO - Запуск polling...
2024-12-04 17:38:32,969 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:38:32,975 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:38:32,977 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:38:32,977 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ()
2024-12-04 17:38:32,981 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:38:32,981 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] ('528155210',)
2024-12-04 17:38:32,981 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:38:32,982 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:38:32,983 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:38:32,983 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('528155210',)
2024-12-04 17:38:33,214 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:38:36,504 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:38:36,504 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ('71',)
2024-12-04 17:38:36,505 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:38:36,505 - sqlalchemy.engine.Engine - INFO - [cached since 0.001251s ago] ('72',)
2024-12-04 17:40:47,647 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:40:47,910 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:40:47,913 - root - INFO - Бот остановлен вручную.
2024-12-04 17:40:55,735 - root - INFO - Инициализация бота...
2024-12-04 17:40:56,235 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:40:56,235 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:40:56,236 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:40:56,237 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:40:56,237 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:40:56,238 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:40:56,266 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:40:56,267 - root - INFO - Инициализация диспетчера...
2024-12-04 17:40:56,268 - root - INFO - Регистрация обработчиков...
2024-12-04 17:40:56,269 - root - INFO - Запуск polling...
2024-12-04 17:40:56,269 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:40:56,277 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:40:56,280 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:40:56,280 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ()
2024-12-04 17:40:56,284 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:40:56,285 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ('528155210',)
2024-12-04 17:40:56,286 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:40:56,287 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:40:56,287 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:40:56,288 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('528155210',)
2024-12-04 17:40:56,628 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:40:56,658 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:40:56,658 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] ('71',)
2024-12-04 17:40:56,659 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:40:56,660 - sqlalchemy.engine.Engine - INFO - [cached since 0.001907s ago] ('72',)
2024-12-04 17:41:04,910 - aiogram.event - INFO - Update id=746486740 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 17:41:06,347 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:41:06,348 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:41:06,348 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('528155210', 1, 0)
2024-12-04 17:41:06,349 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:41:06,349 - sqlalchemy.engine.Engine - INFO - [cached since 10.06s ago] ('528155210',)
2024-12-04 17:41:13,186 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:41:13,273 - aiogram.event - INFO - Update id=746486741 is handled. Duration 6922 ms by bot id=6588698079
2024-12-04 17:41:47,918 - aiogram.event - INFO - Update id=746486742 is handled. Duration 437 ms by bot id=6588698079
2024-12-04 17:41:49,566 - aiogram.event - INFO - Update id=746486743 is handled. Duration 438 ms by bot id=6588698079
2024-12-04 17:41:51,019 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:41:51,019 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:41:51,019 - sqlalchemy.engine.Engine - INFO - [cached since 44.67s ago] ('528155210', 1, 0)
2024-12-04 17:41:51,199 - aiogram.event - INFO - Update id=746486744 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 17:41:52,457 - aiogram.event - INFO - Update id=746486745 is handled. Duration 204 ms by bot id=6588698079
2024-12-04 17:41:57,577 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:41:57,849 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:41:57,851 - root - INFO - Бот остановлен вручную.
2024-12-04 17:42:03,066 - root - INFO - Инициализация бота...
2024-12-04 17:42:03,520 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:42:03,520 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:42:03,520 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:42:03,521 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:42:03,522 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:42:03,522 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:42:03,547 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:42:03,547 - root - INFO - Инициализация диспетчера...
2024-12-04 17:42:03,548 - root - INFO - Регистрация обработчиков...
2024-12-04 17:42:03,550 - root - INFO - Запуск polling...
2024-12-04 17:42:03,550 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:42:03,557 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:42:03,559 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:42:03,559 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ()
2024-12-04 17:42:03,563 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:42:03,563 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] ('528155210',)
2024-12-04 17:42:03,564 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:42:03,565 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:42:03,566 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:42:03,566 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('528155210',)
2024-12-04 17:42:03,878 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:42:03,878 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ('71',)
2024-12-04 17:42:03,879 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:42:03,879 - sqlalchemy.engine.Engine - INFO - [cached since 0.001625s ago] ('72',)
2024-12-04 17:42:03,884 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:42:26,168 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:42:26,420 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:42:26,421 - root - INFO - Бот остановлен вручную.
2024-12-04 17:42:36,622 - root - INFO - Инициализация бота...
2024-12-04 17:42:36,929 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:42:36,929 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:42:36,929 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:42:36,930 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 17:42:36,930 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:42:36,930 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:42:36,931 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:42:36,931 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 17:42:36,931 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:42:36,931 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 17:42:36,932 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] ()
2024-12-04 17:42:36,941 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 17:42:36,941 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] ()
2024-12-04 17:42:36,947 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:42:36,964 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:42:36,964 - root - INFO - Инициализация диспетчера...
2024-12-04 17:42:36,965 - root - INFO - Регистрация обработчиков...
2024-12-04 17:42:36,966 - root - INFO - Запуск polling...
2024-12-04 17:42:36,966 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:42:36,971 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:42:36,973 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:42:36,973 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
2024-12-04 17:42:37,200 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:43:37,703 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 17:43:37,703 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 17:43:47,887 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 17:43:48,140 - aiogram.event - INFO - Update id=746486746 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 17:43:50,168 - aiogram.event - INFO - Update id=746486747 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 17:43:51,234 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:43:51,236 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:43:51,236 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('528155210', 1, 0)
2024-12-04 17:43:51,239 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 17:43:51,240 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ('528155210', 'active', 0)
2024-12-04 17:43:51,243 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:43:51,250 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:43:51,251 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:43:51,252 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ('528155210',)
2024-12-04 17:43:51,254 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 17:43:51,254 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] (1, '528155210')
2024-12-04 17:43:51,255 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:43:53,221 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:43:53,223 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 17:43:53,224 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('73', '528155210', '2024-12-06 17:43:53.220162', '2024-12-04 17:43:53.220162', 0)
2024-12-04 17:43:53,225 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:43:53,231 - root - INFO - Key created: OutlineKey(key_id='73', name='VPN Key60', password='5S3oKSSGKbICO300DRDtFT', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTo1UzNvS1NTR0tiSUNPMzAwRFJEdEZU@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 6588698079
2024-12-04 17:43:53,504 - aiogram.event - INFO - Update id=746486748 is handled. Duration 2265 ms by bot id=6588698079
2024-12-04 17:43:56,211 - aiogram.event - INFO - Update id=746486749 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 17:43:56,211 - aiogram.event - ERROR - Cause exception while process update id=746486749 by bot id=6588698079
KeyError: 'Installation'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 48, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Installation'
2024-12-04 17:43:59,913 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:44:00,179 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:44:00,181 - root - INFO - Бот остановлен вручную.
2024-12-04 17:49:30,678 - root - INFO - Инициализация бота...
2024-12-04 17:49:31,285 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:49:31,286 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:49:31,286 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:49:31,293 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:49:31,294 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:49:31,296 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:49:31,374 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:49:31,374 - root - INFO - Инициализация диспетчера...
2024-12-04 17:49:31,376 - root - INFO - Регистрация обработчиков...
2024-12-04 17:49:31,378 - root - INFO - Запуск polling...
2024-12-04 17:49:31,379 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:49:31,389 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:49:31,392 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:49:31,393 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] ()
2024-12-04 17:49:31,399 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:49:31,399 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('528155210',)
2024-12-04 17:49:31,401 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:49:31,402 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:49:31,403 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:49:31,403 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ('528155210',)
2024-12-04 17:49:31,843 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:49:36,918 - aiogram.event - INFO - Update id=746486750 is handled. Duration 217 ms by bot id=6588698079
2024-12-04 17:49:38,892 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:49:38,893 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:49:38,894 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ('528155210', 1, 0)
2024-12-04 17:49:38,895 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:49:38,895 - sqlalchemy.engine.Engine - INFO - [cached since 7.496s ago] ('528155210',)
2024-12-04 17:49:40,170 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:49:40,281 - aiogram.event - INFO - Update id=746486751 is handled. Duration 1390 ms by bot id=6588698079
2024-12-04 17:49:44,138 - aiogram.event - INFO - Update id=746486752 is handled. Duration 359 ms by bot id=6588698079
2024-12-04 17:49:53,481 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:49:53,742 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:49:53,743 - root - INFO - Бот остановлен вручную.
2024-12-04 17:50:16,275 - root - INFO - Инициализация бота...
2024-12-04 17:50:16,672 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:50:16,672 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:50:16,672 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:50:16,673 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 17:50:16,673 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:50:16,674 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:50:16,674 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:50:16,674 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 17:50:16,674 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:50:16,675 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 17:50:16,675 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] ()
2024-12-04 17:50:16,688 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 17:50:16,688 - sqlalchemy.engine.Engine - INFO - [no key 0.00032s] ()
2024-12-04 17:50:16,695 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:50:16,723 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:50:16,723 - root - INFO - Инициализация диспетчера...
2024-12-04 17:50:16,724 - root - INFO - Регистрация обработчиков...
2024-12-04 17:50:16,725 - root - INFO - Запуск polling...
2024-12-04 17:50:16,725 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:50:16,732 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:50:16,734 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:50:16,734 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ()
2024-12-04 17:50:17,007 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:50:17,490 - aiogram.event - INFO - Update id=746486753 is handled. Duration 359 ms by bot id=6588698079
2024-12-04 17:50:19,860 - aiogram.event - INFO - Update id=746486754 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 17:50:21,534 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:50:21,536 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:50:21,536 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('528155210', 1, 0)
2024-12-04 17:50:21,617 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:50:21,686 - aiogram.event - INFO - Update id=746486755 is handled. Duration 156 ms by bot id=6588698079
2024-12-04 17:50:23,096 - aiogram.event - INFO - Update id=746486756 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 17:50:28,973 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:50:29,234 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:50:29,235 - root - INFO - Бот остановлен вручную.
2024-12-04 17:52:46,033 - root - INFO - Инициализация бота...
2024-12-04 17:52:46,374 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:52:46,374 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:52:46,374 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:52:46,375 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:52:46,375 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:52:46,375 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:52:46,401 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:52:46,401 - root - INFO - Инициализация диспетчера...
2024-12-04 17:52:46,402 - root - INFO - Регистрация обработчиков...
2024-12-04 17:52:46,404 - root - INFO - Запуск polling...
2024-12-04 17:52:46,404 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:52:46,408 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:52:46,410 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:52:46,410 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
2024-12-04 17:52:46,660 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:52:51,942 - aiogram.event - INFO - Update id=746486757 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 17:52:53,241 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:52:53,243 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:52:53,244 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ('528155210', 1, 0)
2024-12-04 17:52:53,383 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:52:53,477 - aiogram.event - INFO - Update id=746486758 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 17:52:54,366 - aiogram.event - INFO - Update id=746486759 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 17:53:44,789 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 17:53:44,789 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 17:53:46,856 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:53:47,111 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:53:47,112 - root - INFO - Бот остановлен вручную.
2024-12-04 18:02:46,953 - root - INFO - Инициализация бота...
2024-12-04 18:05:03,047 - root - INFO - Инициализация бота...
2024-12-04 18:05:03,425 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:05:03,425 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:05:03,426 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:05:03,426 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:05:03,427 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:05:03,427 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:05:03,453 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:05:03,453 - root - INFO - Инициализация диспетчера...
2024-12-04 18:05:03,454 - root - INFO - Регистрация обработчиков...
2024-12-04 18:05:03,455 - root - INFO - Запуск polling...
2024-12-04 18:05:03,455 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:05:03,461 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:05:03,463 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:05:03,464 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ()
2024-12-04 18:05:03,752 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:05:04,111 - aiogram.event - INFO - Update id=746486760 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 18:05:09,530 - aiogram.event - INFO - Update id=746486761 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 18:05:12,102 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:05:12,104 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:05:12,104 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('528155210', 1, 0)
2024-12-04 18:05:12,209 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:05:12,281 - aiogram.event - INFO - Update id=746486762 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 18:05:15,687 - aiogram.event - INFO - Update id=746486763 is handled. Duration 313 ms by bot id=6588698079
2024-12-04 18:05:16,811 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:05:16,812 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:05:16,812 - sqlalchemy.engine.Engine - INFO - [cached since 4.709s ago] ('528155210', 1, 0)
2024-12-04 18:05:16,980 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:05:17,131 - aiogram.event - INFO - Update id=746486764 is handled. Duration 311 ms by bot id=6588698079
2024-12-04 18:05:19,000 - aiogram.event - INFO - Update id=746486765 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 18:05:28,312 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:05:48,504 - root - INFO - Инициализация бота...
2024-12-04 18:05:48,958 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:05:48,958 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:05:48,959 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:05:48,960 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:05:48,960 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:05:48,961 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:05:48,992 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:05:48,992 - root - INFO - Инициализация диспетчера...
2024-12-04 18:05:48,993 - root - INFO - Регистрация обработчиков...
2024-12-04 18:05:48,995 - root - INFO - Запуск polling...
2024-12-04 18:05:48,995 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:05:49,004 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:05:49,006 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:05:49,006 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ()
2024-12-04 18:05:49,355 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:05:59,828 - aiogram.event - INFO - Update id=746486766 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 18:06:01,393 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:06:01,395 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:06:01,395 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('528155210', 1, 0)
2024-12-04 18:06:01,516 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:06:01,621 - aiogram.event - INFO - Update id=746486767 is handled. Duration 233 ms by bot id=6588698079
2024-12-04 18:06:02,943 - aiogram.event - INFO - Update id=746486768 is handled. Duration 375 ms by bot id=6588698079
2024-12-04 18:06:03,851 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:06:03,852 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:06:03,852 - sqlalchemy.engine.Engine - INFO - [cached since 2.457s ago] ('528155210', 1, 0)
2024-12-04 18:06:04,018 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:06:04,181 - aiogram.event - INFO - Update id=746486769 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 18:06:05,209 - aiogram.event - INFO - Update id=746486770 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 18:06:08,009 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:06:08,258 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:06:08,260 - root - INFO - Бот остановлен вручную.
2024-12-04 18:08:25,844 - root - INFO - Инициализация бота...
2024-12-04 18:08:26,324 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:08:26,324 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:08:26,325 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:08:26,326 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:08:26,326 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:08:26,327 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:08:26,363 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:08:26,363 - root - INFO - Инициализация диспетчера...
2024-12-04 18:08:26,364 - root - INFO - Регистрация обработчиков...
2024-12-04 18:08:26,366 - root - INFO - Запуск polling...
2024-12-04 18:08:26,366 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:08:26,373 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:08:26,375 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:08:26,376 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ()
2024-12-04 18:08:26,661 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:08:27,038 - aiogram.event - INFO - Update id=746486771 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 18:08:28,426 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:08:28,427 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:08:28,428 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ('528155210', 1, 0)
2024-12-04 18:08:28,567 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:08:28,646 - aiogram.event - INFO - Update id=746486772 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 18:08:31,019 - aiogram.event - INFO - Update id=746486773 is handled. Duration 281 ms by bot id=6588698079
2024-12-04 18:08:33,365 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:08:33,365 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:08:33,365 - sqlalchemy.engine.Engine - INFO - [cached since 4.938s ago] ('528155210', 1, 0)
2024-12-04 18:08:33,591 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:08:33,662 - aiogram.event - INFO - Update id=746486774 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 18:08:34,412 - aiogram.event - INFO - Update id=746486775 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 18:08:38,087 - aiogram.event - INFO - Update id=746486776 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 18:08:38,843 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:08:38,843 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:08:38,843 - sqlalchemy.engine.Engine - INFO - [cached since 10.42s ago] ('528155210', 1, 0)
2024-12-04 18:08:38,979 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:08:39,180 - aiogram.event - INFO - Update id=746486777 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 18:08:39,876 - aiogram.event - INFO - Update id=746486778 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 18:08:41,870 - aiogram.event - INFO - Update id=746486779 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 18:08:42,754 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:11:53,747 - root - INFO - Инициализация бота...
2024-12-04 18:11:54,140 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:11:54,141 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:11:54,141 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:11:54,142 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:11:54,142 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:11:54,143 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:11:54,170 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:11:54,170 - root - INFO - Инициализация диспетчера...
2024-12-04 18:11:54,171 - root - INFO - Регистрация обработчиков...
2024-12-04 18:11:54,172 - root - INFO - Запуск polling...
2024-12-04 18:11:54,173 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:11:54,178 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:11:54,180 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:11:54,181 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ()
2024-12-04 18:11:54,461 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:11:58,213 - aiogram.event - INFO - Update id=746486780 is handled. Duration 282 ms by bot id=6588698079
2024-12-04 18:11:59,235 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:11:59,236 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:11:59,237 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('528155210', 1, 0)
2024-12-04 18:11:59,381 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:11:59,485 - aiogram.event - INFO - Update id=746486781 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 18:12:00,706 - aiogram.event - INFO - Update id=746486782 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 18:12:02,826 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:14:00,840 - root - INFO - Инициализация бота...
2024-12-04 18:14:01,564 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:14:01,564 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:14:01,564 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:14:01,565 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:14:01,565 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:14:01,566 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:15:17,380 - root - INFO - Инициализация бота...
2024-12-04 18:15:17,808 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:15:17,808 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:15:17,808 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:15:17,809 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:15:17,809 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:15:17,810 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:15:17,841 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:15:17,841 - root - INFO - Инициализация диспетчера...
2024-12-04 18:15:17,842 - root - INFO - Регистрация обработчиков...
2024-12-04 18:15:17,843 - root - INFO - Запуск polling...
2024-12-04 18:15:17,844 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:15:17,850 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:15:17,852 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:15:17,852 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ()
2024-12-04 18:15:18,161 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:15:22,064 - aiogram.event - INFO - Update id=746486783 is handled. Duration 1297 ms by bot id=6588698079
2024-12-04 18:15:23,982 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:15:23,984 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:15:23,984 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('528155210', 1, 0)
2024-12-04 18:15:24,071 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:15:24,135 - aiogram.event - INFO - Update id=746486784 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 18:15:25,217 - aiogram.event - INFO - Update id=746486785 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 18:15:35,730 - aiogram.event - INFO - Update id=746486786 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 18:15:37,168 - aiogram.event - INFO - Update id=746486787 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 18:15:40,212 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:15:40,494 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:15:40,500 - root - INFO - Бот остановлен вручную.
2024-12-04 18:15:51,958 - root - INFO - Инициализация бота...
2024-12-04 18:15:52,744 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:15:52,745 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:15:52,745 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:15:52,749 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:15:52,750 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:15:52,751 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:15:52,923 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:15:52,924 - root - INFO - Инициализация диспетчера...
2024-12-04 18:15:52,928 - root - INFO - Регистрация обработчиков...
2024-12-04 18:15:52,932 - root - INFO - Запуск polling...
2024-12-04 18:15:52,934 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:15:52,968 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:15:52,975 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:15:52,975 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] ()
2024-12-04 18:15:53,268 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:15:55,957 - aiogram.event - INFO - Update id=746486788 is handled. Duration 1329 ms by bot id=6588698079
2024-12-04 18:15:58,744 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:15:58,750 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:15:58,750 - sqlalchemy.engine.Engine - INFO - [generated in 0.00102s] ('528155210', 1, 0)
2024-12-04 18:15:58,913 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:15:59,060 - aiogram.event - INFO - Update id=746486789 is handled. Duration 328 ms by bot id=6588698079
2024-12-04 18:16:00,593 - aiogram.event - INFO - Update id=746486790 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 18:16:07,265 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:16:07,532 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:16:07,535 - root - INFO - Бот остановлен вручную.
2024-12-04 18:18:13,502 - root - INFO - Инициализация бота...
2024-12-04 18:18:14,309 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:18:14,310 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:18:14,310 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:18:14,312 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:18:14,312 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:18:14,314 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:18:14,372 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:18:14,372 - root - INFO - Инициализация диспетчера...
2024-12-04 18:18:14,374 - root - INFO - Регистрация обработчиков...
2024-12-04 18:18:14,377 - root - INFO - Запуск polling...
2024-12-04 18:18:14,378 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:18:14,393 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:18:14,398 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:18:14,398 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ()
2024-12-04 18:18:14,701 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:18:17,530 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:18:17,804 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:18:17,815 - root - INFO - Бот остановлен вручную.
2024-12-04 18:18:28,015 - root - INFO - Инициализация бота...
2024-12-04 18:18:29,044 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:18:29,045 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:18:29,045 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:18:29,048 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:18:29,048 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:18:29,050 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:18:29,111 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:18:29,111 - root - INFO - Инициализация диспетчера...
2024-12-04 18:18:29,112 - root - INFO - Регистрация обработчиков...
2024-12-04 18:18:29,115 - root - INFO - Запуск polling...
2024-12-04 18:18:29,116 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:18:29,129 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:18:29,133 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:18:29,134 - sqlalchemy.engine.Engine - INFO - [generated in 0.00072s] ()
2024-12-04 18:18:29,704 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:18:34,352 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:18:34,613 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:18:34,618 - root - INFO - Бот остановлен вручную.
2024-12-04 18:18:45,658 - root - INFO - Инициализация бота...
2024-12-04 18:18:46,640 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:18:46,641 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:18:46,641 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:18:46,643 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:18:46,643 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:18:46,644 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:18:46,702 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:18:46,702 - root - INFO - Инициализация диспетчера...
2024-12-04 18:18:46,704 - root - INFO - Регистрация обработчиков...
2024-12-04 18:18:46,706 - root - INFO - Запуск polling...
2024-12-04 18:18:46,706 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:18:46,720 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:18:46,725 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:18:46,725 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ()
2024-12-04 18:18:47,001 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:18:47,830 - aiogram.event - INFO - Update id=746486791 is handled. Duration 640 ms by bot id=6588698079
2024-12-04 18:18:57,250 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 18:18:57,251 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 18:19:00,921 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 18:19:00,931 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:19:00,940 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:19:00,941 - sqlalchemy.engine.Engine - INFO - [generated in 0.00177s] ('528155210', 1, 0)
2024-12-04 18:19:01,178 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:19:01,272 - aiogram.event - INFO - Update id=746486792 is handled. Duration 344 ms by bot id=6588698079
2024-12-04 18:19:02,619 - aiogram.event - INFO - Update id=746486793 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 18:19:06,829 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:19:07,087 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:19:07,092 - root - INFO - Бот остановлен вручную.
2024-12-04 18:19:54,017 - root - INFO - Инициализация бота...
2024-12-04 18:19:54,906 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:19:54,906 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:19:54,907 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:19:54,909 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:19:54,909 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:19:54,910 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:19:54,970 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:19:54,971 - root - INFO - Инициализация диспетчера...
2024-12-04 18:19:54,972 - root - INFO - Регистрация обработчиков...
2024-12-04 18:19:54,974 - root - INFO - Запуск polling...
2024-12-04 18:19:54,976 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:19:54,987 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:19:54,992 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:19:54,992 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ()
2024-12-04 18:19:58,520 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:19:59,019 - aiogram.event - INFO - Update id=746486794 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 18:20:07,066 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:20:07,070 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:20:07,071 - sqlalchemy.engine.Engine - INFO - [generated in 0.00120s] ('528155210', 1, 0)
2024-12-04 18:20:07,173 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:20:07,278 - aiogram.event - INFO - Update id=746486795 is handled. Duration 218 ms by bot id=6588698079
2024-12-04 18:20:09,165 - aiogram.event - INFO - Update id=746486796 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 18:20:10,795 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:20:10,797 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:20:10,798 - sqlalchemy.engine.Engine - INFO - [cached since 3.727s ago] ('528155210', 1, 0)
2024-12-04 18:20:10,927 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:20:11,099 - aiogram.event - INFO - Update id=746486797 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 18:20:12,214 - aiogram.event - INFO - Update id=746486798 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 18:20:14,785 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:20:15,047 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:20:15,053 - root - INFO - Бот остановлен вручную.
2024-12-04 18:22:52,650 - root - INFO - Инициализация бота...
2024-12-04 18:22:53,598 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:22:53,599 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:22:53,600 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:22:53,605 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:22:53,605 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:22:53,608 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:22:53,673 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:22:53,673 - root - INFO - Инициализация диспетчера...
2024-12-04 18:22:53,674 - root - INFO - Регистрация обработчиков...
2024-12-04 18:22:53,677 - root - INFO - Запуск polling...
2024-12-04 18:22:53,678 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:22:53,692 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:22:53,695 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:22:53,695 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ()
2024-12-04 18:22:54,023 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:22:54,559 - aiogram.event - INFO - Update id=746486799 is handled. Duration 406 ms by bot id=6588698079
2024-12-04 18:22:56,022 - aiogram.event - INFO - Update id=746486800 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 18:22:58,025 - aiogram.event - INFO - Update id=746486801 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 18:22:59,351 - aiogram.event - INFO - Update id=746486802 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 18:23:00,111 - aiogram.event - INFO - Update id=746486803 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 18:23:04,914 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:23:05,177 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:23:05,181 - root - INFO - Бот остановлен вручную.
2024-12-04 18:24:48,685 - root - INFO - Инициализация бота...
2024-12-04 18:24:49,774 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:24:49,775 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:24:49,777 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:24:49,780 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:24:49,781 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:24:49,782 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:24:49,889 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:24:49,890 - root - INFO - Инициализация диспетчера...
2024-12-04 18:24:49,893 - root - INFO - Регистрация обработчиков...
2024-12-04 18:24:49,897 - root - INFO - Запуск polling...
2024-12-04 18:24:49,899 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:24:49,920 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:24:49,927 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:24:49,928 - sqlalchemy.engine.Engine - INFO - [generated in 0.00131s] ()
2024-12-04 18:24:50,233 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:24:50,885 - aiogram.event - INFO - Update id=746486804 is handled. Duration 483 ms by bot id=6588698079
2024-12-04 18:24:56,850 - aiogram.event - INFO - Update id=746486805 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 18:24:57,874 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:24:57,879 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:24:57,880 - sqlalchemy.engine.Engine - INFO - [generated in 0.00127s] ('528155210', 1, 0)
2024-12-04 18:24:57,891 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 18:24:57,892 - sqlalchemy.engine.Engine - INFO - [generated in 0.00147s] ('528155210', 'active', 0)
2024-12-04 18:24:57,897 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:24:57,909 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:24:57,913 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:24:57,914 - sqlalchemy.engine.Engine - INFO - [generated in 0.00098s] ('528155210',)
2024-12-04 18:24:57,922 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 18:24:57,923 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] (1, '528155210')
2024-12-04 18:24:57,926 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:24:59,210 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:24:59,213 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 18:24:59,213 - sqlalchemy.engine.Engine - INFO - [generated in 0.00072s] ('74', '528155210', '2024-12-06 18:24:59.209971', '2024-12-04 18:24:59.209971', 0)
2024-12-04 18:24:59,218 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:24:59,226 - root - INFO - Key created: OutlineKey(key_id='74', name='VPN Key61', password='u7YG6unpsCdqh0WhGFtEBO', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTp1N1lHNnVucHNDZHFoMFdoR0Z0RUJP@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 6588698079
2024-12-04 18:24:59,375 - aiogram.event - INFO - Update id=746486806 is handled. Duration 1515 ms by bot id=6588698079
2024-12-04 18:25:01,535 - aiogram.event - INFO - Update id=746486807 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 18:25:01,535 - aiogram.event - ERROR - Cause exception while process update id=746486807 by bot id=6588698079
KeyError: 'To'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 47, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'To'
2024-12-04 18:25:05,745 - aiogram.event - INFO - Update id=746486808 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 18:25:05,746 - aiogram.event - ERROR - Cause exception while process update id=746486808 by bot id=6588698079
KeyError: 'Installation'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 47, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Installation'
2024-12-04 18:25:15,936 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:25:16,201 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:25:16,208 - root - INFO - Бот остановлен вручную.
2024-12-04 18:26:11,145 - root - INFO - Инициализация бота...
2024-12-04 18:26:12,150 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:26:12,151 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:26:12,152 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:26:12,155 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:26:12,155 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:26:12,157 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:26:12,206 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:26:12,207 - root - INFO - Инициализация диспетчера...
2024-12-04 18:26:12,208 - root - INFO - Регистрация обработчиков...
2024-12-04 18:26:12,209 - root - INFO - Запуск polling...
2024-12-04 18:26:12,209 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:26:12,220 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:26:12,222 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:26:12,222 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ()
2024-12-04 18:26:12,227 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:26:12,227 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ('528155210',)
2024-12-04 18:26:12,228 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:26:12,229 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:26:12,230 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:26:12,231 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] ('528155210',)
2024-12-04 18:26:12,686 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:26:13,010 - aiogram.event - INFO - Update id=746486809 is handled. Duration 155 ms by bot id=6588698079
2024-12-04 18:26:14,757 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:26:14,763 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:26:14,765 - sqlalchemy.engine.Engine - INFO - [generated in 0.00186s] ('528155210', 1, 0)
2024-12-04 18:26:14,770 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:26:14,771 - sqlalchemy.engine.Engine - INFO - [cached since 2.545s ago] ('528155210',)
2024-12-04 18:26:17,498 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:26:17,673 - aiogram.event - INFO - Update id=746486810 is handled. Duration 2922 ms by bot id=6588698079
2024-12-04 18:26:23,094 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:26:36,606 - root - INFO - Инициализация бота...
2024-12-04 18:26:37,965 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:26:37,965 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:26:37,966 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:26:37,969 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 18:26:37,969 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:26:37,971 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:26:37,971 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:26:37,973 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 18:26:37,974 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:26:37,978 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 18:26:37,979 - sqlalchemy.engine.Engine - INFO - [no key 0.00125s] ()
2024-12-04 18:26:37,998 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 18:26:37,999 - sqlalchemy.engine.Engine - INFO - [no key 0.00086s] ()
2024-12-04 18:26:38,012 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:26:38,114 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:26:38,115 - root - INFO - Инициализация диспетчера...
2024-12-04 18:26:38,117 - root - INFO - Регистрация обработчиков...
2024-12-04 18:26:38,123 - root - INFO - Запуск polling...
2024-12-04 18:26:38,124 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:26:38,150 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:26:38,159 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:26:38,160 - sqlalchemy.engine.Engine - INFO - [generated in 0.00122s] ()
2024-12-04 18:26:38,615 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:26:39,961 - aiogram.event - INFO - Update id=746486811 is handled. Duration 344 ms by bot id=6588698079
2024-12-04 18:26:41,028 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:26:41,034 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:26:41,035 - sqlalchemy.engine.Engine - INFO - [generated in 0.00117s] ('528155210', 1, 0)
2024-12-04 18:26:41,133 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:26:41,228 - aiogram.event - INFO - Update id=746486812 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 18:26:48,027 - aiogram.event - INFO - Update id=746486813 is handled. Duration 218 ms by bot id=6588698079
2024-12-04 18:26:51,761 - aiogram.event - INFO - Update id=746486814 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 18:26:57,801 - aiogram.event - INFO - Update id=746486815 is handled. Duration 233 ms by bot id=6588698079
2024-12-04 18:26:59,808 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:26:59,809 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:26:59,810 - sqlalchemy.engine.Engine - INFO - [cached since 18.78s ago] ('528155210', 1, 0)
2024-12-04 18:26:59,977 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:27:00,128 - aiogram.event - INFO - Update id=746486816 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 18:27:01,820 - aiogram.event - INFO - Update id=746486817 is handled. Duration 203 ms by bot id=6588698079
2024-12-04 18:27:08,231 - aiogram.event - INFO - Update id=746486818 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 18:27:16,343 - aiogram.event - INFO - Update id=746486819 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 18:27:18,093 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:27:18,095 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:27:18,095 - sqlalchemy.engine.Engine - INFO - [cached since 37.06s ago] ('528155210', 1, 0)
2024-12-04 18:27:18,292 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:27:18,584 - aiogram.event - INFO - Update id=746486820 is handled. Duration 484 ms by bot id=6588698079
2024-12-04 18:27:20,293 - aiogram.event - INFO - Update id=746486821 is handled. Duration 437 ms by bot id=6588698079
2024-12-04 18:27:24,975 - aiogram.event - INFO - Update id=746486822 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 18:27:26,321 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:27:26,322 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:27:26,323 - sqlalchemy.engine.Engine - INFO - [cached since 45.29s ago] ('528155210', 1, 0)
2024-12-04 18:27:26,419 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:27:26,536 - aiogram.event - INFO - Update id=746486823 is handled. Duration 218 ms by bot id=6588698079
2024-12-04 18:27:28,987 - aiogram.event - INFO - Update id=746486824 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 18:27:34,753 - aiogram.event - INFO - Update id=746486825 is handled. Duration 186 ms by bot id=6588698079
2024-12-04 18:27:36,413 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:27:36,415 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:27:36,416 - sqlalchemy.engine.Engine - INFO - [cached since 55.38s ago] ('528155210', 1, 0)
2024-12-04 18:27:36,596 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:27:36,696 - aiogram.event - INFO - Update id=746486826 is handled. Duration 281 ms by bot id=6588698079
2024-12-04 18:27:38,262 - aiogram.event - INFO - Update id=746486827 is handled. Duration 266 ms by bot id=6588698079
2024-12-04 18:27:40,439 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:27:40,704 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:27:40,716 - root - INFO - Бот остановлен вручную.
2024-12-04 18:28:18,809 - root - INFO - Инициализация бота...
2024-12-04 18:28:19,839 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:28:19,840 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:28:19,841 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:28:19,845 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:28:19,846 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:28:19,849 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:28:19,965 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:28:19,966 - root - INFO - Инициализация диспетчера...
2024-12-04 18:28:19,969 - root - INFO - Регистрация обработчиков...
2024-12-04 18:28:19,973 - root - INFO - Запуск polling...
2024-12-04 18:28:19,974 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:28:19,999 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:28:20,006 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:28:20,007 - sqlalchemy.engine.Engine - INFO - [generated in 0.00141s] ()
2024-12-04 18:28:20,406 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:28:21,074 - aiogram.event - INFO - Update id=746486828 is handled. Duration 484 ms by bot id=6588698079
2024-12-04 18:28:23,729 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:28:23,733 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:28:23,733 - sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] ('528155210', 1, 0)
2024-12-04 18:28:23,839 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:28:23,949 - aiogram.event - INFO - Update id=746486829 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 18:28:25,809 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:28:25,810 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:28:25,810 - sqlalchemy.engine.Engine - INFO - [cached since 2.077s ago] ('528155210', 1, 0)
2024-12-04 18:28:25,817 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 18:28:25,817 - sqlalchemy.engine.Engine - INFO - [generated in 0.00120s] ('528155210', 'active', 0)
2024-12-04 18:28:25,822 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:28:25,833 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:28:25,837 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:28:25,837 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('528155210',)
2024-12-04 18:28:25,844 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 18:28:25,845 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] (1, '528155210')
2024-12-04 18:28:25,848 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:28:27,067 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:28:27,070 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 18:28:27,070 - sqlalchemy.engine.Engine - INFO - [generated in 0.00074s] ('75', '528155210', '2024-12-06 18:28:27.066460', '2024-12-04 18:28:27.066460', 0)
2024-12-04 18:28:27,076 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:28:27,083 - root - INFO - Key created: OutlineKey(key_id='75', name='VPN Key62', password='loGpkjB4qMeDNblZRkV0nr', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpsb0dwa2pCNHFNZUROYmxaUmtWMG5y@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 6588698079
2024-12-04 18:28:27,453 - aiogram.event - INFO - Update id=746486830 is handled. Duration 1657 ms by bot id=6588698079
2024-12-04 18:28:29,859 - aiogram.event - INFO - Update id=746486831 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 18:28:32,444 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:28:32,703 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:28:32,708 - root - INFO - Бот остановлен вручную.
2024-12-04 18:29:41,779 - root - INFO - Инициализация бота...
2024-12-04 18:29:42,765 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:29:42,769 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:29:42,770 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:29:42,773 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:29:42,774 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:29:42,776 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:29:42,897 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:29:42,898 - root - INFO - Инициализация диспетчера...
2024-12-04 18:29:42,901 - root - INFO - Регистрация обработчиков...
2024-12-04 18:29:42,906 - root - INFO - Запуск polling...
2024-12-04 18:29:42,906 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:29:42,932 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:29:42,941 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:29:42,942 - sqlalchemy.engine.Engine - INFO - [generated in 0.00107s] ()
2024-12-04 18:29:42,957 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:29:42,958 - sqlalchemy.engine.Engine - INFO - [generated in 0.00115s] ('528155210',)
2024-12-04 18:29:42,961 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:29:42,963 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:29:42,966 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:29:42,968 - sqlalchemy.engine.Engine - INFO - [generated in 0.00193s] ('528155210',)
2024-12-04 18:29:43,558 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:29:44,035 - aiogram.event - INFO - Update id=746486832 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 18:29:46,416 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:29:46,422 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:29:46,423 - sqlalchemy.engine.Engine - INFO - [generated in 0.00129s] ('528155210', 1, 0)
2024-12-04 18:29:46,428 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:29:46,428 - sqlalchemy.engine.Engine - INFO - [cached since 3.472s ago] ('528155210',)
2024-12-04 18:29:47,807 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:29:47,943 - aiogram.event - INFO - Update id=746486833 is handled. Duration 1531 ms by bot id=6588698079
2024-12-04 18:29:51,127 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:29:51,388 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:29:51,396 - root - INFO - Бот остановлен вручную.
2024-12-04 18:30:06,413 - root - INFO - Инициализация бота...
2024-12-04 18:30:07,150 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:30:07,151 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:30:07,151 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:30:07,153 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 18:30:07,153 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:30:07,154 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:30:07,154 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:30:07,155 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 18:30:07,156 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:30:07,157 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 18:30:07,157 - sqlalchemy.engine.Engine - INFO - [no key 0.00038s] ()
2024-12-04 18:30:07,169 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 18:30:07,170 - sqlalchemy.engine.Engine - INFO - [no key 0.00056s] ()
2024-12-04 18:30:07,179 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:30:07,239 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:30:07,239 - root - INFO - Инициализация диспетчера...
2024-12-04 18:30:07,240 - root - INFO - Регистрация обработчиков...
2024-12-04 18:30:07,243 - root - INFO - Запуск polling...
2024-12-04 18:30:07,243 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:30:07,257 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:30:07,262 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:30:07,262 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] ()
2024-12-04 18:30:07,708 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:30:11,971 - aiogram.event - INFO - Update id=746486834 is handled. Duration 562 ms by bot id=6588698079
2024-12-04 18:30:13,543 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:30:13,553 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:30:13,554 - sqlalchemy.engine.Engine - INFO - [generated in 0.00204s] ('528155210', 1, 0)
2024-12-04 18:30:13,807 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:30:14,016 - aiogram.event - INFO - Update id=746486835 is handled. Duration 484 ms by bot id=6588698079
2024-12-04 18:30:16,190 - aiogram.event - INFO - Update id=746486836 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 18:30:29,262 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:31:31,292 - root - INFO - Инициализация бота...
2024-12-04 18:31:32,162 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:31:32,162 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:31:32,163 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:31:32,165 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:31:32,165 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:31:32,167 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:31:32,230 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:31:32,230 - root - INFO - Инициализация диспетчера...
2024-12-04 18:31:32,233 - root - INFO - Регистрация обработчиков...
2024-12-04 18:31:32,235 - root - INFO - Запуск polling...
2024-12-04 18:31:32,236 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:31:32,249 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:31:32,254 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:31:32,254 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ()
2024-12-04 18:31:32,595 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:31:33,271 - aiogram.event - INFO - Update id=746486837 is handled. Duration 422 ms by bot id=6588698079
2024-12-04 18:31:34,590 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:31:34,598 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:31:34,598 - sqlalchemy.engine.Engine - INFO - [generated in 0.00130s] ('528155210', 1, 0)
2024-12-04 18:31:34,747 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:31:34,888 - aiogram.event - INFO - Update id=746486838 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 18:31:36,391 - aiogram.event - INFO - Update id=746486839 is handled. Duration 266 ms by bot id=6588698079
2024-12-04 18:31:37,540 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:31:37,541 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:31:37,542 - sqlalchemy.engine.Engine - INFO - [cached since 2.945s ago] ('528155210', 1, 0)
2024-12-04 18:31:37,834 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:31:38,118 - aiogram.event - INFO - Update id=746486840 is handled. Duration 577 ms by bot id=6588698079
2024-12-04 18:31:39,170 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:31:39,170 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:31:39,171 - sqlalchemy.engine.Engine - INFO - [cached since 4.574s ago] ('528155210', 1, 0)
2024-12-04 18:31:39,175 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 18:31:39,176 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('528155210', 'active', 0)
2024-12-04 18:31:39,180 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:31:39,189 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:31:39,191 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:31:39,192 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] ('528155210',)
2024-12-04 18:31:39,198 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 18:31:39,198 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] (1, '528155210')
2024-12-04 18:31:39,200 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:31:40,539 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:31:40,544 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 18:31:40,545 - sqlalchemy.engine.Engine - INFO - [generated in 0.00101s] ('76', '528155210', '2024-12-06 18:31:40.537435', '2024-12-04 18:31:40.537435', 0)
2024-12-04 18:31:40,548 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:31:40,555 - root - INFO - Key created: OutlineKey(key_id='76', name='VPN Key63', password='YsCJ3rdhBwaQLsllwpqkOJ', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpZc0NKM3JkaEJ3YVFMc2xsd3Bxa09K@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 6588698079
2024-12-04 18:31:40,801 - aiogram.event - INFO - Update id=746486841 is handled. Duration 1640 ms by bot id=6588698079
2024-12-04 18:31:45,822 - aiogram.event - INFO - Update id=746486842 is handled. Duration 313 ms by bot id=6588698079
2024-12-04 18:31:47,099 - aiogram.event - INFO - Update id=746486843 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 18:31:48,513 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:31:48,513 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:31:48,514 - sqlalchemy.engine.Engine - INFO - [cached since 13.92s ago] ('528155210', 1, 0)
2024-12-04 18:31:48,519 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:31:48,520 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ('528155210',)
2024-12-04 18:31:50,537 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:31:50,664 - aiogram.event - INFO - Update id=746486844 is handled. Duration 2140 ms by bot id=6588698079
2024-12-04 18:31:54,404 - aiogram.event - INFO - Update id=746486845 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 18:31:57,839 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:31:58,101 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:31:58,109 - root - INFO - Бот остановлен вручную.
2024-12-04 18:32:10,037 - root - INFO - Инициализация бота...
2024-12-04 18:32:10,674 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:32:10,674 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:32:10,675 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:32:10,676 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 18:32:10,676 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:32:10,676 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:32:10,677 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:32:10,677 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 18:32:10,678 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:32:10,679 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 18:32:10,680 - sqlalchemy.engine.Engine - INFO - [no key 0.00046s] ()
2024-12-04 18:32:10,692 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 18:32:10,693 - sqlalchemy.engine.Engine - INFO - [no key 0.00046s] ()
2024-12-04 18:32:10,703 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:32:10,750 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:32:10,750 - root - INFO - Инициализация диспетчера...
2024-12-04 18:32:10,751 - root - INFO - Регистрация обработчиков...
2024-12-04 18:32:10,753 - root - INFO - Запуск polling...
2024-12-04 18:32:10,754 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:32:10,765 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:32:10,769 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:32:10,769 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ()
2024-12-04 18:32:11,157 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:32:21,881 - aiogram.event - INFO - Update id=746486846 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 18:32:23,222 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:32:23,225 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:32:23,225 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('528155210', 1, 0)
2024-12-04 18:32:23,351 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:32:23,439 - aiogram.event - INFO - Update id=746486847 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 18:32:27,722 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:32:27,723 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:32:27,723 - sqlalchemy.engine.Engine - INFO - [cached since 4.499s ago] ('528155210', 1, 0)
2024-12-04 18:32:27,731 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 18:32:27,731 - sqlalchemy.engine.Engine - INFO - [generated in 0.00091s] ('528155210', 'active', 0)
2024-12-04 18:32:27,735 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:32:27,744 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:32:27,748 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:32:27,748 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] ('528155210',)
2024-12-04 18:32:27,753 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 18:32:27,753 - sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] (1, '528155210')
2024-12-04 18:32:27,756 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:32:29,031 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:32:29,036 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 18:32:29,037 - sqlalchemy.engine.Engine - INFO - [generated in 0.00134s] ('77', '528155210', '2024-12-06 18:32:29.029773', '2024-12-04 18:32:29.029773', 0)
2024-12-04 18:32:29,042 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:32:29,051 - root - INFO - Key created: OutlineKey(key_id='77', name='VPN Key64', password='Cy5t3jmRyhFyDmgGDIAM98', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpDeTV0M2ptUnloRnlEbWdHRElBTTk4@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 6588698079
2024-12-04 18:32:29,229 - aiogram.event - INFO - Update id=746486848 is handled. Duration 1515 ms by bot id=6588698079
2024-12-04 18:32:35,435 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:32:35,702 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:32:35,709 - root - INFO - Бот остановлен вручную.
2024-12-04 18:32:58,055 - root - INFO - Инициализация бота...
2024-12-04 18:32:58,886 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:32:58,886 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:32:58,887 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:32:58,888 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:32:58,889 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:32:58,890 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:32:58,943 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:32:58,944 - root - INFO - Инициализация диспетчера...
2024-12-04 18:32:58,945 - root - INFO - Регистрация обработчиков...
2024-12-04 18:32:58,947 - root - INFO - Запуск polling...
2024-12-04 18:32:58,948 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:32:58,960 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:32:58,963 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:32:58,963 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ()
2024-12-04 18:32:58,969 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:32:58,970 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('528155210',)
2024-12-04 18:32:58,971 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:32:58,972 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:32:58,974 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:32:58,974 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ('528155210',)
2024-12-04 18:32:59,274 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:33:29,339 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:33:29,597 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:33:29,604 - root - INFO - Бот остановлен вручную.
2024-12-04 18:33:38,790 - root - INFO - Инициализация бота...
2024-12-04 18:33:40,052 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:33:40,053 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:33:40,054 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:33:40,056 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:33:40,056 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:33:40,058 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:33:40,151 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:33:40,151 - root - INFO - Инициализация диспетчера...
2024-12-04 18:33:40,155 - root - INFO - Регистрация обработчиков...
2024-12-04 18:33:40,160 - root - INFO - Запуск polling...
2024-12-04 18:33:40,162 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:33:40,188 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:33:40,197 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:33:40,198 - sqlalchemy.engine.Engine - INFO - [generated in 0.00124s] ()
2024-12-04 18:33:40,213 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:33:40,214 - sqlalchemy.engine.Engine - INFO - [generated in 0.00181s] ('528155210',)
2024-12-04 18:33:40,217 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:33:40,220 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:33:40,223 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:33:40,224 - sqlalchemy.engine.Engine - INFO - [generated in 0.00103s] ('528155210',)
2024-12-04 18:33:40,519 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:33:42,111 - aiogram.event - INFO - Update id=746486849 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 18:33:43,500 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:33:43,507 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:33:43,508 - sqlalchemy.engine.Engine - INFO - [generated in 0.00154s] ('528155210', 1, 0)
2024-12-04 18:33:43,515 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:33:43,515 - sqlalchemy.engine.Engine - INFO - [cached since 3.304s ago] ('528155210',)
2024-12-04 18:33:44,869 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:33:44,980 - aiogram.event - INFO - Update id=746486850 is handled. Duration 1500 ms by bot id=6588698079
2024-12-04 18:33:49,374 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:34:05,360 - root - INFO - Инициализация бота...
2024-12-04 18:34:06,786 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:34:06,787 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:34:06,787 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:34:06,789 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 18:34:06,790 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:34:06,790 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:34:06,791 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:34:06,792 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 18:34:06,792 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:34:06,793 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 18:34:06,794 - sqlalchemy.engine.Engine - INFO - [no key 0.00051s] ()
2024-12-04 18:34:06,807 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 18:34:06,808 - sqlalchemy.engine.Engine - INFO - [no key 0.00054s] ()
2024-12-04 18:34:06,817 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:34:06,876 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:34:06,877 - root - INFO - Инициализация диспетчера...
2024-12-04 18:34:06,878 - root - INFO - Регистрация обработчиков...
2024-12-04 18:34:06,881 - root - INFO - Запуск polling...
2024-12-04 18:34:06,882 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:34:06,895 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:34:06,900 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:34:06,901 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ()
2024-12-04 18:34:07,170 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:34:07,690 - aiogram.event - INFO - Update id=746486851 is handled. Duration 328 ms by bot id=6588698079
2024-12-04 18:34:10,151 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:34:10,156 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:34:10,157 - sqlalchemy.engine.Engine - INFO - [generated in 0.00114s] ('528155210', 1, 0)
2024-12-04 18:34:10,299 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:34:10,416 - aiogram.event - INFO - Update id=746486852 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 18:34:13,948 - aiogram.event - INFO - Update id=746486853 is handled. Duration 188 ms by bot id=6588698079
2024-12-04 18:34:15,260 - aiogram.event - INFO - Update id=746486854 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 18:34:18,514 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:34:18,515 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:34:18,515 - sqlalchemy.engine.Engine - INFO - [cached since 8.36s ago] ('528155210', 1, 0)
2024-12-04 18:34:18,613 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:34:18,695 - aiogram.event - INFO - Update id=746486855 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 18:34:19,739 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:34:19,739 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:34:19,740 - sqlalchemy.engine.Engine - INFO - [cached since 9.584s ago] ('528155210', 1, 0)
2024-12-04 18:34:19,744 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 18:34:19,744 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('528155210', 'active', 0)
2024-12-04 18:34:19,747 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:34:19,754 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:34:19,757 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:34:19,758 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] ('528155210',)
2024-12-04 18:34:19,761 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 18:34:19,762 - sqlalchemy.engine.Engine - INFO - [generated in 0.00080s] (1, '528155210')
2024-12-04 18:34:19,765 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:34:20,974 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:34:20,977 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 18:34:20,977 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('78', '528155210', '2024-12-06 18:34:20.974002', '2024-12-04 18:34:20.974002', 0)
2024-12-04 18:34:20,981 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:34:20,986 - root - INFO - Key created: OutlineKey(key_id='78', name='VPN Key65', password='mzJ2f8skqm16wuNW6Enp2B', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTptekoyZjhza3FtMTZ3dU5XNkVucDJC@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 6588698079
2024-12-04 18:34:21,182 - aiogram.event - INFO - Update id=746486856 is handled. Duration 1437 ms by bot id=6588698079
2024-12-04 18:34:22,843 - aiogram.event - INFO - Update id=746486857 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 18:34:31,838 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:34:32,100 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:34:32,105 - root - INFO - Бот остановлен вручную.
2024-12-04 18:36:26,560 - root - INFO - Инициализация бота...
2024-12-04 18:36:27,888 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:27,889 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:36:27,890 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:36:27,895 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:36:27,896 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:36:27,899 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:36:28,047 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:36:28,048 - root - INFO - Инициализация диспетчера...
2024-12-04 18:36:28,055 - root - INFO - Регистрация обработчиков...
2024-12-04 18:36:28,060 - root - INFO - Запуск polling...
2024-12-04 18:36:28,062 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:36:28,089 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:28,098 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:36:28,099 - sqlalchemy.engine.Engine - INFO - [generated in 0.00131s] ()
2024-12-04 18:36:28,120 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:36:28,122 - sqlalchemy.engine.Engine - INFO - [generated in 0.00189s] ('528155210',)
2024-12-04 18:36:28,126 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:36:28,129 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:28,134 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:36:28,136 - sqlalchemy.engine.Engine - INFO - [generated in 0.00161s] ('528155210',)
2024-12-04 18:36:28,661 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:36:28,987 - aiogram.event - INFO - Update id=746486858 is handled. Duration 155 ms by bot id=6588698079
2024-12-04 18:36:31,422 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:36:31,682 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:36:31,690 - root - INFO - Бот остановлен вручную.
2024-12-04 18:36:42,601 - root - INFO - Инициализация бота...
2024-12-04 18:36:43,195 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:43,195 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:36:43,196 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:36:43,197 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 18:36:43,197 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:36:43,198 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:36:43,198 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:36:43,198 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 18:36:43,198 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:36:43,200 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 18:36:43,200 - sqlalchemy.engine.Engine - INFO - [no key 0.00027s] ()
2024-12-04 18:36:43,211 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 18:36:43,211 - sqlalchemy.engine.Engine - INFO - [no key 0.00032s] ()
2024-12-04 18:36:43,219 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:36:43,266 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:36:43,266 - root - INFO - Инициализация диспетчера...
2024-12-04 18:36:43,267 - root - INFO - Регистрация обработчиков...
2024-12-04 18:36:43,269 - root - INFO - Запуск polling...
2024-12-04 18:36:43,270 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:36:43,283 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:43,287 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:36:43,287 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ()
2024-12-04 18:36:43,587 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:36:44,431 - aiogram.event - INFO - Update id=746486859 is handled. Duration 687 ms by bot id=6588698079
2024-12-04 18:36:47,085 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:47,092 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:36:47,093 - sqlalchemy.engine.Engine - INFO - [generated in 0.00134s] ('528155210', 1, 0)
2024-12-04 18:36:47,696 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:36:47,856 - aiogram.event - INFO - Update id=746486860 is handled. Duration 780 ms by bot id=6588698079
2024-12-04 18:36:50,490 - aiogram.event - INFO - Update id=746486861 is handled. Duration 375 ms by bot id=6588698079
2024-12-04 18:36:51,470 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:51,472 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:36:51,472 - sqlalchemy.engine.Engine - INFO - [cached since 4.38s ago] ('528155210', 1, 0)
2024-12-04 18:36:51,652 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:36:51,802 - aiogram.event - INFO - Update id=746486862 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 18:36:53,049 - aiogram.event - INFO - Update id=746486863 is handled. Duration 405 ms by bot id=6588698079
2024-12-04 18:36:54,356 - aiogram.event - INFO - Update id=746486864 is handled. Duration 390 ms by bot id=6588698079
2024-12-04 18:36:55,496 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:55,499 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:36:55,500 - sqlalchemy.engine.Engine - INFO - [cached since 8.408s ago] ('528155210', 1, 0)
2024-12-04 18:36:55,801 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:36:56,124 - aiogram.event - INFO - Update id=746486865 is handled. Duration 640 ms by bot id=6588698079
2024-12-04 18:36:56,965 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:56,968 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:36:56,969 - sqlalchemy.engine.Engine - INFO - [cached since 9.877s ago] ('528155210', 1, 0)
2024-12-04 18:36:56,980 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 18:36:56,981 - sqlalchemy.engine.Engine - INFO - [generated in 0.00133s] ('528155210', 'active', 0)
2024-12-04 18:36:56,988 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:36:57,001 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:57,006 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:36:57,007 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] ('528155210',)
2024-12-04 18:36:57,015 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 18:36:57,016 - sqlalchemy.engine.Engine - INFO - [generated in 0.00141s] (1, '528155210')
2024-12-04 18:36:57,021 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:36:58,354 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:58,357 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 18:36:58,358 - sqlalchemy.engine.Engine - INFO - [generated in 0.00112s] ('79', '528155210', '2024-12-06 18:36:58.352653', '2024-12-04 18:36:58.352653', 0)
2024-12-04 18:36:58,364 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:36:58,372 - root - INFO - Key created: OutlineKey(key_id='79', name='VPN Key66', password='lohIMg8WzBGrjWxyO8NyPE', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpsb2hJTWc4V3pCR3JqV3h5TzhOeVBF@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 6588698079
2024-12-04 18:36:58,597 - aiogram.event - INFO - Update id=746486866 is handled. Duration 1640 ms by bot id=6588698079
2024-12-04 18:37:00,393 - aiogram.event - INFO - Update id=746486867 is handled. Duration 422 ms by bot id=6588698079
2024-12-04 18:37:01,659 - aiogram.event - INFO - Update id=746486868 is handled. Duration 484 ms by bot id=6588698079
2024-12-04 18:37:02,645 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:37:02,646 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:37:02,647 - sqlalchemy.engine.Engine - INFO - [cached since 15.55s ago] ('528155210', 1, 0)
2024-12-04 18:37:02,652 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:37:02,652 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] ('528155210',)
2024-12-04 18:37:03,661 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:37:03,738 - aiogram.event - INFO - Update id=746486869 is handled. Duration 1093 ms by bot id=6588698079
2024-12-04 18:37:06,783 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:37:06,788 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:37:06,788 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] ('79', 1, 0)
2024-12-04 18:37:07,053 - aiogram.event - INFO - Update id=746486870 is handled. Duration 1937 ms by bot id=6588698079
2024-12-04 18:37:08,820 - aiogram.event - INFO - Update id=746486871 is handled. Duration 453 ms by bot id=6588698079
2024-12-04 18:37:11,071 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:37:11,338 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:37:11,340 - root - INFO - Бот остановлен вручную.
2024-12-04 18:37:45,858 - root - INFO - Инициализация бота...
2024-12-04 18:37:46,641 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:37:46,642 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:37:46,642 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:37:46,644 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 18:37:46,644 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:37:46,645 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:37:46,645 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:37:46,646 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 18:37:46,647 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:37:46,648 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 18:37:46,649 - sqlalchemy.engine.Engine - INFO - [no key 0.00044s] ()
2024-12-04 18:37:46,674 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 18:37:46,674 - sqlalchemy.engine.Engine - INFO - [no key 0.00045s] ()
2024-12-04 18:37:46,686 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:37:46,748 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:37:46,748 - root - INFO - Инициализация диспетчера...
2024-12-04 18:37:46,750 - root - INFO - Регистрация обработчиков...
2024-12-04 18:37:46,752 - root - INFO - Запуск polling...
2024-12-04 18:37:46,753 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:37:46,765 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:37:46,770 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:37:46,770 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ()
2024-12-04 18:37:47,102 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 18:37:47,643 - aiogram.event - INFO - Update id=659306427 is handled. Duration 359 ms by bot id=7444575424
2024-12-04 18:37:50,251 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:37:50,257 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:37:50,258 - sqlalchemy.engine.Engine - INFO - [generated in 0.00116s] ('528155210', 1, 0)
2024-12-04 18:37:50,387 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:37:50,480 - aiogram.event - INFO - Update id=659306428 is handled. Duration 234 ms by bot id=7444575424
2024-12-04 18:37:52,116 - aiogram.event - INFO - Update id=659306429 is handled. Duration 218 ms by bot id=7444575424
2024-12-04 18:37:54,368 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:37:54,371 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:37:54,371 - sqlalchemy.engine.Engine - INFO - [cached since 4.114s ago] ('528155210', 1, 0)
2024-12-04 18:37:54,562 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:37:54,692 - aiogram.event - INFO - Update id=659306430 is handled. Duration 328 ms by bot id=7444575424
2024-12-04 18:37:56,002 - aiogram.event - INFO - Update id=659306431 is handled. Duration 280 ms by bot id=7444575424
2024-12-04 18:37:57,261 - aiogram.event - INFO - Update id=659306432 is handled. Duration 297 ms by bot id=7444575424
2024-12-04 18:37:58,813 - aiogram.event - INFO - Update id=659306433 is handled. Duration 328 ms by bot id=7444575424
2024-12-04 18:38:13,582 - aiogram.event - INFO - Update id=659306434 is handled. Duration 157 ms by bot id=7444575424
2024-12-04 18:38:22,657 - root - INFO - {
    "message_id": 2271,
    "date": 1733326703,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 120000,
        "invoice_payload": "135c8169-443d-4da0-84f7-b5fb7768d3c2",
        "telegram_payment_charge_id": "7444575424_528155210_328846",
        "provider_payment_charge_id": "7444575424_528155210_328846",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-04 18:38:23,938 - root - INFO - Key created: OutlineKey(key_id='80', name='VPN Key67', password='umDfztQgFQSxUN8EVlYdeh', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTp1bURmenRRZ0ZRU3hVTjhFVmxZZGVo@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 18:38:23,938 - root - INFO - Key created: OutlineKey(key_id='80', name='VPN Key67', password='umDfztQgFQSxUN8EVlYdeh', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTp1bURmenRRZ0ZRU3hVTjhFVmxZZGVo@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 18:38:24,141 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:38:24,143 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:38:24,145 - sqlalchemy.engine.Engine - INFO - [cached since 33.89s ago] ('528155210', 1, 0)
2024-12-04 18:38:24,154 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 18:38:24,155 - sqlalchemy.engine.Engine - INFO - [generated in 0.00167s] ('528155210', 'active', 0)
2024-12-04 18:38:24,164 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:38:24,181 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:38:24,190 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 18:38:24,191 - sqlalchemy.engine.Engine - INFO - [generated in 0.00141s] ('80', '528155210', '2025-11-29 18:38:24.177888', '2024-12-04 18:38:24.177888', 0)
2024-12-04 18:38:24,197 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:38:24,207 - aiogram.event - INFO - Update id=659306435 is handled. Duration 1547 ms by bot id=7444575424
2024-12-04 18:38:26,730 - aiogram.event - INFO - Update id=659306436 is handled. Duration 265 ms by bot id=7444575424
2024-12-04 18:38:27,762 - aiogram.event - INFO - Update id=659306437 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 18:38:29,568 - aiogram.event - INFO - Update id=659306438 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 18:38:32,820 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:38:33,099 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 18:38:33,105 - root - INFO - Бот остановлен вручную.
2024-12-04 22:26:30,108 - root - INFO - Инициализация бота...
2024-12-04 22:26:31,416 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:26:31,416 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 22:26:31,417 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:26:31,425 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 22:26:31,426 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:26:31,427 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:26:31,568 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 22:26:31,568 - root - INFO - Инициализация диспетчера...
2024-12-04 22:26:31,571 - root - INFO - Регистрация обработчиков...
2024-12-04 22:26:31,574 - root - INFO - Запуск polling...
2024-12-04 22:26:31,576 - aiogram.dispatcher - INFO - Start polling
2024-12-04 22:26:31,597 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:26:31,603 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 22:26:31,604 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] ()
2024-12-04 22:26:31,615 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:26:31,616 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('528155210',)
2024-12-04 22:26:31,960 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 22:26:47,095 - aiogram.event - INFO - Update id=659306439 is handled. Duration 359 ms by bot id=7444575424
2024-12-04 22:26:51,615 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:26:51,620 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:26:51,621 - sqlalchemy.engine.Engine - INFO - [generated in 0.00107s] ('528155210', 1, 0)
2024-12-04 22:26:51,626 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:26:51,627 - sqlalchemy.engine.Engine - INFO - [cached since 20.01s ago] ('528155210',)
2024-12-04 22:26:51,970 - root - ERROR - Ошибка при выборе ключа: Unable to get key
2024-12-04 22:26:52,125 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:26:52,263 - aiogram.event - INFO - Update id=659306440 is handled. Duration 656 ms by bot id=7444575424
2024-12-04 22:26:58,314 - aiogram.event - INFO - Update id=659306441 is not handled. Duration 16 ms by bot id=7444575424
2024-12-04 22:27:06,211 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 22:27:06,455 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 22:27:06,459 - root - INFO - Бот остановлен вручную.
2024-12-04 22:27:18,648 - root - INFO - Инициализация бота...
2024-12-04 22:27:19,669 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:27:19,670 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 22:27:19,671 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:27:19,675 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 22:27:19,676 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:27:19,677 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:27:19,748 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 22:27:19,749 - root - INFO - Инициализация диспетчера...
2024-12-04 22:27:19,750 - root - INFO - Регистрация обработчиков...
2024-12-04 22:27:19,752 - root - INFO - Запуск polling...
2024-12-04 22:27:19,753 - aiogram.dispatcher - INFO - Start polling
2024-12-04 22:27:19,767 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:27:19,772 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 22:27:19,772 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] ()
2024-12-04 22:27:19,780 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:27:19,781 - sqlalchemy.engine.Engine - INFO - [generated in 0.00099s] ('528155210',)
2024-12-04 22:27:20,080 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 22:27:26,018 - aiogram.event - INFO - Update id=659306442 is handled. Duration 327 ms by bot id=7444575424
2024-12-04 22:27:27,541 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:27:27,544 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:27:27,544 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('528155210', 1, 0)
2024-12-04 22:27:27,548 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:27:27,548 - sqlalchemy.engine.Engine - INFO - [cached since 7.768s ago] ('528155210',)
2024-12-04 22:27:27,779 - root - ERROR - Ошибка при выборе ключа: Unable to get key
2024-12-04 22:27:27,872 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:27:27,947 - aiogram.event - INFO - Update id=659306443 is handled. Duration 406 ms by bot id=7444575424
2024-12-04 22:27:33,137 - aiogram.event - INFO - Update id=659306444 is not handled. Duration 16 ms by bot id=7444575424
2024-12-04 22:27:42,687 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 22:27:42,944 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 22:27:42,948 - root - INFO - Бот остановлен вручную.
2024-12-04 22:28:23,033 - root - INFO - Инициализация бота...
2024-12-04 22:28:24,092 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:28:24,093 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 22:28:24,094 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:28:24,098 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 22:28:24,098 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:28:24,100 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:28:24,217 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 22:28:24,217 - root - INFO - Инициализация диспетчера...
2024-12-04 22:28:24,220 - root - INFO - Регистрация обработчиков...
2024-12-04 22:28:24,225 - root - INFO - Запуск polling...
2024-12-04 22:28:24,226 - aiogram.dispatcher - INFO - Start polling
2024-12-04 22:28:24,252 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:28:24,262 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 22:28:24,263 - sqlalchemy.engine.Engine - INFO - [generated in 0.00160s] ()
2024-12-04 22:28:24,279 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:28:24,280 - sqlalchemy.engine.Engine - INFO - [generated in 0.00133s] ('528155210',)
2024-12-04 22:28:24,609 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 22:28:28,017 - aiogram.event - INFO - Update id=659306445 is handled. Duration 406 ms by bot id=7444575424
2024-12-04 22:28:30,494 - aiogram.event - INFO - Update id=659306446 is handled. Duration 390 ms by bot id=7444575424
2024-12-04 22:28:31,926 - aiogram.event - INFO - Update id=659306447 is handled. Duration 297 ms by bot id=7444575424
2024-12-04 22:28:32,889 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:28:32,893 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:28:32,894 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ('528155210', 1, 0)
2024-12-04 22:28:32,896 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:28:32,896 - sqlalchemy.engine.Engine - INFO - [cached since 8.618s ago] ('528155210',)
2024-12-04 22:28:33,114 - root - ERROR - Ошибка при выборе ключа: Unable to get key
2024-12-04 22:28:33,202 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:28:33,291 - aiogram.event - INFO - Update id=659306448 is handled. Duration 390 ms by bot id=7444575424
2024-12-04 22:28:35,643 - aiogram.event - INFO - Update id=659306449 is not handled. Duration 0 ms by bot id=7444575424
2024-12-04 22:28:37,627 - aiogram.event - INFO - Update id=659306450 is handled. Duration 170 ms by bot id=7444575424
2024-12-04 22:28:39,107 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:28:39,108 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:28:39,109 - sqlalchemy.engine.Engine - INFO - [cached since 6.216s ago] ('528155210', 1, 0)
2024-12-04 22:28:39,111 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:28:39,112 - sqlalchemy.engine.Engine - INFO - [cached since 14.83s ago] ('528155210',)
2024-12-04 22:28:39,351 - root - ERROR - Ошибка при выборе ключа: Unable to get key
2024-12-04 22:28:39,518 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:28:39,697 - aiogram.event - INFO - Update id=659306451 is handled. Duration 578 ms by bot id=7444575424
2024-12-04 22:28:43,625 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 22:28:43,884 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 22:28:43,893 - root - INFO - Бот остановлен вручную.
2024-12-04 22:32:48,795 - root - INFO - Инициализация бота...
2024-12-04 22:32:49,991 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:32:49,992 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 22:32:49,993 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:32:49,997 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 22:32:49,998 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:32:50,000 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:32:50,123 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 22:32:50,124 - root - INFO - Инициализация диспетчера...
2024-12-04 22:32:50,127 - root - INFO - Регистрация обработчиков...
2024-12-04 22:32:50,132 - root - INFO - Запуск polling...
2024-12-04 22:32:50,134 - aiogram.dispatcher - INFO - Start polling
2024-12-04 22:32:50,164 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:32:50,172 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 22:32:50,173 - sqlalchemy.engine.Engine - INFO - [generated in 0.00106s] ()
2024-12-04 22:32:50,187 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:32:50,188 - sqlalchemy.engine.Engine - INFO - [generated in 0.00122s] ('528155210',)
2024-12-04 22:32:50,571 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 22:32:51,195 - aiogram.event - INFO - Update id=659306452 is handled. Duration 484 ms by bot id=7444575424
2024-12-04 22:32:53,220 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:32:53,227 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:32:53,229 - sqlalchemy.engine.Engine - INFO - [generated in 0.00179s] ('528155210', 1, 0)
2024-12-04 22:32:53,235 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:32:53,236 - sqlalchemy.engine.Engine - INFO - [cached since 3.05s ago] ('528155210',)
2024-12-04 22:32:53,537 - root - ERROR - Ошибка при выборе ключа: Unable to get key
2024-12-04 22:32:53,742 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:32:53,920 - aiogram.event - INFO - Update id=659306453 is handled. Duration 702 ms by bot id=7444575424
2024-12-04 22:33:05,458 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 22:35:52,322 - root - INFO - Инициализация бота...
2024-12-04 22:35:53,497 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:35:53,498 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 22:35:53,498 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:35:53,500 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 22:35:53,500 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:35:53,500 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 22:35:53,501 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:35:53,501 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 22:35:53,501 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:35:53,503 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 22:35:53,503 - sqlalchemy.engine.Engine - INFO - [no key 0.00035s] ()
2024-12-04 22:35:53,517 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 22:35:53,517 - sqlalchemy.engine.Engine - INFO - [no key 0.00036s] ()
2024-12-04 22:35:53,526 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:35:53,577 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 22:35:53,577 - root - INFO - Инициализация диспетчера...
2024-12-04 22:35:53,578 - root - INFO - Регистрация обработчиков...
2024-12-04 22:35:53,580 - root - INFO - Запуск polling...
2024-12-04 22:35:53,581 - aiogram.dispatcher - INFO - Start polling
2024-12-04 22:35:53,591 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:35:53,595 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 22:35:53,595 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] ()
2024-12-04 22:35:53,928 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 22:35:54,646 - aiogram.event - INFO - Update id=659306454 is handled. Duration 562 ms by bot id=7444575424
2024-12-04 22:35:56,055 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:35:56,060 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:35:56,060 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] ('528155210', 1, 0)
2024-12-04 22:35:56,252 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:35:56,369 - aiogram.event - INFO - Update id=659306455 is handled. Duration 312 ms by bot id=7444575424
2024-12-04 22:35:58,046 - aiogram.event - INFO - Update id=659306456 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 22:36:09,817 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:36:09,817 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:36:09,818 - sqlalchemy.engine.Engine - INFO - [cached since 13.76s ago] ('528155210', 1, 0)
2024-12-04 22:36:09,902 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:36:09,988 - aiogram.event - INFO - Update id=659306457 is handled. Duration 171 ms by bot id=7444575424
2024-12-04 22:36:11,283 - aiogram.event - INFO - Update id=659306458 is handled. Duration 202 ms by bot id=7444575424
2024-12-04 22:36:12,756 - aiogram.event - INFO - Update id=659306459 is handled. Duration 202 ms by bot id=7444575424
2024-12-04 22:36:16,514 - aiogram.event - INFO - Update id=659306460 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 22:36:17,900 - aiogram.event - INFO - Update id=659306461 is handled. Duration 219 ms by bot id=7444575424
2024-12-04 22:36:20,140 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:36:20,142 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:36:20,142 - sqlalchemy.engine.Engine - INFO - [cached since 24.08s ago] ('528155210', 1, 0)
2024-12-04 22:36:20,151 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 22:36:20,151 - sqlalchemy.engine.Engine - INFO - [generated in 0.00100s] ('528155210', 'active', 0)
2024-12-04 22:36:20,158 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:36:20,171 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:36:20,175 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 22:36:20,176 - sqlalchemy.engine.Engine - INFO - [generated in 0.00111s] ('528155210',)
2024-12-04 22:36:20,184 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 22:36:20,184 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] (1, '528155210')
2024-12-04 22:36:20,189 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:36:21,516 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:36:21,520 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 22:36:21,520 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] ('72', '528155210', '2024-12-06 22:36:21.514535', '2024-12-04 22:36:21.514535', 0)
2024-12-04 22:36:21,528 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:36:21,539 - root - INFO - Key created: OutlineKey(key_id='72', name='VPN Key58', password='De48GdJyNdtD9exfvvI0gs', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpEZTQ4R2RKeU5kdEQ5ZXhmdnZJMGdz@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 7444575424
2024-12-04 22:36:21,695 - aiogram.event - INFO - Update id=659306462 is handled. Duration 1563 ms by bot id=7444575424
2024-12-04 22:36:26,207 - aiogram.event - INFO - Update id=659306463 is not handled. Duration 0 ms by bot id=7444575424
2024-12-04 22:36:26,208 - aiogram.event - ERROR - Cause exception while process update id=659306463 by bot id=7444575424
KeyError: 'Installation'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 54, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Installation'
2024-12-04 22:36:31,624 - aiogram.event - INFO - Update id=659306464 is not handled. Duration 15 ms by bot id=7444575424
2024-12-04 22:36:31,625 - aiogram.event - ERROR - Cause exception while process update id=659306464 by bot id=7444575424
KeyError: 'Installation'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 54, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Installation'
2024-12-04 22:40:11,606 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 22:40:11,864 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 22:40:11,870 - root - INFO - Бот остановлен вручную.
2024-12-04 22:40:30,231 - root - INFO - Инициализация бота...
2024-12-04 22:40:30,964 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:40:30,965 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 22:40:30,965 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:40:30,966 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 22:40:30,966 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:40:30,968 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 22:40:30,968 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:40:30,969 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 22:40:30,969 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:40:30,970 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 22:40:30,970 - sqlalchemy.engine.Engine - INFO - [no key 0.00038s] ()
2024-12-04 22:40:30,987 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 22:40:30,988 - sqlalchemy.engine.Engine - INFO - [no key 0.00047s] ()
2024-12-04 22:40:30,997 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:40:31,059 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 22:40:31,060 - root - INFO - Инициализация диспетчера...
2024-12-04 22:40:31,061 - root - INFO - Регистрация обработчиков...
2024-12-04 22:40:31,064 - root - INFO - Запуск polling...
2024-12-04 22:40:31,065 - aiogram.dispatcher - INFO - Start polling
2024-12-04 22:40:31,077 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:40:31,082 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 22:40:31,083 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ()
2024-12-04 22:40:31,459 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 22:40:34,334 - aiogram.event - INFO - Update id=659306465 is handled. Duration 297 ms by bot id=7444575424
2024-12-04 22:40:36,193 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:40:36,199 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:40:36,200 - sqlalchemy.engine.Engine - INFO - [generated in 0.00130s] ('528155210', 1, 0)
2024-12-04 22:40:36,331 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:40:36,515 - aiogram.event - INFO - Update id=659306466 is handled. Duration 327 ms by bot id=7444575424
2024-12-04 22:40:38,065 - aiogram.event - INFO - Update id=659306467 is handled. Duration 438 ms by bot id=7444575424
2024-12-04 22:40:40,862 - aiogram.event - INFO - Update id=659306468 is handled. Duration 234 ms by bot id=7444575424
2024-12-04 22:40:42,810 - aiogram.event - INFO - Update id=659306469 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 22:40:43,882 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:40:43,883 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:40:43,884 - sqlalchemy.engine.Engine - INFO - [cached since 7.686s ago] ('528155210', 1, 0)
2024-12-04 22:40:43,988 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:40:44,064 - aiogram.event - INFO - Update id=659306470 is handled. Duration 188 ms by bot id=7444575424
2024-12-04 22:40:45,953 - aiogram.event - INFO - Update id=659306471 is handled. Duration 219 ms by bot id=7444575424
2024-12-04 22:40:47,064 - aiogram.event - INFO - Update id=659306472 is handled. Duration 266 ms by bot id=7444575424
2024-12-04 22:40:49,644 - aiogram.event - INFO - Update id=659306473 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 22:40:54,139 - aiogram.event - INFO - Update id=659306474 is handled. Duration 187 ms by bot id=7444575424
2024-12-04 22:40:57,001 - aiogram.event - INFO - Update id=659306475 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 22:40:59,873 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:40:59,874 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:40:59,875 - sqlalchemy.engine.Engine - INFO - [cached since 23.68s ago] ('528155210', 1, 0)
2024-12-04 22:40:59,882 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 22:40:59,882 - sqlalchemy.engine.Engine - INFO - [generated in 0.00097s] ('528155210', 'active', 0)
2024-12-04 22:40:59,888 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:40:59,899 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:40:59,903 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 22:40:59,904 - sqlalchemy.engine.Engine - INFO - [generated in 0.00100s] ('528155210',)
2024-12-04 22:40:59,912 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 22:40:59,913 - sqlalchemy.engine.Engine - INFO - [generated in 0.00101s] (1, '528155210')
2024-12-04 22:40:59,917 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:41:01,508 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:41:01,510 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 22:41:01,511 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] ('73', '528155210', '2024-12-06 22:41:01.507050', '2024-12-04 22:41:01.507050', 0)
2024-12-04 22:41:01,516 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:41:01,523 - root - INFO - Key created: OutlineKey(key_id='73', name='VPN Key59', password='BAUHJWlAaL2oOHRslo99h9', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpCQVVISldsQWFMMm9PSFJzbG85OWg5@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 7444575424
2024-12-04 22:41:01,780 - aiogram.event - INFO - Update id=659306476 is handled. Duration 1922 ms by bot id=7444575424
2024-12-04 22:41:05,588 - aiogram.event - INFO - Update id=659306477 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 22:41:13,406 - aiogram.event - INFO - Update id=659306478 is handled. Duration 218 ms by bot id=7444575424
2024-12-04 22:41:15,974 - aiogram.event - INFO - Update id=659306479 is handled. Duration 484 ms by bot id=7444575424
2024-12-04 22:41:16,630 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:41:16,632 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:41:16,633 - sqlalchemy.engine.Engine - INFO - [cached since 40.43s ago] ('528155210', 1, 0)
2024-12-04 22:41:16,872 - aiogram.event - INFO - Update id=659306480 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 22:41:20,739 - aiogram.event - INFO - Update id=659306481 is handled. Duration 171 ms by bot id=7444575424
2024-12-04 22:41:23,367 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:41:23,368 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:41:23,369 - sqlalchemy.engine.Engine - INFO - [cached since 47.17s ago] ('528155210', 1, 0)
2024-12-04 22:41:23,375 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:41:23,376 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ('528155210',)
2024-12-04 22:41:25,044 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:41:25,156 - aiogram.event - INFO - Update id=659306482 is handled. Duration 1797 ms by bot id=7444575424
2024-12-04 22:41:30,670 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:41:30,675 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:41:30,675 - sqlalchemy.engine.Engine - INFO - [generated in 0.00132s] ('73', 1, 0)
2024-12-04 22:41:30,824 - aiogram.event - INFO - Update id=659306483 is handled. Duration 1407 ms by bot id=7444575424
2024-12-04 22:41:33,914 - aiogram.event - INFO - Update id=659306484 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 22:41:35,217 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:41:35,219 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:41:35,219 - sqlalchemy.engine.Engine - INFO - [cached since 59.02s ago] ('528155210', 1, 0)
2024-12-04 22:41:35,225 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:41:35,226 - sqlalchemy.engine.Engine - INFO - [cached since 11.85s ago] ('528155210',)
2024-12-04 22:41:36,717 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:41:36,808 - aiogram.event - INFO - Update id=659306485 is handled. Duration 1594 ms by bot id=7444575424
2024-12-04 22:41:39,984 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:41:39,985 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:41:39,986 - sqlalchemy.engine.Engine - INFO - [cached since 9.312s ago] ('73', 1, 0)
2024-12-04 22:41:40,140 - aiogram.event - INFO - Update id=659306486 is handled. Duration 2281 ms by bot id=7444575424
2024-12-04 22:41:46,298 - aiogram.event - INFO - Update id=659306487 is handled. Duration 233 ms by bot id=7444575424
2024-12-04 22:41:56,695 - aiogram.event - INFO - Update id=659306488 is handled. Duration 125 ms by bot id=7444575424
2024-12-04 22:42:00,609 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:42:00,611 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:42:00,611 - sqlalchemy.engine.Engine - INFO - [cached since 29.94s ago] ('73', 1, 0)
2024-12-04 22:42:00,614 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:42:00,616 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:42:00,620 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 22:42:00,620 - sqlalchemy.engine.Engine - INFO - [generated in 0.00111s] ('73',)
2024-12-04 22:42:01,181 - aiogram.event - INFO - Update id=659306489 is handled. Duration 562 ms by bot id=7444575424
2024-12-04 22:42:02,785 - aiogram.event - INFO - Update id=659306490 is handled. Duration 422 ms by bot id=7444575424
2024-12-04 22:42:03,555 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:42:03,557 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:42:03,557 - sqlalchemy.engine.Engine - INFO - [cached since 87.36s ago] ('528155210', 1, 0)
2024-12-04 22:42:03,560 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:42:03,561 - sqlalchemy.engine.Engine - INFO - [cached since 40.19s ago] ('528155210',)
2024-12-04 22:42:04,933 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:42:04,996 - aiogram.event - INFO - Update id=659306491 is handled. Duration 1452 ms by bot id=7444575424
2024-12-04 22:42:07,747 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:42:07,750 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:42:07,751 - sqlalchemy.engine.Engine - INFO - [cached since 37.08s ago] ('73', 1, 0)
2024-12-04 22:42:07,893 - aiogram.event - INFO - Update id=659306492 is handled. Duration 1422 ms by bot id=7444575424
2024-12-04 22:42:11,387 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:42:11,388 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:42:11,390 - sqlalchemy.engine.Engine - INFO - [cached since 40.72s ago] ('73', 1, 0)
2024-12-04 22:42:12,795 - aiogram.event - INFO - Update id=659306493 is handled. Duration 1422 ms by bot id=7444575424
2024-12-04 22:42:14,343 - aiogram.event - INFO - Update id=659306494 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 22:42:17,289 - aiogram.event - INFO - Update id=659306495 is handled. Duration 282 ms by bot id=7444575424
2024-12-04 22:42:19,716 - aiogram.event - INFO - Update id=659306496 is handled. Duration 265 ms by bot id=7444575424
2024-12-04 22:42:52,166 - aiogram.event - INFO - Update id=659306497 is handled. Duration 297 ms by bot id=7444575424
2024-12-04 22:42:58,222 - root - INFO - {
    "message_id": 2340,
    "date": 1733341379,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 120000,
        "invoice_payload": "416d9ebc-31e4-48ba-9e37-f4375ac76b56",
        "telegram_payment_charge_id": "7444575424_528155210_329110",
        "provider_payment_charge_id": "7444575424_528155210_329110",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-04 22:42:59,787 - root - INFO - Key created: OutlineKey(key_id='74', name='VPN Key60', password='Y5Ft4NE4riQcw8BuJKnZWz', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpZNUZ0NE5FNHJpUWN3OEJ1SktuWld6@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 22:42:59,788 - root - INFO - Key created: OutlineKey(key_id='74', name='VPN Key60', password='Y5Ft4NE4riQcw8BuJKnZWz', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpZNUZ0NE5FNHJpUWN3OEJ1SktuWld6@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 22:42:59,937 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:42:59,939 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:42:59,940 - sqlalchemy.engine.Engine - INFO - [cached since 143.7s ago] ('528155210', 1, 0)
2024-12-04 22:42:59,947 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 22:42:59,948 - sqlalchemy.engine.Engine - INFO - [cached since 118.4s ago] ('74', '528155210', '2025-11-29 22:42:59.944412', '2024-12-04 22:42:59.944412', 0)
2024-12-04 22:42:59,954 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:42:59,968 - aiogram.event - INFO - Update id=659306498 is handled. Duration 1750 ms by bot id=7444575424
2024-12-04 22:43:06,638 - aiogram.event - INFO - Update id=659306499 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 22:43:08,031 - aiogram.event - INFO - Update id=659306500 is handled. Duration 187 ms by bot id=7444575424
2024-12-04 22:43:13,936 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:43:13,938 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:43:13,940 - sqlalchemy.engine.Engine - INFO - [cached since 157.7s ago] ('528155210', 1, 0)
2024-12-04 22:43:13,944 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:43:13,944 - sqlalchemy.engine.Engine - INFO - [cached since 110.6s ago] ('528155210',)
2024-12-04 22:43:16,333 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:43:16,431 - aiogram.event - INFO - Update id=659306501 is handled. Duration 2483 ms by bot id=7444575424
2024-12-04 22:43:20,033 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:43:20,035 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:43:20,036 - sqlalchemy.engine.Engine - INFO - [cached since 109.4s ago] ('74', 1, 0)
2024-12-04 22:43:20,182 - aiogram.event - INFO - Update id=659306502 is handled. Duration 1437 ms by bot id=7444575424
2024-12-04 22:43:23,124 - aiogram.event - INFO - Update id=659306503 is handled. Duration 92 ms by bot id=7444575424
2024-12-04 22:43:27,986 - aiogram.event - INFO - Update id=659306504 is handled. Duration 93 ms by bot id=7444575424
2024-12-04 22:43:29,489 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:43:29,491 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:43:29,492 - sqlalchemy.engine.Engine - INFO - [cached since 118.8s ago] ('74', 1, 0)
2024-12-04 22:43:29,495 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:43:29,497 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:43:29,499 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 22:43:29,500 - sqlalchemy.engine.Engine - INFO - [cached since 88.88s ago] ('74',)
2024-12-04 22:43:29,871 - aiogram.event - INFO - Update id=659306505 is handled. Duration 390 ms by bot id=7444575424
2024-12-04 22:43:32,202 - aiogram.event - INFO - Update id=659306506 is handled. Duration 187 ms by bot id=7444575424
2024-12-04 22:43:33,685 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:43:33,688 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:43:33,689 - sqlalchemy.engine.Engine - INFO - [cached since 177.5s ago] ('528155210', 1, 0)
2024-12-04 22:43:33,693 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:43:33,694 - sqlalchemy.engine.Engine - INFO - [cached since 130.3s ago] ('528155210',)
2024-12-04 22:43:36,499 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:43:36,584 - aiogram.event - INFO - Update id=659306507 is handled. Duration 2907 ms by bot id=7444575424
2024-12-04 22:43:38,767 - aiogram.event - INFO - Update id=659306508 is handled. Duration 327 ms by bot id=7444575424
2024-12-04 22:43:40,361 - aiogram.event - INFO - Update id=659306509 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 22:43:41,830 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:43:41,831 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:43:41,832 - sqlalchemy.engine.Engine - INFO - [cached since 185.6s ago] ('528155210', 1, 0)
2024-12-04 22:43:41,929 - aiogram.event - INFO - Update id=659306510 is handled. Duration 108 ms by bot id=7444575424
2024-12-04 22:43:44,008 - aiogram.event - INFO - Update id=659306511 is handled. Duration 311 ms by bot id=7444575424
2024-12-04 22:43:53,627 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 22:43:53,768 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2702)
2024-12-04 22:43:53,768 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 22:43:53,880 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 22:43:53,887 - root - INFO - Бот остановлен вручную.
2024-12-04 22:47:48,024 - root - INFO - Инициализация бота...
2024-12-04 22:47:48,569 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:47:48,569 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 22:47:48,570 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:47:48,571 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 22:47:48,571 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:47:48,572 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 22:47:48,572 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:47:48,573 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 22:47:48,573 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:47:48,574 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 22:47:48,574 - sqlalchemy.engine.Engine - INFO - [no key 0.00030s] ()
2024-12-04 22:47:48,586 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 22:47:48,586 - sqlalchemy.engine.Engine - INFO - [no key 0.00032s] ()
2024-12-04 22:47:48,595 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:47:48,633 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 22:47:48,633 - root - INFO - Инициализация диспетчера...
2024-12-04 22:47:48,634 - root - INFO - Регистрация обработчиков...
2024-12-04 22:47:48,636 - root - INFO - Запуск polling...
2024-12-04 22:47:48,636 - aiogram.dispatcher - INFO - Start polling
2024-12-04 22:47:48,645 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:47:48,647 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 22:47:48,648 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ()
2024-12-04 22:47:49,011 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 22:47:56,871 - aiogram.event - INFO - Update id=659306512 is handled. Duration 467 ms by bot id=7444575424
2024-12-04 22:47:58,042 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:47:58,048 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:47:58,049 - sqlalchemy.engine.Engine - INFO - [generated in 0.00116s] ('528155210', 1, 0)
2024-12-04 22:47:58,165 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:47:58,287 - aiogram.event - INFO - Update id=659306513 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 22:48:02,592 - aiogram.event - INFO - Update id=659306514 is handled. Duration 297 ms by bot id=7444575424
2024-12-04 22:48:03,609 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:48:03,611 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:48:03,612 - sqlalchemy.engine.Engine - INFO - [cached since 5.563s ago] ('528155210', 1, 0)
2024-12-04 22:48:03,735 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:48:03,873 - aiogram.event - INFO - Update id=659306515 is handled. Duration 265 ms by bot id=7444575424
2024-12-04 22:48:05,010 - aiogram.event - INFO - Update id=659306516 is handled. Duration 265 ms by bot id=7444575424
2024-12-04 22:48:07,308 - aiogram.event - INFO - Update id=659306517 is handled. Duration 219 ms by bot id=7444575424
2024-12-04 22:48:08,470 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:48:08,471 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:48:08,471 - sqlalchemy.engine.Engine - INFO - [cached since 10.42s ago] ('528155210', 1, 0)
2024-12-04 22:48:08,551 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:48:08,613 - aiogram.event - INFO - Update id=659306518 is handled. Duration 140 ms by bot id=7444575424
2024-12-04 22:48:16,091 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:48:16,093 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:48:16,094 - sqlalchemy.engine.Engine - INFO - [cached since 18.05s ago] ('528155210', 1, 0)
2024-12-04 22:48:16,101 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 22:48:16,102 - sqlalchemy.engine.Engine - INFO - [generated in 0.00100s] ('528155210', 'active', 0)
2024-12-04 22:48:16,108 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:48:16,120 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:48:16,125 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 22:48:16,126 - sqlalchemy.engine.Engine - INFO - [generated in 0.00099s] ('528155210',)
2024-12-04 22:48:16,133 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 22:48:16,133 - sqlalchemy.engine.Engine - INFO - [generated in 0.00099s] (1, '528155210')
2024-12-04 22:48:16,137 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:48:17,873 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:48:17,880 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 22:48:17,880 - sqlalchemy.engine.Engine - INFO - [generated in 0.00129s] ('75', '528155210', '2024-12-06 22:48:17.870478', '2024-12-04 22:48:17.870478', 0)
2024-12-04 22:48:17,888 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:48:17,901 - root - INFO - Key created: OutlineKey(key_id='75', name='VPN Key61', password='KRYzR7NXyVXhvqm9TUiWmb', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpLUll6UjdOWHlWWGh2cW05VFVpV21i@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 7444575424
2024-12-04 22:48:18,068 - aiogram.event - INFO - Update id=659306519 is handled. Duration 1984 ms by bot id=7444575424
2024-12-04 22:48:20,020 - aiogram.event - INFO - Update id=659306520 is handled. Duration 406 ms by bot id=7444575424
2024-12-04 22:48:21,428 - aiogram.event - INFO - Update id=659306521 is handled. Duration 312 ms by bot id=7444575424
2024-12-04 22:48:22,404 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:48:22,405 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:48:22,406 - sqlalchemy.engine.Engine - INFO - [cached since 24.36s ago] ('528155210', 1, 0)
2024-12-04 22:48:22,414 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:48:22,415 - sqlalchemy.engine.Engine - INFO - [generated in 0.00096s] ('528155210',)
2024-12-04 22:48:24,092 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:48:24,241 - aiogram.event - INFO - Update id=659306522 is handled. Duration 1827 ms by bot id=7444575424
2024-12-04 22:48:28,362 - aiogram.event - INFO - Update id=659306523 is handled. Duration 234 ms by bot id=7444575424
2024-12-04 22:48:30,790 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:48:30,792 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:48:30,793 - sqlalchemy.engine.Engine - INFO - [cached since 32.74s ago] ('528155210', 1, 0)
2024-12-04 22:48:30,797 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:48:30,798 - sqlalchemy.engine.Engine - INFO - [cached since 8.383s ago] ('528155210',)
2024-12-04 22:48:32,145 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:48:32,242 - aiogram.event - INFO - Update id=659306524 is handled. Duration 1452 ms by bot id=7444575424
2024-12-04 22:48:34,701 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:48:34,705 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:48:34,706 - sqlalchemy.engine.Engine - INFO - [generated in 0.00131s] ('75', 1, 0)
2024-12-04 22:48:34,877 - aiogram.event - INFO - Update id=659306525 is handled. Duration 1625 ms by bot id=7444575424
2024-12-04 22:48:38,896 - aiogram.event - INFO - Update id=659306526 is handled. Duration 156 ms by bot id=7444575424
2024-12-04 22:48:44,736 - aiogram.event - INFO - Update id=659306527 is handled. Duration 125 ms by bot id=7444575424
2024-12-04 22:48:46,564 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:48:46,565 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:48:46,566 - sqlalchemy.engine.Engine - INFO - [cached since 11.86s ago] ('75', 1, 0)
2024-12-04 22:48:46,570 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:48:46,571 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:48:46,575 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 22:48:46,575 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] ('75',)
2024-12-04 22:48:46,946 - aiogram.event - INFO - Update id=659306528 is handled. Duration 375 ms by bot id=7444575424
2024-12-04 22:48:48,271 - aiogram.event - INFO - Update id=659306529 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 22:48:49,341 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:48:49,343 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:48:49,343 - sqlalchemy.engine.Engine - INFO - [cached since 51.29s ago] ('528155210', 1, 0)
2024-12-04 22:48:49,346 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:48:49,347 - sqlalchemy.engine.Engine - INFO - [cached since 26.93s ago] ('528155210',)
2024-12-04 22:48:50,741 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:48:50,810 - aiogram.event - INFO - Update id=659306530 is handled. Duration 1469 ms by bot id=7444575424
2024-12-04 22:48:53,603 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:48:53,605 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:48:53,606 - sqlalchemy.engine.Engine - INFO - [cached since 18.9s ago] ('75', 1, 0)
2024-12-04 22:48:53,771 - aiogram.event - INFO - Update id=659306531 is handled. Duration 1469 ms by bot id=7444575424
2024-12-04 22:48:55,126 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:48:55,128 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:48:55,128 - sqlalchemy.engine.Engine - INFO - [cached since 20.42s ago] ('75', 1, 0)
2024-12-04 22:48:56,576 - aiogram.event - INFO - Update id=659306532 is handled. Duration 1469 ms by bot id=7444575424
2024-12-04 22:48:58,332 - aiogram.event - INFO - Update id=659306533 is handled. Duration 422 ms by bot id=7444575424
2024-12-04 22:49:00,686 - aiogram.event - INFO - Update id=659306534 is handled. Duration 344 ms by bot id=7444575424
2024-12-04 22:49:01,553 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:49:01,554 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:49:01,555 - sqlalchemy.engine.Engine - INFO - [cached since 63.51s ago] ('528155210', 1, 0)
2024-12-04 22:49:01,664 - aiogram.event - INFO - Update id=659306535 is handled. Duration 109 ms by bot id=7444575424
2024-12-04 22:49:03,260 - aiogram.event - INFO - Update id=659306536 is handled. Duration 327 ms by bot id=7444575424
2024-12-04 22:49:05,989 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 22:49:06,245 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 22:49:06,253 - root - INFO - Бот остановлен вручную.
2024-12-04 22:56:18,791 - root - INFO - Инициализация бота...
2024-12-04 22:56:19,660 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:56:19,661 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 22:56:19,661 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:56:19,662 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 22:56:19,663 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:56:19,663 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 22:56:19,663 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:56:19,664 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 22:56:19,664 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 22:56:19,665 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 22:56:19,666 - sqlalchemy.engine.Engine - INFO - [no key 0.00029s] ()
2024-12-04 22:56:19,677 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 22:56:19,678 - sqlalchemy.engine.Engine - INFO - [no key 0.00035s] ()
2024-12-04 22:56:19,687 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:56:19,776 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 22:56:19,776 - root - INFO - Инициализация диспетчера...
2024-12-04 22:56:19,778 - root - INFO - Регистрация обработчиков...
2024-12-04 22:56:19,782 - root - INFO - Запуск polling...
2024-12-04 22:56:19,782 - aiogram.dispatcher - INFO - Start polling
2024-12-04 22:56:19,799 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:56:19,802 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 22:56:19,802 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ()
2024-12-04 22:56:20,113 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 22:56:28,245 - aiogram.event - INFO - Update id=659306537 is handled. Duration 327 ms by bot id=7444575424
2024-12-04 22:56:29,823 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:56:29,831 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:56:29,832 - sqlalchemy.engine.Engine - INFO - [generated in 0.00161s] ('528155210', 1, 0)
2024-12-04 22:56:29,960 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:56:30,048 - aiogram.event - INFO - Update id=659306538 is handled. Duration 233 ms by bot id=7444575424
2024-12-04 22:56:32,103 - aiogram.event - INFO - Update id=659306539 is handled. Duration 155 ms by bot id=7444575424
2024-12-04 22:56:33,185 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:56:33,187 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:56:33,188 - sqlalchemy.engine.Engine - INFO - [cached since 3.357s ago] ('528155210', 1, 0)
2024-12-04 22:56:33,296 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:56:33,388 - aiogram.event - INFO - Update id=659306540 is handled. Duration 219 ms by bot id=7444575424
2024-12-04 22:56:41,323 - aiogram.event - INFO - Update id=659306541 is handled. Duration 204 ms by bot id=7444575424
2024-12-04 22:56:42,643 - aiogram.event - INFO - Update id=659306542 is handled. Duration 156 ms by bot id=7444575424
2024-12-04 22:56:45,467 - aiogram.event - INFO - Update id=659306543 is handled. Duration 327 ms by bot id=7444575424
2024-12-04 22:56:47,723 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:56:47,724 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:56:47,724 - sqlalchemy.engine.Engine - INFO - [cached since 17.89s ago] ('528155210', 1, 0)
2024-12-04 22:56:47,728 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 22:56:47,729 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] ('528155210', 'active', 0)
2024-12-04 22:56:47,734 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:56:47,742 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:56:47,745 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 22:56:47,746 - sqlalchemy.engine.Engine - INFO - [generated in 0.00082s] ('528155210',)
2024-12-04 22:56:47,750 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 22:56:47,750 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] (1, '528155210')
2024-12-04 22:56:47,752 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:56:49,063 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:56:49,071 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 22:56:49,072 - sqlalchemy.engine.Engine - INFO - [generated in 0.00189s] ('76', '528155210', '2024-12-06 22:56:49.061256', '2024-12-04 22:56:49.061256', 0)
2024-12-04 22:56:49,078 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:56:49,089 - root - INFO - Key created: OutlineKey(key_id='76', name='VPN Key62', password='ZMNzch9zlyIEqoSBjVOoJ1', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpaTU56Y2g5emx5SUVxb1NCalZPb0ox@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 7444575424
2024-12-04 22:56:49,299 - aiogram.event - INFO - Update id=659306544 is handled. Duration 1577 ms by bot id=7444575424
2024-12-04 22:56:50,897 - aiogram.event - INFO - Update id=659306545 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 22:56:52,357 - aiogram.event - INFO - Update id=659306546 is handled. Duration 234 ms by bot id=7444575424
2024-12-04 22:56:54,915 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:56:54,916 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:56:54,916 - sqlalchemy.engine.Engine - INFO - [cached since 25.09s ago] ('528155210', 1, 0)
2024-12-04 22:56:54,922 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:56:54,923 - sqlalchemy.engine.Engine - INFO - [generated in 0.00128s] ('528155210',)
2024-12-04 22:56:56,314 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:56:56,440 - aiogram.event - INFO - Update id=659306547 is handled. Duration 1531 ms by bot id=7444575424
2024-12-04 22:56:58,965 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:56:58,969 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:56:58,970 - sqlalchemy.engine.Engine - INFO - [generated in 0.00118s] ('76', 1, 0)
2024-12-04 22:56:59,121 - aiogram.event - INFO - Update id=659306548 is handled. Duration 1233 ms by bot id=7444575424
2024-12-04 22:57:01,950 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:57:01,951 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:57:01,952 - sqlalchemy.engine.Engine - INFO - [cached since 2.983s ago] ('76', 1, 0)
2024-12-04 22:57:03,408 - aiogram.event - INFO - Update id=659306549 is handled. Duration 1468 ms by bot id=7444575424
2024-12-04 22:57:04,765 - aiogram.event - INFO - Update id=659306550 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 22:57:06,760 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:57:06,760 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:57:06,761 - sqlalchemy.engine.Engine - INFO - [cached since 36.93s ago] ('528155210', 1, 0)
2024-12-04 22:57:06,765 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:57:06,766 - sqlalchemy.engine.Engine - INFO - [cached since 11.84s ago] ('528155210',)
2024-12-04 22:57:07,814 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:57:07,881 - aiogram.event - INFO - Update id=659306551 is handled. Duration 1125 ms by bot id=7444575424
2024-12-04 22:57:10,670 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:57:10,672 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:57:10,673 - sqlalchemy.engine.Engine - INFO - [cached since 11.7s ago] ('76', 1, 0)
2024-12-04 22:57:10,837 - aiogram.event - INFO - Update id=659306552 is handled. Duration 1687 ms by bot id=7444575424
2024-12-04 22:57:19,159 - aiogram.event - INFO - Update id=659306553 is handled. Duration 93 ms by bot id=7444575424
2024-12-04 22:57:24,578 - aiogram.event - INFO - Update id=659306554 is handled. Duration 94 ms by bot id=7444575424
2024-12-04 22:57:26,218 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:57:26,220 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:57:26,220 - sqlalchemy.engine.Engine - INFO - [cached since 27.25s ago] ('76', 1, 0)
2024-12-04 22:57:26,229 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 22:57:26,231 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:57:26,235 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 22:57:26,236 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] ('76',)
2024-12-04 22:57:26,583 - aiogram.event - INFO - Update id=659306555 is handled. Duration 375 ms by bot id=7444575424
2024-12-04 22:57:28,118 - aiogram.event - INFO - Update id=659306556 is handled. Duration 218 ms by bot id=7444575424
2024-12-04 22:57:35,074 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 22:57:35,075 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 22:57:35,076 - sqlalchemy.engine.Engine - INFO - [cached since 65.25s ago] ('528155210', 1, 0)
2024-12-04 22:57:35,079 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 22:57:35,080 - sqlalchemy.engine.Engine - INFO - [cached since 40.16s ago] ('528155210',)
2024-12-04 22:57:36,430 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 22:57:36,586 - aiogram.event - INFO - Update id=659306557 is handled. Duration 1500 ms by bot id=7444575424
2024-12-04 22:57:39,077 - aiogram.event - INFO - Update id=659306558 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 22:57:42,179 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 22:57:42,425 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 22:57:42,432 - root - INFO - Бот остановлен вручную.
2024-12-04 23:00:51,673 - root - INFO - Инициализация бота...
2024-12-04 23:00:53,279 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:00:53,279 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 23:00:53,279 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:00:53,282 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 23:00:53,282 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:00:53,284 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 23:00:53,284 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:00:53,284 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 23:00:53,285 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:00:53,286 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 23:00:53,286 - sqlalchemy.engine.Engine - INFO - [no key 0.00032s] ()
2024-12-04 23:00:53,298 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 23:00:53,298 - sqlalchemy.engine.Engine - INFO - [no key 0.00076s] ()
2024-12-04 23:00:53,308 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 23:00:53,350 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 23:00:53,350 - root - INFO - Инициализация диспетчера...
2024-12-04 23:00:53,352 - root - INFO - Регистрация обработчиков...
2024-12-04 23:00:53,354 - root - INFO - Запуск polling...
2024-12-04 23:00:53,354 - aiogram.dispatcher - INFO - Start polling
2024-12-04 23:00:53,365 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:00:53,369 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 23:00:53,369 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ()
2024-12-04 23:00:53,710 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 23:00:57,030 - aiogram.event - INFO - Update id=659306559 is handled. Duration 282 ms by bot id=7444575424
2024-12-04 23:01:01,930 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 23:01:02,206 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 23:01:02,211 - root - INFO - Бот остановлен вручную.
2024-12-04 23:21:59,789 - root - INFO - Инициализация бота...
2024-12-04 23:22:01,232 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:22:01,233 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 23:22:01,234 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:22:01,237 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 23:22:01,238 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:22:01,239 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 23:22:01,240 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:22:01,242 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 23:22:01,243 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:22:01,245 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 23:22:01,246 - sqlalchemy.engine.Engine - INFO - [no key 0.00070s] ()
2024-12-04 23:22:01,273 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 23:22:01,274 - sqlalchemy.engine.Engine - INFO - [no key 0.00082s] ()
2024-12-04 23:22:01,287 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 23:23:08,541 - root - INFO - Инициализация бота...
2024-12-04 23:23:09,753 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:23:09,753 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 23:23:09,754 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:23:09,755 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 23:23:09,755 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:23:09,756 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 23:23:09,800 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 23:23:09,800 - root - INFO - Инициализация диспетчера...
2024-12-04 23:23:09,801 - root - INFO - Регистрация обработчиков...
2024-12-04 23:23:09,803 - root - INFO - Запуск polling...
2024-12-04 23:23:09,804 - aiogram.dispatcher - INFO - Start polling
2024-12-04 23:23:09,815 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:23:09,819 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 23:23:09,820 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] ()
2024-12-04 23:23:10,151 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 23:23:10,794 - aiogram.event - INFO - Update id=659306560 is handled. Duration 422 ms by bot id=7444575424
2024-12-04 23:23:53,529 - aiogram.event - INFO - Update id=659306561 is handled. Duration 282 ms by bot id=7444575424
2024-12-04 23:23:55,207 - aiogram.event - INFO - Update id=659306562 is handled. Duration 187 ms by bot id=7444575424
2024-12-04 23:23:56,777 - aiogram.event - INFO - Update id=659306563 is handled. Duration 93 ms by bot id=7444575424
2024-12-04 23:23:58,501 - aiogram.event - INFO - Update id=659306564 is handled. Duration 77 ms by bot id=7444575424
2024-12-04 23:24:00,518 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 23:24:00,774 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 23:24:00,779 - root - INFO - Бот остановлен вручную.
2024-12-04 23:24:15,897 - root - INFO - Инициализация бота...
2024-12-04 23:24:17,403 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:24:17,405 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 23:24:17,405 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:24:17,409 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 23:24:17,410 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:24:17,412 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 23:24:17,521 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 23:24:17,522 - root - INFO - Инициализация диспетчера...
2024-12-04 23:24:17,524 - root - INFO - Регистрация обработчиков...
2024-12-04 23:24:17,529 - root - INFO - Запуск polling...
2024-12-04 23:24:17,531 - aiogram.dispatcher - INFO - Start polling
2024-12-04 23:24:17,559 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:24:17,571 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 23:24:17,573 - sqlalchemy.engine.Engine - INFO - [generated in 0.00210s] ()
2024-12-04 23:24:17,937 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 23:24:23,336 - aiogram.event - INFO - Update id=659306565 is handled. Duration 375 ms by bot id=7444575424
2024-12-04 23:24:25,200 - aiogram.event - INFO - Update id=659306566 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 23:24:26,021 - aiogram.event - INFO - Update id=659306567 is handled. Duration 156 ms by bot id=7444575424
2024-12-04 23:24:27,656 - aiogram.event - INFO - Update id=659306568 is handled. Duration 140 ms by bot id=7444575424
2024-12-04 23:24:41,038 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 23:26:03,098 - root - INFO - Инициализация бота...
2024-12-04 23:26:04,237 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:26:04,238 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 23:26:04,239 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:26:04,241 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 23:26:04,243 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:26:04,244 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 23:26:04,324 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 23:26:04,324 - root - INFO - Инициализация диспетчера...
2024-12-04 23:26:04,327 - root - INFO - Регистрация обработчиков...
2024-12-04 23:26:04,330 - root - INFO - Запуск polling...
2024-12-04 23:26:04,332 - aiogram.dispatcher - INFO - Start polling
2024-12-04 23:26:04,350 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:26:04,357 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 23:26:04,358 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] ()
2024-12-04 23:26:04,648 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 23:26:05,259 - aiogram.event - INFO - Update id=659306569 is handled. Duration 390 ms by bot id=7444575424
2024-12-04 23:26:06,730 - aiogram.event - INFO - Update id=659306570 is handled. Duration 171 ms by bot id=7444575424
2024-12-04 23:26:07,750 - aiogram.event - INFO - Update id=659306571 is handled. Duration 186 ms by bot id=7444575424
2024-12-04 23:26:12,826 - aiogram.event - INFO - Update id=659306572 is handled. Duration 312 ms by bot id=7444575424
2024-12-04 23:26:14,930 - aiogram.event - INFO - Update id=659306573 is handled. Duration 125 ms by bot id=7444575424
2024-12-04 23:26:16,298 - aiogram.event - INFO - Update id=659306574 is handled. Duration 140 ms by bot id=7444575424
2024-12-04 23:26:17,268 - aiogram.event - INFO - Update id=659306575 is handled. Duration 141 ms by bot id=7444575424
2024-12-04 23:26:19,961 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 23:27:17,520 - root - INFO - Инициализация бота...
2024-12-04 23:27:18,476 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:27:18,477 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 23:27:18,477 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:27:18,480 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 23:27:18,480 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:27:18,482 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 23:27:18,538 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 23:27:18,539 - root - INFO - Инициализация диспетчера...
2024-12-04 23:27:18,540 - root - INFO - Регистрация обработчиков...
2024-12-04 23:27:18,542 - root - INFO - Запуск polling...
2024-12-04 23:27:18,542 - aiogram.dispatcher - INFO - Start polling
2024-12-04 23:27:18,553 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:27:18,557 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 23:27:18,557 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] ()
2024-12-04 23:27:18,886 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 23:27:20,524 - aiogram.event - INFO - Update id=659306576 is handled. Duration 452 ms by bot id=7444575424
2024-12-04 23:27:21,822 - aiogram.event - INFO - Update id=659306577 is handled. Duration 266 ms by bot id=7444575424
2024-12-04 23:27:22,619 - aiogram.event - INFO - Update id=659306578 is handled. Duration 140 ms by bot id=7444575424
2024-12-04 23:27:25,867 - aiogram.event - INFO - Update id=659306579 is handled. Duration 140 ms by bot id=7444575424
2024-12-04 23:27:26,785 - aiogram.event - INFO - Update id=659306580 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 23:27:29,669 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 23:27:29,932 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 23:27:29,938 - root - INFO - Бот остановлен вручную.
2024-12-04 23:28:08,918 - root - INFO - Инициализация бота...
2024-12-04 23:28:09,740 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:28:09,741 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 23:28:09,741 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:28:09,745 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 23:28:09,745 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:28:09,746 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 23:28:09,747 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:28:09,749 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 23:28:09,749 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 23:28:09,752 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 23:28:09,753 - sqlalchemy.engine.Engine - INFO - [no key 0.00080s] ()
2024-12-04 23:28:09,770 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 23:28:09,771 - sqlalchemy.engine.Engine - INFO - [no key 0.00091s] ()
2024-12-04 23:28:09,782 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 23:28:09,872 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 23:28:09,872 - root - INFO - Инициализация диспетчера...
2024-12-04 23:28:09,877 - root - INFO - Регистрация обработчиков...
2024-12-04 23:28:09,880 - root - INFO - Запуск polling...
2024-12-04 23:28:09,881 - aiogram.dispatcher - INFO - Start polling
2024-12-04 23:28:09,897 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:28:09,902 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 23:28:09,902 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] ()
2024-12-04 23:28:10,156 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 23:28:51,577 - aiogram.event - INFO - Update id=659306581 is handled. Duration 265 ms by bot id=7444575424
2024-12-04 23:28:53,610 - aiogram.event - INFO - Update id=659306582 is handled. Duration 390 ms by bot id=7444575424
2024-12-04 23:28:56,572 - aiogram.event - INFO - Update id=659306583 is handled. Duration 156 ms by bot id=7444575424
2024-12-04 23:28:58,693 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:28:58,703 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:28:58,704 - sqlalchemy.engine.Engine - INFO - [generated in 0.00169s] ('528155210', 1, 0)
2024-12-04 23:28:58,805 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 23:28:58,934 - aiogram.event - INFO - Update id=659306584 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 23:29:06,902 - aiogram.event - INFO - Update id=659306585 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 23:29:08,797 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:29:08,799 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:29:08,799 - sqlalchemy.engine.Engine - INFO - [cached since 10.1s ago] ('528155210', 1, 0)
2024-12-04 23:29:08,901 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 23:29:08,995 - aiogram.event - INFO - Update id=659306586 is handled. Duration 202 ms by bot id=7444575424
2024-12-04 23:29:13,820 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:29:13,822 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:29:13,824 - sqlalchemy.engine.Engine - INFO - [cached since 15.12s ago] ('528155210', 1, 0)
2024-12-04 23:29:13,832 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 23:29:13,832 - sqlalchemy.engine.Engine - INFO - [generated in 0.00112s] ('528155210', 'active', 0)
2024-12-04 23:29:13,840 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 23:29:13,852 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:29:13,858 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 23:29:13,859 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] ('528155210',)
2024-12-04 23:29:13,867 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 23:29:13,867 - sqlalchemy.engine.Engine - INFO - [generated in 0.00095s] (1, '528155210')
2024-12-04 23:29:13,872 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 23:29:15,345 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:29:15,350 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 23:29:15,351 - sqlalchemy.engine.Engine - INFO - [generated in 0.00175s] ('77', '528155210', '2024-12-06 23:29:15.343014', '2024-12-04 23:29:15.343014', 0)
2024-12-04 23:29:15,359 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 23:29:15,369 - root - INFO - Key created: OutlineKey(key_id='77', name='VPN Key63', password='3nRVQq7PGA7Cw6tfWXVDb2', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTozblJWUXE3UEdBN0N3NnRmV1hWRGIy@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 7444575424
2024-12-04 23:29:15,545 - aiogram.event - INFO - Update id=659306587 is handled. Duration 1733 ms by bot id=7444575424
2024-12-04 23:29:18,065 - aiogram.event - INFO - Update id=659306588 is handled. Duration 266 ms by bot id=7444575424
2024-12-04 23:29:19,981 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:29:19,984 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:29:19,984 - sqlalchemy.engine.Engine - INFO - [cached since 21.28s ago] ('528155210', 1, 0)
2024-12-04 23:29:19,994 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 23:29:19,995 - sqlalchemy.engine.Engine - INFO - [generated in 0.00119s] ('528155210',)
2024-12-04 23:29:21,004 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 23:29:21,095 - aiogram.event - INFO - Update id=659306589 is handled. Duration 1125 ms by bot id=7444575424
2024-12-04 23:29:24,563 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:29:24,568 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:29:24,569 - sqlalchemy.engine.Engine - INFO - [generated in 0.00165s] ('77', 1, 0)
2024-12-04 23:29:24,767 - aiogram.event - INFO - Update id=659306590 is handled. Duration 1359 ms by bot id=7444575424
2024-12-04 23:29:29,009 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:29:29,011 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:29:29,012 - sqlalchemy.engine.Engine - INFO - [cached since 4.444s ago] ('77', 1, 0)
2024-12-04 23:29:30,150 - aiogram.event - INFO - Update id=659306591 is handled. Duration 1141 ms by bot id=7444575424
2024-12-04 23:29:32,230 - aiogram.event - INFO - Update id=659306592 is handled. Duration 202 ms by bot id=7444575424
2024-12-04 23:29:33,877 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:29:33,878 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:29:33,879 - sqlalchemy.engine.Engine - INFO - [cached since 35.18s ago] ('528155210', 1, 0)
2024-12-04 23:29:33,884 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 23:29:33,885 - sqlalchemy.engine.Engine - INFO - [cached since 13.89s ago] ('528155210',)
2024-12-04 23:29:35,029 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 23:29:35,114 - aiogram.event - INFO - Update id=659306593 is handled. Duration 1234 ms by bot id=7444575424
2024-12-04 23:29:37,308 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:29:37,310 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:29:37,312 - sqlalchemy.engine.Engine - INFO - [cached since 12.74s ago] ('77', 1, 0)
2024-12-04 23:29:37,521 - aiogram.event - INFO - Update id=659306594 is handled. Duration 1437 ms by bot id=7444575424
2024-12-04 23:29:43,186 - aiogram.event - INFO - Update id=659306595 is handled. Duration 156 ms by bot id=7444575424
2024-12-04 23:29:49,026 - aiogram.event - INFO - Update id=659306596 is handled. Duration 157 ms by bot id=7444575424
2024-12-04 23:29:50,970 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:29:50,972 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:29:50,972 - sqlalchemy.engine.Engine - INFO - [cached since 26.4s ago] ('77', 1, 0)
2024-12-04 23:29:50,981 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 23:29:50,984 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:29:50,987 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 23:29:50,989 - sqlalchemy.engine.Engine - INFO - [generated in 0.00124s] ('77',)
2024-12-04 23:29:51,341 - aiogram.event - INFO - Update id=659306597 is handled. Duration 390 ms by bot id=7444575424
2024-12-04 23:29:52,986 - aiogram.event - INFO - Update id=659306598 is handled. Duration 171 ms by bot id=7444575424
2024-12-04 23:29:54,197 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:29:54,199 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:29:54,200 - sqlalchemy.engine.Engine - INFO - [cached since 55.5s ago] ('528155210', 1, 0)
2024-12-04 23:29:54,204 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 23:29:54,205 - sqlalchemy.engine.Engine - INFO - [cached since 34.21s ago] ('528155210',)
2024-12-04 23:29:55,513 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 23:29:55,583 - aiogram.event - INFO - Update id=659306599 is handled. Duration 1390 ms by bot id=7444575424
2024-12-04 23:29:59,914 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:29:59,918 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:29:59,919 - sqlalchemy.engine.Engine - INFO - [cached since 35.35s ago] ('77', 1, 0)
2024-12-04 23:30:00,116 - aiogram.event - INFO - Update id=659306600 is handled. Duration 1421 ms by bot id=7444575424
2024-12-04 23:30:04,217 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:30:04,220 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:30:04,220 - sqlalchemy.engine.Engine - INFO - [cached since 39.65s ago] ('77', 1, 0)
2024-12-04 23:30:05,248 - aiogram.event - INFO - Update id=659306601 is handled. Duration 1045 ms by bot id=7444575424
2024-12-04 23:30:06,784 - aiogram.event - INFO - Update id=659306602 is handled. Duration 187 ms by bot id=7444575424
2024-12-04 23:30:08,770 - aiogram.event - INFO - Update id=659306603 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 23:30:10,546 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:30:10,547 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:30:10,549 - sqlalchemy.engine.Engine - INFO - [cached since 71.85s ago] ('528155210', 1, 0)
2024-12-04 23:30:10,701 - aiogram.event - INFO - Update id=659306604 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 23:30:12,284 - aiogram.event - INFO - Update id=659306605 is handled. Duration 407 ms by bot id=7444575424
2024-12-04 23:30:13,427 - aiogram.event - INFO - Update id=659306606 is handled. Duration 233 ms by bot id=7444575424
2024-12-04 23:30:15,482 - aiogram.event - INFO - Update id=659306607 is handled. Duration 250 ms by bot id=7444575424
2024-12-04 23:30:39,253 - aiogram.event - INFO - Update id=659306608 is handled. Duration 233 ms by bot id=7444575424
2024-12-04 23:30:44,122 - root - INFO - {
    "message_id": 2473,
    "date": 1733344245,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 6000,
        "invoice_payload": "552ba6a0-834f-457a-8eb0-cfd8bd14aaaf",
        "telegram_payment_charge_id": "7444575424_528155210_329256",
        "provider_payment_charge_id": "7444575424_528155210_329256",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-04 23:30:45,415 - root - INFO - Key created: OutlineKey(key_id='78', name='VPN Key64', password='aScU4ywPjAGN6efWrmnP9k', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTphU2NVNHl3UGpBR042ZWZXcm1uUDlr@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 23:30:45,416 - root - INFO - Key created: OutlineKey(key_id='78', name='VPN Key64', password='aScU4ywPjAGN6efWrmnP9k', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTphU2NVNHl3UGpBR042ZWZXcm1uUDlr@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 23:30:45,550 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:30:45,552 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:30:45,553 - sqlalchemy.engine.Engine - INFO - [cached since 106.9s ago] ('528155210', 1, 0)
2024-12-04 23:30:45,558 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 23:30:45,559 - sqlalchemy.engine.Engine - INFO - [cached since 90.21s ago] ('78', '528155210', '2025-01-03 23:30:45.555495', '2024-12-04 23:30:45.555495', 0)
2024-12-04 23:30:45,572 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 23:30:45,585 - aiogram.event - INFO - Update id=659306609 is handled. Duration 1469 ms by bot id=7444575424
2024-12-04 23:30:51,993 - aiogram.event - INFO - Update id=659306610 is handled. Duration 437 ms by bot id=7444575424
2024-12-04 23:30:53,140 - aiogram.event - INFO - Update id=659306611 is handled. Duration 187 ms by bot id=7444575424
2024-12-04 23:30:54,590 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:30:54,592 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:30:54,593 - sqlalchemy.engine.Engine - INFO - [cached since 115.9s ago] ('528155210', 1, 0)
2024-12-04 23:30:54,598 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 23:30:54,599 - sqlalchemy.engine.Engine - INFO - [cached since 94.6s ago] ('528155210',)
2024-12-04 23:30:56,624 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 23:30:56,690 - aiogram.event - INFO - Update id=659306612 is handled. Duration 2109 ms by bot id=7444575424
2024-12-04 23:30:59,658 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:30:59,660 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:30:59,661 - sqlalchemy.engine.Engine - INFO - [cached since 95.09s ago] ('78', 1, 0)
2024-12-04 23:30:59,839 - aiogram.event - INFO - Update id=659306613 is handled. Duration 1327 ms by bot id=7444575424
2024-12-04 23:31:02,705 - aiogram.event - INFO - Update id=659306614 is handled. Duration 140 ms by bot id=7444575424
2024-12-04 23:31:07,773 - aiogram.event - INFO - Update id=659306615 is handled. Duration 77 ms by bot id=7444575424
2024-12-04 23:31:09,417 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:31:09,419 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:31:09,419 - sqlalchemy.engine.Engine - INFO - [cached since 104.9s ago] ('78', 1, 0)
2024-12-04 23:31:09,423 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 23:31:09,425 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:31:09,427 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 23:31:09,428 - sqlalchemy.engine.Engine - INFO - [cached since 78.44s ago] ('78',)
2024-12-04 23:31:09,774 - aiogram.event - INFO - Update id=659306616 is handled. Duration 359 ms by bot id=7444575424
2024-12-04 23:31:11,791 - aiogram.event - INFO - Update id=659306617 is handled. Duration 265 ms by bot id=7444575424
2024-12-04 23:31:12,649 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:31:12,651 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:31:12,653 - sqlalchemy.engine.Engine - INFO - [cached since 134s ago] ('528155210', 1, 0)
2024-12-04 23:31:12,657 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 23:31:12,658 - sqlalchemy.engine.Engine - INFO - [cached since 112.7s ago] ('528155210',)
2024-12-04 23:31:14,515 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 23:31:14,591 - aiogram.event - INFO - Update id=659306618 is handled. Duration 1952 ms by bot id=7444575424
2024-12-04 23:31:17,633 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:31:17,634 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:31:17,635 - sqlalchemy.engine.Engine - INFO - [cached since 113.1s ago] ('77', 1, 0)
2024-12-04 23:31:17,770 - aiogram.event - INFO - Update id=659306619 is handled. Duration 1344 ms by bot id=7444575424
2024-12-04 23:31:19,038 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:31:19,040 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:31:19,041 - sqlalchemy.engine.Engine - INFO - [cached since 114.5s ago] ('77', 1, 0)
2024-12-04 23:31:19,995 - aiogram.event - INFO - Update id=659306620 is handled. Duration 983 ms by bot id=7444575424
2024-12-04 23:31:21,133 - aiogram.event - INFO - Update id=659306621 is handled. Duration 202 ms by bot id=7444575424
2024-12-04 23:31:23,603 - aiogram.event - INFO - Update id=659306622 is handled. Duration 187 ms by bot id=7444575424
2024-12-04 23:31:24,879 - aiogram.event - INFO - Update id=659306623 is handled. Duration 358 ms by bot id=7444575424
2024-12-04 23:31:26,703 - aiogram.event - INFO - Update id=659306624 is handled. Duration 407 ms by bot id=7444575424
2024-12-04 23:31:27,653 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 23:31:27,655 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 23:31:27,656 - sqlalchemy.engine.Engine - INFO - [cached since 149s ago] ('528155210', 1, 0)
2024-12-04 23:31:27,763 - aiogram.event - INFO - Update id=659306625 is handled. Duration 125 ms by bot id=7444575424
2024-12-04 23:31:28,914 - aiogram.event - INFO - Update id=659306626 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 23:31:34,678 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 23:31:34,954 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 23:31:34,961 - root - INFO - Бот остановлен вручную.
2024-12-05 14:11:19,499 - root - INFO - Инициализация бота...
2024-12-05 14:11:20,491 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:11:20,492 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-05 14:11:20,492 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-05 14:11:20,495 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-05 14:11:20,495 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-05 14:11:20,496 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-05 14:11:20,496 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-05 14:11:20,498 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-05 14:11:20,499 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-05 14:11:20,501 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-05 14:11:20,501 - sqlalchemy.engine.Engine - INFO - [no key 0.00066s] ()
2024-12-05 14:11:20,513 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-05 14:11:20,513 - sqlalchemy.engine.Engine - INFO - [no key 0.00059s] ()
2024-12-05 14:11:20,522 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-05 14:11:20,581 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-05 14:11:20,581 - root - INFO - Инициализация диспетчера...
2024-12-05 14:11:20,584 - root - INFO - Регистрация обработчиков...
2024-12-05 14:11:20,586 - root - INFO - Запуск polling...
2024-12-05 14:11:20,589 - aiogram.dispatcher - INFO - Start polling
2024-12-05 14:11:20,601 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:11:20,605 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-05 14:11:20,606 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] ()
2024-12-05 14:11:21,226 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-05 14:11:35,490 - aiogram.event - INFO - Update id=659306627 is handled. Duration 265 ms by bot id=7444575424
2024-12-05 14:11:41,671 - aiogram.event - INFO - Update id=659306628 is handled. Duration 422 ms by bot id=7444575424
2024-12-05 14:12:10,335 - aiogram.event - INFO - Update id=659306629 is handled. Duration 454 ms by bot id=7444575424
2024-12-05 14:12:12,590 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:12:12,601 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:12:12,602 - sqlalchemy.engine.Engine - INFO - [generated in 0.00213s] ('528155210', 1, 0)
2024-12-05 14:12:12,694 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 14:12:12,769 - aiogram.event - INFO - Update id=659306630 is handled. Duration 187 ms by bot id=7444575424
2024-12-05 14:12:17,986 - aiogram.event - INFO - Update id=659306631 is handled. Duration 202 ms by bot id=7444575424
2024-12-05 14:12:19,861 - aiogram.event - INFO - Update id=659306632 is handled. Duration 577 ms by bot id=7444575424
2024-12-05 14:12:22,487 - aiogram.event - INFO - Update id=659306633 is handled. Duration 171 ms by bot id=7444575424
2024-12-05 14:12:25,207 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:12:25,209 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:12:25,210 - sqlalchemy.engine.Engine - INFO - [cached since 12.61s ago] ('528155210', 1, 0)
2024-12-05 14:12:25,389 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 14:12:25,533 - aiogram.event - INFO - Update id=659306634 is handled. Duration 327 ms by bot id=7444575424
2024-12-05 14:12:27,678 - aiogram.event - INFO - Update id=659306635 is handled. Duration 312 ms by bot id=7444575424
2024-12-05 14:12:29,863 - aiogram.event - INFO - Update id=659306636 is handled. Duration 202 ms by bot id=7444575424
2024-12-05 14:12:31,880 - aiogram.event - INFO - Update id=659306637 is handled. Duration 342 ms by bot id=7444575424
2024-12-05 14:12:44,959 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:12:44,961 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:12:44,962 - sqlalchemy.engine.Engine - INFO - [cached since 32.36s ago] ('528155210', 1, 0)
2024-12-05 14:12:44,968 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-05 14:12:44,969 - sqlalchemy.engine.Engine - INFO - [generated in 0.00098s] ('528155210', 'active', 0)
2024-12-05 14:12:44,977 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-05 14:12:44,990 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:12:44,993 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-05 14:12:44,994 - sqlalchemy.engine.Engine - INFO - [generated in 0.00091s] ('528155210',)
2024-12-05 14:12:45,002 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-05 14:12:45,002 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] (1, '528155210')
2024-12-05 14:12:45,006 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-05 14:12:46,212 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:12:46,216 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-05 14:12:46,217 - sqlalchemy.engine.Engine - INFO - [generated in 0.00134s] ('79', '528155210', '2024-12-07 14:12:46.210243', '2024-12-05 14:12:46.210243', 0)
2024-12-05 14:12:46,225 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-05 14:12:46,237 - root - INFO - Key created: OutlineKey(key_id='79', name='VPN Key65', password='OHMWoLjJyj31NiJaVsAxA6', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpPSE1Xb0xqSnlqMzFOaUphVnNBeEE2@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 7444575424
2024-12-05 14:12:46,601 - aiogram.event - INFO - Update id=659306638 is handled. Duration 1640 ms by bot id=7444575424
2024-12-05 14:13:06,319 - aiogram.event - INFO - Update id=659306639 is handled. Duration 406 ms by bot id=7444575424
2024-12-05 14:13:12,877 - aiogram.event - INFO - Update id=659306640 is handled. Duration 202 ms by bot id=7444575424
2024-12-05 14:13:14,526 - aiogram.event - INFO - Update id=659306641 is handled. Duration 219 ms by bot id=7444575424
2024-12-05 14:13:15,383 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:13:15,384 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:13:15,385 - sqlalchemy.engine.Engine - INFO - [cached since 62.79s ago] ('528155210', 1, 0)
2024-12-05 14:13:15,491 - aiogram.event - INFO - Update id=659306642 is handled. Duration 109 ms by bot id=7444575424
2024-12-05 14:13:19,681 - aiogram.event - INFO - Update id=659306643 is handled. Duration 202 ms by bot id=7444575424
2024-12-05 14:13:21,439 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:13:21,440 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:13:21,441 - sqlalchemy.engine.Engine - INFO - [cached since 68.84s ago] ('528155210', 1, 0)
2024-12-05 14:13:21,455 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-05 14:13:21,455 - sqlalchemy.engine.Engine - INFO - [generated in 0.00110s] ('528155210',)
2024-12-05 14:13:22,932 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 14:13:23,008 - aiogram.event - INFO - Update id=659306644 is handled. Duration 1561 ms by bot id=7444575424
2024-12-05 14:13:27,186 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:13:27,191 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:13:27,191 - sqlalchemy.engine.Engine - INFO - [generated in 0.00138s] ('79', 1, 0)
2024-12-05 14:13:27,411 - aiogram.event - INFO - Update id=659306645 is handled. Duration 1390 ms by bot id=7444575424
2024-12-05 14:13:33,922 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:13:33,923 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:13:33,924 - sqlalchemy.engine.Engine - INFO - [cached since 6.734s ago] ('79', 1, 0)
2024-12-05 14:13:35,338 - aiogram.event - INFO - Update id=659306646 is handled. Duration 1422 ms by bot id=7444575424
2024-12-05 14:13:39,794 - aiogram.event - INFO - Update id=659306647 is handled. Duration 187 ms by bot id=7444575424
2024-12-05 14:13:40,732 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:13:40,734 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:13:40,735 - sqlalchemy.engine.Engine - INFO - [cached since 88.13s ago] ('528155210', 1, 0)
2024-12-05 14:13:40,738 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-05 14:13:40,739 - sqlalchemy.engine.Engine - INFO - [cached since 19.28s ago] ('528155210',)
2024-12-05 14:13:42,181 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 14:13:42,297 - aiogram.event - INFO - Update id=659306648 is handled. Duration 1577 ms by bot id=7444575424
2024-12-05 14:13:44,628 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:13:44,630 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:13:44,633 - sqlalchemy.engine.Engine - INFO - [cached since 17.44s ago] ('79', 1, 0)
2024-12-05 14:13:44,827 - aiogram.event - INFO - Update id=659306649 is handled. Duration 1437 ms by bot id=7444575424
2024-12-05 14:13:53,802 - aiogram.event - INFO - Update id=659306650 is handled. Duration 172 ms by bot id=7444575424
2024-12-05 14:14:00,520 - aiogram.event - INFO - Update id=659306651 is handled. Duration 94 ms by bot id=7444575424
2024-12-05 14:14:02,189 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:14:02,190 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:14:02,191 - sqlalchemy.engine.Engine - INFO - [cached since 35s ago] ('79', 1, 0)
2024-12-05 14:14:02,193 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-05 14:14:02,194 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:14:02,196 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-05 14:14:02,196 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] ('79',)
2024-12-05 14:14:02,565 - aiogram.event - INFO - Update id=659306652 is handled. Duration 375 ms by bot id=7444575424
2024-12-05 14:14:03,964 - aiogram.event - INFO - Update id=659306653 is handled. Duration 219 ms by bot id=7444575424
2024-12-05 14:14:05,286 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:14:05,287 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:14:05,288 - sqlalchemy.engine.Engine - INFO - [cached since 112.7s ago] ('528155210', 1, 0)
2024-12-05 14:14:05,291 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-05 14:14:05,291 - sqlalchemy.engine.Engine - INFO - [cached since 43.84s ago] ('528155210',)
2024-12-05 14:14:06,366 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 14:14:06,458 - aiogram.event - INFO - Update id=659306654 is handled. Duration 1172 ms by bot id=7444575424
2024-12-05 14:14:08,840 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:14:08,843 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:14:08,844 - sqlalchemy.engine.Engine - INFO - [cached since 41.65s ago] ('79', 1, 0)
2024-12-05 14:14:09,072 - aiogram.event - INFO - Update id=659306655 is handled. Duration 1406 ms by bot id=7444575424
2024-12-05 14:14:10,940 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:14:10,942 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:14:10,943 - sqlalchemy.engine.Engine - INFO - [cached since 43.75s ago] ('79', 1, 0)
2024-12-05 14:14:12,089 - aiogram.event - INFO - Update id=659306656 is handled. Duration 1172 ms by bot id=7444575424
2024-12-05 14:14:15,600 - aiogram.event - INFO - Update id=659306657 is handled. Duration 172 ms by bot id=7444575424
2024-12-05 14:14:18,162 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:14:18,164 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:14:18,165 - sqlalchemy.engine.Engine - INFO - [cached since 125.6s ago] ('528155210', 1, 0)
2024-12-05 14:14:18,169 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-05 14:14:18,170 - sqlalchemy.engine.Engine - INFO - [cached since 56.72s ago] ('528155210',)
2024-12-05 14:14:19,448 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 14:14:19,528 - aiogram.event - INFO - Update id=659306658 is handled. Duration 1375 ms by bot id=7444575424
2024-12-05 14:14:21,677 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:14:21,680 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:14:21,681 - sqlalchemy.engine.Engine - INFO - [cached since 54.49s ago] ('79', 1, 0)
2024-12-05 14:14:21,856 - aiogram.event - INFO - Update id=659306659 is handled. Duration 1484 ms by bot id=7444575424
2024-12-05 14:14:27,922 - aiogram.event - INFO - Update id=659306660 is handled. Duration 280 ms by bot id=7444575424
2024-12-05 14:14:28,910 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:14:28,912 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:14:28,912 - sqlalchemy.engine.Engine - INFO - [cached since 136.3s ago] ('528155210', 1, 0)
2024-12-05 14:14:28,915 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-05 14:14:28,916 - sqlalchemy.engine.Engine - INFO - [cached since 67.46s ago] ('528155210',)
2024-12-05 14:14:30,023 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 14:14:30,091 - aiogram.event - INFO - Update id=659306661 is handled. Duration 1187 ms by bot id=7444575424
2024-12-05 14:14:31,795 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:14:31,796 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:14:31,797 - sqlalchemy.engine.Engine - INFO - [cached since 64.61s ago] ('79', 1, 0)
2024-12-05 14:14:31,936 - aiogram.event - INFO - Update id=659306662 is handled. Duration 1078 ms by bot id=7444575424
2024-12-05 14:14:36,299 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:14:36,301 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:14:36,302 - sqlalchemy.engine.Engine - INFO - [cached since 69.11s ago] ('79', 1, 0)
2024-12-05 14:14:36,460 - aiogram.event - INFO - Update id=659306663 is handled. Duration 157 ms by bot id=7444575424
2024-12-05 14:14:37,918 - aiogram.event - INFO - Update id=659306664 is handled. Duration 250 ms by bot id=7444575424
2024-12-05 14:14:50,711 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:14:50,712 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:14:50,713 - sqlalchemy.engine.Engine - INFO - [cached since 158.1s ago] ('528155210', 1, 0)
2024-12-05 14:14:50,718 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-05 14:14:50,719 - sqlalchemy.engine.Engine - INFO - [cached since 89.26s ago] ('528155210',)
2024-12-05 14:14:52,049 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 14:14:52,139 - aiogram.event - INFO - Update id=659306665 is handled. Duration 1437 ms by bot id=7444575424
2024-12-05 14:14:53,976 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:14:53,978 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:14:53,979 - sqlalchemy.engine.Engine - INFO - [cached since 86.79s ago] ('79', 1, 0)
2024-12-05 14:14:54,136 - aiogram.event - INFO - Update id=659306666 is handled. Duration 1109 ms by bot id=7444575424
2024-12-05 14:14:56,500 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:14:56,501 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:14:56,502 - sqlalchemy.engine.Engine - INFO - [cached since 89.31s ago] ('79', 1, 0)
2024-12-05 14:14:56,504 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-05 14:14:56,608 - aiogram.event - INFO - Update id=659306667 is handled. Duration 125 ms by bot id=7444575424
2024-12-05 14:14:58,406 - aiogram.event - INFO - Update id=659306668 is handled. Duration 202 ms by bot id=7444575424
2024-12-05 14:14:59,517 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:14:59,519 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:14:59,520 - sqlalchemy.engine.Engine - INFO - [cached since 166.9s ago] ('528155210', 1, 0)
2024-12-05 14:14:59,524 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-05 14:14:59,525 - sqlalchemy.engine.Engine - INFO - [cached since 98.07s ago] ('528155210',)
2024-12-05 14:15:01,932 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 14:15:02,033 - aiogram.event - INFO - Update id=659306669 is handled. Duration 2515 ms by bot id=7444575424
2024-12-05 14:15:06,404 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:15:06,406 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:15:06,406 - sqlalchemy.engine.Engine - INFO - [cached since 99.22s ago] ('79', 1, 0)
2024-12-05 14:15:06,602 - aiogram.event - INFO - Update id=659306670 is handled. Duration 1390 ms by bot id=7444575424
2024-12-05 14:15:14,509 - aiogram.event - INFO - Update id=659306671 is handled. Duration 342 ms by bot id=7444575424
2024-12-05 14:15:18,221 - aiogram.event - INFO - Update id=659306672 is handled. Duration 109 ms by bot id=7444575424
2024-12-05 14:15:19,791 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:15:19,793 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:15:19,793 - sqlalchemy.engine.Engine - INFO - [cached since 112.6s ago] ('79', 1, 0)
2024-12-05 14:15:19,796 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-05 14:15:19,798 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:15:19,799 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-05 14:15:19,800 - sqlalchemy.engine.Engine - INFO - [cached since 77.6s ago] ('79',)
2024-12-05 14:15:20,147 - aiogram.event - INFO - Update id=659306673 is handled. Duration 359 ms by bot id=7444575424
2024-12-05 14:15:21,534 - aiogram.event - INFO - Update id=659306674 is handled. Duration 250 ms by bot id=7444575424
2024-12-05 14:15:22,533 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:15:22,535 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:15:22,536 - sqlalchemy.engine.Engine - INFO - [cached since 189.9s ago] ('528155210', 1, 0)
2024-12-05 14:15:22,539 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-05 14:15:22,540 - sqlalchemy.engine.Engine - INFO - [cached since 121.1s ago] ('528155210',)
2024-12-05 14:15:23,949 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 14:15:24,137 - aiogram.event - INFO - Update id=659306675 is handled. Duration 1609 ms by bot id=7444575424
2024-12-05 14:15:26,239 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:15:26,241 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:15:26,242 - sqlalchemy.engine.Engine - INFO - [cached since 119.1s ago] ('79', 1, 0)
2024-12-05 14:15:26,402 - aiogram.event - INFO - Update id=659306676 is handled. Duration 1468 ms by bot id=7444575424
2024-12-05 14:15:28,734 - aiogram.event - INFO - Update id=659306677 is handled. Duration 187 ms by bot id=7444575424
2024-12-05 14:15:30,961 - aiogram.event - INFO - Update id=659306678 is handled. Duration 157 ms by bot id=7444575424
2024-12-05 14:15:32,239 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:15:32,241 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:15:32,241 - sqlalchemy.engine.Engine - INFO - [cached since 125.1s ago] ('79', 1, 0)
2024-12-05 14:15:32,244 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-05 14:15:32,245 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:15:32,246 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-05 14:15:32,247 - sqlalchemy.engine.Engine - INFO - [cached since 90.05s ago] ('79',)
2024-12-05 14:15:32,574 - aiogram.event - INFO - Update id=659306679 is handled. Duration 344 ms by bot id=7444575424
2024-12-05 14:15:33,976 - aiogram.event - INFO - Update id=659306680 is handled. Duration 297 ms by bot id=7444575424
2024-12-05 14:15:35,372 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:15:35,373 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:15:35,374 - sqlalchemy.engine.Engine - INFO - [cached since 202.8s ago] ('528155210', 1, 0)
2024-12-05 14:15:35,377 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-05 14:15:35,378 - sqlalchemy.engine.Engine - INFO - [cached since 133.9s ago] ('528155210',)
2024-12-05 14:15:36,441 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 14:15:36,540 - aiogram.event - INFO - Update id=659306681 is handled. Duration 1172 ms by bot id=7444575424
2024-12-05 14:15:41,740 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:15:41,742 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:15:41,742 - sqlalchemy.engine.Engine - INFO - [cached since 134.6s ago] ('79', 1, 0)
2024-12-05 14:15:41,911 - aiogram.event - INFO - Update id=659306682 is handled. Duration 1282 ms by bot id=7444575424
2024-12-05 14:15:44,916 - aiogram.event - INFO - Update id=659306683 is handled. Duration 282 ms by bot id=7444575424
2024-12-05 14:15:46,612 - aiogram.event - INFO - Update id=659306684 is handled. Duration 390 ms by bot id=7444575424
2024-12-05 14:15:48,070 - aiogram.event - INFO - Update id=659306685 is handled. Duration 422 ms by bot id=7444575424
2024-12-05 14:16:19,395 - aiogram.event - INFO - Update id=659306686 is handled. Duration 234 ms by bot id=7444575424
2024-12-05 14:16:24,681 - root - INFO - {
    "message_id": 2567,
    "date": 1733397385,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 12000,
        "invoice_payload": "fe940c6d-a5f1-4741-9df2-8cf9369d5ae5",
        "telegram_payment_charge_id": "7444575424_528155210_329406",
        "provider_payment_charge_id": "7444575424_528155210_329406",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-05 14:16:26,059 - root - INFO - Key created: OutlineKey(key_id='80', name='VPN Key66', password='HD8G4Y6OWBESeNYNNFyEN4', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpIRDhHNFk2T1dCRVNlTllOTkZ5RU40@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-05 14:16:26,060 - root - INFO - Key created: OutlineKey(key_id='80', name='VPN Key66', password='HD8G4Y6OWBESeNYNNFyEN4', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpIRDhHNFk2T1dCRVNlTllOTkZ5RU40@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-05 14:16:26,199 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:16:26,202 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:16:26,203 - sqlalchemy.engine.Engine - INFO - [cached since 253.6s ago] ('528155210', 1, 0)
2024-12-05 14:16:26,209 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-05 14:16:26,210 - sqlalchemy.engine.Engine - INFO - [cached since 220s ago] ('80', '528155210', '2025-03-05 14:16:26.206398', '2024-12-05 14:16:26.206398', 0)
2024-12-05 14:16:26,217 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-05 14:16:26,229 - aiogram.event - INFO - Update id=659306687 is handled. Duration 1547 ms by bot id=7444575424
2024-12-05 14:16:33,711 - aiogram.event - INFO - Update id=659306688 is handled. Duration 172 ms by bot id=7444575424
2024-12-05 14:16:34,956 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:16:34,957 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:16:34,958 - sqlalchemy.engine.Engine - INFO - [cached since 262.4s ago] ('528155210', 1, 0)
2024-12-05 14:16:34,961 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-05 14:16:34,962 - sqlalchemy.engine.Engine - INFO - [cached since 193.5s ago] ('528155210',)
2024-12-05 14:16:37,858 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 14:16:37,992 - aiogram.event - INFO - Update id=659306689 is handled. Duration 3030 ms by bot id=7444575424
2024-12-05 14:16:41,544 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:16:41,546 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:16:41,548 - sqlalchemy.engine.Engine - INFO - [cached since 194.4s ago] ('80', 1, 0)
2024-12-05 14:16:41,712 - aiogram.event - INFO - Update id=659306690 is handled. Duration 1437 ms by bot id=7444575424
2024-12-05 14:16:44,694 - aiogram.event - INFO - Update id=659306691 is handled. Duration 188 ms by bot id=7444575424
2024-12-05 14:16:48,684 - aiogram.event - INFO - Update id=659306692 is handled. Duration 109 ms by bot id=7444575424
2024-12-05 14:16:49,726 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:16:49,727 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:16:49,727 - sqlalchemy.engine.Engine - INFO - [cached since 202.5s ago] ('80', 1, 0)
2024-12-05 14:16:49,729 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-05 14:16:49,730 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:16:49,731 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-05 14:16:49,731 - sqlalchemy.engine.Engine - INFO - [cached since 167.5s ago] ('80',)
2024-12-05 14:16:50,034 - aiogram.event - INFO - Update id=659306693 is handled. Duration 312 ms by bot id=7444575424
2024-12-05 14:16:51,187 - aiogram.event - INFO - Update id=659306694 is handled. Duration 219 ms by bot id=7444575424
2024-12-05 14:16:52,227 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:16:52,229 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:16:52,230 - sqlalchemy.engine.Engine - INFO - [cached since 279.6s ago] ('528155210', 1, 0)
2024-12-05 14:16:52,233 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-05 14:16:52,234 - sqlalchemy.engine.Engine - INFO - [cached since 210.8s ago] ('528155210',)
2024-12-05 14:16:54,608 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 14:16:54,672 - aiogram.event - INFO - Update id=659306695 is handled. Duration 2452 ms by bot id=7444575424
2024-12-05 14:16:57,579 - aiogram.event - INFO - Update id=659306696 is handled. Duration 172 ms by bot id=7444575424
2024-12-05 14:16:59,623 - aiogram.event - INFO - Update id=659306697 is handled. Duration 342 ms by bot id=7444575424
2024-12-05 14:17:00,647 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:17:00,649 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:17:00,650 - sqlalchemy.engine.Engine - INFO - [cached since 288.1s ago] ('528155210', 1, 0)
2024-12-05 14:17:00,783 - aiogram.event - INFO - Update id=659306698 is handled. Duration 140 ms by bot id=7444575424
2024-12-05 14:17:02,014 - aiogram.event - INFO - Update id=659306699 is handled. Duration 219 ms by bot id=7444575424
2024-12-05 14:17:03,180 - aiogram.event - INFO - Update id=659306700 is handled. Duration 265 ms by bot id=7444575424
2024-12-05 14:17:04,598 - aiogram.event - INFO - Update id=659306701 is handled. Duration 172 ms by bot id=7444575424
2024-12-05 14:17:05,526 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:17:05,527 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:17:05,529 - sqlalchemy.engine.Engine - INFO - [cached since 292.9s ago] ('528155210', 1, 0)
2024-12-05 14:17:05,532 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-05 14:17:05,532 - sqlalchemy.engine.Engine - INFO - [cached since 224.1s ago] ('528155210',)
2024-12-05 14:17:08,027 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 14:17:08,093 - aiogram.event - INFO - Update id=659306702 is handled. Duration 2577 ms by bot id=7444575424
2024-12-05 14:17:11,648 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:17:11,650 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:17:11,652 - sqlalchemy.engine.Engine - INFO - [cached since 224.5s ago] ('80', 1, 0)
2024-12-05 14:17:11,844 - aiogram.event - INFO - Update id=659306703 is handled. Duration 2234 ms by bot id=7444575424
2024-12-05 14:17:14,612 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:17:14,614 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:17:14,614 - sqlalchemy.engine.Engine - INFO - [cached since 227.4s ago] ('80', 1, 0)
2024-12-05 14:17:14,701 - aiogram.event - INFO - Update id=659306704 is handled. Duration 94 ms by bot id=7444575424
2024-12-05 14:17:18,202 - aiogram.event - INFO - Update id=659306705 is handled. Duration 187 ms by bot id=7444575424
2024-12-05 14:17:20,924 - aiogram.event - INFO - Update id=659306706 is handled. Duration 280 ms by bot id=7444575424
2024-12-05 14:17:23,637 - aiogram.event - INFO - Update id=659306707 is handled. Duration 172 ms by bot id=7444575424
2024-12-05 14:17:55,781 - aiogram.event - INFO - Update id=659306708 is handled. Duration 297 ms by bot id=7444575424
2024-12-05 14:18:05,306 - root - INFO - {
    "message_id": 2592,
    "date": 1733397486,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 6000,
        "invoice_payload": "0d636997-9047-4ab5-bd74-ee2d0d14f693",
        "telegram_payment_charge_id": "7444575424_528155210_329431",
        "provider_payment_charge_id": "7444575424_528155210_329431",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-05 14:18:06,700 - root - INFO - Key created: OutlineKey(key_id='81', name='VPN Key67', password='Rwd8KSBzen0py90LHIm0Rv', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpSd2Q4S1NCemVuMHB5OTBMSEltMFJ2@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-05 14:18:06,701 - root - INFO - Key created: OutlineKey(key_id='81', name='VPN Key67', password='Rwd8KSBzen0py90LHIm0Rv', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpSd2Q4S1NCemVuMHB5OTBMSEltMFJ2@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-05 14:18:06,838 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:18:06,840 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:18:06,841 - sqlalchemy.engine.Engine - INFO - [cached since 354.2s ago] ('528155210', 1, 0)
2024-12-05 14:18:06,845 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-05 14:18:06,846 - sqlalchemy.engine.Engine - INFO - [cached since 320.6s ago] ('81', '528155210', '2025-01-04 14:18:06.844383', '2024-12-05 14:18:06.844383', 0)
2024-12-05 14:18:06,855 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-05 14:18:06,865 - aiogram.event - INFO - Update id=659306709 is handled. Duration 1562 ms by bot id=7444575424
2024-12-05 14:18:12,702 - aiogram.event - INFO - Update id=659306710 is handled. Duration 359 ms by bot id=7444575424
2024-12-05 14:18:15,047 - aiogram.event - INFO - Update id=659306711 is handled. Duration 297 ms by bot id=7444575424
2024-12-05 14:18:16,691 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:18:16,694 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:18:16,695 - sqlalchemy.engine.Engine - INFO - [cached since 364.1s ago] ('528155210', 1, 0)
2024-12-05 14:18:16,698 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-05 14:18:16,698 - sqlalchemy.engine.Engine - INFO - [cached since 295.2s ago] ('528155210',)
2024-12-05 14:18:20,985 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 14:18:21,051 - aiogram.event - INFO - Update id=659306712 is handled. Duration 4358 ms by bot id=7444575424
2024-12-05 14:18:23,641 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:18:23,643 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:18:23,645 - sqlalchemy.engine.Engine - INFO - [cached since 296.5s ago] ('81', 1, 0)
2024-12-05 14:18:23,793 - aiogram.event - INFO - Update id=659306713 is handled. Duration 1592 ms by bot id=7444575424
2024-12-05 14:18:27,059 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:18:27,060 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:18:27,061 - sqlalchemy.engine.Engine - INFO - [cached since 299.9s ago] ('81', 1, 0)
2024-12-05 14:18:27,834 - aiogram.event - INFO - Update id=659306714 is handled. Duration 782 ms by bot id=7444575424
2024-12-05 14:18:29,813 - aiogram.event - INFO - Update id=659306715 is handled. Duration 469 ms by bot id=7444575424
2024-12-05 14:18:30,860 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:18:30,862 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:18:30,863 - sqlalchemy.engine.Engine - INFO - [cached since 378.3s ago] ('528155210', 1, 0)
2024-12-05 14:18:30,867 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-05 14:18:30,867 - sqlalchemy.engine.Engine - INFO - [cached since 309.4s ago] ('528155210',)
2024-12-05 14:18:34,672 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 14:18:34,744 - aiogram.event - INFO - Update id=659306716 is handled. Duration 3875 ms by bot id=7444575424
2024-12-05 14:18:37,326 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:18:37,329 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:18:37,330 - sqlalchemy.engine.Engine - INFO - [cached since 310.1s ago] ('81', 1, 0)
2024-12-05 14:18:37,473 - aiogram.event - INFO - Update id=659306717 is handled. Duration 1234 ms by bot id=7444575424
2024-12-05 14:18:42,611 - aiogram.event - INFO - Update id=659306718 is handled. Duration 93 ms by bot id=7444575424
2024-12-05 14:18:47,511 - aiogram.event - INFO - Update id=659306719 is handled. Duration 109 ms by bot id=7444575424
2024-12-05 14:18:48,781 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:18:48,783 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:18:48,784 - sqlalchemy.engine.Engine - INFO - [cached since 321.6s ago] ('81', 1, 0)
2024-12-05 14:18:48,788 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-05 14:18:48,791 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:18:48,792 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-05 14:18:48,793 - sqlalchemy.engine.Engine - INFO - [cached since 286.6s ago] ('81',)
2024-12-05 14:18:49,133 - aiogram.event - INFO - Update id=659306720 is handled. Duration 342 ms by bot id=7444575424
2024-12-05 14:18:50,449 - aiogram.event - INFO - Update id=659306721 is handled. Duration 204 ms by bot id=7444575424
2024-12-05 14:18:51,572 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:18:51,574 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:18:51,574 - sqlalchemy.engine.Engine - INFO - [cached since 399s ago] ('528155210', 1, 0)
2024-12-05 14:18:51,579 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-05 14:18:51,580 - sqlalchemy.engine.Engine - INFO - [cached since 330.1s ago] ('528155210',)
2024-12-05 14:18:54,687 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 14:18:54,790 - aiogram.event - INFO - Update id=659306722 is handled. Duration 3218 ms by bot id=7444575424
2024-12-05 14:18:57,612 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:18:57,613 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:18:57,614 - sqlalchemy.engine.Engine - INFO - [cached since 330.4s ago] ('81', 1, 0)
2024-12-05 14:18:57,756 - aiogram.event - INFO - Update id=659306723 is handled. Duration 1420 ms by bot id=7444575424
2024-12-05 14:18:59,346 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 14:18:59,347 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-05 14:18:59,348 - sqlalchemy.engine.Engine - INFO - [cached since 332.2s ago] ('81', 1, 0)
2024-12-05 14:19:00,543 - aiogram.event - INFO - Update id=659306724 is handled. Duration 1202 ms by bot id=7444575424
2024-12-05 14:19:01,940 - aiogram.event - INFO - Update id=659306725 is handled. Duration 172 ms by bot id=7444575424
2024-12-05 14:19:10,299 - aiogram.event - INFO - Update id=659306726 is not handled. Duration 0 ms by bot id=7444575424
2024-12-05 14:19:23,023 - aiogram.dispatcher - INFO - Polling stopped
2024-12-05 14:19:23,290 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-05 14:19:23,295 - root - INFO - Бот остановлен вручную.
2024-12-05 22:25:48,054 - root - INFO - Инициализация бота...
2024-12-05 22:25:48,997 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 22:25:48,998 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-05 22:25:48,998 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-05 22:25:49,002 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-05 22:25:49,002 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-05 22:25:49,002 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-05 22:25:49,003 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-05 22:25:49,003 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-05 22:25:49,003 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-05 22:25:49,005 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-05 22:25:49,005 - sqlalchemy.engine.Engine - INFO - [no key 0.00030s] ()
2024-12-05 22:25:49,015 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-05 22:25:49,016 - sqlalchemy.engine.Engine - INFO - [no key 0.00034s] ()
2024-12-05 22:25:49,023 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-05 22:25:49,067 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-05 22:25:49,067 - root - INFO - Инициализация диспетчера...
2024-12-05 22:25:49,068 - root - INFO - Регистрация обработчиков...
2024-12-05 22:25:49,070 - root - INFO - Запуск polling...
2024-12-05 22:25:49,072 - aiogram.dispatcher - INFO - Start polling
2024-12-05 22:25:49,079 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 22:25:49,082 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-05 22:25:49,082 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ()
2024-12-05 22:25:49,444 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-05 22:25:49,822 - aiogram.event - INFO - Update id=659306728 is handled. Duration 233 ms by bot id=7444575424
2024-12-05 22:25:49,824 - aiogram.event - INFO - Update id=659306727 is handled. Duration 233 ms by bot id=7444575424
2024-12-05 22:25:49,839 - aiogram.event - INFO - Update id=659306729 is handled. Duration 250 ms by bot id=7444575424
2024-12-05 22:25:52,233 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 22:25:52,237 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 22:25:52,237 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] ('528155210', 1, 0)
2024-12-05 22:25:52,320 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 22:25:52,395 - aiogram.event - INFO - Update id=659306730 is handled. Duration 172 ms by bot id=7444575424
2024-12-05 22:25:54,609 - aiogram.event - INFO - Update id=659306731 is handled. Duration 140 ms by bot id=7444575424
2024-12-05 22:25:55,519 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 22:25:55,522 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 22:25:55,523 - sqlalchemy.engine.Engine - INFO - [cached since 3.286s ago] ('528155210', 1, 0)
2024-12-05 22:25:55,528 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-05 22:25:55,529 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] ('528155210', 'active', 0)
2024-12-05 22:25:55,534 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-05 22:25:55,545 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 22:25:55,548 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-05 22:25:55,549 - sqlalchemy.engine.Engine - INFO - [generated in 0.00117s] ('528155210',)
2024-12-05 22:25:55,556 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-05 22:25:55,556 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] (1, '528155210')
2024-12-05 22:25:55,560 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-05 22:25:56,596 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 22:25:56,601 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-05 22:25:56,601 - sqlalchemy.engine.Engine - INFO - [generated in 0.00110s] ('67', '528155210', '2024-12-07 22:25:56.595163', '2024-12-05 22:25:56.595163', 0)
2024-12-05 22:25:56,606 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-05 22:25:56,616 - root - INFO - Key created: OutlineKey(key_id='67', name='VPN Key54', password='Ztyr94Cl9C5HSW9Aic8lbK', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpadHlyOTRDbDlDNUhTVzlBaWM4bGJL@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 7444575424
2024-12-05 22:25:56,767 - aiogram.event - INFO - Update id=659306732 is handled. Duration 1250 ms by bot id=7444575424
2024-12-05 22:25:58,349 - aiogram.event - INFO - Update id=659306733 is handled. Duration 250 ms by bot id=7444575424
2024-12-05 22:25:59,434 - aiogram.event - INFO - Update id=659306734 is handled. Duration 140 ms by bot id=7444575424
2024-12-05 22:26:00,664 - aiogram.event - INFO - Update id=659306735 is handled. Duration 202 ms by bot id=7444575424
2024-12-05 22:26:02,547 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-05 22:26:02,548 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-05 22:26:02,548 - sqlalchemy.engine.Engine - INFO - [cached since 10.31s ago] ('528155210', 1, 0)
2024-12-05 22:26:02,553 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-05 22:26:02,553 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('528155210',)
2024-12-05 22:26:03,916 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-05 22:26:04,151 - aiogram.event - INFO - Update id=659306736 is handled. Duration 1609 ms by bot id=7444575424
2024-12-05 22:26:20,482 - aiogram.dispatcher - INFO - Polling stopped
2024-12-05 22:26:20,737 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-05 22:26:20,747 - root - INFO - Бот остановлен вручную.
2024-12-07 02:13:14,820 - root - INFO - Инициализация бота...
2024-12-07 02:13:16,391 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:13:16,391 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:13:16,392 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:13:16,394 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:13:16,394 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:13:16,396 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:13:48,081 - root - INFO - Инициализация бота...
2024-12-07 02:13:48,448 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:13:48,448 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:13:48,448 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:13:48,449 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:13:48,449 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:13:48,450 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:13:48,492 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:13:48,492 - root - INFO - Инициализация диспетчера...
2024-12-07 02:13:48,493 - root - INFO - Регистрация обработчиков...
2024-12-07 02:13:48,494 - root - INFO - Запуск polling...
2024-12-07 02:13:48,494 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:13:48,500 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:13:48,502 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:13:48,502 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ()
2024-12-07 02:13:48,505 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:13:48,505 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ('528155210',)
2024-12-07 02:13:48,506 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:13:48,507 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:13:48,507 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:13:48,508 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ('528155210',)
2024-12-07 02:14:09,629 - root - ERROR - Ошибка проверки базы данных: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:14:09,629 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-2' coro=<DbProcessor.check_db() done, defined at C:\Users\Хороший человек\Documents\coding\LISA\src\database\db_processor.py:74> exception=TelegramNetworkError('HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]')>
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 494, in finish_recv
    return ov.getresult()
           ^^^^^^^^^^^^^^
OSError: [WinError 64] Указанное сетевое имя более недоступно

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1116, in _wrap_create_connection
    return await self._loop.create_connection(*args, **kwargs, sock=sock)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1112, in create_connection
    transport, protocol = await self._create_connection_transport(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1145, in _create_connection_transport
    await waiter
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 286, in _loop_reading
    length = fut.result()
             ^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 846, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 498, in finish_recv
    raise ConnectionResetError(*exc.args)
ConnectionResetError: [WinError 64] Указанное сетевое имя более недоступно

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 181, in make_request
    async with session.post(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 1360, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 663, in _request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 538, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1050, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1384, in _create_direct_connection
    raise last_exc
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1353, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1124, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\database\db_processor.py", line 87, in check_db
    await send_message_subscription_ends(user)
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\send_message.py", line 42, in send_message_subscription_ends
    await bot.send_message(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2962, in send_message
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 188, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:14:09,669 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:14:09,925 - root - ERROR - Произошла ошибка при запуске бота: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:14:34,821 - root - INFO - Инициализация бота...
2024-12-07 02:14:35,378 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:14:35,379 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:14:35,380 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:14:35,383 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:14:35,383 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:14:35,384 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:14:35,421 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:14:35,421 - root - INFO - Инициализация диспетчера...
2024-12-07 02:14:35,422 - root - INFO - Регистрация обработчиков...
2024-12-07 02:14:35,424 - root - INFO - Запуск polling...
2024-12-07 02:14:35,424 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:14:35,433 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:14:35,436 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:14:35,436 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ()
2024-12-07 02:14:35,440 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:14:35,440 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ('528155210',)
2024-12-07 02:14:35,441 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:14:35,442 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:14:35,443 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:14:35,443 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('528155210',)
2024-12-07 02:14:35,769 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:15:07,015 - aiogram.event - INFO - Update id=659306860 is handled. Duration 234 ms by bot id=7444575424
2024-12-07 02:15:09,074 - aiogram.event - INFO - Update id=659306861 is not handled. Duration 0 ms by bot id=7444575424
2024-12-07 02:15:09,074 - aiogram.event - ERROR - Cause exception while process update id=659306861 by bot id=7444575424
AttributeError: ABOUT_US
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 55, in main_menu_handler
    await show_about_us(callback, state)
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\about_us_router.py", line 18, in show_about_us
    await callback.message.answer(INFO.ABOUT_US, reply_markup=get_about_us_keyboard())
                                  ^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\enum.py", line 783, in __getattr__
    raise AttributeError(name) from None
AttributeError: ABOUT_US
2024-12-07 02:15:30,685 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:15:30,942 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:15:30,945 - root - INFO - Бот остановлен вручную.
2024-12-07 02:15:37,496 - root - INFO - Инициализация бота...
2024-12-07 02:15:38,037 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:15:38,038 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:15:38,038 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:15:38,040 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:15:38,041 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:15:38,041 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:15:38,075 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:15:38,075 - root - INFO - Инициализация диспетчера...
2024-12-07 02:15:38,077 - root - INFO - Регистрация обработчиков...
2024-12-07 02:15:38,080 - root - INFO - Запуск polling...
2024-12-07 02:15:38,080 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:15:38,092 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:15:38,097 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:15:38,097 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] ()
2024-12-07 02:15:38,101 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:15:38,102 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] ('528155210',)
2024-12-07 02:15:38,103 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:15:38,104 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:15:38,106 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:15:38,107 - sqlalchemy.engine.Engine - INFO - [generated in 0.00091s] ('528155210',)
2024-12-07 02:15:57,046 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:15:57,312 - root - INFO - Бот остановлен вручную.
2024-12-07 02:16:01,901 - root - INFO - Инициализация бота...
2024-12-07 02:16:02,339 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:16:02,339 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:16:02,340 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:16:02,341 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:16:02,341 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:16:02,341 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:16:02,364 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:16:02,364 - root - INFO - Инициализация диспетчера...
2024-12-07 02:16:02,365 - root - INFO - Регистрация обработчиков...
2024-12-07 02:16:02,367 - root - INFO - Запуск polling...
2024-12-07 02:16:02,367 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:16:02,373 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:16:02,375 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:16:02,375 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ()
2024-12-07 02:16:02,378 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:16:02,378 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] ('528155210',)
2024-12-07 02:16:02,379 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:16:02,380 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:16:02,381 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:16:02,381 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('528155210',)
2024-12-07 02:16:02,737 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:16:03,009 - aiogram.event - INFO - Update id=659306862 is handled. Duration 156 ms by bot id=7444575424
2024-12-07 02:16:03,069 - aiogram.event - INFO - Update id=659306863 is handled. Duration 219 ms by bot id=7444575424
2024-12-07 02:16:05,260 - aiogram.event - INFO - Update id=659306864 is handled. Duration 359 ms by bot id=7444575424
2024-12-07 02:17:08,558 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:17:08,973 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:17:08,976 - root - INFO - Бот остановлен вручную.
2024-12-07 02:17:25,826 - root - INFO - Инициализация бота...
2024-12-07 02:17:26,158 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:17:26,158 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:17:26,159 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:17:26,159 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:17:26,159 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:17:26,160 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:17:26,183 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:17:26,184 - root - INFO - Инициализация диспетчера...
2024-12-07 02:17:26,185 - root - INFO - Регистрация обработчиков...
2024-12-07 02:17:26,186 - root - INFO - Запуск polling...
2024-12-07 02:17:26,186 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:17:26,192 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:17:26,194 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:17:26,194 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
2024-12-07 02:17:26,196 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:17:26,197 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ('528155210',)
2024-12-07 02:17:26,197 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:17:26,198 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:17:26,198 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:17:26,199 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ('528155210',)
2024-12-07 02:17:38,015 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:17:38,286 - root - INFO - Бот остановлен вручную.
2024-12-07 02:17:41,395 - root - INFO - Инициализация бота...
2024-12-07 02:17:41,688 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:17:41,689 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:17:41,689 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:17:41,690 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:17:41,690 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:17:41,690 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:17:41,705 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:17:41,705 - root - INFO - Инициализация диспетчера...
2024-12-07 02:17:41,705 - root - INFO - Регистрация обработчиков...
2024-12-07 02:17:41,706 - root - INFO - Запуск polling...
2024-12-07 02:17:41,707 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:17:41,712 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:17:41,713 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:17:41,713 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ()
2024-12-07 02:17:41,715 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:17:41,715 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('528155210',)
2024-12-07 02:17:41,716 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:17:41,716 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:17:41,717 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:17:41,717 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('528155210',)
2024-12-07 02:17:42,000 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:17:42,550 - aiogram.event - INFO - Update id=659306865 is handled. Duration 422 ms by bot id=7444575424
2024-12-07 02:17:44,464 - aiogram.event - INFO - Update id=659306867 is handled. Duration 188 ms by bot id=7444575424
2024-12-07 02:17:50,481 - aiogram.event - INFO - Update id=659306868 is handled. Duration 202 ms by bot id=7444575424
2024-12-07 02:17:56,414 - aiogram.event - INFO - Update id=659306869 is handled. Duration 250 ms by bot id=7444575424
2024-12-07 02:17:58,163 - aiogram.event - INFO - Update id=659306870 is handled. Duration 250 ms by bot id=7444575424
2024-12-07 02:18:00,133 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:18:37,623 - root - INFO - Инициализация бота...
2024-12-07 02:18:37,993 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:18:37,994 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:18:37,994 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:18:37,995 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:18:37,995 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:18:37,995 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:18:38,021 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:18:38,021 - root - INFO - Инициализация диспетчера...
2024-12-07 02:18:38,021 - root - INFO - Регистрация обработчиков...
2024-12-07 02:18:38,022 - root - INFO - Запуск polling...
2024-12-07 02:18:38,023 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:18:38,028 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:18:38,030 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:18:38,030 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ()
2024-12-07 02:18:38,033 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:18:38,033 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('528155210',)
2024-12-07 02:18:38,034 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:18:38,034 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:18:38,036 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:18:38,036 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('528155210',)
2024-12-07 02:18:51,374 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:18:51,637 - root - INFO - Бот остановлен вручную.
2024-12-07 02:18:55,285 - root - INFO - Инициализация бота...
2024-12-07 02:18:55,731 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:18:55,732 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:18:55,732 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:18:55,733 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:18:55,733 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:18:55,734 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:18:55,760 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:18:55,760 - root - INFO - Инициализация диспетчера...
2024-12-07 02:18:55,760 - root - INFO - Регистрация обработчиков...
2024-12-07 02:18:55,762 - root - INFO - Запуск polling...
2024-12-07 02:18:55,762 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:18:55,768 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:18:55,771 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:18:55,771 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ()
2024-12-07 02:18:55,775 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:18:55,775 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ('528155210',)
2024-12-07 02:18:55,776 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:18:55,776 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:18:55,777 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:18:55,777 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ('528155210',)
2024-12-07 02:18:56,092 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:18:56,328 - aiogram.event - INFO - Update id=659306871 is handled. Duration 156 ms by bot id=7444575424
2024-12-07 02:18:57,818 - aiogram.event - INFO - Update id=659306872 is handled. Duration 219 ms by bot id=7444575424
2024-12-07 02:21:12,542 - aiogram.event - INFO - Update id=659306873 is handled. Duration 468 ms by bot id=7444575424
2024-12-07 02:21:14,029 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:21:14,030 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:21:14,030 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ('528155210', 1, 0)
2024-12-07 02:21:14,031 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:21:14,032 - sqlalchemy.engine.Engine - INFO - [cached since 138.3s ago] ('528155210',)
2024-12-07 02:21:15,036 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 02:21:15,110 - aiogram.event - INFO - Update id=659306874 is handled. Duration 1094 ms by bot id=7444575424
2024-12-07 02:21:17,033 - aiogram.event - INFO - Update id=659306875 is handled. Duration 156 ms by bot id=7444575424
2024-12-07 02:21:20,041 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:21:20,041 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:21:20,042 - sqlalchemy.engine.Engine - INFO - [cached since 6.012s ago] ('528155210', 1, 0)
2024-12-07 02:21:20,042 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:21:20,042 - sqlalchemy.engine.Engine - INFO - [cached since 144.3s ago] ('528155210',)
2024-12-07 02:21:21,062 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 02:21:21,136 - aiogram.event - INFO - Update id=659306876 is handled. Duration 1093 ms by bot id=7444575424
2024-12-07 02:21:22,901 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:21:22,902 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:21:22,902 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ('67', 1, 0)
2024-12-07 02:21:23,066 - aiogram.event - INFO - Update id=659306877 is handled. Duration 1015 ms by bot id=7444575424
2024-12-07 02:21:24,810 - aiogram.event - INFO - Update id=659306878 is handled. Duration 156 ms by bot id=7444575424
2024-12-07 02:21:31,440 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:21:31,700 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:21:31,701 - root - INFO - Бот остановлен вручную.
2024-12-07 02:22:58,934 - root - INFO - Инициализация бота...
2024-12-07 02:22:59,280 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:22:59,280 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:22:59,280 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:22:59,281 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:22:59,281 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:22:59,281 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:22:59,298 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:22:59,298 - root - INFO - Инициализация диспетчера...
2024-12-07 02:22:59,299 - root - INFO - Регистрация обработчиков...
2024-12-07 02:22:59,300 - root - INFO - Запуск polling...
2024-12-07 02:22:59,300 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:22:59,305 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:22:59,307 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:22:59,307 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ()
2024-12-07 02:22:59,310 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:22:59,310 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ('528155210',)
2024-12-07 02:22:59,311 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:22:59,311 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:22:59,312 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:22:59,312 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('528155210',)
2024-12-07 02:23:11,724 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:23:11,990 - root - INFO - Бот остановлен вручную.
2024-12-07 02:23:16,281 - root - INFO - Инициализация бота...
2024-12-07 02:23:16,674 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:23:16,674 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:23:16,674 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:23:16,675 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:23:16,675 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:23:16,676 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:23:16,697 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:23:16,697 - root - INFO - Инициализация диспетчера...
2024-12-07 02:23:16,697 - root - INFO - Регистрация обработчиков...
2024-12-07 02:23:16,699 - root - INFO - Запуск polling...
2024-12-07 02:23:16,699 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:23:16,705 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:23:16,708 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:23:16,709 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ()
2024-12-07 02:23:16,712 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:23:16,712 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ('528155210',)
2024-12-07 02:23:16,713 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:23:16,713 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:23:16,714 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:23:16,714 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ('528155210',)
2024-12-07 02:23:22,624 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:23:22,875 - root - INFO - Бот остановлен вручную.
2024-12-07 02:23:27,596 - root - INFO - Инициализация бота...
2024-12-07 02:23:28,134 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:23:28,135 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:23:28,135 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:23:28,136 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:23:28,137 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:23:28,137 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:23:28,167 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:23:28,167 - root - INFO - Инициализация диспетчера...
2024-12-07 02:23:28,168 - root - INFO - Регистрация обработчиков...
2024-12-07 02:23:28,169 - root - INFO - Запуск polling...
2024-12-07 02:23:28,169 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:23:28,176 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:23:28,179 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:23:28,179 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ()
2024-12-07 02:23:28,183 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:23:28,183 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('528155210',)
2024-12-07 02:23:28,184 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:23:28,185 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:23:28,186 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:23:28,186 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('528155210',)
2024-12-07 02:23:48,314 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:23:48,577 - root - INFO - Бот остановлен вручную.
2024-12-07 02:23:52,653 - root - INFO - Инициализация бота...
2024-12-07 02:23:53,138 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:23:53,140 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:23:53,141 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:23:53,143 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:23:53,144 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:23:53,144 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:23:53,191 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:23:53,192 - root - INFO - Инициализация диспетчера...
2024-12-07 02:23:53,193 - root - INFO - Регистрация обработчиков...
2024-12-07 02:23:53,194 - root - INFO - Запуск polling...
2024-12-07 02:23:53,194 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:23:53,204 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:23:53,208 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:23:53,208 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] ()
2024-12-07 02:23:53,213 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:23:53,213 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ('528155210',)
2024-12-07 02:23:53,215 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:23:53,215 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:23:53,216 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:23:53,217 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('528155210',)
2024-12-07 02:24:12,165 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:24:12,426 - root - INFO - Бот остановлен вручную.
2024-12-07 02:24:18,639 - root - INFO - Инициализация бота...
2024-12-07 02:24:19,074 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:24:19,075 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:24:19,075 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:24:19,076 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:24:19,076 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:24:19,076 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:24:19,102 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:24:19,103 - root - INFO - Инициализация диспетчера...
2024-12-07 02:24:19,103 - root - INFO - Регистрация обработчиков...
2024-12-07 02:24:19,105 - root - INFO - Запуск polling...
2024-12-07 02:24:19,105 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:24:19,112 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:24:19,114 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:24:19,114 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ()
2024-12-07 02:24:19,118 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:24:19,118 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('528155210',)
2024-12-07 02:24:19,119 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:24:19,120 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:24:19,121 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:24:19,121 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('528155210',)
2024-12-07 02:24:23,231 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:24:23,486 - root - INFO - Бот остановлен вручную.
2024-12-07 02:24:57,470 - root - INFO - Инициализация бота...
2024-12-07 02:24:58,244 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:24:58,245 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:24:58,245 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:24:58,248 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:24:58,248 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:24:58,249 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:24:58,305 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:24:58,305 - root - INFO - Инициализация диспетчера...
2024-12-07 02:24:58,306 - root - INFO - Регистрация обработчиков...
2024-12-07 02:24:58,309 - root - INFO - Запуск polling...
2024-12-07 02:24:58,309 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:24:58,321 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:24:58,325 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:24:58,325 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ()
2024-12-07 02:24:58,332 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:24:58,333 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('528155210',)
2024-12-07 02:24:58,335 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:24:58,336 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:24:58,339 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:24:58,339 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('528155210',)
2024-12-07 02:24:58,732 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:24:58,981 - aiogram.event - INFO - Update id=659306884 is not handled. Duration 77 ms by bot id=7444575424
2024-12-07 02:24:59,078 - aiogram.event - INFO - Update id=659306887 is not handled. Duration 172 ms by bot id=7444575424
2024-12-07 02:24:59,150 - aiogram.event - INFO - Update id=659306879 is handled. Duration 265 ms by bot id=7444575424
2024-12-07 02:24:59,364 - aiogram.event - INFO - Update id=659306885 is handled. Duration 469 ms by bot id=7444575424
2024-12-07 02:24:59,416 - aiogram.event - INFO - Update id=659306886 is handled. Duration 515 ms by bot id=7444575424
2024-12-07 02:25:01,159 - aiogram.event - INFO - Update id=659306893 is handled. Duration 202 ms by bot id=7444575424
2024-12-07 02:25:02,460 - aiogram.event - INFO - Update id=659306894 is handled. Duration 203 ms by bot id=7444575424
2024-12-07 02:25:03,517 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:25:03,518 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:25:03,519 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ('528155210', 1, 0)
2024-12-07 02:25:03,522 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:25:03,522 - sqlalchemy.engine.Engine - INFO - [cached since 5.19s ago] ('528155210',)
2024-12-07 02:25:04,693 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 02:25:04,786 - aiogram.event - INFO - Update id=659306895 is handled. Duration 1281 ms by bot id=7444575424
2024-12-07 02:25:07,800 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:25:07,802 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:25:07,802 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ('67', 1, 0)
2024-12-07 02:25:07,988 - aiogram.event - INFO - Update id=659306896 is handled. Duration 1344 ms by bot id=7444575424
2024-12-07 02:25:09,241 - aiogram.event - INFO - Update id=659306897 is not handled. Duration 0 ms by bot id=7444575424
2024-12-07 02:25:15,700 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:25:15,941 - aiogram.event - INFO - Update id=659306881 is not handled. Duration 17063 ms by bot id=7444575424
2024-12-07 02:25:15,942 - aiogram.event - INFO - Update id=659306889 is not handled. Duration 17031 ms by bot id=7444575424
2024-12-07 02:25:15,942 - aiogram.event - INFO - Update id=659306888 is not handled. Duration 17031 ms by bot id=7444575424
2024-12-07 02:25:15,943 - aiogram.event - INFO - Update id=659306892 is not handled. Duration 17015 ms by bot id=7444575424
2024-12-07 02:25:15,943 - aiogram.event - INFO - Update id=659306891 is not handled. Duration 17015 ms by bot id=7444575424
2024-12-07 02:25:15,944 - aiogram.event - INFO - Update id=659306882 is not handled. Duration 17063 ms by bot id=7444575424
2024-12-07 02:25:15,944 - aiogram.event - INFO - Update id=659306880 is not handled. Duration 17063 ms by bot id=7444575424
2024-12-07 02:25:15,945 - aiogram.event - INFO - Update id=659306890 is not handled. Duration 17031 ms by bot id=7444575424
2024-12-07 02:25:15,945 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:25:15,946 - aiogram.event - INFO - Update id=659306883 is not handled. Duration 17063 ms by bot id=7444575424
2024-12-07 02:25:15,950 - root - INFO - Бот остановлен вручную.
2024-12-07 02:25:44,547 - root - INFO - Инициализация бота...
2024-12-07 02:25:49,857 - root - INFO - Инициализация бота...
2024-12-07 02:25:50,263 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:25:50,264 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:25:50,264 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:25:50,265 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:25:50,265 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:25:50,265 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:25:50,291 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:25:50,291 - root - INFO - Инициализация диспетчера...
2024-12-07 02:25:50,292 - root - INFO - Регистрация обработчиков...
2024-12-07 02:25:50,293 - root - INFO - Запуск polling...
2024-12-07 02:25:50,293 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:25:50,300 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:25:50,302 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:25:50,303 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] ()
2024-12-07 02:25:50,306 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:25:50,306 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('528155210',)
2024-12-07 02:25:50,306 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:25:50,307 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:25:50,308 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:25:50,308 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ('528155210',)
2024-12-07 02:26:02,383 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:26:02,643 - root - INFO - Бот остановлен вручную.
2024-12-07 02:26:07,721 - root - INFO - Инициализация бота...
2024-12-07 02:26:08,125 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:26:08,125 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:26:08,125 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:26:08,126 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:26:08,126 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:26:08,127 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:26:08,150 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:26:08,150 - root - INFO - Инициализация диспетчера...
2024-12-07 02:26:08,151 - root - INFO - Регистрация обработчиков...
2024-12-07 02:26:08,152 - root - INFO - Запуск polling...
2024-12-07 02:26:08,152 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:26:08,159 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:26:08,161 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:26:08,162 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ()
2024-12-07 02:26:08,166 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:26:08,167 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ('528155210',)
2024-12-07 02:26:08,168 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:26:08,168 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:26:08,169 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:26:08,169 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ('528155210',)
2024-12-07 02:26:08,481 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:26:08,592 - aiogram.event - INFO - Update id=659306902 is not handled. Duration 0 ms by bot id=7444575424
2024-12-07 02:26:08,884 - aiogram.event - INFO - Update id=659306898 is handled. Duration 296 ms by bot id=7444575424
2024-12-07 02:26:29,224 - root - ERROR - Ошибка проверки базы данных: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:26:29,224 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-2' coro=<DbProcessor.check_db() done, defined at C:\Users\Хороший человек\Documents\coding\LISA\src\database\db_processor.py:74> exception=TelegramNetworkError('HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]')>
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 494, in finish_recv
    return ov.getresult()
           ^^^^^^^^^^^^^^
OSError: [WinError 64] Указанное сетевое имя более недоступно

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1116, in _wrap_create_connection
    return await self._loop.create_connection(*args, **kwargs, sock=sock)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1112, in create_connection
    transport, protocol = await self._create_connection_transport(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1145, in _create_connection_transport
    await waiter
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 286, in _loop_reading
    length = fut.result()
             ^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 846, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 498, in finish_recv
    raise ConnectionResetError(*exc.args)
ConnectionResetError: [WinError 64] Указанное сетевое имя более недоступно

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 181, in make_request
    async with session.post(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 1360, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 663, in _request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 538, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1050, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1384, in _create_direct_connection
    raise last_exc
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1353, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1124, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\database\db_processor.py", line 87, in check_db
    await send_message_subscription_ends(user)
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\send_message.py", line 42, in send_message_subscription_ends
    await bot.send_message(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2962, in send_message
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 188, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:26:29,630 - aiogram.event - INFO - Update id=659306901 is not handled. Duration 21046 ms by bot id=7444575424
2024-12-07 02:26:29,630 - aiogram.event - ERROR - Cause exception while process update id=659306901 by bot id=7444575424
TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 494, in finish_recv
    return ov.getresult()
           ^^^^^^^^^^^^^^
OSError: [WinError 64] Указанное сетевое имя более недоступно

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1116, in _wrap_create_connection
    return await self._loop.create_connection(*args, **kwargs, sock=sock)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1112, in create_connection
    transport, protocol = await self._create_connection_transport(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1145, in _create_connection_transport
    await waiter
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 286, in _loop_reading
    length = fut.result()
             ^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 846, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 498, in finish_recv
    raise ConnectionResetError(*exc.args)
ConnectionResetError: [WinError 64] Указанное сетевое имя более недоступно

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 181, in make_request
    async with session.post(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 1360, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 663, in _request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 538, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1050, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1384, in _create_direct_connection
    raise last_exc
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1353, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1124, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\back_button_router.py", line 19, in back_button
    await callback.message.answer(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 188, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:26:29,644 - aiogram.event - INFO - Update id=659306899 is not handled. Duration 21061 ms by bot id=7444575424
2024-12-07 02:26:29,645 - aiogram.event - ERROR - Cause exception while process update id=659306899 by bot id=7444575424
TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 494, in finish_recv
    return ov.getresult()
           ^^^^^^^^^^^^^^
OSError: [WinError 64] Указанное сетевое имя более недоступно

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1116, in _wrap_create_connection
    return await self._loop.create_connection(*args, **kwargs, sock=sock)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1112, in create_connection
    transport, protocol = await self._create_connection_transport(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1145, in _create_connection_transport
    await waiter
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 286, in _loop_reading
    length = fut.result()
             ^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 846, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 498, in finish_recv
    raise ConnectionResetError(*exc.args)
ConnectionResetError: [WinError 64] Указанное сетевое имя более недоступно

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 181, in make_request
    async with session.post(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 1360, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 663, in _request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 538, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1050, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1384, in _create_direct_connection
    raise last_exc
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1353, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1124, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 31, in show_main_menu
    await send_message_and_save(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\send_message.py", line 27, in send_message_and_save
    sent_message = await message.answer(text, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 188, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:26:29,653 - aiogram.event - INFO - Update id=659306900 is not handled. Duration 21061 ms by bot id=7444575424
2024-12-07 02:26:29,654 - aiogram.event - ERROR - Cause exception while process update id=659306900 by bot id=7444575424
TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 494, in finish_recv
    return ov.getresult()
           ^^^^^^^^^^^^^^
OSError: [WinError 64] Указанное сетевое имя более недоступно

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1116, in _wrap_create_connection
    return await self._loop.create_connection(*args, **kwargs, sock=sock)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1112, in create_connection
    transport, protocol = await self._create_connection_transport(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1145, in _create_connection_transport
    await waiter
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 286, in _loop_reading
    length = fut.result()
             ^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 846, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 498, in finish_recv
    raise ConnectionResetError(*exc.args)
ConnectionResetError: [WinError 64] Указанное сетевое имя более недоступно

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 181, in make_request
    async with session.post(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 1360, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 663, in _request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 538, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1050, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1384, in _create_direct_connection
    raise last_exc
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1353, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1124, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 31, in show_main_menu
    await send_message_and_save(
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\send_message.py", line 27, in send_message_and_save
    sent_message = await message.answer(text, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 188, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:28:25,209 - aiogram.event - INFO - Update id=659306903 is not handled. Duration 21047 ms by bot id=7444575424
2024-12-07 02:28:25,210 - aiogram.event - ERROR - Cause exception while process update id=659306903 by bot id=7444575424
TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 494, in finish_recv
    return ov.getresult()
           ^^^^^^^^^^^^^^
OSError: [WinError 64] Указанное сетевое имя более недоступно

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1116, in _wrap_create_connection
    return await self._loop.create_connection(*args, **kwargs, sock=sock)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1112, in create_connection
    transport, protocol = await self._create_connection_transport(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1145, in _create_connection_transport
    await waiter
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 286, in _loop_reading
    length = fut.result()
             ^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 846, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 498, in finish_recv
    raise ConnectionResetError(*exc.args)
ConnectionResetError: [WinError 64] Указанное сетевое имя более недоступно

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 181, in make_request
    async with session.post(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 1360, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 663, in _request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 538, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1050, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1384, in _create_direct_connection
    raise last_exc
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1353, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1124, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 55, in main_menu_handler
    await show_about_us(callback, state)
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\about_us_router.py", line 18, in show_about_us
    await callback.message.answer(INFO.ABOUT_US, reply_markup=get_about_us_keyboard(), parse_mode="Markdown")
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 188, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:29:26,775 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:29:27,029 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:29:27,029 - aiogram.event - INFO - Update id=659306904 is not handled. Duration 4218 ms by bot id=7444575424
2024-12-07 02:29:27,031 - root - INFO - Бот остановлен вручную.
2024-12-07 02:29:31,008 - root - INFO - Инициализация бота...
2024-12-07 02:29:31,344 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:29:31,344 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:29:31,344 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:29:31,345 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:29:31,345 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:29:31,346 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:29:31,362 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:29:31,362 - root - INFO - Инициализация диспетчера...
2024-12-07 02:29:31,362 - root - INFO - Регистрация обработчиков...
2024-12-07 02:29:31,363 - root - INFO - Запуск polling...
2024-12-07 02:29:31,364 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:29:31,369 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:29:31,370 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:29:31,371 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ()
2024-12-07 02:29:31,373 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:29:31,373 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('528155210',)
2024-12-07 02:29:31,374 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:29:31,374 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:29:31,375 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:29:31,375 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('528155210',)
2024-12-07 02:29:47,083 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:29:52,417 - root - ERROR - Ошибка проверки базы данных: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:29:52,418 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-2' coro=<DbProcessor.check_db() done, defined at C:\Users\Хороший человек\Documents\coding\LISA\src\database\db_processor.py:74> exception=TelegramNetworkError('HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]')>
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 494, in finish_recv
    return ov.getresult()
           ^^^^^^^^^^^^^^
OSError: [WinError 64] Указанное сетевое имя более недоступно

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1116, in _wrap_create_connection
    return await self._loop.create_connection(*args, **kwargs, sock=sock)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1112, in create_connection
    transport, protocol = await self._create_connection_transport(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1145, in _create_connection_transport
    await waiter
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 286, in _loop_reading
    length = fut.result()
             ^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 846, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 498, in finish_recv
    raise ConnectionResetError(*exc.args)
ConnectionResetError: [WinError 64] Указанное сетевое имя более недоступно

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 181, in make_request
    async with session.post(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 1360, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 663, in _request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 538, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1050, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1384, in _create_direct_connection
    raise last_exc
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1353, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1124, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\database\db_processor.py", line 87, in check_db
    await send_message_subscription_ends(user)
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\send_message.py", line 42, in send_message_subscription_ends
    await bot.send_message(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2962, in send_message
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 188, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:31:37,880 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:31:37,932 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2702)
2024-12-07 02:31:37,932 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-07 02:31:38,139 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:31:38,141 - root - INFO - Бот остановлен вручную.
2024-12-07 02:31:41,617 - root - INFO - Инициализация бота...
2024-12-07 02:31:41,916 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:31:41,916 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:31:41,916 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:31:41,917 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:31:41,917 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:31:41,917 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:31:41,933 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:31:41,933 - root - INFO - Инициализация диспетчера...
2024-12-07 02:31:41,933 - root - INFO - Регистрация обработчиков...
2024-12-07 02:31:41,934 - root - INFO - Запуск polling...
2024-12-07 02:31:41,934 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:31:41,939 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:31:41,941 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:31:41,941 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ()
2024-12-07 02:31:41,943 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:31:41,943 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('528155210',)
2024-12-07 02:31:41,944 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:31:41,944 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:31:41,945 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:31:41,946 - sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] ('528155210',)
2024-12-07 02:32:03,067 - root - ERROR - Ошибка проверки базы данных: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:32:03,067 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-2' coro=<DbProcessor.check_db() done, defined at C:\Users\Хороший человек\Documents\coding\LISA\src\database\db_processor.py:74> exception=TelegramNetworkError('HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]')>
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 494, in finish_recv
    return ov.getresult()
           ^^^^^^^^^^^^^^
OSError: [WinError 64] Указанное сетевое имя более недоступно

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1116, in _wrap_create_connection
    return await self._loop.create_connection(*args, **kwargs, sock=sock)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1112, in create_connection
    transport, protocol = await self._create_connection_transport(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1145, in _create_connection_transport
    await waiter
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 286, in _loop_reading
    length = fut.result()
             ^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 846, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 498, in finish_recv
    raise ConnectionResetError(*exc.args)
ConnectionResetError: [WinError 64] Указанное сетевое имя более недоступно

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 181, in make_request
    async with session.post(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 1360, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 663, in _request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 538, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1050, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1384, in _create_direct_connection
    raise last_exc
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1353, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1124, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\database\db_processor.py", line 87, in check_db
    await send_message_subscription_ends(user)
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\send_message.py", line 42, in send_message_subscription_ends
    await bot.send_message(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2962, in send_message
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 188, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:32:03,076 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:32:03,331 - root - ERROR - Произошла ошибка при запуске бота: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:32:51,602 - root - INFO - Инициализация бота...
2024-12-07 02:32:51,899 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:32:51,899 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:32:51,899 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:32:51,900 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:32:51,900 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:32:51,900 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:32:51,916 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:32:51,917 - root - INFO - Инициализация диспетчера...
2024-12-07 02:32:51,917 - root - INFO - Регистрация обработчиков...
2024-12-07 02:32:51,918 - root - INFO - Запуск polling...
2024-12-07 02:32:51,918 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:32:51,923 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:32:51,925 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:32:51,925 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ()
2024-12-07 02:32:51,927 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:32:51,927 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('528155210',)
2024-12-07 02:32:51,928 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:32:51,928 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:32:51,929 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:32:51,929 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('528155210',)
2024-12-07 02:33:12,960 - root - ERROR - Ошибка проверки базы данных: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:33:12,960 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-2' coro=<DbProcessor.check_db() done, defined at C:\Users\Хороший человек\Documents\coding\LISA\src\database\db_processor.py:74> exception=TelegramNetworkError('HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]')>
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 494, in finish_recv
    return ov.getresult()
           ^^^^^^^^^^^^^^
OSError: [WinError 64] Указанное сетевое имя более недоступно

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1116, in _wrap_create_connection
    return await self._loop.create_connection(*args, **kwargs, sock=sock)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1112, in create_connection
    transport, protocol = await self._create_connection_transport(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1145, in _create_connection_transport
    await waiter
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 286, in _loop_reading
    length = fut.result()
             ^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 846, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 498, in finish_recv
    raise ConnectionResetError(*exc.args)
ConnectionResetError: [WinError 64] Указанное сетевое имя более недоступно

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 181, in make_request
    async with session.post(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 1360, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 663, in _request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 538, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1050, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1384, in _create_direct_connection
    raise last_exc
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1353, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1124, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\database\db_processor.py", line 87, in check_db
    await send_message_subscription_ends(user)
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\send_message.py", line 42, in send_message_subscription_ends
    await bot.send_message(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2962, in send_message
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 188, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:33:12,972 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:33:13,226 - root - ERROR - Произошла ошибка при запуске бота: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:34:36,355 - root - INFO - Инициализация бота...
2024-12-07 02:34:37,858 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:34:37,858 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:34:37,858 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:34:37,861 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:34:37,861 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:34:37,862 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:34:37,920 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:34:37,920 - root - INFO - Инициализация диспетчера...
2024-12-07 02:34:37,922 - root - INFO - Регистрация обработчиков...
2024-12-07 02:34:37,925 - root - INFO - Запуск polling...
2024-12-07 02:34:37,925 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:34:37,940 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:34:37,945 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:34:37,945 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ()
2024-12-07 02:34:37,954 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:34:37,954 - sqlalchemy.engine.Engine - INFO - [generated in 0.00081s] ('528155210',)
2024-12-07 02:34:37,956 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:34:37,957 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:34:37,959 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:34:37,960 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ('528155210',)
2024-12-07 02:34:50,016 - root - ERROR - Ошибка проверки базы данных: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
2024-12-07 02:34:50,017 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-2' coro=<DbProcessor.check_db() done, defined at C:\Users\Хороший человек\Documents\coding\LISA\src\database\db_processor.py:74> exception=TelegramNetworkError('HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]')>
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1335, in _create_direct_connection
    hosts = await self._resolve_host(host, port, traces=traces)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 989, in _resolve_host
    return await asyncio.shield(resolved_host_task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1335, in _create_direct_connection
    hosts = await self._resolve_host(host, port, traces=traces)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 964, in _resolve_host
    await future
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1020, in _resolve_host_with_throttle
    addrs = await self._resolver.resolve(host, port, family=self._family)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\resolver.py", line 38, in resolve
    infos = await self._loop.getaddrinfo(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 867, in getaddrinfo
    return await self.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 962, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 181, in make_request
    async with session.post(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 1360, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 663, in _request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 538, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1050, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1341, in _create_direct_connection
    raise ClientConnectorDNSError(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\database\db_processor.py", line 87, in check_db
    await send_message_subscription_ends(user)
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\send_message.py", line 42, in send_message_subscription_ends
    await bot.send_message(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2962, in send_message
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 188, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
2024-12-07 02:34:50,068 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:34:50,329 - root - ERROR - Произошла ошибка при запуске бота: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
2024-12-07 02:36:01,635 - root - INFO - Инициализация бота...
2024-12-07 02:36:02,000 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:36:02,000 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:36:02,000 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:36:02,001 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:36:02,001 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:36:02,002 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:36:02,019 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:36:02,020 - root - INFO - Инициализация диспетчера...
2024-12-07 02:36:02,020 - root - INFO - Регистрация обработчиков...
2024-12-07 02:36:02,023 - root - INFO - Запуск polling...
2024-12-07 02:36:02,023 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:36:02,028 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:36:02,030 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:36:02,030 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ()
2024-12-07 02:36:02,033 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:36:02,033 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('528155210',)
2024-12-07 02:36:02,034 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:36:02,035 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:36:02,036 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:36:02,036 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] ('528155210',)
2024-12-07 02:36:02,419 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:36:02,746 - aiogram.event - INFO - Update id=659306905 is handled. Duration 156 ms by bot id=7444575424
2024-12-07 02:36:02,823 - aiogram.event - INFO - Update id=659306907 is handled. Duration 234 ms by bot id=7444575424
2024-12-07 02:36:02,847 - aiogram.event - INFO - Update id=659306906 is handled. Duration 264 ms by bot id=7444575424
2024-12-07 02:36:04,729 - aiogram.event - INFO - Update id=659306911 is handled. Duration 125 ms by bot id=7444575424
2024-12-07 02:36:06,402 - aiogram.event - INFO - Update id=659306912 is handled. Duration 140 ms by bot id=7444575424
2024-12-07 02:36:09,828 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:36:09,829 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:36:09,829 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] ('528155210', 1, 0)
2024-12-07 02:36:09,831 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:36:09,831 - sqlalchemy.engine.Engine - INFO - [cached since 7.798s ago] ('528155210',)
2024-12-07 02:36:11,886 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 02:36:11,953 - aiogram.event - INFO - Update id=659306913 is handled. Duration 2140 ms by bot id=7444575424
2024-12-07 02:36:14,819 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:36:14,820 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:36:14,820 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ('67', 1, 0)
2024-12-07 02:36:14,938 - aiogram.event - INFO - Update id=659306914 is handled. Duration 1359 ms by bot id=7444575424
2024-12-07 02:36:15,994 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:36:15,995 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:36:15,995 - sqlalchemy.engine.Engine - INFO - [cached since 6.166s ago] ('528155210', 1, 0)
2024-12-07 02:36:15,996 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:36:15,996 - sqlalchemy.engine.Engine - INFO - [cached since 13.96s ago] ('528155210',)
2024-12-07 02:36:17,017 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 02:36:17,018 - aiogram.event - INFO - Update id=659306915 is handled. Duration 1030 ms by bot id=7444575424
2024-12-07 02:36:20,632 - aiogram.event - INFO - Update id=659306916 is handled. Duration 139 ms by bot id=7444575424
2024-12-07 02:36:22,021 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:36:22,021 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:36:22,021 - sqlalchemy.engine.Engine - INFO - [cached since 12.19s ago] ('528155210', 1, 0)
2024-12-07 02:36:22,022 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:36:22,022 - sqlalchemy.engine.Engine - INFO - [cached since 19.99s ago] ('528155210',)
2024-12-07 02:36:22,950 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 02:36:23,022 - aiogram.event - INFO - Update id=659306917 is handled. Duration 1000 ms by bot id=7444575424
2024-12-07 02:36:24,991 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:36:24,992 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:36:24,992 - sqlalchemy.engine.Engine - INFO - [cached since 10.17s ago] ('67', 1, 0)
2024-12-07 02:36:25,068 - aiogram.event - INFO - Update id=659306918 is handled. Duration 890 ms by bot id=7444575424
2024-12-07 02:36:28,509 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:36:28,509 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:36:28,509 - sqlalchemy.engine.Engine - INFO - [cached since 18.68s ago] ('528155210', 1, 0)
2024-12-07 02:36:28,510 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:36:28,510 - sqlalchemy.engine.Engine - INFO - [cached since 26.48s ago] ('528155210',)
2024-12-07 02:36:29,304 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 02:36:29,305 - aiogram.event - INFO - Update id=659306919 is handled. Duration 797 ms by bot id=7444575424
2024-12-07 02:36:31,888 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:36:31,889 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:36:31,889 - sqlalchemy.engine.Engine - INFO - [cached since 17.07s ago] ('67', 1, 0)
2024-12-07 02:36:31,962 - aiogram.event - INFO - Update id=659306920 is handled. Duration 1110 ms by bot id=7444575424
2024-12-07 02:36:34,678 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:36:34,678 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:36:34,678 - sqlalchemy.engine.Engine - INFO - [cached since 24.85s ago] ('528155210', 1, 0)
2024-12-07 02:36:34,679 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:36:34,679 - sqlalchemy.engine.Engine - INFO - [cached since 32.65s ago] ('528155210',)
2024-12-07 02:36:35,508 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 02:36:35,508 - aiogram.event - INFO - Update id=659306921 is handled. Duration 827 ms by bot id=7444575424
2024-12-07 02:36:36,510 - aiogram.event - INFO - Update id=659306922 is handled. Duration 250 ms by bot id=7444575424
2024-12-07 02:36:39,091 - aiogram.event - INFO - Update id=659306923 is handled. Duration 203 ms by bot id=7444575424
2024-12-07 02:36:40,363 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:36:40,363 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:36:40,363 - sqlalchemy.engine.Engine - INFO - [cached since 30.53s ago] ('528155210', 1, 0)
2024-12-07 02:36:40,502 - aiogram.event - INFO - Update id=659306924 is handled. Duration 139 ms by bot id=7444575424
2024-12-07 02:36:41,864 - aiogram.event - INFO - Update id=659306925 is handled. Duration 141 ms by bot id=7444575424
2024-12-07 02:36:46,342 - aiogram.event - INFO - Update id=659306926 is handled. Duration 218 ms by bot id=7444575424
2024-12-07 02:36:48,371 - aiogram.event - INFO - Update id=659306927 is handled. Duration 125 ms by bot id=7444575424
2024-12-07 02:36:55,092 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:36:55,360 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:36:55,361 - root - INFO - Бот остановлен вручную.
2024-12-07 02:41:21,606 - root - INFO - Инициализация бота...
2024-12-07 02:41:21,639 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:41:21,639 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:41:21,639 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:41:21,640 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:41:21,640 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:41:21,640 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:41:21,659 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:41:21,659 - root - INFO - Инициализация диспетчера...
2024-12-07 02:41:21,660 - root - INFO - Регистрация обработчиков...
2024-12-07 02:41:21,661 - root - INFO - Запуск polling...
2024-12-07 02:41:21,661 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:41:21,666 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:41:21,667 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:41:21,667 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ()
2024-12-07 02:41:21,670 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:41:21,670 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('528155210',)
2024-12-07 02:41:21,670 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:41:21,671 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:41:21,671 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:41:21,671 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('528155210',)
2024-12-07 02:41:22,076 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:41:27,826 - aiogram.event - INFO - Update id=659306928 is handled. Duration 234 ms by bot id=7444575424
2024-12-07 02:41:29,309 - aiogram.event - INFO - Update id=659306929 is handled. Duration 186 ms by bot id=7444575424
2024-12-07 02:41:30,180 - aiogram.event - INFO - Update id=659306930 is handled. Duration 265 ms by bot id=7444575424
2024-12-07 02:41:31,279 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:41:31,281 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:41:31,281 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ('528155210', 1, 0)
2024-12-07 02:41:31,282 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:41:31,282 - sqlalchemy.engine.Engine - INFO - [cached since 9.612s ago] ('528155210',)
2024-12-07 02:41:32,307 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 02:41:32,393 - aiogram.event - INFO - Update id=659306931 is handled. Duration 1125 ms by bot id=7444575424
2024-12-07 02:41:34,083 - aiogram.event - INFO - Update id=659306932 is handled. Duration 313 ms by bot id=7444575424
2024-12-07 02:41:35,184 - aiogram.event - INFO - Update id=659306933 is handled. Duration 265 ms by bot id=7444575424
2024-12-07 02:41:36,638 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:41:36,639 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:41:36,639 - sqlalchemy.engine.Engine - INFO - [cached since 5.358s ago] ('528155210', 1, 0)
2024-12-07 02:41:36,757 - aiogram.event - INFO - Update id=659306934 is handled. Duration 125 ms by bot id=7444575424
2024-12-07 02:41:37,881 - aiogram.event - INFO - Update id=659306935 is handled. Duration 250 ms by bot id=7444575424
2024-12-07 02:41:39,282 - aiogram.event - INFO - Update id=659306936 is handled. Duration 250 ms by bot id=7444575424
2024-12-07 02:41:41,492 - aiogram.event - INFO - Update id=659306937 is handled. Duration 250 ms by bot id=7444575424
2024-12-07 02:41:42,806 - root - ERROR - Ошибка проверки базы данных: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:41:42,806 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-2' coro=<DbProcessor.check_db() done, defined at C:\Users\Хороший человек\Documents\coding\LISA\src\database\db_processor.py:74> exception=TelegramNetworkError('HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]')>
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 494, in finish_recv
    return ov.getresult()
           ^^^^^^^^^^^^^^
OSError: [WinError 64] Указанное сетевое имя более недоступно

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1116, in _wrap_create_connection
    return await self._loop.create_connection(*args, **kwargs, sock=sock)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1112, in create_connection
    transport, protocol = await self._create_connection_transport(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1145, in _create_connection_transport
    await waiter
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 286, in _loop_reading
    length = fut.result()
             ^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 846, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 498, in finish_recv
    raise ConnectionResetError(*exc.args)
ConnectionResetError: [WinError 64] Указанное сетевое имя более недоступно

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 181, in make_request
    async with session.post(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 1360, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 663, in _request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 538, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1050, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1384, in _create_direct_connection
    raise last_exc
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1353, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1124, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\database\db_processor.py", line 87, in check_db
    await send_message_subscription_ends(user)
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\send_message.py", line 42, in send_message_subscription_ends
    await bot.send_message(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2962, in send_message
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 188, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:41:59,236 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:41:59,503 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:41:59,505 - root - INFO - Бот остановлен вручную.
2024-12-07 02:42:51,744 - root - INFO - Инициализация бота...
2024-12-07 02:42:51,776 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:42:51,776 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:42:51,776 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:42:51,777 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:42:51,777 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:42:51,778 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:42:51,795 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:42:51,795 - root - INFO - Инициализация диспетчера...
2024-12-07 02:42:51,795 - root - INFO - Регистрация обработчиков...
2024-12-07 02:42:51,796 - root - INFO - Запуск polling...
2024-12-07 02:42:51,796 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:42:51,802 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:42:51,804 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:42:51,804 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ()
2024-12-07 02:42:51,807 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:42:51,807 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ('528155210',)
2024-12-07 02:42:51,807 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:42:51,808 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:42:51,808 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:42:51,808 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('528155210',)
2024-12-07 02:42:52,091 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:42:58,688 - aiogram.event - INFO - Update id=659306938 is handled. Duration 469 ms by bot id=7444575424
2024-12-07 02:43:00,460 - aiogram.event - INFO - Update id=659306939 is handled. Duration 328 ms by bot id=7444575424
2024-12-07 02:43:01,685 - aiogram.event - INFO - Update id=659306940 is handled. Duration 234 ms by bot id=7444575424
2024-12-07 02:43:12,876 - root - ERROR - Ошибка проверки базы данных: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:43:12,877 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-2' coro=<DbProcessor.check_db() done, defined at C:\Users\Хороший человек\Documents\coding\LISA\src\database\db_processor.py:74> exception=TelegramNetworkError('HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]')>
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 494, in finish_recv
    return ov.getresult()
           ^^^^^^^^^^^^^^
OSError: [WinError 64] Указанное сетевое имя более недоступно

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1116, in _wrap_create_connection
    return await self._loop.create_connection(*args, **kwargs, sock=sock)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1112, in create_connection
    transport, protocol = await self._create_connection_transport(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1145, in _create_connection_transport
    await waiter
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 286, in _loop_reading
    length = fut.result()
             ^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 846, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 498, in finish_recv
    raise ConnectionResetError(*exc.args)
ConnectionResetError: [WinError 64] Указанное сетевое имя более недоступно

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 181, in make_request
    async with session.post(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 1360, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 663, in _request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 538, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1050, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1384, in _create_direct_connection
    raise last_exc
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1353, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1124, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\database\db_processor.py", line 87, in check_db
    await send_message_subscription_ends(user)
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\send_message.py", line 42, in send_message_subscription_ends
    await bot.send_message(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2962, in send_message
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 188, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 02:43:30,468 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:44:06,122 - root - INFO - Инициализация бота...
2024-12-07 02:44:06,164 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:44:06,164 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:44:06,165 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:44:06,166 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:44:06,166 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:44:06,167 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:44:06,190 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:44:06,191 - root - INFO - Инициализация диспетчера...
2024-12-07 02:44:06,191 - root - INFO - Регистрация обработчиков...
2024-12-07 02:44:06,193 - root - INFO - Запуск polling...
2024-12-07 02:44:06,193 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:44:06,199 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:44:06,202 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:44:06,202 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ()
2024-12-07 02:44:06,205 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:44:06,205 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('528155210',)
2024-12-07 02:44:06,206 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:44:06,206 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:44:06,207 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:44:06,207 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ('528155210',)
2024-12-07 02:44:06,527 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:44:06,791 - aiogram.event - INFO - Update id=659306941 is handled. Duration 140 ms by bot id=7444575424
2024-12-07 02:44:28,236 - aiogram.event - INFO - Update id=659306942 is handled. Duration 563 ms by bot id=7444575424
2024-12-07 02:44:30,179 - aiogram.event - INFO - Update id=659306943 is handled. Duration 234 ms by bot id=7444575424
2024-12-07 02:45:00,561 - aiogram.event - INFO - Update id=659306944 is handled. Duration 250 ms by bot id=7444575424
2024-12-07 02:45:08,937 - root - INFO - {
    "message_id": 2870,
    "date": 1733528709,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 60000,
        "invoice_payload": "72e07c26-85a2-46df-8f28-5720c6a041c2",
        "telegram_payment_charge_id": "7444575424_528155210_330530",
        "provider_payment_charge_id": "7444575424_528155210_330530",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-07 02:45:10,025 - root - INFO - Key created: OutlineKey(key_id='76', name='VPN Key63', password='lopjh6LYaYM2eoz53wtRMW', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpsb3BqaDZMWWFZTTJlb3o1M3d0Uk1X@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-07 02:45:10,025 - root - INFO - Key created: OutlineKey(key_id='76', name='VPN Key63', password='lopjh6LYaYM2eoz53wtRMW', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpsb3BqaDZMWWFZTTJlb3o1M3d0Uk1X@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-07 02:45:10,230 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:45:10,231 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:45:10,232 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] ('528155210', 1, 0)
2024-12-07 02:45:10,235 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-07 02:45:10,235 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ('76', '528155210', '2025-06-05 02:45:10.233136', '2024-12-07 02:45:10.233136', 0)
2024-12-07 02:45:10,238 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:45:10,245 - aiogram.event - INFO - Update id=659306945 is handled. Duration 1313 ms by bot id=7444575424
2024-12-07 02:45:14,433 - aiogram.event - INFO - Update id=659306946 is handled. Duration 343 ms by bot id=7444575424
2024-12-07 02:45:16,580 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:45:16,841 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:45:16,842 - root - INFO - Бот остановлен вручную.
2024-12-07 02:45:48,755 - root - INFO - Инициализация бота...
2024-12-07 02:45:48,799 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:45:48,799 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:45:48,799 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:45:48,800 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:45:48,800 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:45:48,801 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:45:48,821 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:45:48,821 - root - INFO - Инициализация диспетчера...
2024-12-07 02:45:48,822 - root - INFO - Регистрация обработчиков...
2024-12-07 02:45:48,823 - root - INFO - Запуск polling...
2024-12-07 02:45:48,823 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:45:48,829 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:45:48,831 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:45:48,832 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ()
2024-12-07 02:45:48,834 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:45:48,835 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('528155210',)
2024-12-07 02:45:48,835 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:45:48,837 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:45:48,838 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:45:48,839 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('528155210',)
2024-12-07 02:45:49,186 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:45:49,275 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 02:45:49,275 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ('76',)
2024-12-07 02:46:02,814 - aiogram.event - INFO - Update id=659306947 is handled. Duration 140 ms by bot id=7444575424
2024-12-07 02:46:04,500 - aiogram.event - INFO - Update id=659306948 is handled. Duration 250 ms by bot id=7444575424
2024-12-07 02:46:05,528 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:46:05,530 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:46:05,530 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('528155210', 1, 0)
2024-12-07 02:46:05,657 - aiogram.event - INFO - Update id=659306949 is handled. Duration 140 ms by bot id=7444575424
2024-12-07 02:46:06,660 - aiogram.event - INFO - Update id=659306950 is handled. Duration 171 ms by bot id=7444575424
2024-12-07 02:46:08,743 - aiogram.event - INFO - Update id=659306951 is handled. Duration 281 ms by bot id=7444575424
2024-12-07 02:46:10,421 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:46:10,423 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:46:10,424 - sqlalchemy.engine.Engine - INFO - [cached since 4.894s ago] ('528155210', 1, 0)
2024-12-07 02:46:10,514 - aiogram.event - INFO - Update id=659306952 is handled. Duration 93 ms by bot id=7444575424
2024-12-07 02:46:15,372 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:46:15,639 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:46:15,641 - root - INFO - Бот остановлен вручную.
2024-12-07 02:48:18,737 - root - INFO - Инициализация бота...
2024-12-07 02:48:18,766 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:48:18,767 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:48:18,767 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:48:18,767 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:48:18,767 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:48:18,768 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:48:18,787 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:48:18,787 - root - INFO - Инициализация диспетчера...
2024-12-07 02:48:18,788 - root - INFO - Регистрация обработчиков...
2024-12-07 02:48:18,789 - root - INFO - Запуск polling...
2024-12-07 02:48:18,789 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:48:18,794 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:48:18,795 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:48:18,796 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ()
2024-12-07 02:48:18,798 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:48:18,798 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('528155210',)
2024-12-07 02:48:18,798 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:48:18,799 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:48:18,799 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:48:18,799 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ('528155210',)
2024-12-07 02:48:19,160 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 02:48:19,160 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ('76',)
2024-12-07 02:48:29,979 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:48:30,223 - root - INFO - Бот остановлен вручную.
2024-12-07 02:48:34,147 - root - INFO - Инициализация бота...
2024-12-07 02:48:34,178 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:48:34,178 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:48:34,178 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:48:34,179 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:48:34,179 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:48:34,179 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:48:34,195 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:48:34,195 - root - INFO - Инициализация диспетчера...
2024-12-07 02:48:34,195 - root - INFO - Регистрация обработчиков...
2024-12-07 02:48:34,196 - root - INFO - Запуск polling...
2024-12-07 02:48:34,196 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:48:34,202 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:48:34,204 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:48:34,204 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
2024-12-07 02:48:34,205 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:48:34,206 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('528155210',)
2024-12-07 02:48:34,206 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:48:34,206 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:48:34,207 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:48:34,207 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('528155210',)
2024-12-07 02:48:34,532 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:48:35,030 - aiogram.event - INFO - Update id=659306953 is handled. Duration 375 ms by bot id=7444575424
2024-12-07 02:48:35,043 - aiogram.event - INFO - Update id=659306955 is handled. Duration 375 ms by bot id=7444575424
2024-12-07 02:48:35,137 - aiogram.event - INFO - Update id=659306954 is handled. Duration 468 ms by bot id=7444575424
2024-12-07 02:48:35,279 - aiogram.event - INFO - Update id=659306956 is handled. Duration 140 ms by bot id=7444575424
2024-12-07 02:48:39,410 - aiogram.event - INFO - Update id=659306957 is handled. Duration 202 ms by bot id=7444575424
2024-12-07 02:48:40,167 - aiogram.event - INFO - Update id=659306958 is handled. Duration 250 ms by bot id=7444575424
2024-12-07 02:48:43,560 - aiogram.event - INFO - Update id=659306959 is handled. Duration 281 ms by bot id=7444575424
2024-12-07 02:48:44,724 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:48:44,726 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:48:44,726 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ('528155210', 1, 0)
2024-12-07 02:48:44,893 - aiogram.event - INFO - Update id=659306960 is handled. Duration 172 ms by bot id=7444575424
2024-12-07 02:48:46,191 - aiogram.event - INFO - Update id=659306961 is not handled. Duration 0 ms by bot id=7444575424
2024-12-07 02:48:46,191 - aiogram.event - ERROR - Cause exception while process update id=659306961 by bot id=7444575424
KeyError: 'Get'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\payment_router.py", line 40, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Get'
2024-12-07 02:48:50,632 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:48:50,890 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:48:50,893 - root - INFO - Бот остановлен вручную.
2024-12-07 02:50:29,946 - root - INFO - Инициализация бота...
2024-12-07 02:50:29,977 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:50:29,977 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:50:29,977 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:50:29,978 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:50:29,978 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:50:29,978 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:50:29,998 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:50:29,998 - root - INFO - Инициализация диспетчера...
2024-12-07 02:50:29,998 - root - INFO - Регистрация обработчиков...
2024-12-07 02:50:30,000 - root - INFO - Запуск polling...
2024-12-07 02:50:30,000 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:50:30,005 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:50:30,006 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:50:30,006 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ()
2024-12-07 02:50:30,008 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:50:30,008 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('528155210',)
2024-12-07 02:50:30,009 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:50:30,009 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:50:30,010 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:50:30,010 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('528155210',)
2024-12-07 02:50:30,419 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 02:50:30,419 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('76',)
2024-12-07 02:50:30,449 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:50:30,815 - aiogram.event - INFO - Update id=659306962 is handled. Duration 219 ms by bot id=7444575424
2024-12-07 02:50:35,301 - aiogram.event - INFO - Update id=659306963 is handled. Duration 172 ms by bot id=7444575424
2024-12-07 02:50:36,644 - aiogram.event - INFO - Update id=659306964 is handled. Duration 311 ms by bot id=7444575424
2024-12-07 02:50:37,585 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:50:37,589 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:50:37,589 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('528155210', 1, 0)
2024-12-07 02:50:37,735 - aiogram.event - INFO - Update id=659306965 is handled. Duration 172 ms by bot id=7444575424
2024-12-07 02:50:38,654 - aiogram.event - INFO - Update id=659306966 is not handled. Duration 0 ms by bot id=7444575424
2024-12-07 02:50:38,655 - aiogram.event - ERROR - Cause exception while process update id=659306966 by bot id=7444575424
KeyError: 'Get'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\payment_router.py", line 40, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Get'
2024-12-07 02:51:19,920 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:51:20,177 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:51:20,178 - root - INFO - Бот остановлен вручную.
2024-12-07 02:51:23,505 - root - INFO - Инициализация бота...
2024-12-07 02:51:23,535 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:51:23,535 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:51:23,535 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:51:23,536 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:51:23,536 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:51:23,536 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:51:23,551 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:51:23,551 - root - INFO - Инициализация диспетчера...
2024-12-07 02:51:23,552 - root - INFO - Регистрация обработчиков...
2024-12-07 02:51:23,553 - root - INFO - Запуск polling...
2024-12-07 02:51:23,553 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:51:23,557 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:51:23,559 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:51:23,559 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ()
2024-12-07 02:51:23,561 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:51:23,561 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('528155210',)
2024-12-07 02:51:23,562 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:51:23,562 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:51:23,563 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:51:23,563 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('528155210',)
2024-12-07 02:51:37,184 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:51:37,438 - root - INFO - Бот остановлен вручную.
2024-12-07 02:51:40,695 - root - INFO - Инициализация бота...
2024-12-07 02:51:40,725 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:51:40,725 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:51:40,725 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:51:40,726 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:51:40,726 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:51:40,726 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:51:40,741 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:51:40,741 - root - INFO - Инициализация диспетчера...
2024-12-07 02:51:40,742 - root - INFO - Регистрация обработчиков...
2024-12-07 02:51:40,743 - root - INFO - Запуск polling...
2024-12-07 02:51:40,743 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:51:40,748 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:51:40,749 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:51:40,749 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ()
2024-12-07 02:51:40,752 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:51:40,752 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ('528155210',)
2024-12-07 02:51:40,752 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:51:40,753 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:51:40,753 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:51:40,754 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ('528155210',)
2024-12-07 02:51:41,094 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 02:51:41,094 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('76',)
2024-12-07 02:51:41,097 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:51:41,406 - aiogram.event - INFO - Update id=659306968 is handled. Duration 171 ms by bot id=7444575424
2024-12-07 02:51:41,598 - aiogram.event - INFO - Update id=659306967 is not handled. Duration 358 ms by bot id=7444575424
2024-12-07 02:51:41,598 - aiogram.event - ERROR - Cause exception while process update id=659306967 by bot id=7444575424
TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 39, in buy_key_menu
    await callback.answer()
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\methods\base.py", line 84, in emit
    return await bot(self)
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: query is too old and response timeout expired or query ID is invalid
2024-12-07 02:51:47,838 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:51:48,099 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:51:48,099 - aiogram.event - INFO - Update id=659306969 is not handled. Duration 6858 ms by bot id=7444575424
2024-12-07 02:51:48,100 - root - INFO - Бот остановлен вручную.
2024-12-07 02:51:51,512 - root - INFO - Инициализация бота...
2024-12-07 02:51:51,541 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:51:51,542 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:51:51,542 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:51:51,542 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:51:51,543 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:51:51,543 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:51:51,558 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:51:51,558 - root - INFO - Инициализация диспетчера...
2024-12-07 02:51:51,558 - root - INFO - Регистрация обработчиков...
2024-12-07 02:51:51,559 - root - INFO - Запуск polling...
2024-12-07 02:51:51,559 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:51:51,564 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:51:51,565 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:51:51,565 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ()
2024-12-07 02:51:51,568 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:51:51,568 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('528155210',)
2024-12-07 02:51:51,569 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:51:51,569 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:51:51,571 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:51:51,571 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('528155210',)
2024-12-07 02:51:51,860 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:51:51,917 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 02:51:51,918 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ('76',)
2024-12-07 02:51:57,976 - aiogram.event - INFO - Update id=659306970 is handled. Duration 264 ms by bot id=7444575424
2024-12-07 02:51:59,763 - aiogram.event - INFO - Update id=659306971 is handled. Duration 311 ms by bot id=7444575424
2024-12-07 02:52:00,656 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:52:00,658 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:52:00,658 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('528155210', 1, 0)
2024-12-07 02:52:00,765 - aiogram.event - INFO - Update id=659306972 is handled. Duration 125 ms by bot id=7444575424
2024-12-07 02:52:01,866 - aiogram.event - INFO - Update id=659306973 is handled. Duration 203 ms by bot id=7444575424
2024-12-07 02:52:04,400 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:52:04,401 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:52:04,401 - sqlalchemy.engine.Engine - INFO - [cached since 3.743s ago] ('528155210', 1, 0)
2024-12-07 02:52:04,507 - aiogram.event - INFO - Update id=659306974 is handled. Duration 109 ms by bot id=7444575424
2024-12-07 02:52:05,945 - aiogram.event - INFO - Update id=659306975 is handled. Duration 406 ms by bot id=7444575424
2024-12-07 02:52:06,742 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:52:06,744 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:52:06,745 - sqlalchemy.engine.Engine - INFO - [cached since 6.087s ago] ('528155210', 1, 0)
2024-12-07 02:52:06,917 - aiogram.event - INFO - Update id=659306976 is handled. Duration 188 ms by bot id=7444575424
2024-12-07 02:52:07,946 - aiogram.event - INFO - Update id=659306977 is handled. Duration 202 ms by bot id=7444575424
2024-12-07 02:52:10,074 - aiogram.event - INFO - Update id=659306978 is handled. Duration 281 ms by bot id=7444575424
2024-12-07 02:52:13,936 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:52:13,937 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:52:13,938 - sqlalchemy.engine.Engine - INFO - [cached since 13.28s ago] ('528155210', 1, 0)
2024-12-07 02:52:14,093 - aiogram.event - INFO - Update id=659306979 is handled. Duration 171 ms by bot id=7444575424
2024-12-07 02:52:15,219 - aiogram.event - INFO - Update id=659306980 is handled. Duration 218 ms by bot id=7444575424
2024-12-07 02:52:16,601 - aiogram.event - INFO - Update id=659306981 is handled. Duration 202 ms by bot id=7444575424
2024-12-07 02:52:45,613 - aiogram.event - INFO - Update id=659306982 is handled. Duration 344 ms by bot id=7444575424
2024-12-07 02:52:54,793 - root - INFO - {
    "message_id": 2917,
    "date": 1733529175,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 6000,
        "invoice_payload": "e4b72a74-7c7b-4546-ae56-f4d8cc8c76a4",
        "telegram_payment_charge_id": "7444575424_528155210_330577",
        "provider_payment_charge_id": "7444575424_528155210_330577",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-07 02:52:55,801 - root - INFO - Key created: OutlineKey(key_id='77', name='VPN Key64', password='Fcj36YTJRZjmGjBpJfyLLd', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpGY2ozNllUSlJaam1HakJwSmZ5TExk@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-07 02:52:55,802 - root - INFO - Key created: OutlineKey(key_id='77', name='VPN Key64', password='Fcj36YTJRZjmGjBpJfyLLd', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpGY2ozNllUSlJaam1HakJwSmZ5TExk@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-07 02:52:55,922 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:52:55,924 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:52:55,924 - sqlalchemy.engine.Engine - INFO - [cached since 55.27s ago] ('528155210', 1, 0)
2024-12-07 02:52:55,930 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-07 02:52:55,931 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] ('77', '528155210', '2025-01-06 02:52:55.926241', '2024-12-07 02:52:55.926241', 0)
2024-12-07 02:52:55,940 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:52:55,946 - aiogram.event - INFO - Update id=659306983 is handled. Duration 1156 ms by bot id=7444575424
2024-12-07 02:53:02,601 - aiogram.event - INFO - Update id=659306984 is handled. Duration 389 ms by bot id=7444575424
2024-12-07 02:53:11,115 - aiogram.event - INFO - Update id=659306985 is handled. Duration 172 ms by bot id=7444575424
2024-12-07 02:53:12,345 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:53:12,346 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:53:12,346 - sqlalchemy.engine.Engine - INFO - [cached since 71.69s ago] ('528155210', 1, 0)
2024-12-07 02:53:12,349 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:53:12,349 - sqlalchemy.engine.Engine - INFO - [cached since 80.78s ago] ('528155210',)
2024-12-07 02:53:14,983 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 02:53:15,115 - aiogram.event - INFO - Update id=659306986 is handled. Duration 2781 ms by bot id=7444575424
2024-12-07 02:53:18,307 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:53:18,309 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:53:18,309 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] ('67', 1, 0)
2024-12-07 02:53:18,446 - aiogram.event - INFO - Update id=659306987 is handled. Duration 1031 ms by bot id=7444575424
2024-12-07 02:53:20,459 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:53:20,460 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:53:20,461 - sqlalchemy.engine.Engine - INFO - [cached since 79.8s ago] ('528155210', 1, 0)
2024-12-07 02:53:20,466 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:53:20,466 - sqlalchemy.engine.Engine - INFO - [cached since 88.9s ago] ('528155210',)
2024-12-07 02:53:23,548 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 02:53:23,548 - aiogram.event - INFO - Update id=659306988 is handled. Duration 3093 ms by bot id=7444575424
2024-12-07 02:53:25,771 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:53:25,772 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:53:25,772 - sqlalchemy.engine.Engine - INFO - [cached since 7.463s ago] ('76', 1, 0)
2024-12-07 02:53:25,910 - aiogram.event - INFO - Update id=659306989 is handled. Duration 984 ms by bot id=7444575424
2024-12-07 02:53:28,144 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:53:28,144 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:53:28,145 - sqlalchemy.engine.Engine - INFO - [cached since 87.49s ago] ('528155210', 1, 0)
2024-12-07 02:53:28,146 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:53:28,146 - sqlalchemy.engine.Engine - INFO - [cached since 96.58s ago] ('528155210',)
2024-12-07 02:53:30,494 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 02:53:30,495 - aiogram.event - INFO - Update id=659306990 is handled. Duration 2344 ms by bot id=7444575424
2024-12-07 02:53:32,554 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:53:32,555 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:53:32,555 - sqlalchemy.engine.Engine - INFO - [cached since 14.25s ago] ('77', 1, 0)
2024-12-07 02:53:32,715 - aiogram.event - INFO - Update id=659306991 is handled. Duration 1015 ms by bot id=7444575424
2024-12-07 02:53:35,093 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:53:35,093 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:53:35,093 - sqlalchemy.engine.Engine - INFO - [cached since 16.78s ago] ('77', 1, 0)
2024-12-07 02:53:36,201 - aiogram.event - INFO - Update id=659306992 is handled. Duration 1109 ms by bot id=7444575424
2024-12-07 02:53:38,780 - aiogram.event - INFO - Update id=659306993 is handled. Duration 172 ms by bot id=7444575424
2024-12-07 02:53:40,281 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:53:40,282 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:53:40,282 - sqlalchemy.engine.Engine - INFO - [cached since 99.62s ago] ('528155210', 1, 0)
2024-12-07 02:53:40,285 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:53:40,285 - sqlalchemy.engine.Engine - INFO - [cached since 108.7s ago] ('528155210',)
2024-12-07 02:53:42,584 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 02:53:42,666 - aiogram.event - INFO - Update id=659306994 is handled. Duration 2390 ms by bot id=7444575424
2024-12-07 02:53:46,529 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:53:46,531 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:53:46,531 - sqlalchemy.engine.Engine - INFO - [cached since 28.22s ago] ('76', 1, 0)
2024-12-07 02:53:46,675 - aiogram.event - INFO - Update id=659306995 is handled. Duration 1343 ms by bot id=7444575424
2024-12-07 02:53:49,186 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:53:49,187 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:53:49,187 - sqlalchemy.engine.Engine - INFO - [cached since 30.88s ago] ('76', 1, 0)
2024-12-07 02:53:49,281 - aiogram.event - INFO - Update id=659306996 is handled. Duration 109 ms by bot id=7444575424
2024-12-07 02:53:51,478 - aiogram.event - INFO - Update id=659306997 is handled. Duration 171 ms by bot id=7444575424
2024-12-07 02:53:53,692 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:53:53,693 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:53:53,694 - sqlalchemy.engine.Engine - INFO - [cached since 113s ago] ('528155210', 1, 0)
2024-12-07 02:53:53,697 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:53:53,697 - sqlalchemy.engine.Engine - INFO - [cached since 122.1s ago] ('528155210',)
2024-12-07 02:53:56,128 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 02:53:56,206 - aiogram.event - INFO - Update id=659306998 is handled. Duration 2515 ms by bot id=7444575424
2024-12-07 02:53:57,897 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:53:57,899 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:53:57,900 - sqlalchemy.engine.Engine - INFO - [cached since 39.59s ago] ('77', 1, 0)
2024-12-07 02:53:58,060 - aiogram.event - INFO - Update id=659306999 is handled. Duration 968 ms by bot id=7444575424
2024-12-07 02:54:02,089 - aiogram.event - INFO - Update id=659307000 is handled. Duration 250 ms by bot id=7444575424
2024-12-07 02:54:06,242 - aiogram.event - INFO - Update id=659307001 is handled. Duration 94 ms by bot id=7444575424
2024-12-07 02:54:08,333 - aiogram.event - INFO - Update id=659307002 is handled. Duration 93 ms by bot id=7444575424
2024-12-07 02:54:11,798 - aiogram.event - INFO - Update id=659307003 is handled. Duration 186 ms by bot id=7444575424
2024-12-07 02:54:13,049 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:54:13,051 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:54:13,051 - sqlalchemy.engine.Engine - INFO - [cached since 132.4s ago] ('528155210', 1, 0)
2024-12-07 02:54:13,053 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:54:13,053 - sqlalchemy.engine.Engine - INFO - [cached since 141.5s ago] ('528155210',)
2024-12-07 02:54:15,381 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 02:54:15,465 - aiogram.event - INFO - Update id=659307004 is handled. Duration 2406 ms by bot id=7444575424
2024-12-07 02:54:17,050 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:54:17,052 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:54:17,052 - sqlalchemy.engine.Engine - INFO - [cached since 58.74s ago] ('77', 1, 0)
2024-12-07 02:54:17,204 - aiogram.event - INFO - Update id=659307005 is handled. Duration 985 ms by bot id=7444575424
2024-12-07 02:54:19,325 - aiogram.event - INFO - Update id=659307006 is handled. Duration 77 ms by bot id=7444575424
2024-12-07 02:54:21,942 - aiogram.event - INFO - Update id=659307007 is handled. Duration 109 ms by bot id=7444575424
2024-12-07 02:54:22,985 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:54:22,985 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:54:22,985 - sqlalchemy.engine.Engine - INFO - [cached since 64.68s ago] ('77', 1, 0)
2024-12-07 02:54:22,986 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:54:22,986 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:54:22,986 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 02:54:22,986 - sqlalchemy.engine.Engine - INFO - [cached since 151.1s ago] ('77',)
2024-12-07 02:54:23,306 - aiogram.event - INFO - Update id=659307008 is handled. Duration 328 ms by bot id=7444575424
2024-12-07 02:54:24,343 - aiogram.event - INFO - Update id=659307009 is handled. Duration 188 ms by bot id=7444575424
2024-12-07 02:54:25,737 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:54:25,737 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:54:25,737 - sqlalchemy.engine.Engine - INFO - [cached since 145.1s ago] ('528155210', 1, 0)
2024-12-07 02:54:25,738 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:54:25,738 - sqlalchemy.engine.Engine - INFO - [cached since 154.2s ago] ('528155210',)
2024-12-07 02:54:28,357 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 02:54:28,436 - aiogram.event - INFO - Update id=659307010 is handled. Duration 2686 ms by bot id=7444575424
2024-12-07 02:54:31,004 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:54:31,005 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:54:31,006 - sqlalchemy.engine.Engine - INFO - [cached since 72.7s ago] ('77', 1, 0)
2024-12-07 02:54:31,138 - aiogram.event - INFO - Update id=659307011 is handled. Duration 952 ms by bot id=7444575424
2024-12-07 02:54:34,487 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:54:34,488 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:54:34,488 - sqlalchemy.engine.Engine - INFO - [cached since 76.18s ago] ('77', 1, 0)
2024-12-07 02:54:35,289 - aiogram.event - INFO - Update id=659307012 is handled. Duration 813 ms by bot id=7444575424
2024-12-07 02:54:37,859 - aiogram.event - INFO - Update id=659307013 is handled. Duration 281 ms by bot id=7444575424
2024-12-07 02:54:40,972 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:54:41,244 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:54:41,245 - root - INFO - Бот остановлен вручную.
2024-12-07 02:57:15,357 - root - INFO - Инициализация бота...
2024-12-07 02:57:15,386 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:57:15,387 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:57:15,387 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:57:15,387 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:57:15,387 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:57:15,388 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:57:15,415 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:57:15,415 - root - INFO - Инициализация диспетчера...
2024-12-07 02:57:15,415 - root - INFO - Регистрация обработчиков...
2024-12-07 02:57:15,416 - root - INFO - Запуск polling...
2024-12-07 02:57:15,416 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:57:15,420 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:57:15,421 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:57:15,421 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ()
2024-12-07 02:57:15,423 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:57:15,424 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('528155210',)
2024-12-07 02:57:15,424 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:57:15,425 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:57:15,425 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:57:15,425 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('528155210',)
2024-12-07 02:57:26,716 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:57:26,973 - root - INFO - Бот остановлен вручную.
2024-12-07 02:57:30,223 - root - INFO - Инициализация бота...
2024-12-07 02:57:30,253 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:57:30,253 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:57:30,253 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:57:30,254 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:57:30,254 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:57:30,255 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:57:30,269 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:57:30,269 - root - INFO - Инициализация диспетчера...
2024-12-07 02:57:30,270 - root - INFO - Регистрация обработчиков...
2024-12-07 02:57:30,271 - root - INFO - Запуск polling...
2024-12-07 02:57:30,271 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:57:30,276 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:57:30,278 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:57:30,278 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ()
2024-12-07 02:57:30,280 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:57:30,280 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('528155210',)
2024-12-07 02:57:30,281 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:57:30,281 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:57:30,282 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:57:30,282 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('528155210',)
2024-12-07 02:57:30,606 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:57:35,078 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:58:03,356 - root - INFO - Инициализация бота...
2024-12-07 02:58:03,400 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:58:03,401 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:58:03,401 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:58:03,402 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:58:03,402 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:58:03,402 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:58:03,425 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:58:03,425 - root - INFO - Инициализация диспетчера...
2024-12-07 02:58:03,426 - root - INFO - Регистрация обработчиков...
2024-12-07 02:58:03,427 - root - INFO - Запуск polling...
2024-12-07 02:58:03,427 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:58:03,434 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:58:03,436 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:58:03,436 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ()
2024-12-07 02:58:03,439 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:58:03,439 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('528155210',)
2024-12-07 02:58:03,440 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:58:03,441 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:58:03,442 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:58:03,442 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ('528155210',)
2024-12-07 02:58:03,639 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:58:03,667 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 02:58:03,667 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] ('76',)
2024-12-07 02:58:03,668 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 02:58:03,669 - sqlalchemy.engine.Engine - INFO - [cached since 0.002102s ago] ('77',)
2024-12-07 02:58:08,529 - aiogram.event - INFO - Update id=659307016 is handled. Duration 125 ms by bot id=7444575424
2024-12-07 02:58:11,631 - aiogram.event - INFO - Update id=659307017 is handled. Duration 186 ms by bot id=7444575424
2024-12-07 02:58:17,996 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:58:18,240 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:58:18,242 - root - INFO - Бот остановлен вручную.
2024-12-07 02:58:21,662 - root - INFO - Инициализация бота...
2024-12-07 02:58:21,698 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:58:21,698 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:58:21,698 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:58:21,699 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:58:21,699 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:58:21,699 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:58:21,718 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:58:21,718 - root - INFO - Инициализация диспетчера...
2024-12-07 02:58:21,718 - root - INFO - Регистрация обработчиков...
2024-12-07 02:58:21,720 - root - INFO - Запуск polling...
2024-12-07 02:58:21,720 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:58:21,725 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:58:21,727 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:58:21,727 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] ()
2024-12-07 02:58:21,730 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:58:21,730 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ('528155210',)
2024-12-07 02:58:21,730 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:58:21,731 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:58:21,732 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:58:21,732 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('528155210',)
2024-12-07 02:58:21,916 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:58:21,944 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 02:58:21,945 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ('76',)
2024-12-07 02:58:21,946 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 02:58:21,946 - sqlalchemy.engine.Engine - INFO - [cached since 0.002286s ago] ('77',)
2024-12-07 02:58:23,195 - aiogram.event - INFO - Update id=659307018 is not handled. Duration 0 ms by bot id=7444575424
2024-12-07 02:58:29,006 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 02:58:29,263 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:58:29,266 - root - INFO - Бот остановлен вручную.
2024-12-07 02:58:34,546 - root - INFO - Инициализация бота...
2024-12-07 02:58:34,621 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:58:34,622 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 02:58:34,622 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:58:34,624 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 02:58:34,624 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 02:58:34,625 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:58:34,662 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 02:58:34,662 - root - INFO - Инициализация диспетчера...
2024-12-07 02:58:34,663 - root - INFO - Регистрация обработчиков...
2024-12-07 02:58:34,666 - root - INFO - Запуск polling...
2024-12-07 02:58:34,666 - aiogram.dispatcher - INFO - Start polling
2024-12-07 02:58:34,677 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:58:34,680 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 02:58:34,681 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ()
2024-12-07 02:58:34,686 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:58:34,687 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ('528155210',)
2024-12-07 02:58:34,688 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 02:58:34,689 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:58:34,691 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 02:58:34,691 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ('528155210',)
2024-12-07 02:58:34,892 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 02:58:34,954 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 02:58:34,954 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ('76',)
2024-12-07 02:58:34,956 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 02:58:34,957 - sqlalchemy.engine.Engine - INFO - [cached since 0.002838s ago] ('77',)
2024-12-07 02:58:37,983 - aiogram.event - INFO - Update id=659307019 is handled. Duration 171 ms by bot id=7444575424
2024-12-07 02:58:39,924 - aiogram.event - INFO - Update id=659307020 is handled. Duration 250 ms by bot id=7444575424
2024-12-07 02:59:14,018 - aiogram.event - INFO - Update id=659307021 is handled. Duration 265 ms by bot id=7444575424
2024-12-07 02:59:14,991 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:59:14,996 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:59:14,996 - sqlalchemy.engine.Engine - INFO - [generated in 0.00095s] ('528155210', 1, 0)
2024-12-07 02:59:14,999 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:59:14,999 - sqlalchemy.engine.Engine - INFO - [cached since 40.31s ago] ('528155210',)
2024-12-07 02:59:17,933 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 02:59:17,998 - aiogram.event - INFO - Update id=659307022 is handled. Duration 3000 ms by bot id=7444575424
2024-12-07 02:59:19,994 - aiogram.event - INFO - Update id=659307023 is handled. Duration 141 ms by bot id=7444575424
2024-12-07 02:59:20,853 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:59:20,854 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:59:20,855 - sqlalchemy.engine.Engine - INFO - [cached since 5.86s ago] ('528155210', 1, 0)
2024-12-07 02:59:20,857 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 02:59:20,858 - sqlalchemy.engine.Engine - INFO - [cached since 46.17s ago] ('528155210',)
2024-12-07 02:59:23,157 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 02:59:23,220 - aiogram.event - INFO - Update id=659307024 is handled. Duration 2375 ms by bot id=7444575424
2024-12-07 02:59:25,011 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:59:25,014 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:59:25,015 - sqlalchemy.engine.Engine - INFO - [generated in 0.00097s] ('77', 1, 0)
2024-12-07 02:59:25,095 - aiogram.event - INFO - Update id=659307025 is handled. Duration 936 ms by bot id=7444575424
2024-12-07 02:59:27,111 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 02:59:27,113 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 02:59:27,114 - sqlalchemy.engine.Engine - INFO - [cached since 2.099s ago] ('77', 1, 0)
2024-12-07 02:59:27,888 - aiogram.event - INFO - Update id=659307026 is not handled. Duration 781 ms by bot id=7444575424
2024-12-07 02:59:27,888 - aiogram.event - ERROR - Cause exception while process update id=659307026 by bot id=7444575424
TypeError: send_key_to_user() missing 1 required positional argument: 'key'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 251, in show_key_url_handler
    await send_key_to_user(key_info.access_url)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: send_key_to_user() missing 1 required positional argument: 'key'
2024-12-07 03:00:05,314 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 03:00:05,568 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 03:00:05,571 - root - INFO - Бот остановлен вручную.
2024-12-07 03:00:09,575 - root - INFO - Инициализация бота...
2024-12-07 03:00:09,604 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:00:09,604 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 03:00:09,605 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 03:00:09,605 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 03:00:09,605 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 03:00:09,606 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 03:00:09,625 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 03:00:09,625 - root - INFO - Инициализация диспетчера...
2024-12-07 03:00:09,626 - root - INFO - Регистрация обработчиков...
2024-12-07 03:00:09,627 - root - INFO - Запуск polling...
2024-12-07 03:00:09,627 - aiogram.dispatcher - INFO - Start polling
2024-12-07 03:00:09,631 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:00:09,633 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 03:00:09,633 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ()
2024-12-07 03:00:09,635 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 03:00:09,635 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('528155210',)
2024-12-07 03:00:09,636 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 03:00:09,636 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:00:09,637 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 03:00:09,637 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('528155210',)
2024-12-07 03:00:09,841 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 03:00:09,887 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 03:00:09,887 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('76',)
2024-12-07 03:00:09,888 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 03:00:09,888 - sqlalchemy.engine.Engine - INFO - [cached since 0.00167s ago] ('77',)
2024-12-07 03:00:12,461 - aiogram.event - INFO - Update id=659307027 is handled. Duration 93 ms by bot id=7444575424
2024-12-07 03:00:14,456 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:00:14,460 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:00:14,461 - sqlalchemy.engine.Engine - INFO - [generated in 0.00178s] ('528155210', 1, 0)
2024-12-07 03:00:14,464 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 03:00:14,465 - sqlalchemy.engine.Engine - INFO - [cached since 4.829s ago] ('528155210',)
2024-12-07 03:00:17,947 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 03:00:18,050 - aiogram.event - INFO - Update id=659307028 is handled. Duration 3609 ms by bot id=7444575424
2024-12-07 03:00:20,107 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:00:20,112 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:00:20,113 - sqlalchemy.engine.Engine - INFO - [generated in 0.00139s] ('77', 1, 0)
2024-12-07 03:00:20,191 - aiogram.event - INFO - Update id=659307029 is handled. Duration 984 ms by bot id=7444575424
2024-12-07 03:00:21,467 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:00:21,468 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:00:21,469 - sqlalchemy.engine.Engine - INFO - [cached since 1.357s ago] ('77', 1, 0)
2024-12-07 03:00:22,271 - root - INFO - Key created: ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpGY2ozNllUSlJaam1HakJwSmZ5TExk@5.35.38.7:20669/?outline=1 for user 7444575424
2024-12-07 03:00:22,272 - aiogram.event - INFO - Update id=659307030 is not handled. Duration 811 ms by bot id=7444575424
2024-12-07 03:00:22,272 - aiogram.event - ERROR - Cause exception while process update id=659307030 by bot id=7444575424
AttributeError: 'str' object has no attribute 'access_url'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 251, in show_key_url_handler
    await send_key_to_user(callback.message, key_info.access_url)
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\send_message.py", line 20, in send_key_to_user
    get_your_key_string(key, text),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\string_makers.py", line 18, in get_your_key_string
    return f"{text}\n```\n" f"{key.access_url}\n```"
                               ^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'access_url'
2024-12-07 03:00:54,202 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:00:54,203 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:00:54,203 - sqlalchemy.engine.Engine - INFO - [cached since 34.09s ago] ('77', 1, 0)
2024-12-07 03:00:55,062 - root - INFO - Key created: ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpGY2ozNllUSlJaam1HakJwSmZ5TExk@5.35.38.7:20669/?outline=1 for user 7444575424
2024-12-07 03:00:55,062 - aiogram.event - INFO - Update id=659307031 is not handled. Duration 859 ms by bot id=7444575424
2024-12-07 03:00:55,063 - aiogram.event - ERROR - Cause exception while process update id=659307031 by bot id=7444575424
AttributeError: 'str' object has no attribute 'access_url'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 251, in show_key_url_handler
    await send_key_to_user(callback.message, key_info.access_url)
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\send_message.py", line 20, in send_key_to_user
    get_your_key_string(key, text),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\string_makers.py", line 18, in get_your_key_string
    return f"{text}\n```\n" f"{key.access_url}\n```"
                               ^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'access_url'
2024-12-07 03:01:28,490 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 03:01:28,750 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 03:01:28,752 - root - INFO - Бот остановлен вручную.
2024-12-07 03:01:32,238 - root - INFO - Инициализация бота...
2024-12-07 03:01:32,271 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:01:32,271 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 03:01:32,272 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 03:01:32,272 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 03:01:32,272 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 03:01:32,273 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 03:01:32,293 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 03:01:32,293 - root - INFO - Инициализация диспетчера...
2024-12-07 03:01:32,293 - root - INFO - Регистрация обработчиков...
2024-12-07 03:01:32,294 - root - INFO - Запуск polling...
2024-12-07 03:01:32,295 - aiogram.dispatcher - INFO - Start polling
2024-12-07 03:01:32,299 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:01:32,301 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 03:01:32,301 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
2024-12-07 03:01:32,303 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 03:01:32,303 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('528155210',)
2024-12-07 03:01:32,304 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 03:01:32,304 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:01:32,305 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 03:01:32,305 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('528155210',)
2024-12-07 03:01:32,495 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 03:01:32,562 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 03:01:32,562 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('76',)
2024-12-07 03:01:32,563 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 03:01:32,563 - sqlalchemy.engine.Engine - INFO - [cached since 0.001154s ago] ('77',)
2024-12-07 03:01:34,400 - aiogram.event - INFO - Update id=659307032 is handled. Duration 140 ms by bot id=7444575424
2024-12-07 03:01:35,155 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:01:35,156 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:01:35,156 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('528155210', 1, 0)
2024-12-07 03:01:35,158 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 03:01:35,158 - sqlalchemy.engine.Engine - INFO - [cached since 2.855s ago] ('528155210',)
2024-12-07 03:01:37,786 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 03:01:37,850 - aiogram.event - INFO - Update id=659307033 is handled. Duration 2702 ms by bot id=7444575424
2024-12-07 03:01:39,621 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:01:39,625 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:01:39,626 - sqlalchemy.engine.Engine - INFO - [generated in 0.00120s] ('77', 1, 0)
2024-12-07 03:01:39,705 - aiogram.event - INFO - Update id=659307034 is handled. Duration 985 ms by bot id=7444575424
2024-12-07 03:01:40,866 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:01:40,867 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:01:40,867 - sqlalchemy.engine.Engine - INFO - [cached since 1.243s ago] ('77', 1, 0)
2024-12-07 03:01:41,575 - root - INFO - Key created: OutlineKey(key_id='77', name='Телефон', password='Fcj36YTJRZjmGjBpJfyLLd', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpGY2ozNllUSlJaam1HakJwSmZ5TExk@5.35.38.7:20669/?outline=1', used_bytes=None, data_limit=1073741824) for user 7444575424
2024-12-07 03:01:41,664 - aiogram.event - INFO - Update id=659307035 is handled. Duration 813 ms by bot id=7444575424
2024-12-07 03:02:20,545 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 03:02:20,802 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 03:02:20,804 - root - INFO - Бот остановлен вручную.
2024-12-07 03:02:24,425 - root - INFO - Инициализация бота...
2024-12-07 03:02:24,456 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:02:24,457 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 03:02:24,457 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 03:02:24,457 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 03:02:24,457 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 03:02:24,458 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 03:02:24,477 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 03:02:24,477 - root - INFO - Инициализация диспетчера...
2024-12-07 03:02:24,478 - root - INFO - Регистрация обработчиков...
2024-12-07 03:02:24,479 - root - INFO - Запуск polling...
2024-12-07 03:02:24,479 - aiogram.dispatcher - INFO - Start polling
2024-12-07 03:02:24,483 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:02:24,485 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 03:02:24,485 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ()
2024-12-07 03:02:24,487 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 03:02:24,487 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ('528155210',)
2024-12-07 03:02:24,488 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 03:02:24,488 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:02:24,489 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 03:02:24,489 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('528155210',)
2024-12-07 03:02:24,685 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 03:02:24,719 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 03:02:24,720 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ('76',)
2024-12-07 03:02:24,720 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 03:02:24,721 - sqlalchemy.engine.Engine - INFO - [cached since 0.001226s ago] ('77',)
2024-12-07 03:02:26,089 - aiogram.event - INFO - Update id=659307036 is not handled. Duration 0 ms by bot id=7444575424
2024-12-07 03:02:27,362 - aiogram.event - INFO - Update id=659307037 is handled. Duration 235 ms by bot id=7444575424
2024-12-07 03:02:28,651 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:02:28,656 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:02:28,657 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] ('528155210', 1, 0)
2024-12-07 03:02:28,660 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 03:02:28,660 - sqlalchemy.engine.Engine - INFO - [cached since 4.173s ago] ('528155210',)
2024-12-07 03:02:31,903 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 03:02:31,966 - aiogram.event - INFO - Update id=659307038 is handled. Duration 3313 ms by bot id=7444575424
2024-12-07 03:02:33,850 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:02:33,854 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:02:33,855 - sqlalchemy.engine.Engine - INFO - [generated in 0.00103s] ('77', 1, 0)
2024-12-07 03:02:33,935 - aiogram.event - INFO - Update id=659307039 is handled. Duration 936 ms by bot id=7444575424
2024-12-07 03:02:35,087 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:02:35,087 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:02:35,088 - sqlalchemy.engine.Engine - INFO - [cached since 1.233s ago] ('77', 1, 0)
2024-12-07 03:02:35,785 - root - INFO - Key created: OutlineKey(key_id='77', name='Телефон', password='Fcj36YTJRZjmGjBpJfyLLd', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpGY2ozNllUSlJaam1HakJwSmZ5TExk@5.35.38.7:20669/?outline=1', used_bytes=None, data_limit=1073741824) for user 7444575424
2024-12-07 03:02:35,872 - aiogram.event - INFO - Update id=659307040 is handled. Duration 781 ms by bot id=7444575424
2024-12-07 03:02:41,476 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 03:02:41,740 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 03:02:41,742 - root - INFO - Бот остановлен вручную.
2024-12-07 03:03:26,912 - root - INFO - Инициализация бота...
2024-12-07 03:03:26,941 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:03:26,941 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 03:03:26,941 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 03:03:26,942 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 03:03:26,942 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 03:03:26,942 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 03:03:26,963 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 03:03:26,963 - root - INFO - Инициализация диспетчера...
2024-12-07 03:03:26,964 - root - INFO - Регистрация обработчиков...
2024-12-07 03:03:26,965 - root - INFO - Запуск polling...
2024-12-07 03:03:26,965 - aiogram.dispatcher - INFO - Start polling
2024-12-07 03:03:26,970 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:03:26,971 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 03:03:26,971 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ()
2024-12-07 03:03:26,973 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 03:03:26,973 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ('528155210',)
2024-12-07 03:03:26,974 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 03:03:26,974 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:03:26,975 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 03:03:26,975 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('528155210',)
2024-12-07 03:03:38,008 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 03:03:38,266 - root - INFO - Бот остановлен вручную.
2024-12-07 03:03:41,655 - root - INFO - Инициализация бота...
2024-12-07 03:03:41,685 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:03:41,685 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 03:03:41,685 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 03:03:41,686 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 03:03:41,686 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 03:03:41,687 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 03:03:41,701 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 03:03:41,702 - root - INFO - Инициализация диспетчера...
2024-12-07 03:03:41,702 - root - INFO - Регистрация обработчиков...
2024-12-07 03:03:41,703 - root - INFO - Запуск polling...
2024-12-07 03:03:41,704 - aiogram.dispatcher - INFO - Start polling
2024-12-07 03:03:41,708 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:03:41,710 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 03:03:41,710 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ()
2024-12-07 03:03:41,712 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 03:03:41,712 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('528155210',)
2024-12-07 03:03:41,713 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 03:03:41,713 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:03:41,714 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 03:03:41,714 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('528155210',)
2024-12-07 03:03:42,068 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 03:03:46,140 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 03:03:46,393 - aiogram.event - INFO - Update id=659307041 is not handled. Duration 4234 ms by bot id=7444575424
2024-12-07 03:03:46,394 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 03:03:46,395 - root - INFO - Бот остановлен вручную.
2024-12-07 03:03:50,202 - root - INFO - Инициализация бота...
2024-12-07 03:03:50,234 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:03:50,234 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 03:03:50,234 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 03:03:50,235 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 03:03:50,235 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 03:03:50,235 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 03:03:50,251 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 03:03:50,252 - root - INFO - Инициализация диспетчера...
2024-12-07 03:03:50,252 - root - INFO - Регистрация обработчиков...
2024-12-07 03:03:50,253 - root - INFO - Запуск polling...
2024-12-07 03:03:50,253 - aiogram.dispatcher - INFO - Start polling
2024-12-07 03:03:50,258 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:03:50,260 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 03:03:50,260 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ()
2024-12-07 03:03:50,262 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 03:03:50,262 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ('528155210',)
2024-12-07 03:03:50,263 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 03:03:50,263 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:03:50,264 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 03:03:50,264 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('528155210',)
2024-12-07 03:03:50,471 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 03:03:50,522 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 03:03:50,523 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] ('76',)
2024-12-07 03:03:50,524 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 03:03:50,524 - sqlalchemy.engine.Engine - INFO - [cached since 0.001939s ago] ('77',)
2024-12-07 03:03:52,272 - aiogram.event - INFO - Update id=659307042 is handled. Duration 156 ms by bot id=7444575424
2024-12-07 03:03:53,005 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:03:53,009 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:03:53,010 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('528155210', 1, 0)
2024-12-07 03:03:53,012 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 03:03:53,013 - sqlalchemy.engine.Engine - INFO - [cached since 2.751s ago] ('528155210',)
2024-12-07 03:03:55,382 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 03:03:55,481 - aiogram.event - INFO - Update id=659307043 is handled. Duration 2469 ms by bot id=7444575424
2024-12-07 03:03:57,730 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:03:57,731 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:03:57,732 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ('77', 1, 0)
2024-12-07 03:03:57,815 - aiogram.event - INFO - Update id=659307044 is handled. Duration 905 ms by bot id=7444575424
2024-12-07 03:03:58,801 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:03:58,801 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:03:58,801 - sqlalchemy.engine.Engine - INFO - [cached since 1.071s ago] ('77', 1, 0)
2024-12-07 03:03:59,667 - root - INFO - Key created: OutlineKey(key_id='77', name='Телефон', password='Fcj36YTJRZjmGjBpJfyLLd', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpGY2ozNllUSlJaam1HakJwSmZ5TExk@5.35.38.7:20669/?outline=1', used_bytes=None, data_limit=1073741824) for user 7444575424
2024-12-07 03:03:59,761 - aiogram.event - INFO - Update id=659307045 is handled. Duration 967 ms by bot id=7444575424
2024-12-07 03:04:02,401 - aiogram.event - INFO - Update id=659307046 is handled. Duration 172 ms by bot id=7444575424
2024-12-07 03:04:07,359 - aiogram.event - INFO - Update id=659307047 is handled. Duration 139 ms by bot id=7444575424
2024-12-07 03:04:08,818 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:04:08,818 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:04:08,819 - sqlalchemy.engine.Engine - INFO - [cached since 15.81s ago] ('528155210', 1, 0)
2024-12-07 03:04:08,819 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 03:04:08,820 - sqlalchemy.engine.Engine - INFO - [cached since 18.56s ago] ('528155210',)
2024-12-07 03:04:11,357 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 03:04:11,429 - aiogram.event - INFO - Update id=659307048 is handled. Duration 2609 ms by bot id=7444575424
2024-12-07 03:04:16,130 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:04:16,132 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:04:16,133 - sqlalchemy.engine.Engine - INFO - [cached since 18.4s ago] ('67', 1, 0)
2024-12-07 03:04:16,212 - aiogram.event - INFO - Update id=659307049 is handled. Duration 1125 ms by bot id=7444575424
2024-12-07 03:04:20,058 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:04:20,059 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:04:20,059 - sqlalchemy.engine.Engine - INFO - [cached since 22.33s ago] ('67', 1, 0)
2024-12-07 03:04:20,818 - root - INFO - Key created: OutlineKey(key_id='67', name='VPN Key54', password='Ztyr94Cl9C5HSW9Aic8lbK', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpadHlyOTRDbDlDNUhTVzlBaWM4bGJL@5.35.38.7:20669/?outline=1', used_bytes=None, data_limit=1073741824) for user 7444575424
2024-12-07 03:04:20,910 - aiogram.event - INFO - Update id=659307050 is handled. Duration 860 ms by bot id=7444575424
2024-12-07 03:04:41,448 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:04:41,448 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:04:41,448 - sqlalchemy.engine.Engine - INFO - [cached since 48.44s ago] ('528155210', 1, 0)
2024-12-07 03:04:41,449 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 03:04:41,449 - sqlalchemy.engine.Engine - INFO - [cached since 51.19s ago] ('528155210',)
2024-12-07 03:04:44,355 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 03:04:44,356 - aiogram.event - INFO - Update id=659307051 is handled. Duration 2905 ms by bot id=7444575424
2024-12-07 03:04:44,415 - aiogram.event - INFO - Update id=659307052 is handled. Duration 250 ms by bot id=7444575424
2024-12-07 03:04:45,956 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:04:45,956 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:04:45,957 - sqlalchemy.engine.Engine - INFO - [cached since 52.95s ago] ('528155210', 1, 0)
2024-12-07 03:04:45,957 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 03:04:45,958 - sqlalchemy.engine.Engine - INFO - [cached since 55.7s ago] ('528155210',)
2024-12-07 03:04:59,148 - root - ERROR - Ошибка при выборе ключа: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2024-12-07 03:04:59,212 - aiogram.event - INFO - Update id=659307056 is not handled. Duration 0 ms by bot id=7444575424
2024-12-07 03:04:59,212 - aiogram.event - ERROR - Cause exception while process update id=659307056 by bot id=7444575424
KeyError: 'Key'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\payment_router.py", line 41, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Key'
2024-12-07 03:04:59,220 - aiogram.event - INFO - Update id=659307057 is not handled. Duration 14 ms by bot id=7444575424
2024-12-07 03:04:59,221 - aiogram.event - ERROR - Cause exception while process update id=659307057 by bot id=7444575424
KeyError: 'Key'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\payment_router.py", line 41, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Key'
2024-12-07 03:04:59,227 - aiogram.event - INFO - Update id=659307058 is not handled. Duration 14 ms by bot id=7444575424
2024-12-07 03:04:59,227 - aiogram.event - ERROR - Cause exception while process update id=659307058 by bot id=7444575424
KeyError: 'Key'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\payment_router.py", line 41, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Key'
2024-12-07 03:04:59,235 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 03:04:59,236 - aiogram.event - INFO - Update id=659307053 is handled. Duration 13280 ms by bot id=7444575424
2024-12-07 03:04:59,297 - aiogram.event - INFO - Update id=659307054 is handled. Duration 155 ms by bot id=7444575424
2024-12-07 03:04:59,377 - aiogram.event - INFO - Update id=659307055 is handled. Duration 170 ms by bot id=7444575424
2024-12-07 03:05:01,004 - aiogram.event - INFO - Update id=659307059 is handled. Duration 139 ms by bot id=7444575424
2024-12-07 03:05:01,948 - aiogram.event - INFO - Update id=659307060 is handled. Duration 125 ms by bot id=7444575424
2024-12-07 03:05:03,773 - aiogram.event - INFO - Update id=659307061 is handled. Duration 187 ms by bot id=7444575424
2024-12-07 03:05:04,638 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:05:04,638 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:05:04,639 - sqlalchemy.engine.Engine - INFO - [cached since 71.63s ago] ('528155210', 1, 0)
2024-12-07 03:05:04,709 - aiogram.event - INFO - Update id=659307062 is handled. Duration 79 ms by bot id=7444575424
2024-12-07 03:05:06,100 - aiogram.event - INFO - Update id=659307063 is handled. Duration 155 ms by bot id=7444575424
2024-12-07 03:05:08,467 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:05:08,467 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:05:08,467 - sqlalchemy.engine.Engine - INFO - [cached since 75.46s ago] ('528155210', 1, 0)
2024-12-07 03:05:08,536 - aiogram.event - INFO - Update id=659307064 is handled. Duration 78 ms by bot id=7444575424
2024-12-07 03:05:09,469 - aiogram.event - INFO - Update id=659307065 is handled. Duration 139 ms by bot id=7444575424
2024-12-07 03:05:11,646 - aiogram.event - INFO - Update id=659307066 is handled. Duration 562 ms by bot id=7444575424
2024-12-07 03:05:12,972 - aiogram.event - INFO - Update id=659307067 is handled. Duration 125 ms by bot id=7444575424
2024-12-07 03:05:30,403 - aiogram.event - INFO - Update id=659307068 is handled. Duration 172 ms by bot id=7444575424
2024-12-07 03:05:34,986 - root - INFO - {
    "message_id": 3018,
    "date": 1733529935,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 6000,
        "invoice_payload": "9e245072-97c5-4b5e-bbc0-5fd17a24af3c",
        "telegram_payment_charge_id": "7444575424_528155210_330678",
        "provider_payment_charge_id": "7444575424_528155210_330678",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-07 03:05:37,705 - root - INFO - Key created: OutlineKey(key_id='78', name='VPN Key65', password='NbQ5Tfib2OCh07EozjE2wr', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpOYlE1VGZpYjJPQ2gwN0VvempFMndy@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-07 03:05:37,705 - root - INFO - Key created: OutlineKey(key_id='78', name='VPN Key65', password='NbQ5Tfib2OCh07EozjE2wr', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpOYlE1VGZpYjJPQ2gwN0VvempFMndy@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-07 03:05:37,794 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:05:37,795 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:05:37,795 - sqlalchemy.engine.Engine - INFO - [cached since 104.8s ago] ('528155210', 1, 0)
2024-12-07 03:05:37,798 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-07 03:05:37,798 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] ('78', '528155210', '2025-01-06 03:05:37.796045', '2024-12-07 03:05:37.796045', 0)
2024-12-07 03:05:37,800 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 03:05:37,806 - aiogram.event - INFO - Update id=659307069 is handled. Duration 2812 ms by bot id=7444575424
2024-12-07 03:05:42,356 - aiogram.event - INFO - Update id=659307070 is handled. Duration 125 ms by bot id=7444575424
2024-12-07 03:05:43,427 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:05:43,428 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:05:43,428 - sqlalchemy.engine.Engine - INFO - [cached since 110.4s ago] ('528155210', 1, 0)
2024-12-07 03:05:43,429 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 03:05:43,429 - sqlalchemy.engine.Engine - INFO - [cached since 113.2s ago] ('528155210',)
2024-12-07 03:05:46,941 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 03:05:47,007 - aiogram.event - INFO - Update id=659307071 is handled. Duration 3577 ms by bot id=7444575424
2024-12-07 03:06:01,045 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:06:01,046 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:06:01,046 - sqlalchemy.engine.Engine - INFO - [cached since 123.3s ago] ('67', 1, 0)
2024-12-07 03:06:01,119 - aiogram.event - INFO - Update id=659307072 is handled. Duration 1827 ms by bot id=7444575424
2024-12-07 03:06:03,247 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:06:03,247 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:06:03,248 - sqlalchemy.engine.Engine - INFO - [cached since 125.5s ago] ('67', 1, 0)
2024-12-07 03:06:04,193 - aiogram.event - INFO - Update id=659307073 is handled. Duration 953 ms by bot id=7444575424
2024-12-07 03:06:09,018 - aiogram.event - INFO - Update id=659307074 is handled. Duration 141 ms by bot id=7444575424
2024-12-07 03:06:10,440 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:06:10,440 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:06:10,440 - sqlalchemy.engine.Engine - INFO - [cached since 137.4s ago] ('528155210', 1, 0)
2024-12-07 03:06:10,441 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 03:06:10,442 - sqlalchemy.engine.Engine - INFO - [cached since 140.2s ago] ('528155210',)
2024-12-07 03:06:13,841 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 03:06:13,903 - aiogram.event - INFO - Update id=659307075 is handled. Duration 3453 ms by bot id=7444575424
2024-12-07 03:06:19,709 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:06:19,710 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:06:19,711 - sqlalchemy.engine.Engine - INFO - [cached since 142s ago] ('78', 1, 0)
2024-12-07 03:06:19,786 - aiogram.event - INFO - Update id=659307076 is handled. Duration 1328 ms by bot id=7444575424
2024-12-07 03:06:30,808 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 03:06:30,809 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 03:06:30,810 - sqlalchemy.engine.Engine - INFO - [cached since 157.8s ago] ('528155210', 1, 0)
2024-12-07 03:06:30,811 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 03:06:30,812 - sqlalchemy.engine.Engine - INFO - [cached since 160.5s ago] ('528155210',)
2024-12-07 03:06:35,413 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 03:06:35,413 - aiogram.event - INFO - Update id=659307077 is handled. Duration 4610 ms by bot id=7444575424
2024-12-07 03:06:39,152 - aiogram.event - INFO - Update id=659307078 is handled. Duration 125 ms by bot id=7444575424
2024-12-07 03:06:43,171 - aiogram.event - INFO - Update id=659307079 is handled. Duration 172 ms by bot id=7444575424
2024-12-07 03:06:48,717 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 03:06:48,960 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 03:06:48,962 - root - INFO - Бот остановлен вручную.
2024-12-07 14:26:01,846 - root - INFO - Инициализация бота...
2024-12-07 14:26:01,974 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:26:01,976 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 14:26:01,976 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 14:26:01,980 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 14:26:01,981 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 14:26:01,982 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 14:26:02,063 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 14:26:02,063 - root - INFO - Инициализация диспетчера...
2024-12-07 14:26:02,064 - root - INFO - Регистрация обработчиков...
2024-12-07 14:26:02,068 - root - INFO - Запуск polling...
2024-12-07 14:26:02,069 - aiogram.dispatcher - INFO - Start polling
2024-12-07 14:26:02,082 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:26:02,085 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 14:26:02,086 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ()
2024-12-07 14:26:02,093 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 14:26:02,093 - sqlalchemy.engine.Engine - INFO - [generated in 0.00067s] ('528155210',)
2024-12-07 14:26:02,095 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 14:26:02,096 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:26:02,098 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 14:26:02,098 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ('528155210',)
2024-12-07 14:26:02,575 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 14:26:02,671 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 14:26:02,671 - sqlalchemy.engine.Engine - INFO - [generated in 0.00140s] ('76',)
2024-12-07 14:26:02,677 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 14:26:02,677 - sqlalchemy.engine.Engine - INFO - [cached since 0.006914s ago] ('77',)
2024-12-07 14:26:02,679 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 14:26:02,681 - sqlalchemy.engine.Engine - INFO - [cached since 0.01098s ago] ('78',)
2024-12-07 14:26:08,096 - aiogram.event - INFO - Update id=659307080 is not handled. Duration 14 ms by bot id=7444575424
2024-12-07 14:26:10,628 - aiogram.event - INFO - Update id=659307081 is handled. Duration 296 ms by bot id=7444575424
2024-12-07 14:26:11,981 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:26:11,986 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 14:26:11,987 - sqlalchemy.engine.Engine - INFO - [generated in 0.00102s] ('528155210', 1, 0)
2024-12-07 14:26:11,992 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 14:26:11,994 - sqlalchemy.engine.Engine - INFO - [cached since 9.901s ago] ('528155210',)
2024-12-07 14:26:15,929 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 14:26:16,028 - aiogram.event - INFO - Update id=659307082 is handled. Duration 4046 ms by bot id=7444575424
2024-12-07 14:26:19,400 - aiogram.event - INFO - Update id=659307083 is handled. Duration 203 ms by bot id=7444575424
2024-12-07 14:26:20,560 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:26:20,560 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 14:26:20,561 - sqlalchemy.engine.Engine - INFO - [cached since 8.575s ago] ('528155210', 1, 0)
2024-12-07 14:26:20,561 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 14:26:20,561 - sqlalchemy.engine.Engine - INFO - [cached since 18.47s ago] ('528155210',)
2024-12-07 14:26:24,136 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 14:26:24,263 - aiogram.event - INFO - Update id=659307084 is handled. Duration 3703 ms by bot id=7444575424
2024-12-07 14:26:26,440 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:26:26,442 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 14:26:26,443 - sqlalchemy.engine.Engine - INFO - [generated in 0.00085s] ('67', 1, 0)
2024-12-07 14:26:26,582 - aiogram.event - INFO - Update id=659307085 is handled. Duration 1250 ms by bot id=7444575424
2024-12-07 14:26:30,319 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:26:30,319 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 14:26:30,320 - sqlalchemy.engine.Engine - INFO - [cached since 18.33s ago] ('528155210', 1, 0)
2024-12-07 14:26:30,322 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 14:26:30,323 - sqlalchemy.engine.Engine - INFO - [cached since 28.23s ago] ('528155210',)
2024-12-07 14:26:34,224 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 14:26:34,225 - aiogram.event - INFO - Update id=659307086 is handled. Duration 3906 ms by bot id=7444575424
2024-12-07 14:26:37,244 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:26:37,245 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 14:26:37,245 - sqlalchemy.engine.Engine - INFO - [cached since 10.8s ago] ('78', 1, 0)
2024-12-07 14:26:37,409 - aiogram.event - INFO - Update id=659307087 is handled. Duration 1110 ms by bot id=7444575424
2024-12-07 14:26:38,916 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:26:38,917 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 14:26:38,917 - sqlalchemy.engine.Engine - INFO - [cached since 12.48s ago] ('78', 1, 0)
2024-12-07 14:26:39,944 - root - INFO - Key created: OutlineKey(key_id='78', name='VPN Key65', password='NbQ5Tfib2OCh07EozjE2wr', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpOYlE1VGZpYjJPQ2gwN0VvempFMndy@5.35.38.7:20669/?outline=1', used_bytes=None, data_limit=1073741824) for user 7444575424
2024-12-07 14:26:40,102 - aiogram.event - INFO - Update id=659307088 is handled. Duration 1186 ms by bot id=7444575424
2024-12-07 14:26:42,854 - aiogram.event - INFO - Update id=659307089 is handled. Duration 311 ms by bot id=7444575424
2024-12-07 14:26:44,159 - aiogram.event - INFO - Update id=659307090 is handled. Duration 219 ms by bot id=7444575424
2024-12-07 14:26:46,333 - aiogram.event - INFO - Update id=659307091 is handled. Duration 250 ms by bot id=7444575424
2024-12-07 14:26:52,504 - aiogram.event - INFO - Update id=659307092 is handled. Duration 906 ms by bot id=7444575424
2024-12-07 14:26:54,189 - aiogram.event - INFO - Update id=659307093 is handled. Duration 750 ms by bot id=7444575424
2024-12-07 14:26:54,579 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:26:54,580 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 14:26:54,581 - sqlalchemy.engine.Engine - INFO - [cached since 42.59s ago] ('528155210', 1, 0)
2024-12-07 14:26:54,711 - aiogram.event - INFO - Update id=659307094 is handled. Duration 141 ms by bot id=7444575424
2024-12-07 14:26:56,429 - aiogram.event - INFO - Update id=659307095 is handled. Duration 218 ms by bot id=7444575424
2024-12-07 14:26:57,817 - aiogram.event - INFO - Update id=659307096 is not handled. Duration 93 ms by bot id=7444575424
2024-12-07 14:26:57,818 - aiogram.event - ERROR - Cause exception while process update id=659307096 by bot id=7444575424
TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\payment_router.py", line 49, in handle_period_selection
    await bot.send_invoice(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2771, in send_invoice
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
2024-12-07 14:29:06,890 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 14:29:07,147 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 14:29:07,153 - root - INFO - Бот остановлен вручную.
2024-12-07 14:29:14,305 - root - INFO - Инициализация бота...
2024-12-07 14:29:14,360 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:29:14,360 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 14:29:14,361 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 14:29:14,362 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 14:29:14,362 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 14:29:14,363 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 14:29:14,391 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 14:29:14,391 - root - INFO - Инициализация диспетчера...
2024-12-07 14:29:14,391 - root - INFO - Регистрация обработчиков...
2024-12-07 14:29:14,393 - root - INFO - Запуск polling...
2024-12-07 14:29:14,393 - aiogram.dispatcher - INFO - Start polling
2024-12-07 14:29:14,401 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:29:14,404 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 14:29:14,404 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ()
2024-12-07 14:29:14,408 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 14:29:14,408 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('528155210',)
2024-12-07 14:29:14,409 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 14:29:14,410 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:29:14,410 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 14:29:14,411 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] ('528155210',)
2024-12-07 14:29:14,793 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 14:29:14,879 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 14:29:14,880 - sqlalchemy.engine.Engine - INFO - [generated in 0.00144s] ('76',)
2024-12-07 14:29:14,886 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 14:29:14,887 - sqlalchemy.engine.Engine - INFO - [cached since 0.00868s ago] ('77',)
2024-12-07 14:29:14,891 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 14:29:14,892 - sqlalchemy.engine.Engine - INFO - [cached since 0.01414s ago] ('78',)
2024-12-07 14:29:21,575 - aiogram.event - INFO - Update id=659307097 is handled. Duration 468 ms by bot id=7444575424
2024-12-07 14:29:23,282 - aiogram.event - INFO - Update id=659307098 is handled. Duration 344 ms by bot id=7444575424
2024-12-07 14:29:24,506 - aiogram.event - INFO - Update id=659307099 is handled. Duration 234 ms by bot id=7444575424
2024-12-07 14:30:12,011 - aiogram.event - INFO - Update id=659307100 is not handled. Duration 21046 ms by bot id=7444575424
2024-12-07 14:30:12,012 - aiogram.event - ERROR - Cause exception while process update id=659307100 by bot id=7444575424
TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
Traceback (most recent call last):
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 494, in finish_recv
    return ov.getresult()
           ^^^^^^^^^^^^^^
OSError: [WinError 64] Указанное сетевое имя более недоступно

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1116, in _wrap_create_connection
    return await self._loop.create_connection(*args, **kwargs, sock=sock)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1112, in create_connection
    transport, protocol = await self._create_connection_transport(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1145, in _create_connection_transport
    await waiter
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 286, in _loop_reading
    length = fut.result()
             ^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 846, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 498, in finish_recv
    raise ConnectionResetError(*exc.args)
ConnectionResetError: [WinError 64] Указанное сетевое имя более недоступно

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 181, in make_request
    async with session.post(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 1360, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\client.py", line 663, in _request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 538, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1050, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1384, in _create_direct_connection
    raise last_exc
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1353, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiohttp\connector.py", line 1124, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\payment_router.py", line 65, in pre_checkout_query
    await bot.answer_pre_checkout_query(pre_checkout_q.id, ok=True)
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 665, in answer_pre_checkout_query
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 188, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [Указанное сетевое имя более недоступно]
2024-12-07 14:30:26,122 - aiogram.dispatcher - INFO - Polling stopped
2024-12-07 14:30:26,382 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 14:30:26,384 - root - INFO - Бот остановлен вручную.
2024-12-07 14:31:34,818 - root - INFO - Инициализация бота...
2024-12-07 14:31:34,902 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:31:34,903 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-07 14:31:34,903 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 14:31:34,905 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-07 14:31:34,905 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-07 14:31:34,906 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 14:31:34,952 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-07 14:31:34,952 - root - INFO - Инициализация диспетчера...
2024-12-07 14:31:34,954 - root - INFO - Регистрация обработчиков...
2024-12-07 14:31:34,956 - root - INFO - Запуск polling...
2024-12-07 14:31:34,957 - aiogram.dispatcher - INFO - Start polling
2024-12-07 14:31:34,969 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:31:34,973 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-07 14:31:34,973 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ()
2024-12-07 14:31:34,980 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 14:31:34,980 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('528155210',)
2024-12-07 14:31:34,982 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 14:31:34,983 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:31:34,984 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-07 14:31:34,985 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ('528155210',)
2024-12-07 14:31:35,254 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-07 14:31:35,419 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 14:31:35,420 - sqlalchemy.engine.Engine - INFO - [generated in 0.00101s] ('76',)
2024-12-07 14:31:35,423 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 14:31:35,424 - sqlalchemy.engine.Engine - INFO - [cached since 0.004667s ago] ('77',)
2024-12-07 14:31:35,426 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-07 14:31:35,427 - sqlalchemy.engine.Engine - INFO - [cached since 0.007699s ago] ('78',)
2024-12-07 14:31:50,959 - aiogram.event - INFO - Update id=659307101 is handled. Duration 296 ms by bot id=7444575424
2024-12-07 14:31:52,833 - aiogram.event - INFO - Update id=659307102 is handled. Duration 218 ms by bot id=7444575424
2024-12-07 14:31:53,824 - aiogram.event - INFO - Update id=659307103 is handled. Duration 155 ms by bot id=7444575424
2024-12-07 14:32:06,331 - aiogram.event - INFO - Update id=659307104 is handled. Duration 203 ms by bot id=7444575424
2024-12-07 14:32:11,251 - aiogram.event - INFO - Update id=659307105 is handled. Duration 78 ms by bot id=7444575424
2024-12-07 14:33:14,101 - aiogram.event - INFO - Update id=659307106 is handled. Duration 375 ms by bot id=7444575424
2024-12-07 14:33:19,642 - root - INFO - {
    "message_id": 3058,
    "date": 1733571200,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 120000,
        "invoice_payload": "6e8361cc-bd6f-4610-856c-21290c0daf2b",
        "telegram_payment_charge_id": "7444575424_528155210_330820",
        "provider_payment_charge_id": "7444575424_528155210_330820",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-07 14:33:21,192 - root - INFO - Key created: OutlineKey(key_id='79', name='VPN Key66', password='omxpi7x9A4QxvVhgZ1ugKH', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpvbXhwaTd4OUE0UXh2VmhnWjF1Z0tI@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-07 14:33:21,193 - root - INFO - Key created: OutlineKey(key_id='79', name='VPN Key66', password='omxpi7x9A4QxvVhgZ1ugKH', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpvbXhwaTd4OUE0UXh2VmhnWjF1Z0tI@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-07 14:33:21,319 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:33:21,327 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 14:33:21,328 - sqlalchemy.engine.Engine - INFO - [generated in 0.00184s] ('528155210', 1, 0)
2024-12-07 14:33:21,341 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-07 14:33:21,342 - sqlalchemy.engine.Engine - INFO - [generated in 0.00131s] ('79', '528155210', '2025-12-02 14:33:21.334292', '2024-12-07 14:33:21.334292', 0)
2024-12-07 14:33:21,348 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-07 14:33:21,359 - aiogram.event - INFO - Update id=659307107 is handled. Duration 1735 ms by bot id=7444575424
2024-12-07 14:33:27,840 - aiogram.event - INFO - Update id=659307108 is handled. Duration 188 ms by bot id=7444575424
2024-12-07 14:33:35,944 - aiogram.event - INFO - Update id=659307109 is handled. Duration 218 ms by bot id=7444575424
2024-12-07 14:33:38,092 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:33:38,094 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 14:33:38,094 - sqlalchemy.engine.Engine - INFO - [cached since 16.77s ago] ('528155210', 1, 0)
2024-12-07 14:33:38,097 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 14:33:38,098 - sqlalchemy.engine.Engine - INFO - [cached since 123.1s ago] ('528155210',)
2024-12-07 14:33:43,141 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 14:33:43,264 - aiogram.event - INFO - Update id=659307110 is handled. Duration 5171 ms by bot id=7444575424
2024-12-07 14:33:55,281 - aiogram.event - INFO - Update id=659307111 is handled. Duration 203 ms by bot id=7444575424
2024-12-07 14:33:57,111 - aiogram.event - INFO - Update id=659307112 is handled. Duration 391 ms by bot id=7444575424
2024-12-07 14:34:00,331 - aiogram.event - INFO - Update id=659307113 is handled. Duration 235 ms by bot id=7444575424
2024-12-07 14:34:56,631 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:34:56,632 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 14:34:56,634 - sqlalchemy.engine.Engine - INFO - [cached since 95.31s ago] ('528155210', 1, 0)
2024-12-07 14:34:56,853 - aiogram.event - INFO - Update id=659307114 is handled. Duration 233 ms by bot id=7444575424
2024-12-07 14:34:58,017 - aiogram.event - INFO - Update id=659307115 is handled. Duration 265 ms by bot id=7444575424
2024-12-07 14:34:59,527 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:34:59,529 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 14:34:59,529 - sqlalchemy.engine.Engine - INFO - [cached since 98.2s ago] ('528155210', 1, 0)
2024-12-07 14:34:59,532 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 14:34:59,533 - sqlalchemy.engine.Engine - INFO - [cached since 204.6s ago] ('528155210',)
2024-12-07 14:35:04,225 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-07 14:35:04,336 - aiogram.event - INFO - Update id=659307116 is handled. Duration 4813 ms by bot id=7444575424
2024-12-07 14:35:08,477 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:35:08,481 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-07 14:35:08,482 - sqlalchemy.engine.Engine - INFO - [generated in 0.00155s] ('67', 1, 0)
2024-12-07 14:35:08,616 - aiogram.event - INFO - Update id=659307117 is handled. Duration 1438 ms by bot id=7444575424
2024-12-07 14:35:12,102 - aiogram.event - INFO - Update id=659307118 is handled. Duration 93 ms by bot id=7444575424
2024-12-07 14:35:15,101 - aiogram.event - INFO - Update id=659307119 is handled. Duration 93 ms by bot id=7444575424
2024-12-07 14:35:16,488 - aiogram.event - INFO - Update id=659307120 is handled. Duration 266 ms by bot id=7444575424
2024-12-07 14:35:17,927 - aiogram.event - INFO - Update id=659307121 is handled. Duration 311 ms by bot id=7444575424
2024-12-07 14:35:20,012 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-07 14:35:20,014 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-07 14:35:20,015 - sqlalchemy.engine.Engine - INFO - [cached since 118.7s ago] ('528155210', 1, 0)
2024-12-07 14:35:20,021 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-07 14:35:20,022 - sqlalchemy.engine.Engine - INFO - [cached since 225s ago] ('528155210',)
2024-12-07 14:35:24,997 - aiogram.dispatcher - INFO - Polling stopped
