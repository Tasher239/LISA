2024-12-04 13:36:02,705 - root - INFO - Инициализация бота...
2024-12-04 13:36:02,783 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 13:36:02,783 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 13:36:02,783 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 13:36:02,785 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 13:36:02,785 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 13:36:02,786 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 13:36:02,818 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 13:36:02,818 - root - INFO - Инициализация диспетчера...
2024-12-04 13:36:02,821 - root - INFO - Регистрация обработчиков...
2024-12-04 13:36:02,824 - root - INFO - Запуск polling...
2024-12-04 13:36:02,824 - aiogram.dispatcher - INFO - Start polling
2024-12-04 13:36:02,832 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 13:36:02,835 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 13:36:02,836 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ()
2024-12-04 13:36:03,220 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 13:36:09,397 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 13:36:09,398 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 13:36:09,856 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 13:36:10,121 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 13:36:10,145 - root - INFO - Бот остановлен вручную.
2024-12-04 13:56:13,792 - root - INFO - Инициализация бота...
2024-12-04 13:56:13,831 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 13:56:13,831 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 13:56:13,831 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 13:56:13,832 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 13:56:13,832 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 13:56:13,832 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 13:56:13,850 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 13:56:13,852 - root - INFO - Инициализация диспетчера...
2024-12-04 13:56:13,852 - root - INFO - Регистрация обработчиков...
2024-12-04 13:56:13,853 - root - INFO - Запуск polling...
2024-12-04 13:56:13,853 - aiogram.dispatcher - INFO - Start polling
2024-12-04 13:56:13,857 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 13:56:13,859 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 13:56:13,859 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] ()
2024-12-04 13:56:14,243 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 13:56:18,458 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 13:56:18,458 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 13:56:26,812 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 13:56:26,812 - aiogram.dispatcher - WARNING - Sleep for 1.254156 seconds and try again... (tryings = 1, bot id = 7444575424)
2024-12-04 13:56:32,647 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 13:56:32,647 - aiogram.dispatcher - WARNING - Sleep for 1.664253 seconds and try again... (tryings = 2, bot id = 7444575424)
2024-12-04 13:56:36,220 - aiogram.dispatcher - INFO - Connection established (tryings = 3, bot id = 7444575424)
2024-12-04 13:56:36,223 - aiogram.event - INFO - Update id=659306398 is not handled. Duration 0 ms by bot id=7444575424
2024-12-04 13:56:38,483 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 13:56:38,484 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 13:56:45,632 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 13:56:45,633 - aiogram.dispatcher - WARNING - Sleep for 1.246900 seconds and try again... (tryings = 1, bot id = 7444575424)
2024-12-04 13:56:47,605 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:07:15,003 - root - INFO - Инициализация бота...
2024-12-04 14:07:15,099 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:07:15,099 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:07:15,099 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:07:15,101 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:07:15,101 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:07:15,102 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:07:15,124 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:07:15,124 - root - INFO - Инициализация диспетчера...
2024-12-04 14:07:15,125 - root - INFO - Регистрация обработчиков...
2024-12-04 14:07:15,127 - root - INFO - Запуск polling...
2024-12-04 14:07:15,127 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:07:15,134 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:07:15,136 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:07:15,136 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ()
2024-12-04 14:07:15,494 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 14:07:15,984 - aiogram.event - INFO - Update id=659306399 is handled. Duration 390 ms by bot id=7444575424
2024-12-04 14:07:20,684 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:07:20,684 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 14:07:22,530 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 7444575424)
2024-12-04 14:07:22,866 - aiogram.event - INFO - Update id=659306402 is handled. Duration 327 ms by bot id=7444575424
2024-12-04 14:07:25,967 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:07:25,967 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 14:07:27,545 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 7444575424)
2024-12-04 14:07:27,697 - aiogram.event - INFO - Update id=659306405 is handled. Duration 141 ms by bot id=7444575424
2024-12-04 14:07:31,201 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:07:31,201 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 14:07:35,266 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:07:35,525 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 14:07:35,527 - root - INFO - Бот остановлен вручную.
2024-12-04 14:14:30,957 - root - INFO - Инициализация бота...
2024-12-04 14:14:31,075 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:14:31,075 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:14:31,076 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:14:31,077 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:14:31,078 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:14:31,078 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:14:31,110 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:14:31,111 - root - INFO - Инициализация диспетчера...
2024-12-04 14:14:31,112 - root - INFO - Регистрация обработчиков...
2024-12-04 14:14:31,115 - root - INFO - Запуск polling...
2024-12-04 14:14:31,116 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:14:31,128 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:14:31,131 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:14:31,131 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ()
2024-12-04 14:14:31,828 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 14:14:37,877 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:14:37,879 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 14:14:43,312 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:14:43,312 - aiogram.dispatcher - WARNING - Sleep for 1.394831 seconds and try again... (tryings = 1, bot id = 7444575424)
2024-12-04 14:14:45,947 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:14:46,215 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 14:14:46,220 - root - INFO - Бот остановлен вручную.
2024-12-04 14:15:00,185 - root - INFO - Инициализация бота...
2024-12-04 14:15:00,311 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:15:00,313 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:15:00,314 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:15:00,317 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:15:00,318 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:15:00,319 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:15:00,375 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:15:00,375 - root - INFO - Инициализация диспетчера...
2024-12-04 14:15:00,377 - root - INFO - Регистрация обработчиков...
2024-12-04 14:15:00,381 - root - INFO - Запуск polling...
2024-12-04 14:15:00,381 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:15:00,393 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:15:00,398 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:15:00,398 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ()
2024-12-04 14:15:01,748 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 14:15:07,326 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:15:07,327 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 14:15:12,995 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:15:12,996 - aiogram.dispatcher - WARNING - Sleep for 1.361496 seconds and try again... (tryings = 1, bot id = 7444575424)
2024-12-04 14:15:13,192 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:17:10,164 - root - INFO - Инициализация бота...
2024-12-04 14:17:10,233 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:17:10,233 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:17:10,234 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:17:10,236 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:17:10,236 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:17:10,236 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:17:10,266 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:17:10,266 - root - INFO - Инициализация диспетчера...
2024-12-04 14:17:10,267 - root - INFO - Регистрация обработчиков...
2024-12-04 14:17:10,269 - root - INFO - Запуск polling...
2024-12-04 14:17:10,269 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:17:10,278 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:17:10,282 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:17:10,282 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ()
2024-12-04 14:17:10,766 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 14:17:15,269 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:17:15,270 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 14:17:17,571 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:17:17,836 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 14:17:17,842 - root - INFO - Бот остановлен вручную.
2024-12-04 14:17:26,872 - root - INFO - Инициализация бота...
2024-12-04 14:17:26,944 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:17:26,944 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:17:26,944 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:17:26,946 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:17:26,946 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:17:26,947 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:17:26,974 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:17:26,974 - root - INFO - Инициализация диспетчера...
2024-12-04 14:17:26,975 - root - INFO - Регистрация обработчиков...
2024-12-04 14:17:26,977 - root - INFO - Запуск polling...
2024-12-04 14:17:26,977 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:17:26,987 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:17:26,992 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:17:26,992 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ()
2024-12-04 14:17:27,465 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 14:17:32,535 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:17:32,536 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 7444575424)
2024-12-04 14:17:37,316 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:17:37,316 - aiogram.dispatcher - WARNING - Sleep for 1.177091 seconds and try again... (tryings = 1, bot id = 7444575424)
2024-12-04 14:17:46,022 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:17:46,023 - aiogram.dispatcher - WARNING - Sleep for 1.527387 seconds and try again... (tryings = 2, bot id = 7444575424)
2024-12-04 14:17:54,775 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2024-12-04 14:17:54,777 - aiogram.dispatcher - WARNING - Sleep for 2.015668 seconds and try again... (tryings = 3, bot id = 7444575424)
2024-12-04 14:17:57,676 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:21:03,620 - root - INFO - Инициализация бота...
2024-12-04 14:21:03,809 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:21:03,810 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:21:03,810 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:21:03,813 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:21:03,813 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:21:03,814 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:21:03,868 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:21:03,868 - root - INFO - Инициализация диспетчера...
2024-12-04 14:21:03,870 - root - INFO - Регистрация обработчиков...
2024-12-04 14:21:03,873 - root - INFO - Запуск polling...
2024-12-04 14:21:03,874 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:21:03,884 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:21:03,889 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:21:03,889 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] ()
2024-12-04 14:21:04,500 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:21:05,043 - aiogram.event - INFO - Update id=746486422 is handled. Duration 390 ms by bot id=6588698079
2024-12-04 14:21:05,044 - aiogram.event - INFO - Update id=746486423 is handled. Duration 375 ms by bot id=6588698079
2024-12-04 14:21:08,352 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:21:08,360 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:21:08,362 - sqlalchemy.engine.Engine - INFO - [generated in 0.00215s] ('528155210', 1, 0)
2024-12-04 14:21:08,507 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 14:21:08,671 - aiogram.event - INFO - Update id=746486424 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 14:21:10,112 - aiogram.event - INFO - Update id=746486425 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 14:21:16,658 - aiogram.event - INFO - Update id=746486426 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 14:21:18,275 - aiogram.event - INFO - Update id=746486427 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:21:20,784 - aiogram.event - INFO - Update id=746486428 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 14:21:22,054 - aiogram.event - INFO - Update id=746486429 is handled. Duration 233 ms by bot id=6588698079
2024-12-04 14:21:22,922 - aiogram.event - INFO - Update id=746486430 is not handled. Duration 92 ms by bot id=6588698079
2024-12-04 14:21:22,922 - aiogram.event - ERROR - Cause exception while process update id=746486430 by bot id=6588698079
TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 85, in handle_period_selection
    await bot.send_invoice(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2771, in send_invoice
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
2024-12-04 14:23:14,216 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 14:23:14,217 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 14:23:25,500 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 14:23:25,502 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 14:23:25,503 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 14:23:27,726 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 14:23:28,226 - aiogram.event - INFO - Update id=746486431 is handled. Duration 500 ms by bot id=6588698079
2024-12-04 14:23:29,699 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:23:29,701 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:23:29,702 - sqlalchemy.engine.Engine - INFO - [cached since 141.3s ago] ('528155210', 1, 0)
2024-12-04 14:23:29,787 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 14:23:29,861 - aiogram.event - INFO - Update id=746486432 is handled. Duration 171 ms by bot id=6588698079
2024-12-04 14:23:31,031 - aiogram.event - INFO - Update id=746486433 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:23:33,264 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:23:33,520 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:23:33,525 - root - INFO - Бот остановлен вручную.
2024-12-04 14:24:52,886 - root - INFO - Инициализация бота...
2024-12-04 14:24:52,996 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:24:52,997 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:24:52,998 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:24:53,001 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:24:53,001 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:24:53,003 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:24:53,046 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:24:53,047 - root - INFO - Инициализация диспетчера...
2024-12-04 14:24:53,048 - root - INFO - Регистрация обработчиков...
2024-12-04 14:24:53,050 - root - INFO - Запуск polling...
2024-12-04 14:24:53,051 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:24:53,063 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:24:53,067 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:24:53,067 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ()
2024-12-04 14:24:53,658 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:24:57,833 - aiogram.event - INFO - Update id=746486434 is handled. Duration 329 ms by bot id=6588698079
2024-12-04 14:25:07,500 - aiogram.event - INFO - Update id=746486435 is handled. Duration 358 ms by bot id=6588698079
2024-12-04 14:25:11,757 - aiogram.event - INFO - Update id=746486436 is not handled. Duration 92 ms by bot id=6588698079
2024-12-04 14:25:11,758 - aiogram.event - ERROR - Cause exception while process update id=746486436 by bot id=6588698079
TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\handlers\handlers.py", line 85, in handle_period_selection
    await bot.send_invoice(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2771, in send_invoice
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
2024-12-04 14:25:43,463 - aiogram.event - INFO - Update id=746486437 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:27:44,716 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
2024-12-04 14:27:44,717 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 14:27:45,957 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 14:27:46,129 - aiogram.event - INFO - Update id=746486438 is not handled. Duration 170 ms by bot id=6588698079
2024-12-04 14:29:06,708 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 14:29:06,708 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 14:29:17,918 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 14:30:34,214 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:30:34,474 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:30:34,483 - root - INFO - Бот остановлен вручную.
2024-12-04 14:30:44,568 - root - INFO - Инициализация бота...
2024-12-04 14:30:45,417 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:30:45,418 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:30:45,418 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:30:45,420 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:30:45,421 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:30:45,422 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:30:45,466 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:30:45,466 - root - INFO - Инициализация диспетчера...
2024-12-04 14:30:45,468 - root - INFO - Регистрация обработчиков...
2024-12-04 14:30:45,470 - root - INFO - Запуск polling...
2024-12-04 14:30:45,471 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:30:45,480 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:30:45,484 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:30:45,484 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ()
2024-12-04 14:30:45,920 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:30:46,432 - aiogram.event - INFO - Update id=746486439 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 14:30:48,024 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:30:48,033 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:30:48,035 - sqlalchemy.engine.Engine - INFO - [generated in 0.00194s] ('528155210', 1, 0)
2024-12-04 14:30:48,158 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 14:30:48,245 - aiogram.event - INFO - Update id=746486440 is handled. Duration 218 ms by bot id=6588698079
2024-12-04 14:30:53,245 - aiogram.event - INFO - Update id=746486441 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:30:55,346 - aiogram.event - INFO - Update id=746486442 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 14:30:56,834 - aiogram.event - INFO - Update id=746486443 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 14:30:58,021 - aiogram.event - INFO - Update id=746486444 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:31:01,632 - aiogram.event - INFO - Update id=746486445 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 14:31:10,825 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:31:11,103 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:31:11,108 - root - INFO - Бот остановлен вручную.
2024-12-04 14:31:39,741 - root - INFO - Инициализация бота...
2024-12-04 14:31:41,155 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:31:41,156 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:31:41,157 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:31:41,162 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:31:41,162 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:31:41,165 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:31:41,310 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:31:41,310 - root - INFO - Инициализация диспетчера...
2024-12-04 14:31:41,312 - root - INFO - Регистрация обработчиков...
2024-12-04 14:31:41,315 - root - INFO - Запуск polling...
2024-12-04 14:31:41,315 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:31:41,328 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:31:41,331 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:31:41,331 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ()
2024-12-04 14:31:41,599 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:31:42,084 - aiogram.event - INFO - Update id=746486446 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 14:31:43,910 - aiogram.event - INFO - Update id=746486447 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 14:31:44,687 - aiogram.event - INFO - Update id=746486448 is not handled. Duration 16 ms by bot id=6588698079
2024-12-04 14:31:47,945 - aiogram.event - INFO - Update id=746486449 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:34:35,829 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:34:36,088 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:34:36,092 - root - INFO - Бот остановлен вручную.
2024-12-04 14:34:45,097 - root - INFO - Инициализация бота...
2024-12-04 14:34:46,021 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:34:46,022 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:34:46,022 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:34:46,025 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:34:46,025 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:34:46,027 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:34:46,084 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:34:46,085 - root - INFO - Инициализация диспетчера...
2024-12-04 14:34:46,087 - root - INFO - Регистрация обработчиков...
2024-12-04 14:34:46,089 - root - INFO - Запуск polling...
2024-12-04 14:34:46,090 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:34:46,101 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:34:46,105 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:34:46,107 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] ()
2024-12-04 14:34:46,439 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:34:47,089 - aiogram.event - INFO - Update id=746486450 is handled. Duration 452 ms by bot id=6588698079
2024-12-04 14:34:48,806 - aiogram.event - INFO - Update id=746486451 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 14:34:49,746 - aiogram.event - INFO - Update id=746486452 is not handled. Duration 108 ms by bot id=6588698079
2024-12-04 14:34:49,746 - aiogram.event - ERROR - Cause exception while process update id=746486452 by bot id=6588698079
TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 37, in handle_period_selection
    await bot.send_invoice(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2771, in send_invoice
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
2024-12-04 14:35:20,755 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:35:21,023 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:35:21,030 - root - INFO - Бот остановлен вручную.
2024-12-04 14:36:12,383 - root - INFO - Инициализация бота...
2024-12-04 14:36:13,744 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:36:13,745 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:36:13,745 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:36:13,749 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:36:13,750 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:36:13,752 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:36:13,877 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:36:13,878 - root - INFO - Инициализация диспетчера...
2024-12-04 14:36:13,881 - root - INFO - Регистрация обработчиков...
2024-12-04 14:36:13,886 - root - INFO - Запуск polling...
2024-12-04 14:36:13,887 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:36:13,918 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:36:13,929 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:36:13,931 - sqlalchemy.engine.Engine - INFO - [generated in 0.00141s] ()
2024-12-04 14:36:14,271 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:36:14,924 - aiogram.event - INFO - Update id=746486453 is handled. Duration 452 ms by bot id=6588698079
2024-12-04 14:36:16,130 - aiogram.event - INFO - Update id=746486454 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 14:36:16,898 - aiogram.event - INFO - Update id=746486455 is not handled. Duration 109 ms by bot id=6588698079
2024-12-04 14:36:16,900 - aiogram.event - ERROR - Cause exception while process update id=746486455 by bot id=6588698079
TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 37, in handle_period_selection
    await bot.send_invoice(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2771, in send_invoice
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
2024-12-04 14:36:23,563 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:36:23,825 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:36:23,830 - root - INFO - Бот остановлен вручную.
2024-12-04 14:38:22,760 - root - INFO - Инициализация бота...
2024-12-04 14:38:23,779 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:38:23,781 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:38:23,782 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:38:23,784 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:38:23,786 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:38:23,788 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:38:23,901 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:38:23,901 - root - INFO - Инициализация диспетчера...
2024-12-04 14:38:23,903 - root - INFO - Регистрация обработчиков...
2024-12-04 14:38:23,908 - root - INFO - Запуск polling...
2024-12-04 14:38:23,909 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:38:23,935 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:38:23,946 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:38:23,948 - sqlalchemy.engine.Engine - INFO - [generated in 0.00195s] ()
2024-12-04 14:38:24,473 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:38:25,220 - aiogram.event - INFO - Update id=746486456 is handled. Duration 530 ms by bot id=6588698079
2024-12-04 14:38:26,530 - aiogram.event - INFO - Update id=746486457 is handled. Duration 359 ms by bot id=6588698079
2024-12-04 14:38:27,240 - aiogram.event - INFO - Update id=746486458 is not handled. Duration 77 ms by bot id=6588698079
2024-12-04 14:38:27,241 - aiogram.event - ERROR - Cause exception while process update id=746486458 by bot id=6588698079
TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 37, in handle_period_selection
    await bot.send_invoice(
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 2771, in send_invoice
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\bot.py", line 494, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: PAYMENT_PROVIDER_INVALID
2024-12-04 14:38:48,181 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:38:48,457 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:38:48,460 - root - INFO - Бот остановлен вручную.
2024-12-04 14:38:59,370 - root - INFO - Инициализация бота...
2024-12-04 14:39:00,140 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:39:00,140 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:39:00,140 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:39:00,142 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:39:00,142 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:39:00,144 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:39:00,199 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:39:00,200 - root - INFO - Инициализация диспетчера...
2024-12-04 14:39:00,201 - root - INFO - Регистрация обработчиков...
2024-12-04 14:39:00,203 - root - INFO - Запуск polling...
2024-12-04 14:39:00,203 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:39:00,213 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:39:00,216 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:39:00,216 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] ()
2024-12-04 14:39:00,503 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:39:01,060 - aiogram.event - INFO - Update id=746486459 is handled. Duration 453 ms by bot id=6588698079
2024-12-04 14:39:02,636 - aiogram.event - INFO - Update id=746486460 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 14:39:04,301 - aiogram.event - INFO - Update id=746486461 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 14:39:32,584 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:39:32,850 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:39:32,855 - root - INFO - Бот остановлен вручную.
2024-12-04 14:39:43,615 - root - INFO - Инициализация бота...
2024-12-04 14:39:44,627 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:39:44,628 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:39:44,628 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:39:44,630 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:39:44,631 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:39:44,632 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:39:44,743 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:39:44,744 - root - INFO - Инициализация диспетчера...
2024-12-04 14:39:44,748 - root - INFO - Регистрация обработчиков...
2024-12-04 14:39:44,753 - root - INFO - Запуск polling...
2024-12-04 14:39:44,755 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:39:44,784 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:39:44,798 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:39:44,799 - sqlalchemy.engine.Engine - INFO - [generated in 0.00122s] ()
2024-12-04 14:39:45,152 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:39:48,663 - aiogram.event - INFO - Update id=746486462 is handled. Duration 593 ms by bot id=6588698079
2024-12-04 14:39:49,862 - aiogram.event - INFO - Update id=746486463 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 14:39:51,056 - aiogram.event - INFO - Update id=746486464 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:39:51,057 - aiogram.event - ERROR - Cause exception while process update id=746486464 by bot id=6588698079
KeyError: 'Go'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 29, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Go'
2024-12-04 14:39:57,709 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:39:57,967 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:39:57,972 - root - INFO - Бот остановлен вручную.
2024-12-04 14:41:28,839 - root - INFO - Инициализация бота...
2024-12-04 14:41:29,819 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:41:29,820 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:41:29,821 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:41:29,824 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:41:29,825 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:41:29,826 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:41:29,914 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:41:29,915 - root - INFO - Инициализация диспетчера...
2024-12-04 14:41:29,917 - root - INFO - Регистрация обработчиков...
2024-12-04 14:41:29,920 - root - INFO - Запуск polling...
2024-12-04 14:41:29,921 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:41:29,940 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:41:29,949 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:41:29,950 - sqlalchemy.engine.Engine - INFO - [generated in 0.00097s] ()
2024-12-04 14:41:30,220 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:41:33,699 - aiogram.event - INFO - Update id=746486465 is handled. Duration 515 ms by bot id=6588698079
2024-12-04 14:41:35,325 - aiogram.event - INFO - Update id=746486466 is handled. Duration 375 ms by bot id=6588698079
2024-12-04 14:41:36,944 - aiogram.event - INFO - Update id=746486467 is handled. Duration 313 ms by bot id=6588698079
2024-12-04 14:41:45,935 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:41:46,196 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:41:46,203 - root - INFO - Бот остановлен вручную.
2024-12-04 14:42:06,258 - root - INFO - Инициализация бота...
2024-12-04 14:42:07,837 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:42:07,838 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:42:07,839 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:42:07,843 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:42:07,844 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:42:07,845 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:42:08,005 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:42:08,007 - root - INFO - Инициализация диспетчера...
2024-12-04 14:42:08,014 - root - INFO - Регистрация обработчиков...
2024-12-04 14:42:08,019 - root - INFO - Запуск polling...
2024-12-04 14:42:08,020 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:42:08,044 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:42:08,053 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:42:08,054 - sqlalchemy.engine.Engine - INFO - [generated in 0.00137s] ()
2024-12-04 14:42:08,373 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:42:09,033 - aiogram.event - INFO - Update id=746486468 is handled. Duration 468 ms by bot id=6588698079
2024-12-04 14:42:13,289 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:42:13,295 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:42:13,296 - sqlalchemy.engine.Engine - INFO - [generated in 0.00123s] ('528155210', 1, 0)
2024-12-04 14:42:13,475 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 14:42:13,658 - aiogram.event - INFO - Update id=746486469 is handled. Duration 375 ms by bot id=6588698079
2024-12-04 14:42:15,067 - aiogram.event - INFO - Update id=746486470 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:42:16,995 - aiogram.event - INFO - Update id=746486471 is handled. Duration 125 ms by bot id=6588698079
2024-12-04 14:42:18,495 - aiogram.event - INFO - Update id=746486472 is handled. Duration 170 ms by bot id=6588698079
2024-12-04 14:42:20,070 - aiogram.event - INFO - Update id=746486473 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:42:20,071 - aiogram.event - ERROR - Cause exception while process update id=746486473 by bot id=6588698079
KeyError: 'Go'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 31, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Go'
2024-12-04 14:42:26,928 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:42:27,189 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:42:27,194 - root - INFO - Бот остановлен вручную.
2024-12-04 14:48:22,866 - root - INFO - Инициализация бота...
2024-12-04 14:48:23,611 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:48:23,612 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:48:23,612 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:48:23,614 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:48:23,615 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:48:23,616 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:49:36,720 - root - INFO - Инициализация бота...
2024-12-04 14:49:37,658 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:49:37,659 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:49:37,659 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:49:37,662 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:49:37,662 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:49:37,662 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:50:07,410 - root - INFO - Инициализация бота...
2024-12-04 14:50:08,597 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:50:08,599 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:50:08,600 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:50:08,602 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:50:08,603 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:50:08,604 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:50:08,669 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:50:08,669 - root - INFO - Инициализация диспетчера...
2024-12-04 14:50:08,674 - root - INFO - Регистрация обработчиков...
2024-12-04 14:50:08,678 - root - INFO - Запуск polling...
2024-12-04 14:50:08,678 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:50:08,699 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:50:08,705 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:50:08,705 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ()
2024-12-04 14:50:09,386 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:50:10,151 - aiogram.event - INFO - Update id=746486474 is handled. Duration 391 ms by bot id=6588698079
2024-12-04 14:50:11,900 - aiogram.event - INFO - Update id=746486475 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 14:50:13,539 - aiogram.event - INFO - Update id=746486476 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:50:13,539 - aiogram.event - ERROR - Cause exception while process update id=746486476 by bot id=6588698079
TypeError: Message.answer() got multiple values for argument 'text'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 58, in back_to_main_menu_handler
    await callback.message.answer(
          ^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Message.answer() got multiple values for argument 'text'
2024-12-04 14:50:40,557 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:50:40,818 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:50:40,825 - root - INFO - Бот остановлен вручную.
2024-12-04 14:50:50,767 - root - INFO - Инициализация бота...
2024-12-04 14:50:51,374 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:50:51,374 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:50:51,374 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:50:51,376 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:50:51,376 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:50:51,377 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:50:51,411 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:50:51,411 - root - INFO - Инициализация диспетчера...
2024-12-04 14:50:51,413 - root - INFO - Регистрация обработчиков...
2024-12-04 14:50:51,415 - root - INFO - Запуск polling...
2024-12-04 14:50:51,415 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:50:51,426 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:50:51,429 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:50:51,430 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ()
2024-12-04 14:50:51,728 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:50:52,330 - aiogram.event - INFO - Update id=746486477 is handled. Duration 484 ms by bot id=6588698079
2024-12-04 14:50:55,225 - aiogram.event - INFO - Update id=746486478 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 14:50:58,079 - aiogram.event - INFO - Update id=746486479 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 14:51:05,950 - aiogram.event - INFO - Update id=746486480 is handled. Duration 157 ms by bot id=6588698079
2024-12-04 14:51:07,377 - aiogram.event - INFO - Update id=746486481 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 14:51:09,842 - aiogram.event - INFO - Update id=746486482 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 14:51:10,834 - aiogram.event - INFO - Update id=746486483 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 14:51:13,139 - aiogram.event - INFO - Update id=746486484 is handled. Duration 452 ms by bot id=6588698079
2024-12-04 14:51:14,287 - aiogram.event - INFO - Update id=746486485 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:51:17,796 - aiogram.event - INFO - Update id=746486486 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 14:51:21,510 - aiogram.event - INFO - Update id=746486487 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 14:51:22,628 - aiogram.event - INFO - Update id=746486488 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 14:51:48,337 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 14:51:48,338 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 14:51:49,386 - aiogram.event - INFO - Update id=746486489 is handled. Duration 1266 ms by bot id=6588698079
2024-12-04 14:51:59,580 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 14:51:59,590 - root - INFO - {
    "message_id": 672,
    "date": 1733313120,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 120000,
        "invoice_payload": "37b7210d-f2fa-40f7-a386-ac27e3642832",
        "telegram_payment_charge_id": "6588698079_528155210_328291",
        "provider_payment_charge_id": "6588698079_528155210_328291",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-04 14:52:01,151 - root - INFO - Key created: OutlineKey(key_id='67', name='VPN Key54', password='oZSJYvljVO6QctFxl9VwGP', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpvWlNKWXZsalZPNlFjdEZ4bDlWd0dQ@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 14:52:01,152 - root - INFO - Key created: OutlineKey(key_id='67', name='VPN Key54', password='oZSJYvljVO6QctFxl9VwGP', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpvWlNKWXZsalZPNlFjdEZ4bDlWd0dQ@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 14:52:01,323 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:52:01,328 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:52:01,329 - sqlalchemy.engine.Engine - INFO - [generated in 0.00116s] ('528155210', 1, 0)
2024-12-04 14:52:01,338 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 14:52:01,339 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] ('528155210', 'active', 0)
2024-12-04 14:52:01,344 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:52:01,355 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:52:01,366 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 14:52:01,366 - sqlalchemy.engine.Engine - INFO - [generated in 0.00135s] ('67', '528155210', '2025-11-29 14:52:01.353940', '2024-12-04 14:52:01.353940', 0)
2024-12-04 14:52:01,371 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:52:01,380 - aiogram.event - INFO - Update id=746486490 is handled. Duration 1795 ms by bot id=6588698079
2024-12-04 14:53:35,960 - aiogram.event - INFO - Update id=746486491 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 14:53:41,499 - aiogram.event - INFO - Update id=746486492 is handled. Duration 280 ms by bot id=6588698079
2024-12-04 14:53:43,262 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:53:43,263 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:53:43,264 - sqlalchemy.engine.Engine - INFO - [cached since 101.9s ago] ('528155210', 1, 0)
2024-12-04 14:53:43,270 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 14:53:43,271 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('528155210',)
2024-12-04 14:53:44,664 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 14:53:44,986 - aiogram.event - INFO - Update id=746486493 is handled. Duration 1718 ms by bot id=6588698079
2024-12-04 14:53:48,076 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:53:48,080 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:53:48,081 - sqlalchemy.engine.Engine - INFO - [generated in 0.00089s] ('67', 1, 0)
2024-12-04 14:53:48,280 - aiogram.event - INFO - Update id=746486494 is handled. Duration 1812 ms by bot id=6588698079
2024-12-04 14:53:50,476 - aiogram.event - INFO - Update id=746486495 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 14:53:56,743 - aiogram.event - INFO - Update id=746486496 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 14:53:58,420 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:53:58,420 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:53:58,421 - sqlalchemy.engine.Engine - INFO - [cached since 10.34s ago] ('67', 1, 0)
2024-12-04 14:53:58,422 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:53:58,423 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:53:58,425 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 14:53:58,426 - sqlalchemy.engine.Engine - INFO - [generated in 0.00080s] ('67',)
2024-12-04 14:53:58,985 - aiogram.event - INFO - Update id=746486497 is not handled. Duration 577 ms by bot id=6588698079
2024-12-04 14:53:58,987 - aiogram.event - ERROR - Cause exception while process update id=746486497 by bot id=6588698079
AttributeError: 'FSMContext' object has no attribute 'finish'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 221, in confirm_rename_handler
    await state.finish()
          ^^^^^^^^^^^^
AttributeError: 'FSMContext' object has no attribute 'finish'
2024-12-04 14:54:01,386 - aiogram.event - INFO - Update id=746486498 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 14:54:07,234 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:54:07,235 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:54:07,235 - sqlalchemy.engine.Engine - INFO - [cached since 125.9s ago] ('528155210', 1, 0)
2024-12-04 14:54:07,238 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 14:54:07,238 - sqlalchemy.engine.Engine - INFO - [cached since 23.97s ago] ('528155210',)
2024-12-04 14:54:09,088 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 14:54:09,210 - aiogram.event - INFO - Update id=746486499 is handled. Duration 1984 ms by bot id=6588698079
2024-12-04 14:54:11,897 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:54:11,898 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:54:11,899 - sqlalchemy.engine.Engine - INFO - [cached since 23.82s ago] ('67', 1, 0)
2024-12-04 14:54:12,019 - aiogram.event - INFO - Update id=746486500 is handled. Duration 1375 ms by bot id=6588698079
2024-12-04 14:54:17,795 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:54:17,796 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:54:17,797 - sqlalchemy.engine.Engine - INFO - [cached since 29.72s ago] ('67', 1, 0)
2024-12-04 14:54:18,999 - aiogram.event - INFO - Update id=746486501 is handled. Duration 1217 ms by bot id=6588698079
2024-12-04 14:54:25,269 - aiogram.event - INFO - Update id=746486502 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 14:54:44,029 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 14:54:44,286 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:54:44,294 - root - INFO - Бот остановлен вручную.
2024-12-04 14:58:25,275 - root - INFO - Инициализация бота...
2024-12-04 14:58:26,564 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:58:26,566 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 14:58:26,566 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:58:26,569 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 14:58:26,570 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 14:58:26,571 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:58:26,668 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 14:58:26,668 - root - INFO - Инициализация диспетчера...
2024-12-04 14:58:26,671 - root - INFO - Регистрация обработчиков...
2024-12-04 14:58:26,674 - root - INFO - Запуск polling...
2024-12-04 14:58:26,675 - aiogram.dispatcher - INFO - Start polling
2024-12-04 14:58:26,695 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:58:26,702 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 14:58:26,703 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] ()
2024-12-04 14:58:26,718 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 14:58:26,720 - sqlalchemy.engine.Engine - INFO - [generated in 0.00108s] ('528155210',)
2024-12-04 14:58:27,396 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 14:58:41,211 - aiogram.event - INFO - Update id=746486503 is handled. Duration 500 ms by bot id=6588698079
2024-12-04 14:58:42,819 - aiogram.event - INFO - Update id=746486504 is handled. Duration 422 ms by bot id=6588698079
2024-12-04 14:58:43,980 - aiogram.event - INFO - Update id=746486505 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 14:58:45,571 - aiogram.event - INFO - Update id=746486506 is handled. Duration 188 ms by bot id=6588698079
2024-12-04 14:58:46,829 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:58:46,834 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:58:46,835 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] ('528155210', 1, 0)
2024-12-04 14:58:46,839 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 14:58:46,839 - sqlalchemy.engine.Engine - INFO - [cached since 20.12s ago] ('528155210',)
2024-12-04 14:58:48,349 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 14:58:48,421 - aiogram.event - INFO - Update id=746486507 is handled. Duration 1592 ms by bot id=6588698079
2024-12-04 14:58:53,529 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:58:53,534 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:58:53,536 - sqlalchemy.engine.Engine - INFO - [generated in 0.00118s] ('67', 1, 0)
2024-12-04 14:58:53,739 - aiogram.event - INFO - Update id=746486508 is handled. Duration 2000 ms by bot id=6588698079
2024-12-04 14:58:55,814 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:58:55,815 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:58:55,815 - sqlalchemy.engine.Engine - INFO - [cached since 2.281s ago] ('67', 1, 0)
2024-12-04 14:58:56,977 - aiogram.event - INFO - Update id=746486509 is handled. Duration 1172 ms by bot id=6588698079
2024-12-04 14:58:59,182 - aiogram.event - INFO - Update id=746486510 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 14:59:01,180 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:59:01,180 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:59:01,181 - sqlalchemy.engine.Engine - INFO - [cached since 14.35s ago] ('528155210', 1, 0)
2024-12-04 14:59:01,184 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 14:59:01,184 - sqlalchemy.engine.Engine - INFO - [cached since 34.47s ago] ('528155210',)
2024-12-04 14:59:02,602 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 14:59:02,742 - aiogram.event - INFO - Update id=746486511 is handled. Duration 1562 ms by bot id=6588698079
2024-12-04 14:59:04,860 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:59:04,862 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:59:04,862 - sqlalchemy.engine.Engine - INFO - [cached since 11.33s ago] ('67', 1, 0)
2024-12-04 14:59:05,000 - aiogram.event - INFO - Update id=746486512 is handled. Duration 1561 ms by bot id=6588698079
2024-12-04 14:59:06,268 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:59:06,268 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:59:06,269 - sqlalchemy.engine.Engine - INFO - [cached since 12.73s ago] ('67', 1, 0)
2024-12-04 14:59:07,608 - aiogram.event - INFO - Update id=746486513 is handled. Duration 1359 ms by bot id=6588698079
2024-12-04 14:59:08,859 - aiogram.event - INFO - Update id=746486514 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 14:59:10,388 - aiogram.event - INFO - Update id=746486515 is handled. Duration 344 ms by bot id=6588698079
2024-12-04 14:59:12,887 - aiogram.event - INFO - Update id=746486516 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 14:59:34,232 - aiogram.event - INFO - Update id=746486517 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 14:59:43,243 - root - INFO - {
    "message_id": 704,
    "date": 1733313583,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 60000,
        "invoice_payload": "7039e125-a3c9-4036-bc13-3496404d2580",
        "telegram_payment_charge_id": "6588698079_528155210_328323",
        "provider_payment_charge_id": "6588698079_528155210_328323",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-04 14:59:44,722 - root - INFO - Key created: OutlineKey(key_id='68', name='VPN Key55', password='M1bUge7DaGkxuaSqPBcksd', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpNMWJVZ2U3RGFHa3h1YVNxUEJja3Nk@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 14:59:44,723 - root - INFO - Key created: OutlineKey(key_id='68', name='VPN Key55', password='M1bUge7DaGkxuaSqPBcksd', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpNMWJVZ2U3RGFHa3h1YVNxUEJja3Nk@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 14:59:44,989 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:59:44,991 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:59:44,992 - sqlalchemy.engine.Engine - INFO - [cached since 58.16s ago] ('528155210', 1, 0)
2024-12-04 14:59:45,002 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 14:59:45,003 - sqlalchemy.engine.Engine - INFO - [generated in 0.00190s] ('68', '528155210', '2025-06-02 14:59:44.995212', '2024-12-04 14:59:44.995212', 0)
2024-12-04 14:59:45,010 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 14:59:45,024 - aiogram.event - INFO - Update id=746486518 is handled. Duration 1781 ms by bot id=6588698079
2024-12-04 14:59:47,032 - aiogram.event - INFO - Update id=746486519 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 14:59:49,514 - aiogram.event - INFO - Update id=746486520 is handled. Duration 391 ms by bot id=6588698079
2024-12-04 14:59:51,114 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:59:51,115 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:59:51,115 - sqlalchemy.engine.Engine - INFO - [cached since 64.28s ago] ('528155210', 1, 0)
2024-12-04 14:59:51,119 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 14:59:51,120 - sqlalchemy.engine.Engine - INFO - [cached since 84.4s ago] ('528155210',)
2024-12-04 14:59:53,939 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 14:59:54,060 - aiogram.event - INFO - Update id=746486521 is handled. Duration 2953 ms by bot id=6588698079
2024-12-04 14:59:56,912 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 14:59:56,913 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 14:59:56,913 - sqlalchemy.engine.Engine - INFO - [cached since 63.38s ago] ('68', 1, 0)
2024-12-04 14:59:57,065 - aiogram.event - INFO - Update id=746486522 is handled. Duration 1547 ms by bot id=6588698079
2024-12-04 14:59:59,854 - aiogram.event - INFO - Update id=746486523 is handled. Duration 94 ms by bot id=6588698079
2024-12-04 15:00:05,949 - aiogram.event - INFO - Update id=746486524 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 15:00:07,738 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:00:07,739 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:00:07,741 - sqlalchemy.engine.Engine - INFO - [cached since 74.21s ago] ('68', 1, 0)
2024-12-04 15:00:07,743 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:00:07,745 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:00:07,749 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 15:00:07,750 - sqlalchemy.engine.Engine - INFO - [generated in 0.00115s] ('68',)
2024-12-04 15:00:08,101 - aiogram.event - INFO - Update id=746486525 is not handled. Duration 359 ms by bot id=6588698079
2024-12-04 15:00:08,101 - aiogram.event - ERROR - Cause exception while process update id=746486525 by bot id=6588698079
AttributeError: 'FSMContext' object has no attribute 'finish'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 221, in confirm_rename_handler
    await state.finish()
          ^^^^^^^^^^^^
AttributeError: 'FSMContext' object has no attribute 'finish'
2024-12-04 15:00:09,507 - aiogram.event - INFO - Update id=746486526 is handled. Duration 186 ms by bot id=6588698079
2024-12-04 15:00:10,826 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:00:10,827 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:00:10,828 - sqlalchemy.engine.Engine - INFO - [cached since 83.99s ago] ('528155210', 1, 0)
2024-12-04 15:00:10,837 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 15:00:10,838 - sqlalchemy.engine.Engine - INFO - [cached since 104.1s ago] ('528155210',)
2024-12-04 15:00:14,076 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 15:00:14,161 - aiogram.event - INFO - Update id=746486527 is handled. Duration 3327 ms by bot id=6588698079
2024-12-04 15:00:20,205 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 15:05:19,265 - root - INFO - Инициализация бота...
2024-12-04 15:05:20,408 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:05:20,408 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 15:05:20,409 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:05:20,412 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 15:05:20,412 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:05:20,413 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:05:20,461 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 15:05:20,462 - root - INFO - Инициализация диспетчера...
2024-12-04 15:05:20,463 - root - INFO - Регистрация обработчиков...
2024-12-04 15:05:20,466 - root - INFO - Запуск polling...
2024-12-04 15:05:20,466 - aiogram.dispatcher - INFO - Start polling
2024-12-04 15:05:20,478 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:05:20,482 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 15:05:20,483 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ()
2024-12-04 15:05:20,493 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 15:05:20,494 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('528155210',)
2024-12-04 15:05:20,808 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:05:22,201 - aiogram.event - INFO - Update id=746486528 is handled. Duration 422 ms by bot id=6588698079
2024-12-04 15:05:24,194 - aiogram.event - INFO - Update id=746486529 is handled. Duration 344 ms by bot id=6588698079
2024-12-04 15:05:25,115 - aiogram.event - INFO - Update id=746486530 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 15:05:26,857 - aiogram.event - INFO - Update id=746486531 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 15:05:28,169 - aiogram.event - INFO - Update id=746486532 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 15:05:30,193 - aiogram.event - INFO - Update id=746486533 is handled. Duration 438 ms by bot id=6588698079
2024-12-04 15:05:45,765 - aiogram.event - INFO - Update id=746486534 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 15:05:55,008 - root - INFO - {
    "message_id": 723,
    "date": 1733313955,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 12000,
        "invoice_payload": "9cbd5aa3-a964-443e-9141-71147a93e289",
        "telegram_payment_charge_id": "6588698079_528155210_328342",
        "provider_payment_charge_id": "6588698079_528155210_328342",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-04 15:05:57,285 - root - INFO - Key created: OutlineKey(key_id='69', name='VPN Key56', password='8EQQPPtuq8vOOYvKapvH0v', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTo4RVFRUFB0dXE4dk9PWXZLYXB2SDB2@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 15:05:57,285 - root - INFO - Key created: OutlineKey(key_id='69', name='VPN Key56', password='8EQQPPtuq8vOOYvKapvH0v', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTo4RVFRUFB0dXE4dk9PWXZLYXB2SDB2@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 15:05:57,534 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:05:57,538 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:05:57,539 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] ('528155210', 1, 0)
2024-12-04 15:05:57,545 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 15:05:57,545 - sqlalchemy.engine.Engine - INFO - [generated in 0.00085s] ('69', '528155210', '2025-03-04 15:05:57.541416', '2024-12-04 15:05:57.541416', 0)
2024-12-04 15:05:57,548 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:05:57,555 - aiogram.event - INFO - Update id=746486535 is handled. Duration 2547 ms by bot id=6588698079
2024-12-04 15:05:59,892 - aiogram.event - INFO - Update id=746486536 is handled. Duration 469 ms by bot id=6588698079
2024-12-04 15:06:01,188 - aiogram.event - INFO - Update id=746486537 is handled. Duration 422 ms by bot id=6588698079
2024-12-04 15:06:53,932 - aiogram.event - INFO - Update id=746486538 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 15:06:54,964 - aiogram.event - INFO - Update id=746486539 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 15:07:42,459 - aiogram.event - INFO - Update id=746486540 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 15:08:09,842 - aiogram.event - INFO - Update id=746486541 is handled. Duration 375 ms by bot id=6588698079
2024-12-04 15:08:11,966 - aiogram.event - INFO - Update id=746486542 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 15:08:13,275 - aiogram.event - INFO - Update id=746486543 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 15:08:15,217 - aiogram.event - INFO - Update id=746486544 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 15:08:16,439 - aiogram.event - INFO - Update id=746486545 is not handled. Duration 16 ms by bot id=6588698079
2024-12-04 15:08:21,501 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 15:08:21,755 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:08:21,764 - root - INFO - Бот остановлен вручную.
2024-12-04 15:09:23,914 - root - INFO - Инициализация бота...
2024-12-04 15:09:24,805 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:09:24,806 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 15:09:24,806 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:09:24,808 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 15:09:24,808 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:09:24,810 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:09:24,867 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 15:09:24,868 - root - INFO - Инициализация диспетчера...
2024-12-04 15:09:24,870 - root - INFO - Регистрация обработчиков...
2024-12-04 15:09:24,873 - root - INFO - Запуск polling...
2024-12-04 15:09:24,873 - aiogram.dispatcher - INFO - Start polling
2024-12-04 15:09:24,886 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:09:24,890 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 15:09:24,891 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ()
2024-12-04 15:09:24,901 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 15:09:24,902 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] ('528155210',)
2024-12-04 15:09:25,231 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:09:25,730 - aiogram.event - INFO - Update id=746486546 is handled. Duration 343 ms by bot id=6588698079
2024-12-04 15:09:28,240 - aiogram.event - INFO - Update id=746486547 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 15:09:29,562 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:09:29,569 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:09:29,571 - sqlalchemy.engine.Engine - INFO - [generated in 0.00196s] ('528155210', 1, 0)
2024-12-04 15:09:29,584 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 15:09:29,585 - sqlalchemy.engine.Engine - INFO - [generated in 0.00116s] (1, '528155210')
2024-12-04 15:09:29,591 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:09:31,279 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:09:31,283 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 15:09:31,284 - sqlalchemy.engine.Engine - INFO - [generated in 0.00144s] ('70', '528155210', '2024-12-06 15:09:31.277681', '2024-12-04 15:09:31.277681', 0)
2024-12-04 15:09:31,289 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:09:31,297 - root - INFO - Key created: OutlineKey(key_id='70', name='VPN Key57', password='pcfe6DYEu3pka2TCjjPW4C', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpwY2ZlNkRZRXUzcGthMlRDampQVzRD@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 6588698079
2024-12-04 15:09:31,505 - aiogram.event - INFO - Update id=746486548 is handled. Duration 1952 ms by bot id=6588698079
2024-12-04 15:09:36,564 - aiogram.event - INFO - Update id=746486549 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 15:09:36,565 - aiogram.event - ERROR - Cause exception while process update id=746486549 by bot id=6588698079
KeyError: 'Installation'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 38, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Installation'
2024-12-04 15:09:43,245 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 15:09:43,519 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:09:43,522 - root - INFO - Бот остановлен вручную.
2024-12-04 15:10:09,639 - root - INFO - Инициализация бота...
2024-12-04 15:10:10,932 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:10:10,933 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 15:10:10,933 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:10:10,935 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 15:10:10,936 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:10:10,938 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:10:11,015 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 15:10:11,016 - root - INFO - Инициализация диспетчера...
2024-12-04 15:10:11,019 - root - INFO - Регистрация обработчиков...
2024-12-04 15:10:11,022 - root - INFO - Запуск polling...
2024-12-04 15:10:11,022 - aiogram.dispatcher - INFO - Start polling
2024-12-04 15:10:11,035 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:10:11,041 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 15:10:11,041 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ()
2024-12-04 15:10:11,051 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 15:10:11,052 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] ('528155210',)
2024-12-04 15:10:11,054 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:10:11,057 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:10:11,060 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 15:10:11,060 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('528155210',)
2024-12-04 15:10:11,387 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:10:11,783 - aiogram.event - INFO - Update id=746486550 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 15:10:19,214 - aiogram.event - INFO - Update id=746486551 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 15:10:20,151 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:10:20,158 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:10:20,159 - sqlalchemy.engine.Engine - INFO - [generated in 0.00132s] ('528155210', 1, 0)
2024-12-04 15:10:20,261 - aiogram.event - INFO - Update id=746486552 is handled. Duration 125 ms by bot id=6588698079
2024-12-04 15:10:22,757 - aiogram.event - INFO - Update id=746486553 is handled. Duration 530 ms by bot id=6588698079
2024-12-04 15:10:26,397 - aiogram.event - INFO - Update id=746486554 is handled. Duration 266 ms by bot id=6588698079
2024-12-04 15:10:27,656 - aiogram.event - INFO - Update id=746486555 is handled. Duration 422 ms by bot id=6588698079
2024-12-04 15:10:28,902 - aiogram.event - INFO - Update id=746486556 is handled. Duration 218 ms by bot id=6588698079
2024-12-04 15:10:30,125 - aiogram.event - INFO - Update id=746486557 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 15:10:46,347 - aiogram.event - INFO - Update id=746486558 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 15:10:54,955 - root - INFO - {
    "message_id": 745,
    "date": 1733314255,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 60000,
        "invoice_payload": "b8c6e905-fc8c-4800-8a7b-95466845a85f",
        "telegram_payment_charge_id": "6588698079_528155210_328373",
        "provider_payment_charge_id": "6588698079_528155210_328373",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-04 15:10:56,400 - root - INFO - Key created: OutlineKey(key_id='71', name='VPN Key58', password='Nc2H3q0vTF2x54ZssZbfvq', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpOYzJIM3EwdlRGMng1NFpzc1piZnZx@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 15:10:56,401 - root - INFO - Key created: OutlineKey(key_id='71', name='VPN Key58', password='Nc2H3q0vTF2x54ZssZbfvq', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpOYzJIM3EwdlRGMng1NFpzc1piZnZx@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 15:10:56,630 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:10:56,631 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:10:56,632 - sqlalchemy.engine.Engine - INFO - [cached since 36.47s ago] ('528155210', 1, 0)
2024-12-04 15:10:56,646 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 15:10:56,647 - sqlalchemy.engine.Engine - INFO - [generated in 0.00189s] ('71', '528155210', '2025-06-02 15:10:56.637001', '2024-12-04 15:10:56.637001', 0)
2024-12-04 15:10:56,655 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:10:56,667 - aiogram.event - INFO - Update id=746486559 is handled. Duration 1717 ms by bot id=6588698079
2024-12-04 15:11:00,261 - aiogram.event - INFO - Update id=746486560 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 15:11:01,352 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:11:01,353 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:11:01,354 - sqlalchemy.engine.Engine - INFO - [cached since 41.2s ago] ('528155210', 1, 0)
2024-12-04 15:11:01,359 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 15:11:01,359 - sqlalchemy.engine.Engine - INFO - [cached since 50.31s ago] ('528155210',)
2024-12-04 15:11:01,403 - root - ERROR - Ошибка при выборе ключа: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2024-12-04 15:11:01,761 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 15:11:01,911 - aiogram.event - INFO - Update id=746486561 is handled. Duration 562 ms by bot id=6588698079
2024-12-04 15:11:03,910 - aiogram.event - INFO - Update id=746486562 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 15:11:23,158 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 15:11:23,425 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:11:23,431 - root - INFO - Бот остановлен вручную.
2024-12-04 15:29:48,044 - root - INFO - Инициализация бота...
2024-12-04 15:29:48,846 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:29:48,847 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 15:29:48,847 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:29:48,850 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 15:29:48,850 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:29:48,852 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:29:48,904 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 15:29:48,904 - root - INFO - Инициализация диспетчера...
2024-12-04 15:29:48,906 - root - INFO - Регистрация обработчиков...
2024-12-04 15:29:48,908 - root - INFO - Запуск polling...
2024-12-04 15:29:48,909 - aiogram.dispatcher - INFO - Start polling
2024-12-04 15:29:48,921 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:29:48,925 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 15:29:48,926 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ()
2024-12-04 15:29:48,937 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 15:29:48,937 - sqlalchemy.engine.Engine - INFO - [generated in 0.00091s] ('528155210',)
2024-12-04 15:29:48,939 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:29:48,941 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:29:48,942 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 15:29:48,943 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('528155210',)
2024-12-04 15:29:49,413 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:29:49,504 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 15:29:49,505 - sqlalchemy.engine.Engine - INFO - [generated in 0.00136s] ('71',)
2024-12-04 15:29:54,471 - aiogram.event - INFO - Update id=746486563 is handled. Duration 155 ms by bot id=6588698079
2024-12-04 15:30:01,085 - aiogram.event - INFO - Update id=746486564 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 15:30:02,849 - aiogram.event - INFO - Update id=746486565 is handled. Duration 375 ms by bot id=6588698079
2024-12-04 15:30:04,145 - aiogram.event - INFO - Update id=746486566 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 15:30:05,063 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:30:05,066 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:30:05,067 - sqlalchemy.engine.Engine - INFO - [generated in 0.00081s] ('528155210', 1, 0)
2024-12-04 15:30:05,220 - aiogram.event - INFO - Update id=746486567 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 15:30:07,538 - aiogram.event - INFO - Update id=746486568 is handled. Duration 359 ms by bot id=6588698079
2024-12-04 15:30:09,139 - aiogram.event - INFO - Update id=746486569 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 15:30:16,279 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:30:16,281 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:30:16,281 - sqlalchemy.engine.Engine - INFO - [cached since 11.22s ago] ('528155210', 1, 0)
2024-12-04 15:30:16,386 - aiogram.event - INFO - Update id=746486570 is handled. Duration 125 ms by bot id=6588698079
2024-12-04 15:48:51,765 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 15:48:52,029 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:48:52,035 - root - INFO - Бот остановлен вручную.
2024-12-04 15:49:00,482 - root - INFO - Инициализация бота...
2024-12-04 15:49:01,049 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:49:01,049 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 15:49:01,049 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:49:01,051 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 15:49:01,051 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:49:01,051 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:49:31,329 - root - INFO - Инициализация бота...
2024-12-04 15:49:32,005 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:49:32,006 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 15:49:32,006 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:49:32,008 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 15:49:32,009 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:49:32,010 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:49:32,059 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 15:49:32,060 - root - INFO - Инициализация диспетчера...
2024-12-04 15:49:32,061 - root - INFO - Регистрация обработчиков...
2024-12-04 15:50:13,075 - root - INFO - Инициализация бота...
2024-12-04 15:50:13,724 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:50:13,725 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 15:50:13,725 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:50:13,727 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 15:50:13,728 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:50:13,729 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:50:13,782 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 15:50:13,783 - root - INFO - Инициализация диспетчера...
2024-12-04 15:50:13,785 - root - INFO - Регистрация обработчиков...
2024-12-04 15:50:13,787 - root - INFO - Запуск polling...
2024-12-04 15:50:13,788 - aiogram.dispatcher - INFO - Start polling
2024-12-04 15:50:13,798 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:50:13,804 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 15:50:13,805 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ()
2024-12-04 15:50:13,811 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 15:50:13,811 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('528155210',)
2024-12-04 15:50:13,813 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:50:13,814 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:50:13,816 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 15:50:13,817 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('528155210',)
2024-12-04 15:50:14,126 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:50:14,181 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 15:50:14,181 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('71',)
2024-12-04 15:50:14,424 - aiogram.event - INFO - Update id=746486571 is handled. Duration 155 ms by bot id=6588698079
2024-12-04 15:50:19,497 - aiogram.event - INFO - Update id=746486572 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 15:50:21,809 - aiogram.event - INFO - Update id=746486573 is handled. Duration 750 ms by bot id=6588698079
2024-12-04 15:50:24,211 - aiogram.event - INFO - Update id=746486574 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 15:50:25,886 - aiogram.event - INFO - Update id=746486575 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 15:50:31,162 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:50:31,166 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:50:31,167 - sqlalchemy.engine.Engine - INFO - [generated in 0.00130s] ('528155210', 1, 0)
2024-12-04 15:50:31,433 - aiogram.event - INFO - Update id=746486576 is handled. Duration 281 ms by bot id=6588698079
2024-12-04 15:50:37,250 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 15:50:37,519 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:50:37,525 - root - INFO - Бот остановлен вручную.
2024-12-04 15:57:15,005 - root - INFO - Инициализация бота...
2024-12-04 15:57:15,774 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:57:15,775 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 15:57:15,775 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:57:15,778 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 15:57:15,779 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 15:57:15,780 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:57:15,839 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 15:57:15,839 - root - INFO - Инициализация диспетчера...
2024-12-04 15:57:15,841 - root - INFO - Регистрация обработчиков...
2024-12-04 15:57:15,843 - root - INFO - Запуск polling...
2024-12-04 15:57:15,844 - aiogram.dispatcher - INFO - Start polling
2024-12-04 15:57:15,854 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:57:15,861 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 15:57:15,861 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] ()
2024-12-04 15:57:15,867 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 15:57:15,868 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] ('528155210',)
2024-12-04 15:57:15,870 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 15:57:15,872 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:57:15,874 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 15:57:15,874 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ('528155210',)
2024-12-04 15:57:16,213 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:57:16,287 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 15:57:16,287 - sqlalchemy.engine.Engine - INFO - [generated in 0.00095s] ('71',)
2024-12-04 15:57:22,415 - aiogram.event - INFO - Update id=746486577 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 15:57:24,203 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:57:24,206 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:57:24,207 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] ('528155210', 1, 0)
2024-12-04 15:57:24,210 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 15:57:24,210 - sqlalchemy.engine.Engine - INFO - [cached since 8.342s ago] ('528155210',)
2024-12-04 15:57:30,013 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 15:57:30,109 - aiogram.event - INFO - Update id=746486578 is handled. Duration 5905 ms by bot id=6588698079
2024-12-04 15:57:38,111 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:57:38,114 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:57:38,114 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ('69', 1, 0)
2024-12-04 15:57:38,268 - aiogram.event - INFO - Update id=746486579 is handled. Duration 1359 ms by bot id=6588698079
2024-12-04 15:57:43,952 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 15:57:43,952 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 15:57:43,952 - sqlalchemy.engine.Engine - INFO - [cached since 5.839s ago] ('69', 1, 0)
2024-12-04 15:57:45,609 - aiogram.event - INFO - Update id=746486580 is handled. Duration 1671 ms by bot id=6588698079
2024-12-04 15:59:56,166 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 15:59:56,426 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 15:59:56,436 - root - INFO - Бот остановлен вручную.
2024-12-04 16:00:05,246 - root - INFO - Инициализация бота...
2024-12-04 16:00:05,859 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:00:05,860 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:00:05,861 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:00:05,863 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:00:05,863 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:00:05,864 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:00:05,911 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:00:05,911 - root - INFO - Инициализация диспетчера...
2024-12-04 16:00:05,914 - root - INFO - Регистрация обработчиков...
2024-12-04 16:00:05,916 - root - INFO - Запуск polling...
2024-12-04 16:00:05,917 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:00:05,928 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:00:05,933 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:00:05,933 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ()
2024-12-04 16:00:05,942 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:00:05,942 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('528155210',)
2024-12-04 16:00:05,945 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:00:05,946 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:00:05,948 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:00:05,948 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('528155210',)
2024-12-04 16:00:06,322 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:00:06,323 - sqlalchemy.engine.Engine - INFO - [generated in 0.00116s] ('71',)
2024-12-04 16:00:06,338 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:00:06,667 - aiogram.event - INFO - Update id=746486581 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 16:00:09,614 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:00:09,620 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:00:09,620 - sqlalchemy.engine.Engine - INFO - [generated in 0.00119s] ('528155210', 1, 0)
2024-12-04 16:00:09,625 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:00:09,626 - sqlalchemy.engine.Engine - INFO - [cached since 3.684s ago] ('528155210',)
2024-12-04 16:00:15,659 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 16:00:15,735 - aiogram.event - INFO - Update id=746486582 is handled. Duration 6125 ms by bot id=6588698079
2024-12-04 16:00:50,512 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:00:50,882 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:00:50,885 - root - INFO - Бот остановлен вручную.
2024-12-04 16:00:59,040 - root - INFO - Инициализация бота...
2024-12-04 16:01:00,140 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:01:00,140 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:01:00,141 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:01:00,142 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:01:00,143 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:01:00,144 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:01:00,192 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:01:00,192 - root - INFO - Инициализация диспетчера...
2024-12-04 16:01:00,193 - root - INFO - Регистрация обработчиков...
2024-12-04 16:01:00,196 - root - INFO - Запуск polling...
2024-12-04 16:01:00,196 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:01:00,206 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:01:00,212 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:01:00,212 - sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] ()
2024-12-04 16:01:00,218 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:01:00,218 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ('528155210',)
2024-12-04 16:01:00,219 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:01:00,220 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:01:00,222 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:01:00,222 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ('528155210',)
2024-12-04 16:01:00,528 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:01:00,619 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:01:00,619 - sqlalchemy.engine.Engine - INFO - [generated in 0.00115s] ('71',)
2024-12-04 16:01:01,804 - aiogram.event - INFO - Update id=746486583 is handled. Duration 233 ms by bot id=6588698079
2024-12-04 16:01:03,302 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:01:03,310 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:01:03,311 - sqlalchemy.engine.Engine - INFO - [generated in 0.00145s] ('528155210', 1, 0)
2024-12-04 16:01:03,316 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:01:03,317 - sqlalchemy.engine.Engine - INFO - [cached since 3.1s ago] ('528155210',)
2024-12-04 16:01:09,796 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 16:01:09,980 - aiogram.event - INFO - Update id=746486584 is handled. Duration 6687 ms by bot id=6588698079
2024-12-04 16:01:11,535 - aiogram.event - INFO - Update id=746486585 is not handled. Duration 250 ms by bot id=6588698079
2024-12-04 16:01:11,535 - aiogram.event - ERROR - Cause exception while process update id=746486585 by bot id=6588698079
OutlineServerErrorException: Unable to get key
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 26, in choosing_key_handler
    key_info = outline_processor.get_key_info(selected_key_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\outline_processor.py", line 14, in get_key_info
    return self.client.get_key(key_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\outline_vpn\outline_vpn.py", line 128, in get_key
    raise OutlineServerErrorException("Unable to get key")
outline_vpn.outline_vpn.OutlineServerErrorException: Unable to get key
2024-12-04 16:01:19,857 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:01:20,123 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:01:20,130 - root - INFO - Бот остановлен вручную.
2024-12-04 16:05:51,485 - root - INFO - Инициализация бота...
2024-12-04 16:05:52,386 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:05:52,388 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:05:52,390 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:05:52,394 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:05:52,394 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:05:52,396 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:05:52,486 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:05:52,487 - root - INFO - Инициализация диспетчера...
2024-12-04 16:05:52,490 - root - INFO - Регистрация обработчиков...
2024-12-04 16:05:52,494 - root - INFO - Запуск polling...
2024-12-04 16:05:52,495 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:05:52,518 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:05:52,525 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:05:52,526 - sqlalchemy.engine.Engine - INFO - [generated in 0.00104s] ()
2024-12-04 16:05:52,543 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:05:52,544 - sqlalchemy.engine.Engine - INFO - [generated in 0.00110s] ('528155210',)
2024-12-04 16:05:52,547 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:05:52,549 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:05:52,552 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:05:52,553 - sqlalchemy.engine.Engine - INFO - [generated in 0.00104s] ('528155210',)
2024-12-04 16:05:52,875 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:05:53,179 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:05:53,179 - sqlalchemy.engine.Engine - INFO - [generated in 0.00153s] ('71',)
2024-12-04 16:05:53,452 - aiogram.event - INFO - Update id=746486586 is handled. Duration 422 ms by bot id=6588698079
2024-12-04 16:05:56,204 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:05:56,207 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:05:56,208 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ('528155210', 1, 0)
2024-12-04 16:05:56,211 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:05:56,211 - sqlalchemy.engine.Engine - INFO - [cached since 3.669s ago] ('528155210',)
2024-12-04 16:06:01,722 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 16:06:01,793 - aiogram.event - INFO - Update id=746486587 is handled. Duration 5592 ms by bot id=6588698079
2024-12-04 16:06:03,633 - aiogram.event - INFO - Update id=746486588 is not handled. Duration 233 ms by bot id=6588698079
2024-12-04 16:06:03,634 - aiogram.event - ERROR - Cause exception while process update id=746486588 by bot id=6588698079
OutlineServerErrorException: Unable to get key
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 26, in choosing_key_handler
    key_info = outline_processor.get_key_info(selected_key_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\outline_processor.py", line 14, in get_key_info
    return self.client.get_key(key_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\outline_vpn\outline_vpn.py", line 128, in get_key
    raise OutlineServerErrorException("Unable to get key")
outline_vpn.outline_vpn.OutlineServerErrorException: Unable to get key
2024-12-04 16:06:14,075 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:06:14,336 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:06:14,339 - root - INFO - Бот остановлен вручную.
2024-12-04 16:06:49,113 - root - INFO - Инициализация бота...
2024-12-04 16:06:50,080 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:06:50,081 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:06:50,081 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:06:50,085 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:06:50,086 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:06:50,087 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:06:50,176 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:06:50,176 - root - INFO - Инициализация диспетчера...
2024-12-04 16:06:50,178 - root - INFO - Регистрация обработчиков...
2024-12-04 16:06:50,181 - root - INFO - Запуск polling...
2024-12-04 16:06:50,182 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:06:50,203 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:06:50,207 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:06:50,208 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] ()
2024-12-04 16:06:50,217 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:06:50,218 - sqlalchemy.engine.Engine - INFO - [generated in 0.00100s] ('528155210',)
2024-12-04 16:06:50,221 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:06:50,223 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:06:50,225 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:06:50,225 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('528155210',)
2024-12-04 16:06:50,538 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:06:50,809 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:06:50,810 - sqlalchemy.engine.Engine - INFO - [generated in 0.00124s] ('71',)
2024-12-04 16:06:51,087 - aiogram.event - INFO - Update id=746486589 is handled. Duration 359 ms by bot id=6588698079
2024-12-04 16:06:53,861 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:06:53,867 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:06:53,868 - sqlalchemy.engine.Engine - INFO - [generated in 0.00164s] ('528155210', 1, 0)
2024-12-04 16:06:53,874 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:06:53,874 - sqlalchemy.engine.Engine - INFO - [cached since 3.658s ago] ('528155210',)
2024-12-04 16:06:59,238 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 16:06:59,414 - aiogram.event - INFO - Update id=746486590 is handled. Duration 5547 ms by bot id=6588698079
2024-12-04 16:07:00,762 - aiogram.event - INFO - Update id=746486591 is not handled. Duration 234 ms by bot id=6588698079
2024-12-04 16:07:00,764 - aiogram.event - ERROR - Cause exception while process update id=746486591 by bot id=6588698079
OutlineServerErrorException: Unable to get key
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 26, in choosing_key_handler
    key_info = outline_processor.get_key_info(selected_key_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\utils\outline_processor.py", line 14, in get_key_info
    return self.client.get_key(key_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\outline_vpn\outline_vpn.py", line 128, in get_key
    raise OutlineServerErrorException("Unable to get key")
outline_vpn.outline_vpn.OutlineServerErrorException: Unable to get key
2024-12-04 16:07:15,949 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:09:02,295 - root - INFO - Инициализация бота...
2024-12-04 16:09:03,643 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:09:03,644 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:09:03,645 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:09:03,649 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:09:03,649 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:09:03,652 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:09:03,723 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:09:03,723 - root - INFO - Инициализация диспетчера...
2024-12-04 16:09:03,725 - root - INFO - Регистрация обработчиков...
2024-12-04 16:09:03,727 - root - INFO - Запуск polling...
2024-12-04 16:09:03,727 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:09:03,737 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:09:03,741 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:09:03,741 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ()
2024-12-04 16:09:03,748 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:09:03,748 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ('528155210',)
2024-12-04 16:09:03,750 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:09:03,751 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:09:03,752 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:09:03,752 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ('528155210',)
2024-12-04 16:09:04,134 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:09:04,363 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:09:04,364 - sqlalchemy.engine.Engine - INFO - [generated in 0.00123s] ('71',)
2024-12-04 16:09:04,691 - aiogram.event - INFO - Update id=746486592 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 16:09:06,928 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:09:06,935 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:09:06,936 - sqlalchemy.engine.Engine - INFO - [generated in 0.00163s] ('528155210', 1, 0)
2024-12-04 16:09:06,943 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:09:06,944 - sqlalchemy.engine.Engine - INFO - [cached since 3.196s ago] ('528155210',)
2024-12-04 16:09:13,454 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 16:09:13,524 - aiogram.event - INFO - Update id=746486593 is handled. Duration 6594 ms by bot id=6588698079
2024-12-04 16:09:15,147 - aiogram.event - INFO - Update id=746486594 is handled. Duration 156 ms by bot id=6588698079
2024-12-04 16:10:20,344 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:10:20,610 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:10:20,617 - root - INFO - Бот остановлен вручную.
2024-12-04 16:10:28,904 - root - INFO - Инициализация бота...
2024-12-04 16:10:29,454 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:10:29,455 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:10:29,455 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:10:29,456 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:10:29,456 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:10:29,457 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:10:29,494 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:10:29,494 - root - INFO - Инициализация диспетчера...
2024-12-04 16:10:29,495 - root - INFO - Регистрация обработчиков...
2024-12-04 16:10:29,497 - root - INFO - Запуск polling...
2024-12-04 16:10:29,497 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:10:29,506 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:10:29,510 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:10:29,510 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ()
2024-12-04 16:10:29,516 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:10:29,516 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('528155210',)
2024-12-04 16:10:29,518 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:10:29,519 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:10:29,520 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:10:29,520 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] ('528155210',)
2024-12-04 16:10:29,767 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:10:30,011 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:10:30,012 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] ('71',)
2024-12-04 16:10:35,227 - aiogram.event - INFO - Update id=746486595 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 16:10:37,745 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:10:37,747 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:10:37,747 - sqlalchemy.engine.Engine - INFO - [generated in 0.00082s] ('528155210', 1, 0)
2024-12-04 16:10:37,753 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:10:37,753 - sqlalchemy.engine.Engine - INFO - [cached since 8.237s ago] ('528155210',)
2024-12-04 16:10:43,455 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 16:10:43,533 - aiogram.event - INFO - Update id=746486596 is handled. Duration 5797 ms by bot id=6588698079
2024-12-04 16:10:44,552 - aiogram.event - INFO - Update id=746486597 is handled. Duration 155 ms by bot id=6588698079
2024-12-04 16:10:47,703 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:11:31,494 - root - INFO - Инициализация бота...
2024-12-04 16:11:32,231 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:11:32,232 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:11:32,232 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:11:32,233 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:11:32,234 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:11:32,234 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:11:32,274 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:11:32,274 - root - INFO - Инициализация диспетчера...
2024-12-04 16:11:32,275 - root - INFO - Регистрация обработчиков...
2024-12-04 16:11:32,277 - root - INFO - Запуск polling...
2024-12-04 16:11:32,278 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:11:32,288 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:11:32,291 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:11:32,292 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ()
2024-12-04 16:11:32,297 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:11:32,298 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ('528155210',)
2024-12-04 16:11:32,300 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:11:32,301 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:11:32,303 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:11:32,303 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ('528155210',)
2024-12-04 16:11:32,688 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:11:32,839 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:11:32,840 - sqlalchemy.engine.Engine - INFO - [generated in 0.00114s] ('71',)
2024-12-04 16:11:36,210 - aiogram.event - INFO - Update id=746486598 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 16:11:37,731 - aiogram.event - INFO - Update id=746486599 is handled. Duration 515 ms by bot id=6588698079
2024-12-04 16:11:39,171 - aiogram.event - INFO - Update id=746486600 is handled. Duration 562 ms by bot id=6588698079
2024-12-04 16:11:42,574 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:11:42,837 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:11:42,839 - root - INFO - Бот остановлен вручную.
2024-12-04 16:13:31,990 - root - INFO - Инициализация бота...
2024-12-04 16:13:32,848 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:13:32,849 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:13:32,849 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:13:32,851 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:13:32,852 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:13:32,852 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:13:32,940 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:13:32,941 - root - INFO - Инициализация диспетчера...
2024-12-04 16:13:32,943 - root - INFO - Регистрация обработчиков...
2024-12-04 16:13:32,946 - root - INFO - Запуск polling...
2024-12-04 16:13:32,947 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:13:32,969 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:13:32,974 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:13:32,975 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ()
2024-12-04 16:13:32,985 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:13:32,985 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] ('528155210',)
2024-12-04 16:13:32,989 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:13:32,990 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:13:32,992 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:13:32,993 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('528155210',)
2024-12-04 16:13:33,402 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:13:33,403 - sqlalchemy.engine.Engine - INFO - [generated in 0.00108s] ('71',)
2024-12-04 16:13:33,415 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:13:33,983 - aiogram.event - INFO - Update id=746486601 is handled. Duration 171 ms by bot id=6588698079
2024-12-04 16:13:36,194 - aiogram.event - INFO - Update id=746486602 is handled. Duration 703 ms by bot id=6588698079
2024-12-04 16:13:36,695 - aiogram.event - INFO - Update id=746486603 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:14:54,350 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:14:54,613 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:14:54,619 - root - INFO - Бот остановлен вручную.
2024-12-04 16:15:02,443 - root - INFO - Инициализация бота...
2024-12-04 16:15:03,038 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:15:03,039 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:15:03,039 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:15:03,040 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:15:03,040 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:15:03,041 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:15:03,084 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:15:03,085 - root - INFO - Инициализация диспетчера...
2024-12-04 16:15:03,087 - root - INFO - Регистрация обработчиков...
2024-12-04 16:15:03,090 - root - INFO - Запуск polling...
2024-12-04 16:15:03,090 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:15:03,101 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:15:03,106 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:15:03,106 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ()
2024-12-04 16:15:03,112 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:15:03,112 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ('528155210',)
2024-12-04 16:15:03,114 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:15:03,115 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:15:03,117 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:15:03,117 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('528155210',)
2024-12-04 16:15:03,489 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:15:03,489 - sqlalchemy.engine.Engine - INFO - [generated in 0.00148s] ('71',)
2024-12-04 16:15:03,502 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:15:06,938 - aiogram.event - INFO - Update id=746486604 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 16:15:09,158 - aiogram.event - INFO - Update id=746486605 is handled. Duration 547 ms by bot id=6588698079
2024-12-04 16:15:10,143 - aiogram.event - INFO - Update id=746486606 is not handled. Duration 16 ms by bot id=6588698079
2024-12-04 16:15:13,775 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:16:45,408 - root - INFO - Инициализация бота...
2024-12-04 16:16:46,145 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:16:46,146 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:16:46,146 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:16:46,148 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:16:46,148 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:16:46,150 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:16:46,199 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:16:46,199 - root - INFO - Инициализация диспетчера...
2024-12-04 16:16:46,202 - root - INFO - Регистрация обработчиков...
2024-12-04 16:16:46,203 - root - INFO - Запуск polling...
2024-12-04 16:16:46,204 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:16:46,217 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:16:46,220 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:16:46,221 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ()
2024-12-04 16:16:46,227 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:16:46,228 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('528155210',)
2024-12-04 16:16:46,230 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:16:46,231 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:16:46,233 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:16:46,233 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ('528155210',)
2024-12-04 16:16:46,568 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:16:46,815 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:16:46,815 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ('71',)
2024-12-04 16:16:47,271 - aiogram.event - INFO - Update id=746486607 is handled. Duration 500 ms by bot id=6588698079
2024-12-04 16:16:48,827 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:16:48,831 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:16:48,832 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('528155210', 1, 0)
2024-12-04 16:16:48,835 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:16:48,835 - sqlalchemy.engine.Engine - INFO - [cached since 2.608s ago] ('528155210',)
2024-12-04 16:16:55,538 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 16:16:55,751 - aiogram.event - INFO - Update id=746486608 is handled. Duration 6920 ms by bot id=6588698079
2024-12-04 16:16:57,098 - aiogram.event - INFO - Update id=746486609 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 16:16:58,824 - aiogram.event - INFO - Update id=746486610 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 16:17:00,498 - aiogram.event - INFO - Update id=746486611 is handled. Duration 515 ms by bot id=6588698079
2024-12-04 16:17:03,850 - aiogram.event - INFO - Update id=746486612 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 16:17:05,091 - aiogram.event - INFO - Update id=746486613 is handled. Duration 280 ms by bot id=6588698079
2024-12-04 16:17:06,503 - aiogram.event - INFO - Update id=746486614 is handled. Duration 280 ms by bot id=6588698079
2024-12-04 16:17:07,470 - aiogram.event - INFO - Update id=746486615 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:17:11,193 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:17:11,468 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:17:11,473 - root - INFO - Бот остановлен вручную.
2024-12-04 16:18:23,103 - root - INFO - Инициализация бота...
2024-12-04 16:18:23,666 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:18:23,667 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:18:23,667 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:18:23,669 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:18:23,670 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:18:23,671 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:18:23,720 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:18:23,720 - root - INFO - Инициализация диспетчера...
2024-12-04 16:18:23,722 - root - INFO - Регистрация обработчиков...
2024-12-04 16:18:23,723 - root - INFO - Запуск polling...
2024-12-04 16:18:23,724 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:18:23,736 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:18:23,739 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:18:23,739 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ()
2024-12-04 16:18:23,744 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:18:23,744 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ('528155210',)
2024-12-04 16:18:23,747 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:18:23,747 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:18:23,749 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:18:23,750 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ('528155210',)
2024-12-04 16:18:24,055 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:18:24,056 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ('71',)
2024-12-04 16:18:24,064 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:18:45,132 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:18:45,399 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:18:45,405 - root - INFO - Бот остановлен вручную.
2024-12-04 16:18:53,297 - root - INFO - Инициализация бота...
2024-12-04 16:18:53,888 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:18:53,888 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:18:53,888 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:18:53,890 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:18:53,890 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:18:53,891 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:18:53,947 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:18:53,948 - root - INFO - Инициализация диспетчера...
2024-12-04 16:18:53,951 - root - INFO - Регистрация обработчиков...
2024-12-04 16:18:53,955 - root - INFO - Запуск polling...
2024-12-04 16:18:53,956 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:18:53,983 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:18:53,992 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:18:53,993 - sqlalchemy.engine.Engine - INFO - [generated in 0.00112s] ()
2024-12-04 16:18:54,006 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:18:54,008 - sqlalchemy.engine.Engine - INFO - [generated in 0.00159s] ('528155210',)
2024-12-04 16:18:54,013 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:18:54,016 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:18:54,019 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:18:54,020 - sqlalchemy.engine.Engine - INFO - [generated in 0.00129s] ('528155210',)
2024-12-04 16:18:54,281 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:18:54,380 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:18:54,380 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] ('71',)
2024-12-04 16:18:57,748 - aiogram.event - INFO - Update id=746486616 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 16:19:01,380 - aiogram.event - INFO - Update id=746486617 is handled. Duration 405 ms by bot id=6588698079
2024-12-04 16:19:02,409 - aiogram.event - INFO - Update id=746486618 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:19:06,014 - aiogram.event - INFO - Update id=746486619 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 16:19:07,742 - aiogram.event - INFO - Update id=746486620 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 16:19:09,056 - aiogram.event - INFO - Update id=746486621 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:19:10,434 - aiogram.event - INFO - Update id=746486622 is handled. Duration 188 ms by bot id=6588698079
2024-12-04 16:19:11,279 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:19:11,283 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:19:11,284 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] ('528155210', 1, 0)
2024-12-04 16:19:11,289 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:19:11,290 - sqlalchemy.engine.Engine - INFO - [cached since 17.28s ago] ('528155210',)
2024-12-04 16:19:16,775 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 16:19:16,856 - aiogram.event - INFO - Update id=746486623 is handled. Duration 5593 ms by bot id=6588698079
2024-12-04 16:19:19,820 - aiogram.event - INFO - Update id=746486624 is handled. Duration 156 ms by bot id=6588698079
2024-12-04 16:19:23,326 - aiogram.event - INFO - Update id=746486625 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 16:19:25,834 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:19:26,080 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:19:26,086 - root - INFO - Бот остановлен вручную.
2024-12-04 16:21:11,426 - root - INFO - Инициализация бота...
2024-12-04 16:21:12,625 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:21:12,625 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:21:12,626 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:21:12,627 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:21:12,628 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:21:12,629 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:21:12,686 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:21:12,686 - root - INFO - Инициализация диспетчера...
2024-12-04 16:21:12,687 - root - INFO - Регистрация обработчиков...
2024-12-04 16:21:12,689 - root - INFO - Запуск polling...
2024-12-04 16:21:12,690 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:21:12,702 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:21:12,707 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:21:12,708 - sqlalchemy.engine.Engine - INFO - [generated in 0.00089s] ()
2024-12-04 16:21:12,714 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:21:12,715 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] ('528155210',)
2024-12-04 16:21:12,717 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:21:12,717 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:21:12,719 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:21:12,719 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ('528155210',)
2024-12-04 16:21:13,063 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:21:13,213 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:21:13,213 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ('71',)
2024-12-04 16:21:33,641 - aiogram.event - INFO - Update id=746486626 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 16:21:40,487 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:21:40,491 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:21:40,492 - sqlalchemy.engine.Engine - INFO - [generated in 0.00116s] ('528155210', 1, 0)
2024-12-04 16:21:40,497 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:21:40,498 - sqlalchemy.engine.Engine - INFO - [cached since 27.78s ago] ('528155210',)
2024-12-04 16:21:46,709 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 16:21:46,894 - aiogram.event - INFO - Update id=746486627 is handled. Duration 6406 ms by bot id=6588698079
2024-12-04 16:21:50,756 - aiogram.event - INFO - Update id=746486628 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 16:21:52,212 - aiogram.event - INFO - Update id=746486629 is handled. Duration 329 ms by bot id=6588698079
2024-12-04 16:21:53,677 - aiogram.event - INFO - Update id=746486630 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:21:56,211 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:21:56,479 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:21:56,484 - root - INFO - Бот остановлен вручную.
2024-12-04 16:22:31,264 - root - INFO - Инициализация бота...
2024-12-04 16:22:32,000 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:22:32,001 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:22:32,001 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:22:32,003 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:22:32,003 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:22:32,004 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:22:32,059 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:22:32,060 - root - INFO - Инициализация диспетчера...
2024-12-04 16:22:32,061 - root - INFO - Регистрация обработчиков...
2024-12-04 16:22:32,064 - root - INFO - Запуск polling...
2024-12-04 16:22:32,064 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:22:32,078 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:22:32,084 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:22:32,084 - sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] ()
2024-12-04 16:22:32,092 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:22:32,093 - sqlalchemy.engine.Engine - INFO - [generated in 0.00072s] ('528155210',)
2024-12-04 16:22:32,094 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:22:32,095 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:22:32,097 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:22:32,098 - sqlalchemy.engine.Engine - INFO - [generated in 0.00081s] ('528155210',)
2024-12-04 16:22:32,488 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:22:32,489 - sqlalchemy.engine.Engine - INFO - [generated in 0.00133s] ('71',)
2024-12-04 16:22:32,500 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:22:32,790 - aiogram.event - INFO - Update id=746486631 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 16:22:38,783 - aiogram.event - INFO - Update id=746486632 is handled. Duration 500 ms by bot id=6588698079
2024-12-04 16:22:39,475 - aiogram.event - INFO - Update id=746486633 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:22:42,033 - aiogram.event - INFO - Update id=746486634 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 16:32:03,757 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:32:04,016 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:32:04,024 - root - INFO - Бот остановлен вручную.
2024-12-04 16:33:55,451 - root - INFO - Инициализация бота...
2024-12-04 16:33:56,461 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:33:56,462 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:33:56,463 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:33:56,466 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:33:56,467 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:33:56,469 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:33:56,569 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:33:56,570 - root - INFO - Инициализация диспетчера...
2024-12-04 16:33:56,574 - root - INFO - Регистрация обработчиков...
2024-12-04 16:33:56,579 - root - INFO - Запуск polling...
2024-12-04 16:33:56,580 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:33:56,610 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:33:56,618 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:33:56,620 - sqlalchemy.engine.Engine - INFO - [generated in 0.00207s] ()
2024-12-04 16:33:56,638 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:33:56,639 - sqlalchemy.engine.Engine - INFO - [generated in 0.00196s] ('528155210',)
2024-12-04 16:33:56,644 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:33:56,649 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:33:56,657 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:33:56,659 - sqlalchemy.engine.Engine - INFO - [generated in 0.00236s] ('528155210',)
2024-12-04 16:33:57,110 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:33:57,357 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:33:57,357 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] ('71',)
2024-12-04 16:34:01,305 - aiogram.event - INFO - Update id=746486635 is handled. Duration 280 ms by bot id=6588698079
2024-12-04 16:34:03,195 - aiogram.event - INFO - Update id=746486636 is handled. Duration 641 ms by bot id=6588698079
2024-12-04 16:34:04,220 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:34:04,227 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:34:04,229 - sqlalchemy.engine.Engine - INFO - [generated in 0.00180s] ('528155210', 1, 0)
2024-12-04 16:34:04,472 - aiogram.event - INFO - Update id=746486637 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 16:34:09,769 - aiogram.event - INFO - Update id=746486638 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 16:34:11,724 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:34:11,989 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:34:11,998 - root - INFO - Бот остановлен вручную.
2024-12-04 16:34:40,533 - root - INFO - Инициализация бота...
2024-12-04 16:34:41,283 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:34:41,283 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:34:41,283 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:34:41,285 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:34:41,286 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:34:41,286 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:34:41,327 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:34:41,327 - root - INFO - Инициализация диспетчера...
2024-12-04 16:34:41,328 - root - INFO - Регистрация обработчиков...
2024-12-04 16:34:41,330 - root - INFO - Запуск polling...
2024-12-04 16:34:41,331 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:34:41,340 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:34:41,343 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:34:41,344 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ()
2024-12-04 16:34:41,350 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:34:41,350 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('528155210',)
2024-12-04 16:34:41,352 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:34:41,353 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:34:41,354 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:34:41,355 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ('528155210',)
2024-12-04 16:34:41,759 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:34:41,759 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] ('71',)
2024-12-04 16:34:41,773 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:34:45,503 - aiogram.event - INFO - Update id=746486639 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 16:34:47,812 - aiogram.event - INFO - Update id=746486640 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 16:34:49,427 - aiogram.event - INFO - Update id=746486641 is handled. Duration 358 ms by bot id=6588698079
2024-12-04 16:34:50,791 - aiogram.event - INFO - Update id=746486642 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:34:54,405 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:34:54,664 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:34:54,671 - root - INFO - Бот остановлен вручную.
2024-12-04 16:36:44,802 - root - INFO - Инициализация бота...
2024-12-04 16:36:45,926 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:36:45,927 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:36:45,927 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:36:45,929 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:36:45,929 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:36:45,930 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:36:45,992 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:36:45,994 - root - INFO - Инициализация диспетчера...
2024-12-04 16:36:45,998 - root - INFO - Регистрация обработчиков...
2024-12-04 16:36:46,002 - root - INFO - Запуск polling...
2024-12-04 16:36:46,003 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:36:46,032 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:36:46,040 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:36:46,042 - sqlalchemy.engine.Engine - INFO - [generated in 0.00172s] ()
2024-12-04 16:36:46,060 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:36:46,061 - sqlalchemy.engine.Engine - INFO - [generated in 0.00159s] ('528155210',)
2024-12-04 16:36:46,068 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:36:46,072 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:36:46,076 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:36:46,078 - sqlalchemy.engine.Engine - INFO - [generated in 0.00183s] ('528155210',)
2024-12-04 16:36:46,563 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:36:46,707 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:36:46,708 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] ('71',)
2024-12-04 16:36:46,964 - aiogram.event - INFO - Update id=746486643 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 16:36:48,743 - aiogram.event - INFO - Update id=746486644 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 16:36:49,767 - aiogram.event - INFO - Update id=746486645 is not handled. Duration 16 ms by bot id=6588698079
2024-12-04 16:36:53,222 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:36:53,480 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:36:53,486 - root - INFO - Бот остановлен вручную.
2024-12-04 16:47:10,742 - root - INFO - Инициализация бота...
2024-12-04 16:47:11,919 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:47:11,919 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:47:11,919 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:47:11,921 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:47:11,921 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:47:11,923 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:47:11,981 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:47:11,981 - root - INFO - Инициализация диспетчера...
2024-12-04 16:47:11,983 - root - INFO - Регистрация обработчиков...
2024-12-04 16:47:11,985 - root - INFO - Запуск polling...
2024-12-04 16:47:11,985 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:47:11,998 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:47:12,001 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:47:12,002 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ()
2024-12-04 16:47:12,008 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:47:12,008 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('528155210',)
2024-12-04 16:47:12,011 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:47:12,012 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:47:12,014 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:47:12,014 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ('528155210',)
2024-12-04 16:47:12,417 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:47:12,518 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:47:12,519 - sqlalchemy.engine.Engine - INFO - [generated in 0.00141s] ('71',)
2024-12-04 16:47:12,775 - aiogram.event - INFO - Update id=746486646 is handled. Duration 141 ms by bot id=6588698079
2024-12-04 16:47:21,756 - aiogram.event - INFO - Update id=746486647 is handled. Duration 311 ms by bot id=6588698079
2024-12-04 16:47:22,986 - aiogram.event - INFO - Update id=746486648 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 16:47:24,723 - aiogram.event - INFO - Update id=746486649 is handled. Duration 280 ms by bot id=6588698079
2024-12-04 16:47:25,687 - aiogram.event - INFO - Update id=746486650 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:47:27,333 - aiogram.event - INFO - Update id=746486651 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:47:29,067 - aiogram.event - INFO - Update id=746486652 is handled. Duration 188 ms by bot id=6588698079
2024-12-04 16:47:30,294 - aiogram.event - INFO - Update id=746486653 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 16:47:31,131 - aiogram.event - INFO - Update id=746486654 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:47:34,067 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:47:34,325 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:47:34,330 - root - INFO - Бот остановлен вручную.
2024-12-04 16:48:00,269 - root - INFO - Инициализация бота...
2024-12-04 16:48:01,170 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:48:01,171 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:48:01,171 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:48:01,173 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:48:01,173 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:48:01,174 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:48:01,232 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:48:01,233 - root - INFO - Инициализация диспетчера...
2024-12-04 16:48:01,234 - root - INFO - Регистрация обработчиков...
2024-12-04 16:48:01,236 - root - INFO - Запуск polling...
2024-12-04 16:48:01,237 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:48:01,250 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:48:01,255 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:48:01,255 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ()
2024-12-04 16:48:01,262 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:48:01,262 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ('528155210',)
2024-12-04 16:48:01,264 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:48:01,265 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:48:01,267 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:48:01,267 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] ('528155210',)
2024-12-04 16:48:01,582 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:48:01,899 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:48:01,900 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] ('71',)
2024-12-04 16:48:06,446 - aiogram.event - INFO - Update id=746486655 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 16:48:07,995 - aiogram.event - INFO - Update id=746486656 is handled. Duration 280 ms by bot id=6588698079
2024-12-04 16:48:08,914 - aiogram.event - INFO - Update id=746486657 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 16:48:10,714 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:52:13,461 - root - INFO - Инициализация бота...
2024-12-04 16:52:14,304 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:52:14,304 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:52:14,305 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:52:14,306 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:52:14,306 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:52:14,307 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:52:14,355 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:52:14,355 - root - INFO - Инициализация диспетчера...
2024-12-04 16:52:14,357 - root - INFO - Регистрация обработчиков...
2024-12-04 16:52:14,360 - root - INFO - Запуск polling...
2024-12-04 16:52:14,360 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:52:14,371 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:52:14,375 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:52:14,376 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ()
2024-12-04 16:52:14,381 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:52:14,382 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] ('528155210',)
2024-12-04 16:52:14,384 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:52:14,385 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:52:14,387 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:52:14,387 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ('528155210',)
2024-12-04 16:52:14,715 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:52:14,852 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:52:14,853 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('71',)
2024-12-04 16:52:20,969 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:52:21,232 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:52:21,240 - root - INFO - Бот остановлен вручную.
2024-12-04 16:52:28,888 - root - INFO - Инициализация бота...
2024-12-04 16:52:30,055 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:52:30,056 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:52:30,058 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:52:30,060 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:52:30,062 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:52:30,063 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:52:30,151 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:52:30,151 - root - INFO - Инициализация диспетчера...
2024-12-04 16:52:30,153 - root - INFO - Регистрация обработчиков...
2024-12-04 16:52:30,157 - root - INFO - Запуск polling...
2024-12-04 16:52:30,158 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:52:30,176 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:52:30,183 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:52:30,183 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] ()
2024-12-04 16:52:30,193 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:52:30,194 - sqlalchemy.engine.Engine - INFO - [generated in 0.00145s] ('528155210',)
2024-12-04 16:52:30,198 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:52:30,200 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:52:30,203 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:52:30,203 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] ('528155210',)
2024-12-04 16:52:30,429 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:52:30,561 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:52:30,562 - sqlalchemy.engine.Engine - INFO - [generated in 0.00155s] ('71',)
2024-12-04 16:52:36,243 - aiogram.event - INFO - Update id=746486658 is handled. Duration 155 ms by bot id=6588698079
2024-12-04 16:52:37,810 - aiogram.event - INFO - Update id=746486659 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:52:37,811 - aiogram.event - ERROR - Cause exception while process update id=746486659 by bot id=6588698079
TypeError: buy_key_menu() missing 1 required positional argument: 'state'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\main_menu_router.py", line 50, in main_menu_handler
    await buy_key_menu(callback)
          ^^^^^^^^^^^^^^^^^^^^^^
TypeError: buy_key_menu() missing 1 required positional argument: 'state'
2024-12-04 16:52:52,477 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:52:52,751 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:52:52,756 - root - INFO - Бот остановлен вручную.
2024-12-04 16:53:05,188 - root - INFO - Инициализация бота...
2024-12-04 16:53:06,468 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:53:06,469 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:53:06,469 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:53:06,472 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:53:06,473 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:53:06,474 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:53:06,566 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:53:06,566 - root - INFO - Инициализация диспетчера...
2024-12-04 16:53:06,571 - root - INFO - Регистрация обработчиков...
2024-12-04 16:53:06,577 - root - INFO - Запуск polling...
2024-12-04 16:53:06,578 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:53:06,603 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:53:06,612 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:53:06,613 - sqlalchemy.engine.Engine - INFO - [generated in 0.00099s] ()
2024-12-04 16:53:06,625 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:53:06,626 - sqlalchemy.engine.Engine - INFO - [generated in 0.00125s] ('528155210',)
2024-12-04 16:53:06,629 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:53:06,632 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:53:06,634 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:53:06,635 - sqlalchemy.engine.Engine - INFO - [generated in 0.00089s] ('528155210',)
2024-12-04 16:53:06,929 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:53:07,107 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:53:07,107 - sqlalchemy.engine.Engine - INFO - [generated in 0.00104s] ('71',)
2024-12-04 16:53:10,055 - aiogram.event - INFO - Update id=746486660 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 16:53:11,662 - aiogram.event - INFO - Update id=746486661 is handled. Duration 282 ms by bot id=6588698079
2024-12-04 16:53:12,832 - aiogram.event - INFO - Update id=746486662 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 16:53:15,757 - aiogram.event - INFO - Update id=746486663 is handled. Duration 342 ms by bot id=6588698079
2024-12-04 16:53:17,051 - aiogram.event - INFO - Update id=746486664 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 16:53:18,449 - aiogram.event - INFO - Update id=746486665 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 16:53:20,837 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:53:21,114 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:56:48,548 - root - INFO - Инициализация бота...
2024-12-04 16:56:49,265 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:56:49,266 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:56:49,266 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:56:49,269 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:56:49,269 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:56:49,270 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:56:49,327 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:56:49,327 - root - INFO - Инициализация диспетчера...
2024-12-04 16:56:49,328 - root - INFO - Регистрация обработчиков...
2024-12-04 16:56:49,331 - root - INFO - Запуск polling...
2024-12-04 16:56:49,331 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:56:49,344 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:56:49,347 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:56:49,348 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ()
2024-12-04 16:56:49,355 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:56:49,355 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('528155210',)
2024-12-04 16:56:49,358 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:56:49,359 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:56:49,361 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:56:49,361 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ('528155210',)
2024-12-04 16:56:49,677 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:56:49,846 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:56:49,846 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ('71',)
2024-12-04 16:56:50,044 - aiogram.event - INFO - Update id=746486666 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 16:56:52,207 - aiogram.event - INFO - Update id=746486667 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 16:56:53,889 - aiogram.event - INFO - Update id=746486668 is not handled. Duration 16 ms by bot id=6588698079
2024-12-04 16:56:55,741 - aiogram.event - INFO - Update id=746486669 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 16:56:57,448 - aiogram.event - INFO - Update id=746486670 is handled. Duration 422 ms by bot id=6588698079
2024-12-04 16:56:58,242 - aiogram.event - INFO - Update id=746486671 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 16:57:00,664 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:57:00,927 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:57:00,933 - root - INFO - Бот остановлен вручную.
2024-12-04 16:58:06,210 - root - INFO - Инициализация бота...
2024-12-04 16:58:07,335 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:58:07,336 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 16:58:07,337 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:58:07,341 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 16:58:07,341 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 16:58:07,344 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:58:07,454 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 16:58:07,455 - root - INFO - Инициализация диспетчера...
2024-12-04 16:58:07,458 - root - INFO - Регистрация обработчиков...
2024-12-04 16:58:07,464 - root - INFO - Запуск polling...
2024-12-04 16:58:07,465 - aiogram.dispatcher - INFO - Start polling
2024-12-04 16:58:07,488 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:58:07,496 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 16:58:07,497 - sqlalchemy.engine.Engine - INFO - [generated in 0.00107s] ()
2024-12-04 16:58:07,508 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 16:58:07,509 - sqlalchemy.engine.Engine - INFO - [generated in 0.00128s] ('528155210',)
2024-12-04 16:58:07,513 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 16:58:07,515 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:58:07,519 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 16:58:07,519 - sqlalchemy.engine.Engine - INFO - [generated in 0.00112s] ('528155210',)
2024-12-04 16:58:07,820 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:58:07,931 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 16:58:07,932 - sqlalchemy.engine.Engine - INFO - [generated in 0.00237s] ('71',)
2024-12-04 16:58:08,142 - aiogram.event - INFO - Update id=746486672 is handled. Duration 141 ms by bot id=6588698079
2024-12-04 16:58:09,982 - aiogram.event - INFO - Update id=746486673 is handled. Duration 359 ms by bot id=6588698079
2024-12-04 16:58:11,286 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 16:58:11,292 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 16:58:11,294 - sqlalchemy.engine.Engine - INFO - [generated in 0.00211s] ('528155210', 1, 0)
2024-12-04 16:58:11,576 - aiogram.event - INFO - Update id=746486674 is handled. Duration 532 ms by bot id=6588698079
2024-12-04 16:58:16,590 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 16:58:16,852 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 16:58:16,859 - root - INFO - Бот остановлен вручную.
2024-12-04 17:01:15,880 - root - INFO - Инициализация бота...
2024-12-04 17:01:16,660 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:01:16,661 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:01:16,661 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:01:16,663 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:01:16,663 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:01:16,664 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:01:16,725 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:01:16,726 - root - INFO - Инициализация диспетчера...
2024-12-04 17:01:16,727 - root - INFO - Регистрация обработчиков...
2024-12-04 17:01:16,730 - root - INFO - Запуск polling...
2024-12-04 17:01:16,731 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:01:16,743 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:01:16,748 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:01:16,749 - sqlalchemy.engine.Engine - INFO - [generated in 0.00082s] ()
2024-12-04 17:01:16,755 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:01:16,756 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ('528155210',)
2024-12-04 17:01:16,758 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:01:16,759 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:01:16,761 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:01:16,761 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ('528155210',)
2024-12-04 17:01:17,075 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:01:17,210 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:01:17,211 - sqlalchemy.engine.Engine - INFO - [generated in 0.00095s] ('71',)
2024-12-04 17:01:21,905 - aiogram.event - INFO - Update id=746486675 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 17:01:23,750 - aiogram.event - INFO - Update id=746486676 is handled. Duration 780 ms by bot id=6588698079
2024-12-04 17:01:24,550 - aiogram.event - INFO - Update id=746486677 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 17:01:27,843 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:01:44,300 - root - INFO - Инициализация бота...
2024-12-04 17:01:46,057 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:01:46,058 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:01:46,059 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:01:46,063 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:01:46,064 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:01:46,067 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:01:46,189 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:01:46,190 - root - INFO - Инициализация диспетчера...
2024-12-04 17:01:46,195 - root - INFO - Регистрация обработчиков...
2024-12-04 17:01:46,200 - root - INFO - Запуск polling...
2024-12-04 17:01:46,201 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:01:46,228 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:01:46,239 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:01:46,241 - sqlalchemy.engine.Engine - INFO - [generated in 0.00187s] ()
2024-12-04 17:01:46,255 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:01:46,257 - sqlalchemy.engine.Engine - INFO - [generated in 0.00188s] ('528155210',)
2024-12-04 17:01:46,262 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:01:46,266 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:01:46,270 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:01:46,272 - sqlalchemy.engine.Engine - INFO - [generated in 0.00194s] ('528155210',)
2024-12-04 17:01:46,626 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:01:47,165 - aiogram.event - INFO - Update id=746486678 is handled. Duration 343 ms by bot id=6588698079
2024-12-04 17:01:47,558 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:01:47,560 - sqlalchemy.engine.Engine - INFO - [generated in 0.00179s] ('71',)
2024-12-04 17:01:49,871 - aiogram.event - INFO - Update id=746486679 is handled. Duration 467 ms by bot id=6588698079
2024-12-04 17:01:51,376 - aiogram.event - INFO - Update id=746486680 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 17:01:53,569 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:01:53,818 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:01:53,822 - root - INFO - Бот остановлен вручную.
2024-12-04 17:09:39,937 - root - INFO - Инициализация бота...
2024-12-04 17:09:40,653 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:09:40,653 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:09:40,654 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:09:40,656 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:09:40,656 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:09:40,657 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:09:40,734 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:09:40,734 - root - INFO - Инициализация диспетчера...
2024-12-04 17:09:40,736 - root - INFO - Регистрация обработчиков...
2024-12-04 17:09:40,738 - root - INFO - Запуск polling...
2024-12-04 17:09:40,739 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:09:40,751 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:09:40,755 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:09:40,756 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ()
2024-12-04 17:09:40,767 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:09:40,767 - sqlalchemy.engine.Engine - INFO - [generated in 0.00089s] ('528155210',)
2024-12-04 17:09:40,770 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:09:40,771 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:09:40,773 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:09:40,773 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('528155210',)
2024-12-04 17:09:41,156 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:09:41,247 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:09:41,248 - sqlalchemy.engine.Engine - INFO - [generated in 0.00103s] ('71',)
2024-12-04 17:09:41,588 - aiogram.event - INFO - Update id=746486681 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 17:09:44,049 - aiogram.event - INFO - Update id=746486682 is handled. Duration 342 ms by bot id=6588698079
2024-12-04 17:09:45,227 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:09:45,234 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:09:45,234 - sqlalchemy.engine.Engine - INFO - [generated in 0.00133s] ('528155210', 1, 0)
2024-12-04 17:09:45,356 - aiogram.event - INFO - Update id=746486683 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 17:09:48,358 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:09:48,611 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:09:48,614 - root - INFO - Бот остановлен вручную.
2024-12-04 17:10:17,190 - root - INFO - Инициализация бота...
2024-12-04 17:10:18,258 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:10:18,260 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:10:18,260 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:10:18,264 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:10:18,265 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:10:18,267 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:10:18,387 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:10:18,388 - root - INFO - Инициализация диспетчера...
2024-12-04 17:10:18,394 - root - INFO - Регистрация обработчиков...
2024-12-04 17:10:18,399 - root - INFO - Запуск polling...
2024-12-04 17:10:18,400 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:10:18,430 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:10:18,438 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:10:18,439 - sqlalchemy.engine.Engine - INFO - [generated in 0.00131s] ()
2024-12-04 17:10:18,456 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:10:18,458 - sqlalchemy.engine.Engine - INFO - [generated in 0.00160s] ('528155210',)
2024-12-04 17:10:18,462 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:10:18,467 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:10:18,471 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:10:18,472 - sqlalchemy.engine.Engine - INFO - [generated in 0.00146s] ('528155210',)
2024-12-04 17:10:18,768 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:10:18,868 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:10:18,868 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ('71',)
2024-12-04 17:10:19,089 - aiogram.event - INFO - Update id=746486684 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 17:10:21,031 - aiogram.event - INFO - Update id=746486685 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 17:10:22,351 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:10:22,357 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:10:22,357 - sqlalchemy.engine.Engine - INFO - [generated in 0.00095s] ('528155210', 1, 0)
2024-12-04 17:10:22,474 - aiogram.event - INFO - Update id=746486686 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 17:10:30,835 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:10:31,092 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:10:31,100 - root - INFO - Бот остановлен вручную.
2024-12-04 17:10:42,230 - root - INFO - Инициализация бота...
2024-12-04 17:10:43,496 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:10:43,497 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:10:43,497 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:10:43,501 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:10:43,502 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:10:43,505 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:10:43,609 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:10:43,609 - root - INFO - Инициализация диспетчера...
2024-12-04 17:10:43,613 - root - INFO - Регистрация обработчиков...
2024-12-04 17:10:43,617 - root - INFO - Запуск polling...
2024-12-04 17:10:43,619 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:10:43,643 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:10:43,651 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:10:43,652 - sqlalchemy.engine.Engine - INFO - [generated in 0.00114s] ()
2024-12-04 17:10:43,664 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:10:43,666 - sqlalchemy.engine.Engine - INFO - [generated in 0.00102s] ('528155210',)
2024-12-04 17:10:43,671 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:10:43,675 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:10:43,681 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:10:43,683 - sqlalchemy.engine.Engine - INFO - [generated in 0.00270s] ('528155210',)
2024-12-04 17:10:43,962 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:10:44,125 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:10:44,126 - sqlalchemy.engine.Engine - INFO - [generated in 0.00115s] ('71',)
2024-12-04 17:10:49,094 - aiogram.event - INFO - Update id=746486687 is handled. Duration 375 ms by bot id=6588698079
2024-12-04 17:10:51,535 - aiogram.event - INFO - Update id=746486688 is handled. Duration 407 ms by bot id=6588698079
2024-12-04 17:10:52,959 - aiogram.event - INFO - Update id=746486689 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 17:10:54,479 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:10:54,483 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:10:54,483 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('528155210', 1, 0)
2024-12-04 17:10:54,485 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:10:54,487 - sqlalchemy.engine.Engine - INFO - [cached since 10.82s ago] ('528155210',)
2024-12-04 17:10:59,789 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:10:59,911 - aiogram.event - INFO - Update id=746486690 is handled. Duration 5437 ms by bot id=6588698079
2024-12-04 17:11:37,103 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 17:11:37,104 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 17:11:38,568 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:11:38,573 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:11:38,573 - sqlalchemy.engine.Engine - INFO - [generated in 0.00114s] ('69', 1, 0)
2024-12-04 17:11:38,579 - aiogram.event - INFO - Update id=746486691 is not handled. Duration 1484 ms by bot id=6588698079
2024-12-04 17:11:38,579 - aiogram.event - ERROR - Cause exception while process update id=746486691 by bot id=6588698079
ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard.5.0
  Input should be a valid dictionary or instance of InlineKeyboardButton [type=model_type, input_value=[InlineKeyboardButton(tex...ck_game=None, pay=None)], input_type=list]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 51, in choosing_key_handler
    "Выберите действие для ключа:", reply_markup=get_key_action_keyboard(key_info)
                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 201, in get_key_action_keyboard
    return InlineKeyboardMarkup(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\pydantic\main.py", line 212, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard.5.0
  Input should be a valid dictionary or instance of InlineKeyboardButton [type=model_type, input_value=[InlineKeyboardButton(tex...ck_game=None, pay=None)], input_type=list]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
2024-12-04 17:11:43,445 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 17:11:43,447 - aiogram.event - INFO - Update id=746486692 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 17:16:49,450 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:16:49,719 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:16:49,726 - root - INFO - Бот остановлен вручную.
2024-12-04 17:17:00,794 - root - INFO - Инициализация бота...
2024-12-04 17:17:02,363 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:17:02,364 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:17:02,364 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:17:02,366 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:17:02,366 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:17:02,368 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:17:02,414 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:17:02,414 - root - INFO - Инициализация диспетчера...
2024-12-04 17:17:02,415 - root - INFO - Регистрация обработчиков...
2024-12-04 17:17:02,418 - root - INFO - Запуск polling...
2024-12-04 17:17:02,419 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:17:02,432 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:17:02,436 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:17:02,436 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ()
2024-12-04 17:17:02,443 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:17:02,443 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('528155210',)
2024-12-04 17:17:02,446 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:17:02,447 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:17:02,449 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:17:02,449 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('528155210',)
2024-12-04 17:17:02,833 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:17:03,073 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:17:03,074 - sqlalchemy.engine.Engine - INFO - [generated in 0.00144s] ('71',)
2024-12-04 17:17:17,226 - aiogram.event - INFO - Update id=746486693 is handled. Duration 155 ms by bot id=6588698079
2024-12-04 17:17:20,993 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:17:21,001 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:17:21,002 - sqlalchemy.engine.Engine - INFO - [generated in 0.00179s] ('528155210', 1, 0)
2024-12-04 17:17:21,007 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:17:21,008 - sqlalchemy.engine.Engine - INFO - [cached since 18.57s ago] ('528155210',)
2024-12-04 17:17:26,355 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:17:26,441 - aiogram.event - INFO - Update id=746486694 is handled. Duration 5453 ms by bot id=6588698079
2024-12-04 17:17:30,387 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:17:30,392 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:17:30,393 - sqlalchemy.engine.Engine - INFO - [generated in 0.00140s] ('70', 1, 0)
2024-12-04 17:17:30,400 - aiogram.event - INFO - Update id=746486695 is not handled. Duration 1344 ms by bot id=6588698079
2024-12-04 17:17:30,400 - aiogram.event - ERROR - Cause exception while process update id=746486695 by bot id=6588698079
ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard.5.0
  Input should be a valid dictionary or instance of InlineKeyboardButton [type=model_type, input_value=[InlineKeyboardButton(tex...ck_game=None, pay=None)], input_type=list]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 51, in choosing_key_handler
    "Выберите действие для ключа:", reply_markup=get_key_action_keyboard(key_info)
                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 201, in get_key_action_keyboard
    return InlineKeyboardMarkup(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\pydantic\main.py", line 212, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard.5.0
  Input should be a valid dictionary or instance of InlineKeyboardButton [type=model_type, input_value=[InlineKeyboardButton(tex...ck_game=None, pay=None)], input_type=list]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
2024-12-04 17:17:49,311 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 17:17:49,312 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 17:18:00,511 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 17:18:55,169 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:18:55,437 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:18:55,445 - root - INFO - Бот остановлен вручную.
2024-12-04 17:19:35,591 - root - INFO - Инициализация бота...
2024-12-04 17:19:35,923 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:19:35,923 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:19:35,923 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:19:35,924 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:19:35,924 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:19:35,924 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:19:35,944 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:19:35,945 - root - INFO - Инициализация диспетчера...
2024-12-04 17:19:35,945 - root - INFO - Регистрация обработчиков...
2024-12-04 17:19:35,946 - root - INFO - Запуск polling...
2024-12-04 17:19:35,946 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:19:35,952 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:19:35,953 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:19:35,953 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
2024-12-04 17:19:35,956 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:19:35,956 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ('528155210',)
2024-12-04 17:19:35,957 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:19:35,957 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:19:35,958 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:19:35,958 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('528155210',)
2024-12-04 17:19:36,291 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:19:36,292 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('71',)
2024-12-04 17:19:36,321 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:19:39,682 - aiogram.event - INFO - Update id=746486696 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 17:19:41,545 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:19:41,547 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:19:41,547 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('528155210', 1, 0)
2024-12-04 17:19:41,548 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:19:41,548 - sqlalchemy.engine.Engine - INFO - [cached since 5.592s ago] ('528155210',)
2024-12-04 17:19:47,092 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:19:47,154 - aiogram.event - INFO - Update id=746486697 is handled. Duration 5609 ms by bot id=6588698079
2024-12-04 17:19:51,249 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:19:51,250 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:19:51,250 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('68', 1, 0)
2024-12-04 17:19:51,252 - aiogram.event - INFO - Update id=746486698 is not handled. Duration 1030 ms by bot id=6588698079
2024-12-04 17:19:51,252 - aiogram.event - ERROR - Cause exception while process update id=746486698 by bot id=6588698079
ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard.5.0
  Input should be a valid dictionary or instance of InlineKeyboardButton [type=model_type, input_value=[InlineKeyboardButton(tex...ck_game=None, pay=None)], input_type=list]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 51, in choosing_key_handler
    "Выберите действие для ключа:", reply_markup=get_key_action_keyboard(key_info)
                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\keyboards\keyboards.py", line 201, in get_key_action_keyboard
    return InlineKeyboardMarkup(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\pydantic\main.py", line 212, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for InlineKeyboardMarkup
inline_keyboard.5.0
  Input should be a valid dictionary or instance of InlineKeyboardButton [type=model_type, input_value=[InlineKeyboardButton(tex...ck_game=None, pay=None)], input_type=list]
    For further information visit https://errors.pydantic.dev/2.9/v/model_type
2024-12-04 17:25:12,879 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 17:25:12,879 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 17:25:25,193 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 17:29:32,098 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:29:32,354 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:29:32,356 - root - INFO - Бот остановлен вручную.
2024-12-04 17:32:10,881 - root - INFO - Инициализация бота...
2024-12-04 17:32:11,299 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:32:11,299 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:32:11,299 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:32:11,300 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:32:11,300 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:32:11,301 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:32:11,328 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:32:11,328 - root - INFO - Инициализация диспетчера...
2024-12-04 17:32:11,329 - root - INFO - Регистрация обработчиков...
2024-12-04 17:32:11,330 - root - INFO - Запуск polling...
2024-12-04 17:32:11,331 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:32:11,337 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:32:11,339 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:32:11,339 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ()
2024-12-04 17:32:11,343 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:32:11,343 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('528155210',)
2024-12-04 17:32:11,344 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:32:11,345 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:32:11,345 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:32:11,346 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('528155210',)
2024-12-04 17:32:11,636 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:32:11,636 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ('71',)
2024-12-04 17:32:11,775 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:32:12,034 - aiogram.event - INFO - Update id=746486699 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 17:32:13,183 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:32:13,185 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:32:13,185 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ('528155210', 1, 0)
2024-12-04 17:32:13,186 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:32:13,186 - sqlalchemy.engine.Engine - INFO - [cached since 1.843s ago] ('528155210',)
2024-12-04 17:32:18,532 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:32:18,614 - aiogram.event - INFO - Update id=746486700 is handled. Duration 5437 ms by bot id=6588698079
2024-12-04 17:32:20,633 - aiogram.event - INFO - Update id=746486701 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 17:32:21,579 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:32:21,579 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:32:21,579 - sqlalchemy.engine.Engine - INFO - [cached since 8.395s ago] ('528155210', 1, 0)
2024-12-04 17:32:21,580 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:32:21,580 - sqlalchemy.engine.Engine - INFO - [cached since 10.24s ago] ('528155210',)
2024-12-04 17:32:26,701 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:32:26,845 - aiogram.event - INFO - Update id=746486702 is handled. Duration 5265 ms by bot id=6588698079
2024-12-04 17:32:29,440 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:32:29,442 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:32:29,442 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ('70', 1, 0)
2024-12-04 17:32:29,563 - aiogram.event - INFO - Update id=746486703 is handled. Duration 1656 ms by bot id=6588698079
2024-12-04 17:32:34,303 - aiogram.event - INFO - Update id=746486704 is handled. Duration 217 ms by bot id=6588698079
2024-12-04 17:32:57,737 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:32:57,737 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:32:57,738 - sqlalchemy.engine.Engine - INFO - [cached since 44.55s ago] ('528155210', 1, 0)
2024-12-04 17:32:57,738 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:32:57,738 - sqlalchemy.engine.Engine - INFO - [cached since 46.4s ago] ('528155210',)
2024-12-04 17:33:03,170 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:33:03,254 - aiogram.event - INFO - Update id=746486705 is handled. Duration 5515 ms by bot id=6588698079
2024-12-04 17:33:05,775 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:33:05,776 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:33:05,776 - sqlalchemy.engine.Engine - INFO - [cached since 36.33s ago] ('70', 1, 0)
2024-12-04 17:33:05,938 - aiogram.event - INFO - Update id=746486706 is handled. Duration 1375 ms by bot id=6588698079
2024-12-04 17:33:13,513 - aiogram.event - INFO - Update id=746486707 is handled. Duration 109 ms by bot id=6588698079
2024-12-04 17:33:17,711 - aiogram.event - INFO - Update id=746486708 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 17:33:20,139 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:33:20,139 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:33:20,139 - sqlalchemy.engine.Engine - INFO - [cached since 50.7s ago] ('70', 1, 0)
2024-12-04 17:33:20,140 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:33:20,141 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:33:20,141 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:33:20,141 - sqlalchemy.engine.Engine - INFO - [cached since 68.51s ago] ('70',)
2024-12-04 17:33:20,497 - aiogram.event - INFO - Update id=746486709 is not handled. Duration 358 ms by bot id=6588698079
2024-12-04 17:33:20,497 - aiogram.event - ERROR - Cause exception while process update id=746486709 by bot id=6588698079
AttributeError: 'FSMContext' object has no attribute 'finish'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\key_params_router.py", line 224, in confirm_rename_handler
    await state.finish()
          ^^^^^^^^^^^^
AttributeError: 'FSMContext' object has no attribute 'finish'
2024-12-04 17:33:24,212 - aiogram.event - INFO - Update id=746486710 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 17:33:40,321 - aiogram.event - INFO - Update id=746486711 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 17:33:43,687 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:33:43,953 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:33:43,955 - root - INFO - Бот остановлен вручную.
2024-12-04 17:35:12,797 - root - INFO - Инициализация бота...
2024-12-04 17:35:13,331 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:35:13,331 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:35:13,332 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:35:13,333 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:35:13,333 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:35:13,334 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:35:13,372 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:35:13,372 - root - INFO - Инициализация диспетчера...
2024-12-04 17:35:13,373 - root - INFO - Регистрация обработчиков...
2024-12-04 17:35:13,375 - root - INFO - Запуск polling...
2024-12-04 17:35:13,375 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:35:13,383 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:35:13,386 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:35:13,387 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] ()
2024-12-04 17:35:13,393 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:35:13,394 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ('528155210',)
2024-12-04 17:35:13,395 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:35:13,396 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:35:13,397 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:35:13,397 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ('528155210',)
2024-12-04 17:35:13,722 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:35:13,723 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] ('71',)
2024-12-04 17:35:13,753 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:35:16,217 - aiogram.event - INFO - Update id=746486712 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 17:35:17,698 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:35:17,699 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:35:17,700 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('528155210', 1, 0)
2024-12-04 17:35:17,702 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:35:17,702 - sqlalchemy.engine.Engine - INFO - [cached since 4.309s ago] ('528155210',)
2024-12-04 17:35:23,803 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:35:24,003 - aiogram.event - INFO - Update id=746486713 is handled. Duration 6311 ms by bot id=6588698079
2024-12-04 17:35:31,249 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:35:31,250 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:35:31,251 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('71', 1, 0)
2024-12-04 17:35:31,392 - aiogram.event - INFO - Update id=746486714 is handled. Duration 1641 ms by bot id=6588698079
2024-12-04 17:35:34,804 - aiogram.event - INFO - Update id=746486715 is handled. Duration 92 ms by bot id=6588698079
2024-12-04 17:35:39,873 - aiogram.event - INFO - Update id=746486716 is handled. Duration 170 ms by bot id=6588698079
2024-12-04 17:35:42,508 - aiogram.event - INFO - Update id=746486717 is handled. Duration 125 ms by bot id=6588698079
2024-12-04 17:35:44,498 - aiogram.event - INFO - Update id=746486718 is handled. Duration 186 ms by bot id=6588698079
2024-12-04 17:35:45,824 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:35:45,826 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:35:45,826 - sqlalchemy.engine.Engine - INFO - [cached since 28.13s ago] ('528155210', 1, 0)
2024-12-04 17:35:45,827 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:35:45,827 - sqlalchemy.engine.Engine - INFO - [cached since 32.43s ago] ('528155210',)
2024-12-04 17:35:51,971 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:35:52,158 - aiogram.event - INFO - Update id=746486719 is handled. Duration 6327 ms by bot id=6588698079
2024-12-04 17:35:58,740 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:35:58,741 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:35:58,741 - sqlalchemy.engine.Engine - INFO - [cached since 27.49s ago] ('71', 1, 0)
2024-12-04 17:35:58,877 - aiogram.event - INFO - Update id=746486720 is handled. Duration 1327 ms by bot id=6588698079
2024-12-04 17:36:02,503 - aiogram.event - INFO - Update id=746486721 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 17:36:06,156 - aiogram.event - INFO - Update id=746486722 is handled. Duration 93 ms by bot id=6588698079
2024-12-04 17:36:07,839 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:36:07,839 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:36:07,840 - sqlalchemy.engine.Engine - INFO - [cached since 36.59s ago] ('71', 1, 0)
2024-12-04 17:36:07,840 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:36:07,841 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:36:07,841 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:36:07,841 - sqlalchemy.engine.Engine - INFO - [cached since 54.12s ago] ('71',)
2024-12-04 17:36:08,379 - aiogram.event - INFO - Update id=746486723 is handled. Duration 545 ms by bot id=6588698079
2024-12-04 17:36:09,692 - aiogram.event - INFO - Update id=746486724 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 17:36:11,020 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:36:11,020 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:36:11,021 - sqlalchemy.engine.Engine - INFO - [cached since 53.32s ago] ('528155210', 1, 0)
2024-12-04 17:36:11,021 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:36:11,022 - sqlalchemy.engine.Engine - INFO - [cached since 57.63s ago] ('528155210',)
2024-12-04 17:36:17,147 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:36:17,235 - aiogram.event - INFO - Update id=746486725 is handled. Duration 6218 ms by bot id=6588698079
2024-12-04 17:36:19,761 - aiogram.event - INFO - Update id=746486726 is handled. Duration 344 ms by bot id=6588698079
2024-12-04 17:36:21,282 - aiogram.event - INFO - Update id=746486727 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 17:36:22,824 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:36:22,824 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:36:22,824 - sqlalchemy.engine.Engine - INFO - [cached since 65.12s ago] ('528155210', 1, 0)
2024-12-04 17:36:22,917 - aiogram.event - INFO - Update id=746486728 is handled. Duration 108 ms by bot id=6588698079
2024-12-04 17:36:24,335 - aiogram.event - INFO - Update id=746486729 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 17:36:25,947 - aiogram.event - INFO - Update id=746486730 is handled. Duration 391 ms by bot id=6588698079
2024-12-04 17:36:27,045 - aiogram.event - INFO - Update id=746486731 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 17:36:56,286 - aiogram.event - INFO - Update id=746486732 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 17:37:05,038 - root - INFO - {
    "message_id": 977,
    "date": 1733323025,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 60000,
        "invoice_payload": "5c575b10-83dd-4ce0-82f1-7d40c06a1f97",
        "telegram_payment_charge_id": "6588698079_528155210_328638",
        "provider_payment_charge_id": "6588698079_528155210_328638",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-04 17:37:06,368 - root - INFO - Key created: OutlineKey(key_id='72', name='VPN Key59', password='zczFtxiBdGCMv7ESADPDDO', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTp6Y3pGdHhpQmRHQ012N0VTQURQRERP@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 17:37:06,368 - root - INFO - Key created: OutlineKey(key_id='72', name='VPN Key59', password='zczFtxiBdGCMv7ESADPDDO', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTp6Y3pGdHhpQmRHQ012N0VTQURQRERP@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 17:37:06,514 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:37:06,515 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:37:06,515 - sqlalchemy.engine.Engine - INFO - [cached since 108.8s ago] ('528155210', 1, 0)
2024-12-04 17:37:06,517 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 17:37:06,517 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('72', '528155210', '2025-06-02 17:37:06.516869', '2024-12-04 17:37:06.516869', 0)
2024-12-04 17:37:06,518 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:37:06,525 - aiogram.event - INFO - Update id=746486733 is handled. Duration 1484 ms by bot id=6588698079
2024-12-04 17:37:31,451 - aiogram.event - INFO - Update id=746486734 is handled. Duration 375 ms by bot id=6588698079
2024-12-04 17:37:32,715 - aiogram.event - INFO - Update id=746486735 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 17:37:33,828 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:37:33,829 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:37:33,829 - sqlalchemy.engine.Engine - INFO - [cached since 136.1s ago] ('528155210', 1, 0)
2024-12-04 17:37:33,830 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:37:33,830 - sqlalchemy.engine.Engine - INFO - [cached since 140.4s ago] ('528155210',)
2024-12-04 17:37:39,724 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:37:39,849 - aiogram.event - INFO - Update id=746486736 is handled. Duration 6015 ms by bot id=6588698079
2024-12-04 17:37:42,285 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 17:37:42,285 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 17:37:43,377 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:37:43,378 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:37:43,378 - sqlalchemy.engine.Engine - INFO - [cached since 132.1s ago] ('72', 1, 0)
2024-12-04 17:37:43,542 - aiogram.event - INFO - Update id=746486737 is handled. Duration 1265 ms by bot id=6588698079
2024-12-04 17:37:45,076 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 17:37:45,082 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:37:45,082 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:37:45,083 - sqlalchemy.engine.Engine - INFO - [cached since 133.8s ago] ('72', 1, 0)
2024-12-04 17:37:46,924 - aiogram.event - INFO - Update id=746486738 is handled. Duration 1842 ms by bot id=6588698079
2024-12-04 17:37:48,380 - aiogram.event - INFO - Update id=746486739 is handled. Duration 233 ms by bot id=6588698079
2024-12-04 17:37:54,379 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:37:54,628 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:37:54,630 - root - INFO - Бот остановлен вручную.
2024-12-04 17:38:02,213 - root - INFO - Инициализация бота...
2024-12-04 17:38:02,772 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:38:02,773 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:38:02,773 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:38:02,775 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:38:02,775 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:38:02,775 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:38:02,813 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:38:02,813 - root - INFO - Инициализация диспетчера...
2024-12-04 17:38:02,814 - root - INFO - Регистрация обработчиков...
2024-12-04 17:38:02,816 - root - INFO - Запуск polling...
2024-12-04 17:38:02,816 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:38:02,826 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:38:02,829 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:38:02,829 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ()
2024-12-04 17:38:02,834 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:38:02,834 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ('528155210',)
2024-12-04 17:38:02,835 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:38:02,836 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:38:02,838 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:38:02,838 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ('528155210',)
2024-12-04 17:38:03,140 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:38:03,194 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:38:03,195 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ('71',)
2024-12-04 17:38:03,196 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:38:03,196 - sqlalchemy.engine.Engine - INFO - [cached since 0.002316s ago] ('72',)
2024-12-04 17:38:28,417 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:38:28,671 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:38:28,676 - root - INFO - Бот остановлен вручную.
2024-12-04 17:38:32,563 - root - INFO - Инициализация бота...
2024-12-04 17:38:32,941 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:38:32,942 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:38:32,942 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:38:32,943 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:38:32,943 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:38:32,943 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:38:32,966 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:38:32,966 - root - INFO - Инициализация диспетчера...
2024-12-04 17:38:32,967 - root - INFO - Регистрация обработчиков...
2024-12-04 17:38:32,968 - root - INFO - Запуск polling...
2024-12-04 17:38:32,969 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:38:32,975 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:38:32,977 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:38:32,977 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ()
2024-12-04 17:38:32,981 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:38:32,981 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] ('528155210',)
2024-12-04 17:38:32,981 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:38:32,982 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:38:32,983 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:38:32,983 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('528155210',)
2024-12-04 17:38:33,214 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:38:36,504 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:38:36,504 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ('71',)
2024-12-04 17:38:36,505 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:38:36,505 - sqlalchemy.engine.Engine - INFO - [cached since 0.001251s ago] ('72',)
2024-12-04 17:40:47,647 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:40:47,910 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:40:47,913 - root - INFO - Бот остановлен вручную.
2024-12-04 17:40:55,735 - root - INFO - Инициализация бота...
2024-12-04 17:40:56,235 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:40:56,235 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:40:56,236 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:40:56,237 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:40:56,237 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:40:56,238 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:40:56,266 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:40:56,267 - root - INFO - Инициализация диспетчера...
2024-12-04 17:40:56,268 - root - INFO - Регистрация обработчиков...
2024-12-04 17:40:56,269 - root - INFO - Запуск polling...
2024-12-04 17:40:56,269 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:40:56,277 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:40:56,280 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:40:56,280 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ()
2024-12-04 17:40:56,284 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:40:56,285 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ('528155210',)
2024-12-04 17:40:56,286 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:40:56,287 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:40:56,287 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:40:56,288 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('528155210',)
2024-12-04 17:40:56,628 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:40:56,658 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:40:56,658 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] ('71',)
2024-12-04 17:40:56,659 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:40:56,660 - sqlalchemy.engine.Engine - INFO - [cached since 0.001907s ago] ('72',)
2024-12-04 17:41:04,910 - aiogram.event - INFO - Update id=746486740 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 17:41:06,347 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:41:06,348 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:41:06,348 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('528155210', 1, 0)
2024-12-04 17:41:06,349 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:41:06,349 - sqlalchemy.engine.Engine - INFO - [cached since 10.06s ago] ('528155210',)
2024-12-04 17:41:13,186 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:41:13,273 - aiogram.event - INFO - Update id=746486741 is handled. Duration 6922 ms by bot id=6588698079
2024-12-04 17:41:47,918 - aiogram.event - INFO - Update id=746486742 is handled. Duration 437 ms by bot id=6588698079
2024-12-04 17:41:49,566 - aiogram.event - INFO - Update id=746486743 is handled. Duration 438 ms by bot id=6588698079
2024-12-04 17:41:51,019 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:41:51,019 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:41:51,019 - sqlalchemy.engine.Engine - INFO - [cached since 44.67s ago] ('528155210', 1, 0)
2024-12-04 17:41:51,199 - aiogram.event - INFO - Update id=746486744 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 17:41:52,457 - aiogram.event - INFO - Update id=746486745 is handled. Duration 204 ms by bot id=6588698079
2024-12-04 17:41:57,577 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:41:57,849 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:41:57,851 - root - INFO - Бот остановлен вручную.
2024-12-04 17:42:03,066 - root - INFO - Инициализация бота...
2024-12-04 17:42:03,520 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:42:03,520 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:42:03,520 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:42:03,521 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:42:03,522 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:42:03,522 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:42:03,547 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:42:03,547 - root - INFO - Инициализация диспетчера...
2024-12-04 17:42:03,548 - root - INFO - Регистрация обработчиков...
2024-12-04 17:42:03,550 - root - INFO - Запуск polling...
2024-12-04 17:42:03,550 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:42:03,557 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:42:03,559 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:42:03,559 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ()
2024-12-04 17:42:03,563 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:42:03,563 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] ('528155210',)
2024-12-04 17:42:03,564 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:42:03,565 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:42:03,566 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:42:03,566 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('528155210',)
2024-12-04 17:42:03,878 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:42:03,878 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ('71',)
2024-12-04 17:42:03,879 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
2024-12-04 17:42:03,879 - sqlalchemy.engine.Engine - INFO - [cached since 0.001625s ago] ('72',)
2024-12-04 17:42:03,884 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:42:26,168 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:42:26,420 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:42:26,421 - root - INFO - Бот остановлен вручную.
2024-12-04 17:42:36,622 - root - INFO - Инициализация бота...
2024-12-04 17:42:36,929 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:42:36,929 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:42:36,929 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:42:36,930 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 17:42:36,930 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:42:36,930 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:42:36,931 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:42:36,931 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 17:42:36,931 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:42:36,931 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 17:42:36,932 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] ()
2024-12-04 17:42:36,941 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 17:42:36,941 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] ()
2024-12-04 17:42:36,947 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:42:36,964 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:42:36,964 - root - INFO - Инициализация диспетчера...
2024-12-04 17:42:36,965 - root - INFO - Регистрация обработчиков...
2024-12-04 17:42:36,966 - root - INFO - Запуск polling...
2024-12-04 17:42:36,966 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:42:36,971 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:42:36,973 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:42:36,973 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
2024-12-04 17:42:37,200 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:43:37,703 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 17:43:37,703 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 17:43:47,887 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 17:43:48,140 - aiogram.event - INFO - Update id=746486746 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 17:43:50,168 - aiogram.event - INFO - Update id=746486747 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 17:43:51,234 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:43:51,236 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:43:51,236 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('528155210', 1, 0)
2024-12-04 17:43:51,239 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 17:43:51,240 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ('528155210', 'active', 0)
2024-12-04 17:43:51,243 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:43:51,250 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:43:51,251 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:43:51,252 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ('528155210',)
2024-12-04 17:43:51,254 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 17:43:51,254 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] (1, '528155210')
2024-12-04 17:43:51,255 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:43:53,221 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:43:53,223 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 17:43:53,224 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('73', '528155210', '2024-12-06 17:43:53.220162', '2024-12-04 17:43:53.220162', 0)
2024-12-04 17:43:53,225 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:43:53,231 - root - INFO - Key created: OutlineKey(key_id='73', name='VPN Key60', password='5S3oKSSGKbICO300DRDtFT', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTo1UzNvS1NTR0tiSUNPMzAwRFJEdEZU@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 6588698079
2024-12-04 17:43:53,504 - aiogram.event - INFO - Update id=746486748 is handled. Duration 2265 ms by bot id=6588698079
2024-12-04 17:43:56,211 - aiogram.event - INFO - Update id=746486749 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 17:43:56,211 - aiogram.event - ERROR - Cause exception while process update id=746486749 by bot id=6588698079
KeyError: 'Installation'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 48, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Installation'
2024-12-04 17:43:59,913 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:44:00,179 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:44:00,181 - root - INFO - Бот остановлен вручную.
2024-12-04 17:49:30,678 - root - INFO - Инициализация бота...
2024-12-04 17:49:31,285 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:49:31,286 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:49:31,286 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:49:31,293 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:49:31,294 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:49:31,296 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:49:31,374 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:49:31,374 - root - INFO - Инициализация диспетчера...
2024-12-04 17:49:31,376 - root - INFO - Регистрация обработчиков...
2024-12-04 17:49:31,378 - root - INFO - Запуск polling...
2024-12-04 17:49:31,379 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:49:31,389 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:49:31,392 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:49:31,393 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] ()
2024-12-04 17:49:31,399 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:49:31,399 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('528155210',)
2024-12-04 17:49:31,401 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:49:31,402 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:49:31,403 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 17:49:31,403 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ('528155210',)
2024-12-04 17:49:31,843 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:49:36,918 - aiogram.event - INFO - Update id=746486750 is handled. Duration 217 ms by bot id=6588698079
2024-12-04 17:49:38,892 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:49:38,893 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:49:38,894 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ('528155210', 1, 0)
2024-12-04 17:49:38,895 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 17:49:38,895 - sqlalchemy.engine.Engine - INFO - [cached since 7.496s ago] ('528155210',)
2024-12-04 17:49:40,170 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:49:40,281 - aiogram.event - INFO - Update id=746486751 is handled. Duration 1390 ms by bot id=6588698079
2024-12-04 17:49:44,138 - aiogram.event - INFO - Update id=746486752 is handled. Duration 359 ms by bot id=6588698079
2024-12-04 17:49:53,481 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:49:53,742 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:49:53,743 - root - INFO - Бот остановлен вручную.
2024-12-04 17:50:16,275 - root - INFO - Инициализация бота...
2024-12-04 17:50:16,672 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:50:16,672 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:50:16,672 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:50:16,673 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 17:50:16,673 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:50:16,674 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:50:16,674 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:50:16,674 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 17:50:16,674 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:50:16,675 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 17:50:16,675 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] ()
2024-12-04 17:50:16,688 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 17:50:16,688 - sqlalchemy.engine.Engine - INFO - [no key 0.00032s] ()
2024-12-04 17:50:16,695 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:50:16,723 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:50:16,723 - root - INFO - Инициализация диспетчера...
2024-12-04 17:50:16,724 - root - INFO - Регистрация обработчиков...
2024-12-04 17:50:16,725 - root - INFO - Запуск polling...
2024-12-04 17:50:16,725 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:50:16,732 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:50:16,734 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:50:16,734 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ()
2024-12-04 17:50:17,007 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:50:17,490 - aiogram.event - INFO - Update id=746486753 is handled. Duration 359 ms by bot id=6588698079
2024-12-04 17:50:19,860 - aiogram.event - INFO - Update id=746486754 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 17:50:21,534 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:50:21,536 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:50:21,536 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('528155210', 1, 0)
2024-12-04 17:50:21,617 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:50:21,686 - aiogram.event - INFO - Update id=746486755 is handled. Duration 156 ms by bot id=6588698079
2024-12-04 17:50:23,096 - aiogram.event - INFO - Update id=746486756 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 17:50:28,973 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:50:29,234 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:50:29,235 - root - INFO - Бот остановлен вручную.
2024-12-04 17:52:46,033 - root - INFO - Инициализация бота...
2024-12-04 17:52:46,374 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:52:46,374 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 17:52:46,374 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:52:46,375 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 17:52:46,375 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 17:52:46,375 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 17:52:46,401 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 17:52:46,401 - root - INFO - Инициализация диспетчера...
2024-12-04 17:52:46,402 - root - INFO - Регистрация обработчиков...
2024-12-04 17:52:46,404 - root - INFO - Запуск polling...
2024-12-04 17:52:46,404 - aiogram.dispatcher - INFO - Start polling
2024-12-04 17:52:46,408 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:52:46,410 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 17:52:46,410 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
2024-12-04 17:52:46,660 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:52:51,942 - aiogram.event - INFO - Update id=746486757 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 17:52:53,241 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 17:52:53,243 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 17:52:53,244 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ('528155210', 1, 0)
2024-12-04 17:52:53,383 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 17:52:53,477 - aiogram.event - INFO - Update id=746486758 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 17:52:54,366 - aiogram.event - INFO - Update id=746486759 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 17:53:44,789 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 17:53:44,789 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 17:53:46,856 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 17:53:47,111 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 17:53:47,112 - root - INFO - Бот остановлен вручную.
2024-12-04 18:02:46,953 - root - INFO - Инициализация бота...
2024-12-04 18:05:03,047 - root - INFO - Инициализация бота...
2024-12-04 18:05:03,425 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:05:03,425 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:05:03,426 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:05:03,426 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:05:03,427 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:05:03,427 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:05:03,453 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:05:03,453 - root - INFO - Инициализация диспетчера...
2024-12-04 18:05:03,454 - root - INFO - Регистрация обработчиков...
2024-12-04 18:05:03,455 - root - INFO - Запуск polling...
2024-12-04 18:05:03,455 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:05:03,461 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:05:03,463 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:05:03,464 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ()
2024-12-04 18:05:03,752 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:05:04,111 - aiogram.event - INFO - Update id=746486760 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 18:05:09,530 - aiogram.event - INFO - Update id=746486761 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 18:05:12,102 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:05:12,104 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:05:12,104 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('528155210', 1, 0)
2024-12-04 18:05:12,209 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:05:12,281 - aiogram.event - INFO - Update id=746486762 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 18:05:15,687 - aiogram.event - INFO - Update id=746486763 is handled. Duration 313 ms by bot id=6588698079
2024-12-04 18:05:16,811 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:05:16,812 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:05:16,812 - sqlalchemy.engine.Engine - INFO - [cached since 4.709s ago] ('528155210', 1, 0)
2024-12-04 18:05:16,980 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:05:17,131 - aiogram.event - INFO - Update id=746486764 is handled. Duration 311 ms by bot id=6588698079
2024-12-04 18:05:19,000 - aiogram.event - INFO - Update id=746486765 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 18:05:28,312 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:05:48,504 - root - INFO - Инициализация бота...
2024-12-04 18:05:48,958 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:05:48,958 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:05:48,959 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:05:48,960 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:05:48,960 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:05:48,961 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:05:48,992 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:05:48,992 - root - INFO - Инициализация диспетчера...
2024-12-04 18:05:48,993 - root - INFO - Регистрация обработчиков...
2024-12-04 18:05:48,995 - root - INFO - Запуск polling...
2024-12-04 18:05:48,995 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:05:49,004 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:05:49,006 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:05:49,006 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ()
2024-12-04 18:05:49,355 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:05:59,828 - aiogram.event - INFO - Update id=746486766 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 18:06:01,393 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:06:01,395 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:06:01,395 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('528155210', 1, 0)
2024-12-04 18:06:01,516 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:06:01,621 - aiogram.event - INFO - Update id=746486767 is handled. Duration 233 ms by bot id=6588698079
2024-12-04 18:06:02,943 - aiogram.event - INFO - Update id=746486768 is handled. Duration 375 ms by bot id=6588698079
2024-12-04 18:06:03,851 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:06:03,852 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:06:03,852 - sqlalchemy.engine.Engine - INFO - [cached since 2.457s ago] ('528155210', 1, 0)
2024-12-04 18:06:04,018 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:06:04,181 - aiogram.event - INFO - Update id=746486769 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 18:06:05,209 - aiogram.event - INFO - Update id=746486770 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 18:06:08,009 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:06:08,258 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:06:08,260 - root - INFO - Бот остановлен вручную.
2024-12-04 18:08:25,844 - root - INFO - Инициализация бота...
2024-12-04 18:08:26,324 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:08:26,324 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:08:26,325 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:08:26,326 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:08:26,326 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:08:26,327 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:08:26,363 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:08:26,363 - root - INFO - Инициализация диспетчера...
2024-12-04 18:08:26,364 - root - INFO - Регистрация обработчиков...
2024-12-04 18:08:26,366 - root - INFO - Запуск polling...
2024-12-04 18:08:26,366 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:08:26,373 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:08:26,375 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:08:26,376 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ()
2024-12-04 18:08:26,661 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:08:27,038 - aiogram.event - INFO - Update id=746486771 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 18:08:28,426 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:08:28,427 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:08:28,428 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ('528155210', 1, 0)
2024-12-04 18:08:28,567 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:08:28,646 - aiogram.event - INFO - Update id=746486772 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 18:08:31,019 - aiogram.event - INFO - Update id=746486773 is handled. Duration 281 ms by bot id=6588698079
2024-12-04 18:08:33,365 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:08:33,365 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:08:33,365 - sqlalchemy.engine.Engine - INFO - [cached since 4.938s ago] ('528155210', 1, 0)
2024-12-04 18:08:33,591 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:08:33,662 - aiogram.event - INFO - Update id=746486774 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 18:08:34,412 - aiogram.event - INFO - Update id=746486775 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 18:08:38,087 - aiogram.event - INFO - Update id=746486776 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 18:08:38,843 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:08:38,843 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:08:38,843 - sqlalchemy.engine.Engine - INFO - [cached since 10.42s ago] ('528155210', 1, 0)
2024-12-04 18:08:38,979 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:08:39,180 - aiogram.event - INFO - Update id=746486777 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 18:08:39,876 - aiogram.event - INFO - Update id=746486778 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 18:08:41,870 - aiogram.event - INFO - Update id=746486779 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 18:08:42,754 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:11:53,747 - root - INFO - Инициализация бота...
2024-12-04 18:11:54,140 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:11:54,141 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:11:54,141 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:11:54,142 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:11:54,142 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:11:54,143 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:11:54,170 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:11:54,170 - root - INFO - Инициализация диспетчера...
2024-12-04 18:11:54,171 - root - INFO - Регистрация обработчиков...
2024-12-04 18:11:54,172 - root - INFO - Запуск polling...
2024-12-04 18:11:54,173 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:11:54,178 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:11:54,180 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:11:54,181 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ()
2024-12-04 18:11:54,461 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:11:58,213 - aiogram.event - INFO - Update id=746486780 is handled. Duration 282 ms by bot id=6588698079
2024-12-04 18:11:59,235 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:11:59,236 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:11:59,237 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('528155210', 1, 0)
2024-12-04 18:11:59,381 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:11:59,485 - aiogram.event - INFO - Update id=746486781 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 18:12:00,706 - aiogram.event - INFO - Update id=746486782 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 18:12:02,826 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:14:00,840 - root - INFO - Инициализация бота...
2024-12-04 18:14:01,564 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:14:01,564 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:14:01,564 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:14:01,565 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:14:01,565 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:14:01,566 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:15:17,380 - root - INFO - Инициализация бота...
2024-12-04 18:15:17,808 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:15:17,808 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:15:17,808 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:15:17,809 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:15:17,809 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:15:17,810 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:15:17,841 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:15:17,841 - root - INFO - Инициализация диспетчера...
2024-12-04 18:15:17,842 - root - INFO - Регистрация обработчиков...
2024-12-04 18:15:17,843 - root - INFO - Запуск polling...
2024-12-04 18:15:17,844 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:15:17,850 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:15:17,852 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:15:17,852 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ()
2024-12-04 18:15:18,161 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:15:22,064 - aiogram.event - INFO - Update id=746486783 is handled. Duration 1297 ms by bot id=6588698079
2024-12-04 18:15:23,982 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:15:23,984 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:15:23,984 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('528155210', 1, 0)
2024-12-04 18:15:24,071 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:15:24,135 - aiogram.event - INFO - Update id=746486784 is handled. Duration 140 ms by bot id=6588698079
2024-12-04 18:15:25,217 - aiogram.event - INFO - Update id=746486785 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 18:15:35,730 - aiogram.event - INFO - Update id=746486786 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 18:15:37,168 - aiogram.event - INFO - Update id=746486787 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 18:15:40,212 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:15:40,494 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:15:40,500 - root - INFO - Бот остановлен вручную.
2024-12-04 18:15:51,958 - root - INFO - Инициализация бота...
2024-12-04 18:15:52,744 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:15:52,745 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:15:52,745 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:15:52,749 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:15:52,750 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:15:52,751 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:15:52,923 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:15:52,924 - root - INFO - Инициализация диспетчера...
2024-12-04 18:15:52,928 - root - INFO - Регистрация обработчиков...
2024-12-04 18:15:52,932 - root - INFO - Запуск polling...
2024-12-04 18:15:52,934 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:15:52,968 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:15:52,975 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:15:52,975 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] ()
2024-12-04 18:15:53,268 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:15:55,957 - aiogram.event - INFO - Update id=746486788 is handled. Duration 1329 ms by bot id=6588698079
2024-12-04 18:15:58,744 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:15:58,750 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:15:58,750 - sqlalchemy.engine.Engine - INFO - [generated in 0.00102s] ('528155210', 1, 0)
2024-12-04 18:15:58,913 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:15:59,060 - aiogram.event - INFO - Update id=746486789 is handled. Duration 328 ms by bot id=6588698079
2024-12-04 18:16:00,593 - aiogram.event - INFO - Update id=746486790 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 18:16:07,265 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:16:07,532 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:16:07,535 - root - INFO - Бот остановлен вручную.
2024-12-04 18:18:13,502 - root - INFO - Инициализация бота...
2024-12-04 18:18:14,309 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:18:14,310 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:18:14,310 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:18:14,312 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:18:14,312 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:18:14,314 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:18:14,372 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:18:14,372 - root - INFO - Инициализация диспетчера...
2024-12-04 18:18:14,374 - root - INFO - Регистрация обработчиков...
2024-12-04 18:18:14,377 - root - INFO - Запуск polling...
2024-12-04 18:18:14,378 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:18:14,393 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:18:14,398 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:18:14,398 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ()
2024-12-04 18:18:14,701 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:18:17,530 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:18:17,804 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:18:17,815 - root - INFO - Бот остановлен вручную.
2024-12-04 18:18:28,015 - root - INFO - Инициализация бота...
2024-12-04 18:18:29,044 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:18:29,045 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:18:29,045 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:18:29,048 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:18:29,048 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:18:29,050 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:18:29,111 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:18:29,111 - root - INFO - Инициализация диспетчера...
2024-12-04 18:18:29,112 - root - INFO - Регистрация обработчиков...
2024-12-04 18:18:29,115 - root - INFO - Запуск polling...
2024-12-04 18:18:29,116 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:18:29,129 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:18:29,133 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:18:29,134 - sqlalchemy.engine.Engine - INFO - [generated in 0.00072s] ()
2024-12-04 18:18:29,704 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:18:34,352 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:18:34,613 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:18:34,618 - root - INFO - Бот остановлен вручную.
2024-12-04 18:18:45,658 - root - INFO - Инициализация бота...
2024-12-04 18:18:46,640 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:18:46,641 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:18:46,641 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:18:46,643 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:18:46,643 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:18:46,644 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:18:46,702 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:18:46,702 - root - INFO - Инициализация диспетчера...
2024-12-04 18:18:46,704 - root - INFO - Регистрация обработчиков...
2024-12-04 18:18:46,706 - root - INFO - Запуск polling...
2024-12-04 18:18:46,706 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:18:46,720 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:18:46,725 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:18:46,725 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ()
2024-12-04 18:18:47,001 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:18:47,830 - aiogram.event - INFO - Update id=746486791 is handled. Duration 640 ms by bot id=6588698079
2024-12-04 18:18:57,250 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2024-12-04 18:18:57,251 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 6588698079)
2024-12-04 18:19:00,921 - aiogram.dispatcher - INFO - Connection established (tryings = 1, bot id = 6588698079)
2024-12-04 18:19:00,931 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:19:00,940 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:19:00,941 - sqlalchemy.engine.Engine - INFO - [generated in 0.00177s] ('528155210', 1, 0)
2024-12-04 18:19:01,178 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:19:01,272 - aiogram.event - INFO - Update id=746486792 is handled. Duration 344 ms by bot id=6588698079
2024-12-04 18:19:02,619 - aiogram.event - INFO - Update id=746486793 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 18:19:06,829 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:19:07,087 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:19:07,092 - root - INFO - Бот остановлен вручную.
2024-12-04 18:19:54,017 - root - INFO - Инициализация бота...
2024-12-04 18:19:54,906 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:19:54,906 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:19:54,907 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:19:54,909 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:19:54,909 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:19:54,910 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:19:54,970 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:19:54,971 - root - INFO - Инициализация диспетчера...
2024-12-04 18:19:54,972 - root - INFO - Регистрация обработчиков...
2024-12-04 18:19:54,974 - root - INFO - Запуск polling...
2024-12-04 18:19:54,976 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:19:54,987 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:19:54,992 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:19:54,992 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ()
2024-12-04 18:19:58,520 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:19:59,019 - aiogram.event - INFO - Update id=746486794 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 18:20:07,066 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:20:07,070 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:20:07,071 - sqlalchemy.engine.Engine - INFO - [generated in 0.00120s] ('528155210', 1, 0)
2024-12-04 18:20:07,173 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:20:07,278 - aiogram.event - INFO - Update id=746486795 is handled. Duration 218 ms by bot id=6588698079
2024-12-04 18:20:09,165 - aiogram.event - INFO - Update id=746486796 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 18:20:10,795 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:20:10,797 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:20:10,798 - sqlalchemy.engine.Engine - INFO - [cached since 3.727s ago] ('528155210', 1, 0)
2024-12-04 18:20:10,927 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:20:11,099 - aiogram.event - INFO - Update id=746486797 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 18:20:12,214 - aiogram.event - INFO - Update id=746486798 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 18:20:14,785 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:20:15,047 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:20:15,053 - root - INFO - Бот остановлен вручную.
2024-12-04 18:22:52,650 - root - INFO - Инициализация бота...
2024-12-04 18:22:53,598 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:22:53,599 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:22:53,600 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:22:53,605 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:22:53,605 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:22:53,608 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:22:53,673 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:22:53,673 - root - INFO - Инициализация диспетчера...
2024-12-04 18:22:53,674 - root - INFO - Регистрация обработчиков...
2024-12-04 18:22:53,677 - root - INFO - Запуск polling...
2024-12-04 18:22:53,678 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:22:53,692 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:22:53,695 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:22:53,695 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ()
2024-12-04 18:22:54,023 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:22:54,559 - aiogram.event - INFO - Update id=746486799 is handled. Duration 406 ms by bot id=6588698079
2024-12-04 18:22:56,022 - aiogram.event - INFO - Update id=746486800 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 18:22:58,025 - aiogram.event - INFO - Update id=746486801 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 18:22:59,351 - aiogram.event - INFO - Update id=746486802 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 18:23:00,111 - aiogram.event - INFO - Update id=746486803 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 18:23:04,914 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:23:05,177 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:23:05,181 - root - INFO - Бот остановлен вручную.
2024-12-04 18:24:48,685 - root - INFO - Инициализация бота...
2024-12-04 18:24:49,774 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:24:49,775 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:24:49,777 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:24:49,780 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:24:49,781 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:24:49,782 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:24:49,889 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:24:49,890 - root - INFO - Инициализация диспетчера...
2024-12-04 18:24:49,893 - root - INFO - Регистрация обработчиков...
2024-12-04 18:24:49,897 - root - INFO - Запуск polling...
2024-12-04 18:24:49,899 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:24:49,920 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:24:49,927 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:24:49,928 - sqlalchemy.engine.Engine - INFO - [generated in 0.00131s] ()
2024-12-04 18:24:50,233 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:24:50,885 - aiogram.event - INFO - Update id=746486804 is handled. Duration 483 ms by bot id=6588698079
2024-12-04 18:24:56,850 - aiogram.event - INFO - Update id=746486805 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 18:24:57,874 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:24:57,879 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:24:57,880 - sqlalchemy.engine.Engine - INFO - [generated in 0.00127s] ('528155210', 1, 0)
2024-12-04 18:24:57,891 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 18:24:57,892 - sqlalchemy.engine.Engine - INFO - [generated in 0.00147s] ('528155210', 'active', 0)
2024-12-04 18:24:57,897 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:24:57,909 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:24:57,913 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:24:57,914 - sqlalchemy.engine.Engine - INFO - [generated in 0.00098s] ('528155210',)
2024-12-04 18:24:57,922 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 18:24:57,923 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] (1, '528155210')
2024-12-04 18:24:57,926 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:24:59,210 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:24:59,213 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 18:24:59,213 - sqlalchemy.engine.Engine - INFO - [generated in 0.00072s] ('74', '528155210', '2024-12-06 18:24:59.209971', '2024-12-04 18:24:59.209971', 0)
2024-12-04 18:24:59,218 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:24:59,226 - root - INFO - Key created: OutlineKey(key_id='74', name='VPN Key61', password='u7YG6unpsCdqh0WhGFtEBO', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTp1N1lHNnVucHNDZHFoMFdoR0Z0RUJP@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 6588698079
2024-12-04 18:24:59,375 - aiogram.event - INFO - Update id=746486806 is handled. Duration 1515 ms by bot id=6588698079
2024-12-04 18:25:01,535 - aiogram.event - INFO - Update id=746486807 is not handled. Duration 0 ms by bot id=6588698079
2024-12-04 18:25:01,535 - aiogram.event - ERROR - Cause exception while process update id=746486807 by bot id=6588698079
KeyError: 'To'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 47, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'To'
2024-12-04 18:25:05,745 - aiogram.event - INFO - Update id=746486808 is not handled. Duration 15 ms by bot id=6588698079
2024-12-04 18:25:05,746 - aiogram.event - ERROR - Cause exception while process update id=746486808 by bot id=6588698079
KeyError: 'Installation'
Traceback (most recent call last):
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\LISA\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Хороший человек\Documents\coding\LISA\src\bot\routers\buy_key_router.py", line 47, in handle_period_selection
    amount = prices_dict[selected_period.split()[0]]
             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'Installation'
2024-12-04 18:25:15,936 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:25:16,201 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:25:16,208 - root - INFO - Бот остановлен вручную.
2024-12-04 18:26:11,145 - root - INFO - Инициализация бота...
2024-12-04 18:26:12,150 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:26:12,151 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:26:12,152 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:26:12,155 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:26:12,155 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:26:12,157 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:26:12,206 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:26:12,207 - root - INFO - Инициализация диспетчера...
2024-12-04 18:26:12,208 - root - INFO - Регистрация обработчиков...
2024-12-04 18:26:12,209 - root - INFO - Запуск polling...
2024-12-04 18:26:12,209 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:26:12,220 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:26:12,222 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:26:12,222 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ()
2024-12-04 18:26:12,227 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:26:12,227 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ('528155210',)
2024-12-04 18:26:12,228 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:26:12,229 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:26:12,230 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:26:12,231 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] ('528155210',)
2024-12-04 18:26:12,686 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:26:13,010 - aiogram.event - INFO - Update id=746486809 is handled. Duration 155 ms by bot id=6588698079
2024-12-04 18:26:14,757 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:26:14,763 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:26:14,765 - sqlalchemy.engine.Engine - INFO - [generated in 0.00186s] ('528155210', 1, 0)
2024-12-04 18:26:14,770 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:26:14,771 - sqlalchemy.engine.Engine - INFO - [cached since 2.545s ago] ('528155210',)
2024-12-04 18:26:17,498 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:26:17,673 - aiogram.event - INFO - Update id=746486810 is handled. Duration 2922 ms by bot id=6588698079
2024-12-04 18:26:23,094 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:26:36,606 - root - INFO - Инициализация бота...
2024-12-04 18:26:37,965 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:26:37,965 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:26:37,966 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:26:37,969 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 18:26:37,969 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:26:37,971 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:26:37,971 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:26:37,973 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 18:26:37,974 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:26:37,978 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 18:26:37,979 - sqlalchemy.engine.Engine - INFO - [no key 0.00125s] ()
2024-12-04 18:26:37,998 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 18:26:37,999 - sqlalchemy.engine.Engine - INFO - [no key 0.00086s] ()
2024-12-04 18:26:38,012 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:26:38,114 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:26:38,115 - root - INFO - Инициализация диспетчера...
2024-12-04 18:26:38,117 - root - INFO - Регистрация обработчиков...
2024-12-04 18:26:38,123 - root - INFO - Запуск polling...
2024-12-04 18:26:38,124 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:26:38,150 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:26:38,159 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:26:38,160 - sqlalchemy.engine.Engine - INFO - [generated in 0.00122s] ()
2024-12-04 18:26:38,615 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:26:39,961 - aiogram.event - INFO - Update id=746486811 is handled. Duration 344 ms by bot id=6588698079
2024-12-04 18:26:41,028 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:26:41,034 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:26:41,035 - sqlalchemy.engine.Engine - INFO - [generated in 0.00117s] ('528155210', 1, 0)
2024-12-04 18:26:41,133 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:26:41,228 - aiogram.event - INFO - Update id=746486812 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 18:26:48,027 - aiogram.event - INFO - Update id=746486813 is handled. Duration 218 ms by bot id=6588698079
2024-12-04 18:26:51,761 - aiogram.event - INFO - Update id=746486814 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 18:26:57,801 - aiogram.event - INFO - Update id=746486815 is handled. Duration 233 ms by bot id=6588698079
2024-12-04 18:26:59,808 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:26:59,809 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:26:59,810 - sqlalchemy.engine.Engine - INFO - [cached since 18.78s ago] ('528155210', 1, 0)
2024-12-04 18:26:59,977 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:27:00,128 - aiogram.event - INFO - Update id=746486816 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 18:27:01,820 - aiogram.event - INFO - Update id=746486817 is handled. Duration 203 ms by bot id=6588698079
2024-12-04 18:27:08,231 - aiogram.event - INFO - Update id=746486818 is handled. Duration 250 ms by bot id=6588698079
2024-12-04 18:27:16,343 - aiogram.event - INFO - Update id=746486819 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 18:27:18,093 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:27:18,095 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:27:18,095 - sqlalchemy.engine.Engine - INFO - [cached since 37.06s ago] ('528155210', 1, 0)
2024-12-04 18:27:18,292 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:27:18,584 - aiogram.event - INFO - Update id=746486820 is handled. Duration 484 ms by bot id=6588698079
2024-12-04 18:27:20,293 - aiogram.event - INFO - Update id=746486821 is handled. Duration 437 ms by bot id=6588698079
2024-12-04 18:27:24,975 - aiogram.event - INFO - Update id=746486822 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 18:27:26,321 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:27:26,322 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:27:26,323 - sqlalchemy.engine.Engine - INFO - [cached since 45.29s ago] ('528155210', 1, 0)
2024-12-04 18:27:26,419 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:27:26,536 - aiogram.event - INFO - Update id=746486823 is handled. Duration 218 ms by bot id=6588698079
2024-12-04 18:27:28,987 - aiogram.event - INFO - Update id=746486824 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 18:27:34,753 - aiogram.event - INFO - Update id=746486825 is handled. Duration 186 ms by bot id=6588698079
2024-12-04 18:27:36,413 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:27:36,415 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:27:36,416 - sqlalchemy.engine.Engine - INFO - [cached since 55.38s ago] ('528155210', 1, 0)
2024-12-04 18:27:36,596 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:27:36,696 - aiogram.event - INFO - Update id=746486826 is handled. Duration 281 ms by bot id=6588698079
2024-12-04 18:27:38,262 - aiogram.event - INFO - Update id=746486827 is handled. Duration 266 ms by bot id=6588698079
2024-12-04 18:27:40,439 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:27:40,704 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:27:40,716 - root - INFO - Бот остановлен вручную.
2024-12-04 18:28:18,809 - root - INFO - Инициализация бота...
2024-12-04 18:28:19,839 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:28:19,840 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:28:19,841 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:28:19,845 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:28:19,846 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:28:19,849 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:28:19,965 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:28:19,966 - root - INFO - Инициализация диспетчера...
2024-12-04 18:28:19,969 - root - INFO - Регистрация обработчиков...
2024-12-04 18:28:19,973 - root - INFO - Запуск polling...
2024-12-04 18:28:19,974 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:28:19,999 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:28:20,006 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:28:20,007 - sqlalchemy.engine.Engine - INFO - [generated in 0.00141s] ()
2024-12-04 18:28:20,406 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:28:21,074 - aiogram.event - INFO - Update id=746486828 is handled. Duration 484 ms by bot id=6588698079
2024-12-04 18:28:23,729 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:28:23,733 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:28:23,733 - sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] ('528155210', 1, 0)
2024-12-04 18:28:23,839 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:28:23,949 - aiogram.event - INFO - Update id=746486829 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 18:28:25,809 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:28:25,810 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:28:25,810 - sqlalchemy.engine.Engine - INFO - [cached since 2.077s ago] ('528155210', 1, 0)
2024-12-04 18:28:25,817 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 18:28:25,817 - sqlalchemy.engine.Engine - INFO - [generated in 0.00120s] ('528155210', 'active', 0)
2024-12-04 18:28:25,822 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:28:25,833 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:28:25,837 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:28:25,837 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('528155210',)
2024-12-04 18:28:25,844 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 18:28:25,845 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] (1, '528155210')
2024-12-04 18:28:25,848 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:28:27,067 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:28:27,070 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 18:28:27,070 - sqlalchemy.engine.Engine - INFO - [generated in 0.00074s] ('75', '528155210', '2024-12-06 18:28:27.066460', '2024-12-04 18:28:27.066460', 0)
2024-12-04 18:28:27,076 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:28:27,083 - root - INFO - Key created: OutlineKey(key_id='75', name='VPN Key62', password='loGpkjB4qMeDNblZRkV0nr', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpsb0dwa2pCNHFNZUROYmxaUmtWMG5y@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 6588698079
2024-12-04 18:28:27,453 - aiogram.event - INFO - Update id=746486830 is handled. Duration 1657 ms by bot id=6588698079
2024-12-04 18:28:29,859 - aiogram.event - INFO - Update id=746486831 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 18:28:32,444 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:28:32,703 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:28:32,708 - root - INFO - Бот остановлен вручную.
2024-12-04 18:29:41,779 - root - INFO - Инициализация бота...
2024-12-04 18:29:42,765 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:29:42,769 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:29:42,770 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:29:42,773 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:29:42,774 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:29:42,776 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:29:42,897 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:29:42,898 - root - INFO - Инициализация диспетчера...
2024-12-04 18:29:42,901 - root - INFO - Регистрация обработчиков...
2024-12-04 18:29:42,906 - root - INFO - Запуск polling...
2024-12-04 18:29:42,906 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:29:42,932 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:29:42,941 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:29:42,942 - sqlalchemy.engine.Engine - INFO - [generated in 0.00107s] ()
2024-12-04 18:29:42,957 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:29:42,958 - sqlalchemy.engine.Engine - INFO - [generated in 0.00115s] ('528155210',)
2024-12-04 18:29:42,961 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:29:42,963 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:29:42,966 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:29:42,968 - sqlalchemy.engine.Engine - INFO - [generated in 0.00193s] ('528155210',)
2024-12-04 18:29:43,558 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:29:44,035 - aiogram.event - INFO - Update id=746486832 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 18:29:46,416 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:29:46,422 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:29:46,423 - sqlalchemy.engine.Engine - INFO - [generated in 0.00129s] ('528155210', 1, 0)
2024-12-04 18:29:46,428 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:29:46,428 - sqlalchemy.engine.Engine - INFO - [cached since 3.472s ago] ('528155210',)
2024-12-04 18:29:47,807 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:29:47,943 - aiogram.event - INFO - Update id=746486833 is handled. Duration 1531 ms by bot id=6588698079
2024-12-04 18:29:51,127 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:29:51,388 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:29:51,396 - root - INFO - Бот остановлен вручную.
2024-12-04 18:30:06,413 - root - INFO - Инициализация бота...
2024-12-04 18:30:07,150 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:30:07,151 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:30:07,151 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:30:07,153 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 18:30:07,153 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:30:07,154 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:30:07,154 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:30:07,155 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 18:30:07,156 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:30:07,157 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 18:30:07,157 - sqlalchemy.engine.Engine - INFO - [no key 0.00038s] ()
2024-12-04 18:30:07,169 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 18:30:07,170 - sqlalchemy.engine.Engine - INFO - [no key 0.00056s] ()
2024-12-04 18:30:07,179 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:30:07,239 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:30:07,239 - root - INFO - Инициализация диспетчера...
2024-12-04 18:30:07,240 - root - INFO - Регистрация обработчиков...
2024-12-04 18:30:07,243 - root - INFO - Запуск polling...
2024-12-04 18:30:07,243 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:30:07,257 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:30:07,262 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:30:07,262 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] ()
2024-12-04 18:30:07,708 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:30:11,971 - aiogram.event - INFO - Update id=746486834 is handled. Duration 562 ms by bot id=6588698079
2024-12-04 18:30:13,543 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:30:13,553 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:30:13,554 - sqlalchemy.engine.Engine - INFO - [generated in 0.00204s] ('528155210', 1, 0)
2024-12-04 18:30:13,807 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:30:14,016 - aiogram.event - INFO - Update id=746486835 is handled. Duration 484 ms by bot id=6588698079
2024-12-04 18:30:16,190 - aiogram.event - INFO - Update id=746486836 is handled. Duration 297 ms by bot id=6588698079
2024-12-04 18:30:29,262 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:31:31,292 - root - INFO - Инициализация бота...
2024-12-04 18:31:32,162 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:31:32,162 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:31:32,163 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:31:32,165 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:31:32,165 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:31:32,167 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:31:32,230 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:31:32,230 - root - INFO - Инициализация диспетчера...
2024-12-04 18:31:32,233 - root - INFO - Регистрация обработчиков...
2024-12-04 18:31:32,235 - root - INFO - Запуск polling...
2024-12-04 18:31:32,236 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:31:32,249 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:31:32,254 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:31:32,254 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ()
2024-12-04 18:31:32,595 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:31:33,271 - aiogram.event - INFO - Update id=746486837 is handled. Duration 422 ms by bot id=6588698079
2024-12-04 18:31:34,590 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:31:34,598 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:31:34,598 - sqlalchemy.engine.Engine - INFO - [generated in 0.00130s] ('528155210', 1, 0)
2024-12-04 18:31:34,747 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:31:34,888 - aiogram.event - INFO - Update id=746486838 is handled. Duration 312 ms by bot id=6588698079
2024-12-04 18:31:36,391 - aiogram.event - INFO - Update id=746486839 is handled. Duration 266 ms by bot id=6588698079
2024-12-04 18:31:37,540 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:31:37,541 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:31:37,542 - sqlalchemy.engine.Engine - INFO - [cached since 2.945s ago] ('528155210', 1, 0)
2024-12-04 18:31:37,834 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:31:38,118 - aiogram.event - INFO - Update id=746486840 is handled. Duration 577 ms by bot id=6588698079
2024-12-04 18:31:39,170 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:31:39,170 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:31:39,171 - sqlalchemy.engine.Engine - INFO - [cached since 4.574s ago] ('528155210', 1, 0)
2024-12-04 18:31:39,175 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 18:31:39,176 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('528155210', 'active', 0)
2024-12-04 18:31:39,180 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:31:39,189 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:31:39,191 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:31:39,192 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] ('528155210',)
2024-12-04 18:31:39,198 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 18:31:39,198 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] (1, '528155210')
2024-12-04 18:31:39,200 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:31:40,539 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:31:40,544 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 18:31:40,545 - sqlalchemy.engine.Engine - INFO - [generated in 0.00101s] ('76', '528155210', '2024-12-06 18:31:40.537435', '2024-12-04 18:31:40.537435', 0)
2024-12-04 18:31:40,548 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:31:40,555 - root - INFO - Key created: OutlineKey(key_id='76', name='VPN Key63', password='YsCJ3rdhBwaQLsllwpqkOJ', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpZc0NKM3JkaEJ3YVFMc2xsd3Bxa09K@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 6588698079
2024-12-04 18:31:40,801 - aiogram.event - INFO - Update id=746486841 is handled. Duration 1640 ms by bot id=6588698079
2024-12-04 18:31:45,822 - aiogram.event - INFO - Update id=746486842 is handled. Duration 313 ms by bot id=6588698079
2024-12-04 18:31:47,099 - aiogram.event - INFO - Update id=746486843 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 18:31:48,513 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:31:48,513 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:31:48,514 - sqlalchemy.engine.Engine - INFO - [cached since 13.92s ago] ('528155210', 1, 0)
2024-12-04 18:31:48,519 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:31:48,520 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ('528155210',)
2024-12-04 18:31:50,537 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:31:50,664 - aiogram.event - INFO - Update id=746486844 is handled. Duration 2140 ms by bot id=6588698079
2024-12-04 18:31:54,404 - aiogram.event - INFO - Update id=746486845 is handled. Duration 187 ms by bot id=6588698079
2024-12-04 18:31:57,839 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:31:58,101 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:31:58,109 - root - INFO - Бот остановлен вручную.
2024-12-04 18:32:10,037 - root - INFO - Инициализация бота...
2024-12-04 18:32:10,674 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:32:10,674 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:32:10,675 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:32:10,676 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 18:32:10,676 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:32:10,676 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:32:10,677 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:32:10,677 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 18:32:10,678 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:32:10,679 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 18:32:10,680 - sqlalchemy.engine.Engine - INFO - [no key 0.00046s] ()
2024-12-04 18:32:10,692 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 18:32:10,693 - sqlalchemy.engine.Engine - INFO - [no key 0.00046s] ()
2024-12-04 18:32:10,703 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:32:10,750 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:32:10,750 - root - INFO - Инициализация диспетчера...
2024-12-04 18:32:10,751 - root - INFO - Регистрация обработчиков...
2024-12-04 18:32:10,753 - root - INFO - Запуск polling...
2024-12-04 18:32:10,754 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:32:10,765 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:32:10,769 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:32:10,769 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ()
2024-12-04 18:32:11,157 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:32:21,881 - aiogram.event - INFO - Update id=746486846 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 18:32:23,222 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:32:23,225 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:32:23,225 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('528155210', 1, 0)
2024-12-04 18:32:23,351 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:32:23,439 - aiogram.event - INFO - Update id=746486847 is handled. Duration 219 ms by bot id=6588698079
2024-12-04 18:32:27,722 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:32:27,723 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:32:27,723 - sqlalchemy.engine.Engine - INFO - [cached since 4.499s ago] ('528155210', 1, 0)
2024-12-04 18:32:27,731 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 18:32:27,731 - sqlalchemy.engine.Engine - INFO - [generated in 0.00091s] ('528155210', 'active', 0)
2024-12-04 18:32:27,735 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:32:27,744 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:32:27,748 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:32:27,748 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] ('528155210',)
2024-12-04 18:32:27,753 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 18:32:27,753 - sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] (1, '528155210')
2024-12-04 18:32:27,756 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:32:29,031 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:32:29,036 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 18:32:29,037 - sqlalchemy.engine.Engine - INFO - [generated in 0.00134s] ('77', '528155210', '2024-12-06 18:32:29.029773', '2024-12-04 18:32:29.029773', 0)
2024-12-04 18:32:29,042 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:32:29,051 - root - INFO - Key created: OutlineKey(key_id='77', name='VPN Key64', password='Cy5t3jmRyhFyDmgGDIAM98', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpDeTV0M2ptUnloRnlEbWdHRElBTTk4@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 6588698079
2024-12-04 18:32:29,229 - aiogram.event - INFO - Update id=746486848 is handled. Duration 1515 ms by bot id=6588698079
2024-12-04 18:32:35,435 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:32:35,702 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:32:35,709 - root - INFO - Бот остановлен вручную.
2024-12-04 18:32:58,055 - root - INFO - Инициализация бота...
2024-12-04 18:32:58,886 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:32:58,886 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:32:58,887 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:32:58,888 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:32:58,889 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:32:58,890 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:32:58,943 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:32:58,944 - root - INFO - Инициализация диспетчера...
2024-12-04 18:32:58,945 - root - INFO - Регистрация обработчиков...
2024-12-04 18:32:58,947 - root - INFO - Запуск polling...
2024-12-04 18:32:58,948 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:32:58,960 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:32:58,963 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:32:58,963 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ()
2024-12-04 18:32:58,969 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:32:58,970 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('528155210',)
2024-12-04 18:32:58,971 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:32:58,972 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:32:58,974 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:32:58,974 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ('528155210',)
2024-12-04 18:32:59,274 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:33:29,339 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:33:29,597 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:33:29,604 - root - INFO - Бот остановлен вручную.
2024-12-04 18:33:38,790 - root - INFO - Инициализация бота...
2024-12-04 18:33:40,052 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:33:40,053 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:33:40,054 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:33:40,056 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:33:40,056 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:33:40,058 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:33:40,151 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:33:40,151 - root - INFO - Инициализация диспетчера...
2024-12-04 18:33:40,155 - root - INFO - Регистрация обработчиков...
2024-12-04 18:33:40,160 - root - INFO - Запуск polling...
2024-12-04 18:33:40,162 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:33:40,188 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:33:40,197 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:33:40,198 - sqlalchemy.engine.Engine - INFO - [generated in 0.00124s] ()
2024-12-04 18:33:40,213 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:33:40,214 - sqlalchemy.engine.Engine - INFO - [generated in 0.00181s] ('528155210',)
2024-12-04 18:33:40,217 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:33:40,220 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:33:40,223 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:33:40,224 - sqlalchemy.engine.Engine - INFO - [generated in 0.00103s] ('528155210',)
2024-12-04 18:33:40,519 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:33:42,111 - aiogram.event - INFO - Update id=746486849 is handled. Duration 202 ms by bot id=6588698079
2024-12-04 18:33:43,500 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:33:43,507 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:33:43,508 - sqlalchemy.engine.Engine - INFO - [generated in 0.00154s] ('528155210', 1, 0)
2024-12-04 18:33:43,515 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:33:43,515 - sqlalchemy.engine.Engine - INFO - [cached since 3.304s ago] ('528155210',)
2024-12-04 18:33:44,869 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:33:44,980 - aiogram.event - INFO - Update id=746486850 is handled. Duration 1500 ms by bot id=6588698079
2024-12-04 18:33:49,374 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:34:05,360 - root - INFO - Инициализация бота...
2024-12-04 18:34:06,786 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:34:06,787 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:34:06,787 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:34:06,789 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 18:34:06,790 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:34:06,790 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:34:06,791 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:34:06,792 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 18:34:06,792 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:34:06,793 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 18:34:06,794 - sqlalchemy.engine.Engine - INFO - [no key 0.00051s] ()
2024-12-04 18:34:06,807 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 18:34:06,808 - sqlalchemy.engine.Engine - INFO - [no key 0.00054s] ()
2024-12-04 18:34:06,817 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:34:06,876 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:34:06,877 - root - INFO - Инициализация диспетчера...
2024-12-04 18:34:06,878 - root - INFO - Регистрация обработчиков...
2024-12-04 18:34:06,881 - root - INFO - Запуск polling...
2024-12-04 18:34:06,882 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:34:06,895 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:34:06,900 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:34:06,901 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ()
2024-12-04 18:34:07,170 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:34:07,690 - aiogram.event - INFO - Update id=746486851 is handled. Duration 328 ms by bot id=6588698079
2024-12-04 18:34:10,151 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:34:10,156 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:34:10,157 - sqlalchemy.engine.Engine - INFO - [generated in 0.00114s] ('528155210', 1, 0)
2024-12-04 18:34:10,299 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:34:10,416 - aiogram.event - INFO - Update id=746486852 is handled. Duration 265 ms by bot id=6588698079
2024-12-04 18:34:13,948 - aiogram.event - INFO - Update id=746486853 is handled. Duration 188 ms by bot id=6588698079
2024-12-04 18:34:15,260 - aiogram.event - INFO - Update id=746486854 is handled. Duration 234 ms by bot id=6588698079
2024-12-04 18:34:18,514 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:34:18,515 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:34:18,515 - sqlalchemy.engine.Engine - INFO - [cached since 8.36s ago] ('528155210', 1, 0)
2024-12-04 18:34:18,613 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:34:18,695 - aiogram.event - INFO - Update id=746486855 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 18:34:19,739 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:34:19,739 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:34:19,740 - sqlalchemy.engine.Engine - INFO - [cached since 9.584s ago] ('528155210', 1, 0)
2024-12-04 18:34:19,744 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 18:34:19,744 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('528155210', 'active', 0)
2024-12-04 18:34:19,747 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:34:19,754 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:34:19,757 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:34:19,758 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] ('528155210',)
2024-12-04 18:34:19,761 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 18:34:19,762 - sqlalchemy.engine.Engine - INFO - [generated in 0.00080s] (1, '528155210')
2024-12-04 18:34:19,765 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:34:20,974 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:34:20,977 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 18:34:20,977 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('78', '528155210', '2024-12-06 18:34:20.974002', '2024-12-04 18:34:20.974002', 0)
2024-12-04 18:34:20,981 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:34:20,986 - root - INFO - Key created: OutlineKey(key_id='78', name='VPN Key65', password='mzJ2f8skqm16wuNW6Enp2B', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTptekoyZjhza3FtMTZ3dU5XNkVucDJC@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 6588698079
2024-12-04 18:34:21,182 - aiogram.event - INFO - Update id=746486856 is handled. Duration 1437 ms by bot id=6588698079
2024-12-04 18:34:22,843 - aiogram.event - INFO - Update id=746486857 is handled. Duration 172 ms by bot id=6588698079
2024-12-04 18:34:31,838 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:34:32,100 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:34:32,105 - root - INFO - Бот остановлен вручную.
2024-12-04 18:36:26,560 - root - INFO - Инициализация бота...
2024-12-04 18:36:27,888 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:27,889 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:36:27,890 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:36:27,895 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:36:27,896 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:36:27,899 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:36:28,047 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:36:28,048 - root - INFO - Инициализация диспетчера...
2024-12-04 18:36:28,055 - root - INFO - Регистрация обработчиков...
2024-12-04 18:36:28,060 - root - INFO - Запуск polling...
2024-12-04 18:36:28,062 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:36:28,089 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:28,098 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:36:28,099 - sqlalchemy.engine.Engine - INFO - [generated in 0.00131s] ()
2024-12-04 18:36:28,120 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:36:28,122 - sqlalchemy.engine.Engine - INFO - [generated in 0.00189s] ('528155210',)
2024-12-04 18:36:28,126 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:36:28,129 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:28,134 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:36:28,136 - sqlalchemy.engine.Engine - INFO - [generated in 0.00161s] ('528155210',)
2024-12-04 18:36:28,661 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:36:28,987 - aiogram.event - INFO - Update id=746486858 is handled. Duration 155 ms by bot id=6588698079
2024-12-04 18:36:31,422 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:36:31,682 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:36:31,690 - root - INFO - Бот остановлен вручную.
2024-12-04 18:36:42,601 - root - INFO - Инициализация бота...
2024-12-04 18:36:43,195 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:43,195 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:36:43,196 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:36:43,197 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 18:36:43,197 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:36:43,198 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:36:43,198 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:36:43,198 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 18:36:43,198 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:36:43,200 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 18:36:43,200 - sqlalchemy.engine.Engine - INFO - [no key 0.00027s] ()
2024-12-04 18:36:43,211 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 18:36:43,211 - sqlalchemy.engine.Engine - INFO - [no key 0.00032s] ()
2024-12-04 18:36:43,219 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:36:43,266 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:36:43,266 - root - INFO - Инициализация диспетчера...
2024-12-04 18:36:43,267 - root - INFO - Регистрация обработчиков...
2024-12-04 18:36:43,269 - root - INFO - Запуск polling...
2024-12-04 18:36:43,270 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:36:43,283 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:43,287 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:36:43,287 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ()
2024-12-04 18:36:43,587 - aiogram.dispatcher - INFO - Run polling for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:36:44,431 - aiogram.event - INFO - Update id=746486859 is handled. Duration 687 ms by bot id=6588698079
2024-12-04 18:36:47,085 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:47,092 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:36:47,093 - sqlalchemy.engine.Engine - INFO - [generated in 0.00134s] ('528155210', 1, 0)
2024-12-04 18:36:47,696 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:36:47,856 - aiogram.event - INFO - Update id=746486860 is handled. Duration 780 ms by bot id=6588698079
2024-12-04 18:36:50,490 - aiogram.event - INFO - Update id=746486861 is handled. Duration 375 ms by bot id=6588698079
2024-12-04 18:36:51,470 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:51,472 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:36:51,472 - sqlalchemy.engine.Engine - INFO - [cached since 4.38s ago] ('528155210', 1, 0)
2024-12-04 18:36:51,652 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:36:51,802 - aiogram.event - INFO - Update id=746486862 is handled. Duration 327 ms by bot id=6588698079
2024-12-04 18:36:53,049 - aiogram.event - INFO - Update id=746486863 is handled. Duration 405 ms by bot id=6588698079
2024-12-04 18:36:54,356 - aiogram.event - INFO - Update id=746486864 is handled. Duration 390 ms by bot id=6588698079
2024-12-04 18:36:55,496 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:55,499 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:36:55,500 - sqlalchemy.engine.Engine - INFO - [cached since 8.408s ago] ('528155210', 1, 0)
2024-12-04 18:36:55,801 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:36:56,124 - aiogram.event - INFO - Update id=746486865 is handled. Duration 640 ms by bot id=6588698079
2024-12-04 18:36:56,965 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:56,968 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:36:56,969 - sqlalchemy.engine.Engine - INFO - [cached since 9.877s ago] ('528155210', 1, 0)
2024-12-04 18:36:56,980 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 18:36:56,981 - sqlalchemy.engine.Engine - INFO - [generated in 0.00133s] ('528155210', 'active', 0)
2024-12-04 18:36:56,988 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:36:57,001 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:57,006 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
2024-12-04 18:36:57,007 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] ('528155210',)
2024-12-04 18:36:57,015 - sqlalchemy.engine.Engine - INFO - UPDATE users SET use_trial_period=? WHERE users.user_telegram_id = ?
2024-12-04 18:36:57,016 - sqlalchemy.engine.Engine - INFO - [generated in 0.00141s] (1, '528155210')
2024-12-04 18:36:57,021 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:36:58,354 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:36:58,357 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 18:36:58,358 - sqlalchemy.engine.Engine - INFO - [generated in 0.00112s] ('79', '528155210', '2024-12-06 18:36:58.352653', '2024-12-04 18:36:58.352653', 0)
2024-12-04 18:36:58,364 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:36:58,372 - root - INFO - Key created: OutlineKey(key_id='79', name='VPN Key66', password='lohIMg8WzBGrjWxyO8NyPE', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpsb2hJTWc4V3pCR3JqV3h5TzhOeVBF@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 6588698079
2024-12-04 18:36:58,597 - aiogram.event - INFO - Update id=746486866 is handled. Duration 1640 ms by bot id=6588698079
2024-12-04 18:37:00,393 - aiogram.event - INFO - Update id=746486867 is handled. Duration 422 ms by bot id=6588698079
2024-12-04 18:37:01,659 - aiogram.event - INFO - Update id=746486868 is handled. Duration 484 ms by bot id=6588698079
2024-12-04 18:37:02,645 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:37:02,646 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:37:02,647 - sqlalchemy.engine.Engine - INFO - [cached since 15.55s ago] ('528155210', 1, 0)
2024-12-04 18:37:02,652 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE ? = keys.user_telegram_id
2024-12-04 18:37:02,652 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] ('528155210',)
2024-12-04 18:37:03,661 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:37:03,738 - aiogram.event - INFO - Update id=746486869 is handled. Duration 1093 ms by bot id=6588698079
2024-12-04 18:37:06,783 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:37:06,788 - sqlalchemy.engine.Engine - INFO - SELECT keys.key_id AS keys_key_id, keys.user_telegram_id AS keys_user_telegram_id, keys.expiration_date AS keys_expiration_date, keys.start_date AS keys_start_date, keys.remembering_before_exp AS keys_remembering_before_exp 
FROM keys 
WHERE keys.key_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:37:06,788 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] ('79', 1, 0)
2024-12-04 18:37:07,053 - aiogram.event - INFO - Update id=746486870 is handled. Duration 1937 ms by bot id=6588698079
2024-12-04 18:37:08,820 - aiogram.event - INFO - Update id=746486871 is handled. Duration 453 ms by bot id=6588698079
2024-12-04 18:37:11,071 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:37:11,338 - aiogram.dispatcher - INFO - Polling stopped for bot @sample_stepik_bot id=6588698079 - 'sample_stepik_bot'
2024-12-04 18:37:11,340 - root - INFO - Бот остановлен вручную.
2024-12-04 18:37:45,858 - root - INFO - Инициализация бота...
2024-12-04 18:37:46,641 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:37:46,642 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2024-12-04 18:37:46,642 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:37:46,644 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2024-12-04 18:37:46,644 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:37:46,645 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("keys")
2024-12-04 18:37:46,645 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:37:46,646 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("keys")
2024-12-04 18:37:46,647 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2024-12-04 18:37:46,648 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	user_telegram_id VARCHAR NOT NULL, 
	subscription_status VARCHAR, 
	use_trial_period BOOLEAN, 
	PRIMARY KEY (user_telegram_id)
)


2024-12-04 18:37:46,649 - sqlalchemy.engine.Engine - INFO - [no key 0.00044s] ()
2024-12-04 18:37:46,674 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE keys (
	key_id VARCHAR NOT NULL, 
	user_telegram_id VARCHAR, 
	expiration_date DATETIME, 
	start_date DATETIME, 
	remembering_before_exp BOOLEAN, 
	PRIMARY KEY (key_id), 
	FOREIGN KEY(user_telegram_id) REFERENCES users (user_telegram_id)
)


2024-12-04 18:37:46,674 - sqlalchemy.engine.Engine - INFO - [no key 0.00045s] ()
2024-12-04 18:37:46,686 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:37:46,748 - root - INFO - Инициализация хранилища состояний (MemoryStorage)...
2024-12-04 18:37:46,748 - root - INFO - Инициализация диспетчера...
2024-12-04 18:37:46,750 - root - INFO - Регистрация обработчиков...
2024-12-04 18:37:46,752 - root - INFO - Запуск polling...
2024-12-04 18:37:46,753 - aiogram.dispatcher - INFO - Start polling
2024-12-04 18:37:46,765 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:37:46,770 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users
2024-12-04 18:37:46,770 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ()
2024-12-04 18:37:47,102 - aiogram.dispatcher - INFO - Run polling for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 18:37:47,643 - aiogram.event - INFO - Update id=659306427 is handled. Duration 359 ms by bot id=7444575424
2024-12-04 18:37:50,251 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:37:50,257 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:37:50,258 - sqlalchemy.engine.Engine - INFO - [generated in 0.00116s] ('528155210', 1, 0)
2024-12-04 18:37:50,387 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:37:50,480 - aiogram.event - INFO - Update id=659306428 is handled. Duration 234 ms by bot id=7444575424
2024-12-04 18:37:52,116 - aiogram.event - INFO - Update id=659306429 is handled. Duration 218 ms by bot id=7444575424
2024-12-04 18:37:54,368 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:37:54,371 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:37:54,371 - sqlalchemy.engine.Engine - INFO - [cached since 4.114s ago] ('528155210', 1, 0)
2024-12-04 18:37:54,562 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2024-12-04 18:37:54,692 - aiogram.event - INFO - Update id=659306430 is handled. Duration 328 ms by bot id=7444575424
2024-12-04 18:37:56,002 - aiogram.event - INFO - Update id=659306431 is handled. Duration 280 ms by bot id=7444575424
2024-12-04 18:37:57,261 - aiogram.event - INFO - Update id=659306432 is handled. Duration 297 ms by bot id=7444575424
2024-12-04 18:37:58,813 - aiogram.event - INFO - Update id=659306433 is handled. Duration 328 ms by bot id=7444575424
2024-12-04 18:38:13,582 - aiogram.event - INFO - Update id=659306434 is handled. Duration 157 ms by bot id=7444575424
2024-12-04 18:38:22,657 - root - INFO - {
    "message_id": 2271,
    "date": 1733326703,
    "chat": {
        "id": 528155210,
        "type": "private",
        "title": null,
        "username": "dastroo",
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "is_forum": null,
        "accent_color_id": null,
        "active_usernames": null,
        "available_reactions": null,
        "background_custom_emoji_id": null,
        "bio": null,
        "birthdate": null,
        "business_intro": null,
        "business_location": null,
        "business_opening_hours": null,
        "can_set_sticker_set": null,
        "custom_emoji_sticker_set_name": null,
        "description": null,
        "emoji_status_custom_emoji_id": null,
        "emoji_status_expiration_date": null,
        "has_aggressive_anti_spam_enabled": null,
        "has_hidden_members": null,
        "has_private_forwards": null,
        "has_protected_content": null,
        "has_restricted_voice_and_video_messages": null,
        "has_visible_history": null,
        "invite_link": null,
        "join_by_request": null,
        "join_to_send_messages": null,
        "linked_chat_id": null,
        "location": null,
        "message_auto_delete_time": null,
        "permissions": null,
        "personal_chat": null,
        "photo": null,
        "pinned_message": null,
        "profile_accent_color_id": null,
        "profile_background_custom_emoji_id": null,
        "slow_mode_delay": null,
        "sticker_set_name": null,
        "unrestrict_boost_count": null
    },
    "message_thread_id": null,
    "from_user": {
        "id": 528155210,
        "is_bot": false,
        "first_name": "Daniel Kostin\ud83d\udce1",
        "last_name": null,
        "username": "dastroo",
        "language_code": "ru",
        "is_premium": null,
        "added_to_attachment_menu": null,
        "can_join_groups": null,
        "can_read_all_group_messages": null,
        "supports_inline_queries": null,
        "can_connect_to_business": null,
        "has_main_web_app": null
    },
    "sender_chat": null,
    "sender_boost_count": null,
    "sender_business_bot": null,
    "business_connection_id": null,
    "forward_origin": null,
    "is_topic_message": null,
    "is_automatic_forward": null,
    "reply_to_message": null,
    "external_reply": null,
    "quote": null,
    "reply_to_story": null,
    "via_bot": null,
    "edit_date": null,
    "has_protected_content": null,
    "is_from_offline": null,
    "media_group_id": null,
    "author_signature": null,
    "text": null,
    "entities": null,
    "link_preview_options": null,
    "effect_id": null,
    "animation": null,
    "audio": null,
    "document": null,
    "paid_media": null,
    "photo": null,
    "sticker": null,
    "story": null,
    "video": null,
    "video_note": null,
    "voice": null,
    "caption": null,
    "caption_entities": null,
    "show_caption_above_media": null,
    "has_media_spoiler": null,
    "contact": null,
    "dice": null,
    "game": null,
    "poll": null,
    "venue": null,
    "location": null,
    "new_chat_members": null,
    "left_chat_member": null,
    "new_chat_title": null,
    "new_chat_photo": null,
    "delete_chat_photo": null,
    "group_chat_created": null,
    "supergroup_chat_created": null,
    "channel_chat_created": null,
    "message_auto_delete_timer_changed": null,
    "migrate_to_chat_id": null,
    "migrate_from_chat_id": null,
    "pinned_message": null,
    "invoice": null,
    "successful_payment": {
        "currency": "RUB",
        "total_amount": 120000,
        "invoice_payload": "135c8169-443d-4da0-84f7-b5fb7768d3c2",
        "telegram_payment_charge_id": "7444575424_528155210_328846",
        "provider_payment_charge_id": "7444575424_528155210_328846",
        "subscription_expiration_date": null,
        "is_recurring": null,
        "is_first_recurring": null,
        "shipping_option_id": null,
        "order_info": null
    },
    "refunded_payment": null,
    "users_shared": null,
    "chat_shared": null,
    "connected_website": null,
    "write_access_allowed": null,
    "passport_data": null,
    "proximity_alert_triggered": null,
    "boost_added": null,
    "chat_background_set": null,
    "forum_topic_created": null,
    "forum_topic_edited": null,
    "forum_topic_closed": null,
    "forum_topic_reopened": null,
    "general_forum_topic_hidden": null,
    "general_forum_topic_unhidden": null,
    "giveaway_created": null,
    "giveaway": null,
    "giveaway_winners": null,
    "giveaway_completed": null,
    "video_chat_scheduled": null,
    "video_chat_started": null,
    "video_chat_ended": null,
    "video_chat_participants_invited": null,
    "web_app_data": null,
    "reply_markup": null,
    "forward_date": null,
    "forward_from": null,
    "forward_from_chat": null,
    "forward_from_message_id": null,
    "forward_sender_name": null,
    "forward_signature": null,
    "user_shared": null
}
2024-12-04 18:38:23,938 - root - INFO - Key created: OutlineKey(key_id='80', name='VPN Key67', password='umDfztQgFQSxUN8EVlYdeh', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTp1bURmenRRZ0ZRU3hVTjhFVmxZZGVo@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 18:38:23,938 - root - INFO - Key created: OutlineKey(key_id='80', name='VPN Key67', password='umDfztQgFQSxUN8EVlYdeh', port=20669, method='chacha20-ietf-poly1305', access_url='ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTp1bURmenRRZ0ZRU3hVTjhFVmxZZGVo@5.35.38.7:20669/?outline=1', used_bytes=0, data_limit=1073741824) for user 528155210
2024-12-04 18:38:24,141 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:38:24,143 - sqlalchemy.engine.Engine - INFO - SELECT users.user_telegram_id AS users_user_telegram_id, users.subscription_status AS users_subscription_status, users.use_trial_period AS users_use_trial_period 
FROM users 
WHERE users.user_telegram_id = ?
 LIMIT ? OFFSET ?
2024-12-04 18:38:24,145 - sqlalchemy.engine.Engine - INFO - [cached since 33.89s ago] ('528155210', 1, 0)
2024-12-04 18:38:24,154 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (user_telegram_id, subscription_status, use_trial_period) VALUES (?, ?, ?)
2024-12-04 18:38:24,155 - sqlalchemy.engine.Engine - INFO - [generated in 0.00167s] ('528155210', 'active', 0)
2024-12-04 18:38:24,164 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:38:24,181 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2024-12-04 18:38:24,190 - sqlalchemy.engine.Engine - INFO - INSERT INTO keys (key_id, user_telegram_id, expiration_date, start_date, remembering_before_exp) VALUES (?, ?, ?, ?, ?)
2024-12-04 18:38:24,191 - sqlalchemy.engine.Engine - INFO - [generated in 0.00141s] ('80', '528155210', '2025-11-29 18:38:24.177888', '2024-12-04 18:38:24.177888', 0)
2024-12-04 18:38:24,197 - sqlalchemy.engine.Engine - INFO - COMMIT
2024-12-04 18:38:24,207 - aiogram.event - INFO - Update id=659306435 is handled. Duration 1547 ms by bot id=7444575424
2024-12-04 18:38:26,730 - aiogram.event - INFO - Update id=659306436 is handled. Duration 265 ms by bot id=7444575424
2024-12-04 18:38:27,762 - aiogram.event - INFO - Update id=659306437 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 18:38:29,568 - aiogram.event - INFO - Update id=659306438 is handled. Duration 172 ms by bot id=7444575424
2024-12-04 18:38:32,820 - aiogram.dispatcher - INFO - Polling stopped
2024-12-04 18:38:33,099 - aiogram.dispatcher - INFO - Polling stopped for bot @safe_net_vpnbot id=7444575424 - 'safe_net_vpn'
2024-12-04 18:38:33,105 - root - INFO - Бот остановлен вручную.
